{
  "address": "0x21DDeBeC1536E376c6d408401728152842080426",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_router",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_composableCoW",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_settlement",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_hooksTrampoline",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "target",
          "type": "address"
        }
      ],
      "name": "AddressEmptyCode",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "AddressInsufficientBalance",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "CannotCancelMidExecution",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "FailedInnerCall",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "expected",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "actual",
          "type": "address"
        }
      ],
      "name": "InstructionUserMismatch",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidChunkWindow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidOrderState",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidTokens",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidTrigger",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "MaxOrdersExceeded",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NoTokensReceived",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NotHooksTrampoline",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "OrderAlreadyExists",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "OrderNotFound",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "OwnableInvalidOwner",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "OwnableUnauthorizedAccount",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "PreHookAlreadyExecuted",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "PreHookNotExecuted",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuardReentrantCall",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        }
      ],
      "name": "SafeERC20FailedOperation",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SaltAlreadyUsed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TriggerNotMet",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "Unauthorized",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ValidToOverflow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroAddress",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "oldWindow",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newWindow",
          "type": "uint256"
        }
      ],
      "name": "ChunkWindowUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "ConditionalOrderCancelled",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "iterations",
          "type": "uint256"
        }
      ],
      "name": "ConditionalOrderCompleted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "trigger",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "sellToken",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "buyToken",
          "type": "address"
        }
      ],
      "name": "ConditionalOrderCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "oldHandler",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newHandler",
          "type": "address"
        }
      ],
      "name": "OrderHandlerUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "iteration",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "receivedAmount",
          "type": "uint256"
        }
      ],
      "name": "PostHookExecuted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "iteration",
          "type": "uint256"
        }
      ],
      "name": "PreHookExecuted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "StuckOrderReset",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "TokensRecovered",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "iteration",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "sellAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "buyAmount",
          "type": "uint256"
        }
      ],
      "name": "TriggerExecuted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "vaultRelayer",
          "type": "address"
        }
      ],
      "name": "VaultRelayerApproved",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "DEFAULT_CHUNK_WINDOW",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MAX_CHUNK_WINDOW",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MAX_ORDERS_PER_USER",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MIN_CHUNK_WINDOW",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        }
      ],
      "name": "approveVaultRelayer",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "cancelOrder",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "chunkWindow",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "composableCoW",
      "outputs": [
        {
          "internalType": "contract IComposableCoW",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "user",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "trigger",
              "type": "address"
            },
            {
              "internalType": "bytes",
              "name": "triggerStaticData",
              "type": "bytes"
            },
            {
              "internalType": "bytes",
              "name": "preInstructions",
              "type": "bytes"
            },
            {
              "internalType": "address",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "bytes",
              "name": "postInstructions",
              "type": "bytes"
            },
            {
              "internalType": "bytes32",
              "name": "appDataHash",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "maxIterations",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "sellTokenRefundAddress",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isKindBuy",
              "type": "bool"
            }
          ],
          "internalType": "struct KapanConditionalOrderManager.KapanOrderParams",
          "name": "params",
          "type": "tuple"
        },
        {
          "internalType": "bytes32",
          "name": "salt",
          "type": "bytes32"
        }
      ],
      "name": "createOrder",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "executePostHook",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "salt",
          "type": "bytes32"
        }
      ],
      "name": "executePostHookBySalt",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "executePreHook",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "salt",
          "type": "bytes32"
        }
      ],
      "name": "executePreHookBySalt",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "getExecutionAmounts",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "sellAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "minBuyAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "getOrder",
      "outputs": [
        {
          "components": [
            {
              "components": [
                {
                  "internalType": "address",
                  "name": "user",
                  "type": "address"
                },
                {
                  "internalType": "address",
                  "name": "trigger",
                  "type": "address"
                },
                {
                  "internalType": "bytes",
                  "name": "triggerStaticData",
                  "type": "bytes"
                },
                {
                  "internalType": "bytes",
                  "name": "preInstructions",
                  "type": "bytes"
                },
                {
                  "internalType": "address",
                  "name": "sellToken",
                  "type": "address"
                },
                {
                  "internalType": "address",
                  "name": "buyToken",
                  "type": "address"
                },
                {
                  "internalType": "bytes",
                  "name": "postInstructions",
                  "type": "bytes"
                },
                {
                  "internalType": "bytes32",
                  "name": "appDataHash",
                  "type": "bytes32"
                },
                {
                  "internalType": "uint256",
                  "name": "maxIterations",
                  "type": "uint256"
                },
                {
                  "internalType": "address",
                  "name": "sellTokenRefundAddress",
                  "type": "address"
                },
                {
                  "internalType": "bool",
                  "name": "isKindBuy",
                  "type": "bool"
                }
              ],
              "internalType": "struct KapanConditionalOrderManager.KapanOrderParams",
              "name": "params",
              "type": "tuple"
            },
            {
              "internalType": "enum KapanConditionalOrderManager.OrderStatus",
              "name": "status",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "iterationCount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "createdAt",
              "type": "uint256"
            }
          ],
          "internalType": "struct KapanConditionalOrderManager.OrderContext",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "user",
          "type": "address"
        }
      ],
      "name": "getUserOrders",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "hooksTrampoline",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "isTriggerMet",
      "outputs": [
        {
          "internalType": "bool",
          "name": "shouldExecute",
          "type": "bool"
        },
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_hash",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "_signature",
          "type": "bytes"
        }
      ],
      "name": "isValidSignature",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "orderHandler",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "orderSalts",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "orders",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "user",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "trigger",
              "type": "address"
            },
            {
              "internalType": "bytes",
              "name": "triggerStaticData",
              "type": "bytes"
            },
            {
              "internalType": "bytes",
              "name": "preInstructions",
              "type": "bytes"
            },
            {
              "internalType": "address",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "bytes",
              "name": "postInstructions",
              "type": "bytes"
            },
            {
              "internalType": "bytes32",
              "name": "appDataHash",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "maxIterations",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "sellTokenRefundAddress",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isKindBuy",
              "type": "bool"
            }
          ],
          "internalType": "struct KapanConditionalOrderManager.KapanOrderParams",
          "name": "params",
          "type": "tuple"
        },
        {
          "internalType": "enum KapanConditionalOrderManager.OrderStatus",
          "name": "status",
          "type": "uint8"
        },
        {
          "internalType": "uint256",
          "name": "iterationCount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "createdAt",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "preHookBuyBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "preHookExecutedForIteration",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "preHookSellBalance",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "token",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "to",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "recoverTokens",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "renounceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "orderHash",
          "type": "bytes32"
        }
      ],
      "name": "resetStuckOrder",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "router",
      "outputs": [
        {
          "internalType": "contract IKapanRouter",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_chunkWindow",
          "type": "uint256"
        }
      ],
      "name": "setChunkWindow",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_orderHandler",
          "type": "address"
        }
      ],
      "name": "setOrderHandler",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "settlement",
      "outputs": [
        {
          "internalType": "contract IGPv2Settlement",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "userOrders",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "userSaltToOrderHash",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xb6f33dc54a7b7d900a76370678d7e961810dfd2ded43673cd20fa1f405e03f3d",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "contractAddress": null,
    "transactionIndex": 5,
    "gasUsed": "3399128",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000800000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000020000000000004000000800000000000000200000000000000000400000000000000000000000010000000000000000000000000000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000040000000000000000000000",
    "blockHash": "0xbaa31750d0a1e206cd2634a39f8bd08fef32f879b97e7bb93d8273741a429b43",
    "transactionHash": "0xb6f33dc54a7b7d900a76370678d7e961810dfd2ded43673cd20fa1f405e03f3d",
    "logs": [
      {
        "transactionIndex": 5,
        "blockNumber": 427616573,
        "transactionHash": "0xb6f33dc54a7b7d900a76370678d7e961810dfd2ded43673cd20fa1f405e03f3d",
        "address": "0x21DDeBeC1536E376c6d408401728152842080426",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x0000000000000000000000000be61223f99e57b8b8b7033a77b54adc7f7cf027"
        ],
        "data": "0x",
        "logIndex": 9,
        "blockHash": "0xbaa31750d0a1e206cd2634a39f8bd08fef32f879b97e7bb93d8273741a429b43"
      }
    ],
    "blockNumber": 427616573,
    "cumulativeGasUsed": "3750454",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "0xadad575d251395Ecd37Ff87a0b8e3d810683493a",
    "0xfdaFc9d1902f4e0b84f65F49f244b32b31013b74",
    "0x9008D19f58AAbD9eD0D60971565AA8510560ab41",
    "0x60Bf78233f48eC42eE3F101b9a05eC7878728006"
  ],
  "numDeployments": 25,
  "solcInputHash": "3c4f81b738133bf1e43dd2ecb35b1029",
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_router\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_composableCoW\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_settlement\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_hooksTrampoline\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"AddressEmptyCode\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"AddressInsufficientBalance\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"CannotCancelMidExecution\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FailedInnerCall\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"expected\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"actual\",\"type\":\"address\"}],\"name\":\"InstructionUserMismatch\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidChunkWindow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidOrderState\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidTokens\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidTrigger\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"MaxOrdersExceeded\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NoTokensReceived\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotHooksTrampoline\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OrderAlreadyExists\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OrderNotFound\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"OwnableInvalidOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"OwnableUnauthorizedAccount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PreHookAlreadyExecuted\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"PreHookNotExecuted\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ReentrancyGuardReentrantCall\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"SafeERC20FailedOperation\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"SaltAlreadyUsed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TriggerNotMet\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ValidToOverflow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"oldWindow\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newWindow\",\"type\":\"uint256\"}],\"name\":\"ChunkWindowUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"ConditionalOrderCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"iterations\",\"type\":\"uint256\"}],\"name\":\"ConditionalOrderCompleted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"trigger\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"sellToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"buyToken\",\"type\":\"address\"}],\"name\":\"ConditionalOrderCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"oldHandler\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newHandler\",\"type\":\"address\"}],\"name\":\"OrderHandlerUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"iteration\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"receivedAmount\",\"type\":\"uint256\"}],\"name\":\"PostHookExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"iteration\",\"type\":\"uint256\"}],\"name\":\"PreHookExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"StuckOrderReset\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"TokensRecovered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"iteration\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"buyAmount\",\"type\":\"uint256\"}],\"name\":\"TriggerExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"vaultRelayer\",\"type\":\"address\"}],\"name\":\"VaultRelayerApproved\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DEFAULT_CHUNK_WINDOW\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_CHUNK_WINDOW\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_ORDERS_PER_USER\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MIN_CHUNK_WINDOW\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"approveVaultRelayer\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"cancelOrder\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"chunkWindow\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"composableCoW\",\"outputs\":[{\"internalType\":\"contract IComposableCoW\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"trigger\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"triggerStaticData\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"preInstructions\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"postInstructions\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"appDataHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"maxIterations\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"sellTokenRefundAddress\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isKindBuy\",\"type\":\"bool\"}],\"internalType\":\"struct KapanConditionalOrderManager.KapanOrderParams\",\"name\":\"params\",\"type\":\"tuple\"},{\"internalType\":\"bytes32\",\"name\":\"salt\",\"type\":\"bytes32\"}],\"name\":\"createOrder\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"executePostHook\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"salt\",\"type\":\"bytes32\"}],\"name\":\"executePostHookBySalt\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"executePreHook\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"salt\",\"type\":\"bytes32\"}],\"name\":\"executePreHookBySalt\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"getExecutionAmounts\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minBuyAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"getOrder\",\"outputs\":[{\"components\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"trigger\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"triggerStaticData\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"preInstructions\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"postInstructions\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"appDataHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"maxIterations\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"sellTokenRefundAddress\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isKindBuy\",\"type\":\"bool\"}],\"internalType\":\"struct KapanConditionalOrderManager.KapanOrderParams\",\"name\":\"params\",\"type\":\"tuple\"},{\"internalType\":\"enum KapanConditionalOrderManager.OrderStatus\",\"name\":\"status\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"iterationCount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"}],\"internalType\":\"struct KapanConditionalOrderManager.OrderContext\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"getUserOrders\",\"outputs\":[{\"internalType\":\"bytes32[]\",\"name\":\"\",\"type\":\"bytes32[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"hooksTrampoline\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"isTriggerMet\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"shouldExecute\",\"type\":\"bool\"},{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_hash\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"_signature\",\"type\":\"bytes\"}],\"name\":\"isValidSignature\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"orderHandler\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"orderSalts\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"orders\",\"outputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"trigger\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"triggerStaticData\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"preInstructions\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"postInstructions\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"appDataHash\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"maxIterations\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"sellTokenRefundAddress\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isKindBuy\",\"type\":\"bool\"}],\"internalType\":\"struct KapanConditionalOrderManager.KapanOrderParams\",\"name\":\"params\",\"type\":\"tuple\"},{\"internalType\":\"enum KapanConditionalOrderManager.OrderStatus\",\"name\":\"status\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"iterationCount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"createdAt\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"preHookBuyBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"preHookExecutedForIteration\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"preHookSellBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"recoverTokens\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"orderHash\",\"type\":\"bytes32\"}],\"name\":\"resetStuckOrder\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"router\",\"outputs\":[{\"internalType\":\"contract IKapanRouter\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_chunkWindow\",\"type\":\"uint256\"}],\"name\":\"setChunkWindow\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_orderHandler\",\"type\":\"address\"}],\"name\":\"setOrderHandler\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"settlement\",\"outputs\":[{\"internalType\":\"contract IGPv2Settlement\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userOrders\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"userSaltToOrderHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Uses separate KapanConditionalOrderHandler for IConditionalOrderGenerator.      This contract is the OWNER in ComposableCoW and handles ERC-1271 signature verification.      It intentionally does NOT implement IERC165 to avoid Safe/fallback handler detection. Key differences from KapanOrderManager: - Orders have pluggable triggers (IOrderTrigger) that determine when and how much to execute - Amounts are calculated dynamically at execution time via trigger.calculateExecution() - Instructions are templates that reference UTXO[0] for dynamic amounts\",\"errors\":{\"AddressEmptyCode(address)\":[{\"details\":\"There's no code at `target` (it is not a contract).\"}],\"AddressInsufficientBalance(address)\":[{\"details\":\"The ETH balance of the account is not enough to perform the operation.\"}],\"FailedInnerCall()\":[{\"details\":\"A call to an address target failed. The target may have reverted.\"}],\"OwnableInvalidOwner(address)\":[{\"details\":\"The owner is not a valid owner account. (eg. `address(0)`)\"}],\"OwnableUnauthorizedAccount(address)\":[{\"details\":\"The caller account is not authorized to perform an operation.\"}],\"ReentrancyGuardReentrantCall()\":[{\"details\":\"Unauthorized reentrant call.\"}],\"SafeERC20FailedOperation(address)\":[{\"details\":\"An operation with an ERC20 token failed.\"}]},\"kind\":\"dev\",\"methods\":{\"approveVaultRelayer(address)\":{\"params\":{\"token\":\"Token to approve\"}},\"createOrder((address,address,bytes,bytes,address,address,bytes,bytes32,uint256,address,bool),bytes32)\":{\"params\":{\"params\":\"The order parameters\",\"salt\":\"Unique salt for the order\"},\"returns\":{\"orderHash\":\"The hash identifying this order\"}},\"executePostHook(bytes32)\":{\"params\":{\"orderHash\":\"The order hash\"}},\"executePostHookBySalt(address,bytes32)\":{\"params\":{\"salt\":\"The order salt\",\"user\":\"The user address\"}},\"executePreHook(bytes32)\":{\"params\":{\"orderHash\":\"The order hash\"}},\"executePreHookBySalt(address,bytes32)\":{\"params\":{\"salt\":\"The order salt\",\"user\":\"The user address\"}},\"isValidSignature(bytes32,bytes)\":{\"params\":{\"_hash\":\"The hash of the data signed\",\"_signature\":\"The signature bytes\"},\"returns\":{\"_0\":\"bytes4(0x1626ba7e) if valid, any other value if invalid\"}},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"recoverTokens(address,address,uint256)\":{\"params\":{\"amount\":\"Amount to recover\",\"to\":\"Recipient address\",\"token\":\"Token address to recover\"}},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"resetStuckOrder(bytes32)\":{\"details\":\"Only use when an order is permanently stuck due to failed settlement\",\"params\":{\"orderHash\":\"The order hash to reset\"}},\"setChunkWindow(uint256)\":{\"params\":{\"_chunkWindow\":\"New chunk window in seconds\"}},\"setOrderHandler(address)\":{\"params\":{\"_orderHandler\":\"New order handler address\"}},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"}},\"stateVariables\":{\"DEFAULT_CHUNK_WINDOW\":{\"details\":\"Must be > 60 seconds due to CoW Protocol's min_order_validity_period (default 1 minute) Increased to 30 minutes to allow sufficient time for solver competition and fills\"},\"MIN_CHUNK_WINDOW\":{\"details\":\"Must be > 60 seconds due to CoW Protocol's min_order_validity_period\"},\"chunkWindow\":{\"details\":\"Configurable to tune order validity based on watchtower polling and token characteristics\"}},\"title\":\"KapanConditionalOrderManager\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"DEFAULT_CHUNK_WINDOW()\":{\"notice\":\"Default chunk window duration (30 minutes)\"},\"MAX_CHUNK_WINDOW()\":{\"notice\":\"Maximum allowed chunk window (1 hour)\"},\"MAX_ORDERS_PER_USER()\":{\"notice\":\"Maximum orders per user to prevent storage DOS\"},\"MIN_CHUNK_WINDOW()\":{\"notice\":\"Minimum allowed chunk window (65 seconds)\"},\"approveVaultRelayer(address)\":{\"notice\":\"Approve vault relayer to spend tokens\"},\"cancelOrder(bytes32)\":{\"notice\":\"Cancel an active conditional order\"},\"chunkWindow()\":{\"notice\":\"Chunk window duration for deterministic validTo\"},\"composableCoW()\":{\"notice\":\"The ComposableCoW contract for order registration (immutable)\"},\"createOrder((address,address,bytes,bytes,address,address,bytes,bytes32,uint256,address,bool),bytes32)\":{\"notice\":\"Create a new conditional order\"},\"executePostHook(bytes32)\":{\"notice\":\"Execute post-hook (called by HooksTrampoline)\"},\"executePostHookBySalt(address,bytes32)\":{\"notice\":\"Execute post-hook using (user, salt) lookup\"},\"executePreHook(bytes32)\":{\"notice\":\"Execute pre-hook (called by HooksTrampoline)\"},\"executePreHookBySalt(address,bytes32)\":{\"notice\":\"Execute pre-hook using (user, salt) lookup\"},\"getExecutionAmounts(bytes32)\":{\"notice\":\"Get current execution amounts from trigger\"},\"hooksTrampoline()\":{\"notice\":\"The HooksTrampoline contract (caller for hooks) (immutable)\"},\"isTriggerMet(bytes32)\":{\"notice\":\"Check if trigger condition is currently met\"},\"isValidSignature(bytes32,bytes)\":{\"notice\":\"Verifies that the signature is valid for the given hash\"},\"orderHandler()\":{\"notice\":\"The KapanConditionalOrderHandler for generating orders\"},\"orderSalts(bytes32)\":{\"notice\":\"Salt used for each order (for ComposableCoW cancellation)\"},\"orders(bytes32)\":{\"notice\":\"Order contexts by order hash\"},\"preHookExecutedForIteration(bytes32)\":{\"notice\":\"Track pre-hook execution per order\"},\"preHookSellBalance(bytes32)\":{\"notice\":\"Track balances at end of pre-hook for delta calculation\"},\"recoverTokens(address,address,uint256)\":{\"notice\":\"Recover tokens accidentally sent to this contract\"},\"resetStuckOrder(bytes32)\":{\"notice\":\"Reset a stuck order where pre-hook executed but post-hook failed\"},\"router()\":{\"notice\":\"The KapanRouter for executing lending operations (immutable)\"},\"setChunkWindow(uint256)\":{\"notice\":\"Update the chunk window for order validity\"},\"setOrderHandler(address)\":{\"notice\":\"Update the order handler address\"},\"settlement()\":{\"notice\":\"The GPv2Settlement contract (immutable)\"},\"userOrders(address,uint256)\":{\"notice\":\"User's active orders\"},\"userSaltToOrderHash(address,bytes32)\":{\"notice\":\"Lookup order hash by (user, salt)\"}},\"notice\":\"Manages trigger-based conditional orders for Kapan (ADL, stop-loss, etc.)\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/v2/cow/KapanConditionalOrderManager.sol\":\"KapanConditionalOrderManager\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":10},\"remappings\":[],\"viaIR\":true},\"sources\":{\"@openzeppelin/contracts/access/Ownable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (access/Ownable.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {Context} from \\\"../utils/Context.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * The initial owner is set to the address provided by the deployer. This can\\n * later be changed with {transferOwnership}.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n */\\nabstract contract Ownable is Context {\\n    address private _owner;\\n\\n    /**\\n     * @dev The caller account is not authorized to perform an operation.\\n     */\\n    error OwnableUnauthorizedAccount(address account);\\n\\n    /**\\n     * @dev The owner is not a valid owner account. (eg. `address(0)`)\\n     */\\n    error OwnableInvalidOwner(address owner);\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Initializes the contract setting the address provided by the deployer as the initial owner.\\n     */\\n    constructor(address initialOwner) {\\n        if (initialOwner == address(0)) {\\n            revert OwnableInvalidOwner(address(0));\\n        }\\n        _transferOwnership(initialOwner);\\n    }\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        _checkOwner();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view virtual returns (address) {\\n        return _owner;\\n    }\\n\\n    /**\\n     * @dev Throws if the sender is not the owner.\\n     */\\n    function _checkOwner() internal view virtual {\\n        if (owner() != _msgSender()) {\\n            revert OwnableUnauthorizedAccount(_msgSender());\\n        }\\n    }\\n\\n    /**\\n     * @dev Leaves the contract without owner. It will not be possible to call\\n     * `onlyOwner` functions. Can only be called by the current owner.\\n     *\\n     * NOTE: Renouncing ownership will leave the contract without an owner,\\n     * thereby disabling any functionality that is only available to the owner.\\n     */\\n    function renounceOwnership() public virtual onlyOwner {\\n        _transferOwnership(address(0));\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Can only be called by the current owner.\\n     */\\n    function transferOwnership(address newOwner) public virtual onlyOwner {\\n        if (newOwner == address(0)) {\\n            revert OwnableInvalidOwner(address(0));\\n        }\\n        _transferOwnership(newOwner);\\n    }\\n\\n    /**\\n     * @dev Transfers ownership of the contract to a new account (`newOwner`).\\n     * Internal function without access restriction.\\n     */\\n    function _transferOwnership(address newOwner) internal virtual {\\n        address oldOwner = _owner;\\n        _owner = newOwner;\\n        emit OwnershipTransferred(oldOwner, newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0xff6d0bb2e285473e5311d9d3caacb525ae3538a80758c10649a4d61029b017bb\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the value of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the value of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the\\n     * caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from `from` to `to` using the\\n     * allowance mechanism. `value` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\\n}\\n\",\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/extensions/IERC20Permit.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/extensions/IERC20Permit.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in\\n * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].\\n *\\n * Adds the {permit} method, which can be used to change an account's ERC20 allowance (see {IERC20-allowance}) by\\n * presenting a message signed by the account. By not relying on {IERC20-approve}, the token holder account doesn't\\n * need to send a transaction, and thus is not required to hold Ether at all.\\n *\\n * ==== Security Considerations\\n *\\n * There are two important considerations concerning the use of `permit`. The first is that a valid permit signature\\n * expresses an allowance, and it should not be assumed to convey additional meaning. In particular, it should not be\\n * considered as an intention to spend the allowance in any specific way. The second is that because permits have\\n * built-in replay protection and can be submitted by anyone, they can be frontrun. A protocol that uses permits should\\n * take this into consideration and allow a `permit` call to fail. Combining these two aspects, a pattern that may be\\n * generally recommended is:\\n *\\n * ```solidity\\n * function doThingWithPermit(..., uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) public {\\n *     try token.permit(msg.sender, address(this), value, deadline, v, r, s) {} catch {}\\n *     doThing(..., value);\\n * }\\n *\\n * function doThing(..., uint256 value) public {\\n *     token.safeTransferFrom(msg.sender, address(this), value);\\n *     ...\\n * }\\n * ```\\n *\\n * Observe that: 1) `msg.sender` is used as the owner, leaving no ambiguity as to the signer intent, and 2) the use of\\n * `try/catch` allows the permit to fail and makes the code tolerant to frontrunning. (See also\\n * {SafeERC20-safeTransferFrom}).\\n *\\n * Additionally, note that smart contract wallets (such as Argent or Safe) are not able to produce permit signatures, so\\n * contracts should have entry points that don't rely on permit.\\n */\\ninterface IERC20Permit {\\n    /**\\n     * @dev Sets `value` as the allowance of `spender` over ``owner``'s tokens,\\n     * given ``owner``'s signed approval.\\n     *\\n     * IMPORTANT: The same issues {IERC20-approve} has related to transaction\\n     * ordering also apply here.\\n     *\\n     * Emits an {Approval} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     * - `deadline` must be a timestamp in the future.\\n     * - `v`, `r` and `s` must be a valid `secp256k1` signature from `owner`\\n     * over the EIP712-formatted function arguments.\\n     * - the signature must use ``owner``'s current nonce (see {nonces}).\\n     *\\n     * For more information on the signature format, see the\\n     * https://eips.ethereum.org/EIPS/eip-2612#specification[relevant EIP\\n     * section].\\n     *\\n     * CAUTION: See Security Considerations above.\\n     */\\n    function permit(\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) external;\\n\\n    /**\\n     * @dev Returns the current nonce for `owner`. This value must be\\n     * included whenever a signature is generated for {permit}.\\n     *\\n     * Every successful call to {permit} increases ``owner``'s nonce by one. This\\n     * prevents a signature from being used multiple times.\\n     */\\n    function nonces(address owner) external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the domain separator used in the encoding of the signature for {permit}, as defined by {EIP712}.\\n     */\\n    // solhint-disable-next-line func-name-mixedcase\\n    function DOMAIN_SEPARATOR() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0x6008dabfe393240d73d7dd7688033f72740d570aa422254d29a7dce8568f3aff\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/utils/SafeERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\nimport {IERC20} from \\\"../IERC20.sol\\\";\\nimport {IERC20Permit} from \\\"../extensions/IERC20Permit.sol\\\";\\nimport {Address} from \\\"../../../utils/Address.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using Address for address;\\n\\n    /**\\n     * @dev An operation with an ERC20 token failed.\\n     */\\n    error SafeERC20FailedOperation(address token);\\n\\n    /**\\n     * @dev Indicates a failed `decreaseAllowance` request.\\n     */\\n    error SafeERC20FailedDecreaseAllowance(address spender, uint256 currentAllowance, uint256 requestedDecrease);\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from the calling contract to `to`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransfer(IERC20 token, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeCall(token.transfer, (to, value)));\\n    }\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from `from` to `to`, spending the approval given by `from` to the\\n     * calling contract. If `token` returns no value, non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeCall(token.transferFrom, (from, to, value)));\\n    }\\n\\n    /**\\n     * @dev Increase the calling contract's allowance toward `spender` by `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {\\n        uint256 oldAllowance = token.allowance(address(this), spender);\\n        forceApprove(token, spender, oldAllowance + value);\\n    }\\n\\n    /**\\n     * @dev Decrease the calling contract's allowance toward `spender` by `requestedDecrease`. If `token` returns no\\n     * value, non-reverting calls are assumed to be successful.\\n     */\\n    function safeDecreaseAllowance(IERC20 token, address spender, uint256 requestedDecrease) internal {\\n        unchecked {\\n            uint256 currentAllowance = token.allowance(address(this), spender);\\n            if (currentAllowance < requestedDecrease) {\\n                revert SafeERC20FailedDecreaseAllowance(spender, currentAllowance, requestedDecrease);\\n            }\\n            forceApprove(token, spender, currentAllowance - requestedDecrease);\\n        }\\n    }\\n\\n    /**\\n     * @dev Set the calling contract's allowance toward `spender` to `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful. Meant to be used with tokens that require the approval\\n     * to be set to zero before setting it to a non-zero value, such as USDT.\\n     */\\n    function forceApprove(IERC20 token, address spender, uint256 value) internal {\\n        bytes memory approvalCall = abi.encodeCall(token.approve, (spender, value));\\n\\n        if (!_callOptionalReturnBool(token, approvalCall)) {\\n            _callOptionalReturn(token, abi.encodeCall(token.approve, (spender, 0)));\\n            _callOptionalReturn(token, approvalCall);\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address-functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data);\\n        if (returndata.length != 0 && !abi.decode(returndata, (bool))) {\\n            revert SafeERC20FailedOperation(address(token));\\n        }\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     *\\n     * This is a variant of {_callOptionalReturn} that silents catches all reverts and returns a bool instead.\\n     */\\n    function _callOptionalReturnBool(IERC20 token, bytes memory data) private returns (bool) {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We cannot use {Address-functionCall} here since this should return false\\n        // and not revert is the subcall reverts.\\n\\n        (bool success, bytes memory returndata) = address(token).call(data);\\n        return success && (returndata.length == 0 || abi.decode(returndata, (bool))) && address(token).code.length > 0;\\n    }\\n}\\n\",\"keccak256\":\"0x37bb49513c49c87c4642a891b13b63571bc87013dde806617aa1efb54605f386\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/Address.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev The ETH balance of the account is not enough to perform the operation.\\n     */\\n    error AddressInsufficientBalance(address account);\\n\\n    /**\\n     * @dev There's no code at `target` (it is not a contract).\\n     */\\n    error AddressEmptyCode(address target);\\n\\n    /**\\n     * @dev A call to an address target failed. The target may have reverted.\\n     */\\n    error FailedInnerCall();\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.8.20/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        if (address(this).balance < amount) {\\n            revert AddressInsufficientBalance(address(this));\\n        }\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        if (!success) {\\n            revert FailedInnerCall();\\n        }\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason or custom error, it is bubbled\\n     * up by this function (like regular Solidity function calls). However, if\\n     * the call reverted with no returned reason, this function reverts with a\\n     * {FailedInnerCall} error.\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     */\\n    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {\\n        if (address(this).balance < value) {\\n            revert AddressInsufficientBalance(address(this));\\n        }\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResultFromTarget(target, success, returndata);\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call to smart-contract was successful, and reverts if the target\\n     * was not a contract or bubbling up the revert reason (falling back to {FailedInnerCall}) in case of an\\n     * unsuccessful call.\\n     */\\n    function verifyCallResultFromTarget(\\n        address target,\\n        bool success,\\n        bytes memory returndata\\n    ) internal view returns (bytes memory) {\\n        if (!success) {\\n            _revert(returndata);\\n        } else {\\n            // only check if target is a contract if the call was successful and the return data is empty\\n            // otherwise we already know that it was a contract\\n            if (returndata.length == 0 && target.code.length == 0) {\\n                revert AddressEmptyCode(target);\\n            }\\n            return returndata;\\n        }\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call was successful, and reverts if it wasn't, either by bubbling the\\n     * revert reason or with a default {FailedInnerCall} error.\\n     */\\n    function verifyCallResult(bool success, bytes memory returndata) internal pure returns (bytes memory) {\\n        if (!success) {\\n            _revert(returndata);\\n        } else {\\n            return returndata;\\n        }\\n    }\\n\\n    /**\\n     * @dev Reverts with returndata if present. Otherwise reverts with {FailedInnerCall}.\\n     */\\n    function _revert(bytes memory returndata) private pure {\\n        // Look for revert reason and bubble it up if present\\n        if (returndata.length > 0) {\\n            // The easiest way to bubble the revert reason is using memory via assembly\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                let returndata_size := mload(returndata)\\n                revert(add(32, returndata), returndata_size)\\n            }\\n        } else {\\n            revert FailedInnerCall();\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xaf28a975a78550e45f65e559a3ad6a5ad43b9b8a37366999abd1b7084eb70721\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.1) (utils/Context.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n\\n    function _contextSuffixLength() internal view virtual returns (uint256) {\\n        return 0;\\n    }\\n}\\n\",\"keccak256\":\"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/ReentrancyGuard.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/ReentrancyGuard.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Contract module that helps prevent reentrant calls to a function.\\n *\\n * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier\\n * available, which can be applied to functions to make sure there are no nested\\n * (reentrant) calls to them.\\n *\\n * Note that because there is a single `nonReentrant` guard, functions marked as\\n * `nonReentrant` may not call one another. This can be worked around by making\\n * those functions `private`, and then adding `external` `nonReentrant` entry\\n * points to them.\\n *\\n * TIP: If you would like to learn more about reentrancy and alternative ways\\n * to protect against it, check out our blog post\\n * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].\\n */\\nabstract contract ReentrancyGuard {\\n    // Booleans are more expensive than uint256 or any type that takes up a full\\n    // word because each write operation emits an extra SLOAD to first read the\\n    // slot's contents, replace the bits taken up by the boolean, and then write\\n    // back. This is the compiler's defense against contract upgrades and\\n    // pointer aliasing, and it cannot be disabled.\\n\\n    // The values being non-zero value makes deployment a bit more expensive,\\n    // but in exchange the refund on every call to nonReentrant will be lower in\\n    // amount. Since refunds are capped to a percentage of the total\\n    // transaction's gas, it is best to keep them low in cases like this one, to\\n    // increase the likelihood of the full refund coming into effect.\\n    uint256 private constant NOT_ENTERED = 1;\\n    uint256 private constant ENTERED = 2;\\n\\n    uint256 private _status;\\n\\n    /**\\n     * @dev Unauthorized reentrant call.\\n     */\\n    error ReentrancyGuardReentrantCall();\\n\\n    constructor() {\\n        _status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Prevents a contract from calling itself, directly or indirectly.\\n     * Calling a `nonReentrant` function from another `nonReentrant`\\n     * function is not supported. It is possible to prevent this from happening\\n     * by making the `nonReentrant` function external, and making it call a\\n     * `private` function that does the actual work.\\n     */\\n    modifier nonReentrant() {\\n        _nonReentrantBefore();\\n        _;\\n        _nonReentrantAfter();\\n    }\\n\\n    function _nonReentrantBefore() private {\\n        // On the first call to nonReentrant, _status will be NOT_ENTERED\\n        if (_status == ENTERED) {\\n            revert ReentrancyGuardReentrantCall();\\n        }\\n\\n        // Any calls to nonReentrant after this point will fail\\n        _status = ENTERED;\\n    }\\n\\n    function _nonReentrantAfter() private {\\n        // By storing the original value once again, a refund is triggered (see\\n        // https://eips.ethereum.org/EIPS/eip-2200)\\n        _status = NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Returns true if the reentrancy guard is currently set to \\\"entered\\\", which indicates there is a\\n     * `nonReentrant` function in the call stack.\\n     */\\n    function _reentrancyGuardEntered() internal view returns (bool) {\\n        return _status == ENTERED;\\n    }\\n}\\n\",\"keccak256\":\"0xf980daa263b661ab8ddee7d4fd833c7da7e7995e2c359ff1f17e67e4112f2236\",\"license\":\"MIT\"},\"contracts/v2/cow/KapanConditionalOrderManager.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { Ownable } from \\\"@openzeppelin/contracts/access/Ownable.sol\\\";\\nimport { ReentrancyGuard } from \\\"@openzeppelin/contracts/utils/ReentrancyGuard.sol\\\";\\nimport { SafeERC20 } from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport { IComposableCoW } from \\\"../interfaces/cow/IComposableCoW.sol\\\";\\nimport { IConditionalOrder } from \\\"../interfaces/cow/IConditionalOrder.sol\\\";\\nimport { IERC1271, ERC1271_MAGIC_VALUE } from \\\"../interfaces/cow/IERC1271.sol\\\";\\nimport { GPv2Order } from \\\"../interfaces/cow/GPv2Order.sol\\\";\\nimport { IGPv2Settlement } from \\\"../interfaces/cow/IGPv2Settlement.sol\\\";\\nimport { ProtocolTypes } from \\\"../interfaces/ProtocolTypes.sol\\\";\\nimport { IOrderTrigger } from \\\"../interfaces/IOrderTrigger.sol\\\";\\n\\n/// @title IKapanRouter\\n/// @dev Minimal interface for router\\ninterface IKapanRouter {\\n    function processProtocolInstructions(ProtocolTypes.ProtocolInstruction[] calldata instructions) external;\\n    function isAuthorizedFor(address user) external view returns (bool);\\n}\\n\\n/// @title KapanConditionalOrderManager\\n/// @notice Manages trigger-based conditional orders for Kapan (ADL, stop-loss, etc.)\\n/// @dev Uses separate KapanConditionalOrderHandler for IConditionalOrderGenerator.\\n///      This contract is the OWNER in ComposableCoW and handles ERC-1271 signature verification.\\n///      It intentionally does NOT implement IERC165 to avoid Safe/fallback handler detection.\\n///\\n/// Key differences from KapanOrderManager:\\n/// - Orders have pluggable triggers (IOrderTrigger) that determine when and how much to execute\\n/// - Amounts are calculated dynamically at execution time via trigger.calculateExecution()\\n/// - Instructions are templates that reference UTXO[0] for dynamic amounts\\ncontract KapanConditionalOrderManager is Ownable, ReentrancyGuard, IERC1271 {\\n    using SafeERC20 for IERC20;\\n\\n    // ============ Errors ============\\n    error OrderNotFound();\\n    error OrderAlreadyExists();\\n    error InvalidTrigger();\\n    error NotHooksTrampoline();\\n    error Unauthorized();\\n    error InvalidOrderState();\\n    error ZeroAddress();\\n    error InstructionUserMismatch(address expected, address actual);\\n    error PreHookAlreadyExecuted();\\n    error PreHookNotExecuted();\\n    error TriggerNotMet();\\n    error CannotCancelMidExecution();\\n    error NoTokensReceived();\\n    error InvalidTokens();\\n    error ValidToOverflow();\\n    error SaltAlreadyUsed();\\n    error MaxOrdersExceeded();\\n    error InvalidChunkWindow();\\n\\n    // ============ Enums ============\\n    enum OrderStatus {\\n        None,\\n        Active,\\n        Completed,\\n        Cancelled\\n    }\\n\\n    // Router instruction types (must match KapanRouter)\\n    enum RouterInstructionType {\\n        FlashLoan,\\n        PullToken,\\n        PushToken,\\n        ToOutput,\\n        Approve,\\n        Split,\\n        Add,\\n        Subtract\\n    }\\n\\n    // ============ Structs ============\\n\\n    /// @notice Order parameters for conditional orders\\n    /// @dev Named KapanOrderParams to avoid conflict with IConditionalOrder.ConditionalOrderParams\\n    struct KapanOrderParams {\\n        address user;\\n\\n        // Trigger configuration\\n        address trigger;              // IOrderTrigger contract\\n        bytes triggerStaticData;      // Params passed to trigger.shouldExecute/calculateExecution\\n\\n        // Pre-swap instructions (executed in pre-hook)\\n        // Instructions should reference UTXO[0] for the dynamic sellAmount\\n        bytes preInstructions;        // ABI-encoded ProtocolInstruction[]\\n\\n        // Swap configuration\\n        address sellToken;\\n        address buyToken;\\n\\n        // Post-swap instructions (executed in post-hook)\\n        // Instructions should reference UTXO[0] for the received buyAmount\\n        bytes postInstructions;       // ABI-encoded ProtocolInstruction[]\\n\\n        // AppData (pre-computed by frontend, includes hooks)\\n        bytes32 appDataHash;\\n\\n        // Max iterations (0 = unlimited until cancelled)\\n        uint256 maxIterations;\\n\\n        // Address to refund remaining sellToken after post-hook (e.g., adapter for flash loan repayment)\\n        // If zero, no refund is sent (user must handle via post-instructions)\\n        address sellTokenRefundAddress;\\n\\n        // Order kind: true = BUY (exact buyAmount, max sellAmount), false = SELL (exact sellAmount, min buyAmount)\\n        bool isKindBuy;\\n    }\\n\\n    /// @notice Order context stored on-chain\\n    struct OrderContext {\\n        KapanOrderParams params;\\n        OrderStatus status;\\n        uint256 iterationCount;       // Number of completed iterations\\n        uint256 createdAt;\\n    }\\n\\n    // ============ Constants ============\\n\\n    /// @notice Default chunk window duration (30 minutes)\\n    /// @dev Must be > 60 seconds due to CoW Protocol's min_order_validity_period (default 1 minute)\\n    /// Increased to 30 minutes to allow sufficient time for solver competition and fills\\n    uint256 public constant DEFAULT_CHUNK_WINDOW = 30 minutes;\\n\\n    /// @notice Minimum allowed chunk window (65 seconds)\\n    /// @dev Must be > 60 seconds due to CoW Protocol's min_order_validity_period\\n    uint256 public constant MIN_CHUNK_WINDOW = 65 seconds;\\n\\n    /// @notice Maximum allowed chunk window (1 hour)\\n    uint256 public constant MAX_CHUNK_WINDOW = 1 hours;\\n\\n    // ============ State Variables ============\\n\\n    /// @notice Chunk window duration for deterministic validTo\\n    /// @dev Configurable to tune order validity based on watchtower polling and token characteristics\\n    uint256 public chunkWindow = DEFAULT_CHUNK_WINDOW;\\n\\n    /// @notice The KapanRouter for executing lending operations (immutable)\\n    IKapanRouter public immutable router;\\n\\n    /// @notice The ComposableCoW contract for order registration (immutable)\\n    IComposableCoW public immutable composableCoW;\\n\\n    /// @notice The GPv2Settlement contract (immutable)\\n    IGPv2Settlement public immutable settlement;\\n\\n    /// @notice The HooksTrampoline contract (caller for hooks) (immutable)\\n    address public immutable hooksTrampoline;\\n\\n    /// @notice The KapanConditionalOrderHandler for generating orders\\n    address public orderHandler;\\n\\n    /// @notice Order contexts by order hash\\n    mapping(bytes32 => OrderContext) public orders;\\n\\n    /// @notice Salt used for each order (for ComposableCoW cancellation)\\n    mapping(bytes32 => bytes32) public orderSalts;\\n\\n    /// @notice User's active orders\\n    mapping(address => bytes32[]) public userOrders;\\n\\n    /// @notice Lookup order hash by (user, salt)\\n    mapping(address => mapping(bytes32 => bytes32)) public userSaltToOrderHash;\\n\\n    /// @notice Track pre-hook execution per order\\n    mapping(bytes32 => uint256) public preHookExecutedForIteration;\\n\\n    /// @notice Track balances at end of pre-hook for delta calculation\\n    mapping(bytes32 => uint256) public preHookSellBalance;\\n    mapping(bytes32 => uint256) public preHookBuyBalance;\\n\\n    // ============ IMPORTANT: NO AMOUNT CACHING ============\\n    // DO NOT add cached sell/buy amounts here. The handler calls trigger.calculateExecution()\\n    // directly and any caching here is DEAD CODE that breaks orders.\\n    // Amounts are dynamic and determined at execution time by the trigger.\\n\\n    // ============ Security: Order Limits ============\\n\\n    /// @notice Maximum orders per user to prevent storage DOS\\n    uint256 public constant MAX_ORDERS_PER_USER = 100;\\n\\n    // ============ Events ============\\n\\n    event ConditionalOrderCreated(\\n        bytes32 indexed orderHash,\\n        address indexed user,\\n        address trigger,\\n        address sellToken,\\n        address buyToken\\n    );\\n\\n    event ConditionalOrderCancelled(bytes32 indexed orderHash, address indexed user);\\n    event ConditionalOrderCompleted(bytes32 indexed orderHash, address indexed user, uint256 iterations);\\n    event TriggerExecuted(bytes32 indexed orderHash, uint256 iteration, uint256 sellAmount, uint256 buyAmount);\\n    event PreHookExecuted(bytes32 indexed orderHash, uint256 iteration);\\n    event PostHookExecuted(bytes32 indexed orderHash, uint256 iteration, uint256 receivedAmount);\\n\\n    // Admin events\\n    event VaultRelayerApproved(address indexed token, address indexed vaultRelayer);\\n    event TokensRecovered(address indexed token, address indexed to, uint256 amount);\\n    event StuckOrderReset(bytes32 indexed orderHash, address indexed user);\\n    event OrderHandlerUpdated(address indexed oldHandler, address indexed newHandler);\\n    event ChunkWindowUpdated(uint256 oldWindow, uint256 newWindow);\\n\\n    // ============ Constructor ============\\n\\n    constructor(\\n        address _owner,\\n        address _router,\\n        address _composableCoW,\\n        address _settlement,\\n        address _hooksTrampoline\\n    ) Ownable(_owner) {\\n        if (_router == address(0)) revert ZeroAddress();\\n        if (_composableCoW == address(0)) revert ZeroAddress();\\n        if (_settlement == address(0)) revert ZeroAddress();\\n        if (_hooksTrampoline == address(0)) revert ZeroAddress();\\n\\n        router = IKapanRouter(_router);\\n        composableCoW = IComposableCoW(_composableCoW);\\n        settlement = IGPv2Settlement(_settlement);\\n        hooksTrampoline = _hooksTrampoline;\\n    }\\n\\n    // ============ Admin Functions ============\\n\\n    /// @notice Approve vault relayer to spend tokens\\n    /// @param token Token to approve\\n    function approveVaultRelayer(address token) external onlyOwner {\\n        if (token == address(0)) revert ZeroAddress();\\n        address vaultRelayer = settlement.vaultRelayer();\\n        IERC20(token).forceApprove(vaultRelayer, type(uint256).max);\\n        emit VaultRelayerApproved(token, vaultRelayer);\\n    }\\n\\n    /// @notice Update the order handler address\\n    /// @param _orderHandler New order handler address\\n    function setOrderHandler(address _orderHandler) external onlyOwner {\\n        if (_orderHandler == address(0)) revert ZeroAddress();\\n        address oldHandler = orderHandler;\\n        orderHandler = _orderHandler;\\n        emit OrderHandlerUpdated(oldHandler, _orderHandler);\\n    }\\n\\n    /// @notice Update the chunk window for order validity\\n    /// @param _chunkWindow New chunk window in seconds\\n    function setChunkWindow(uint256 _chunkWindow) external onlyOwner {\\n        if (_chunkWindow < MIN_CHUNK_WINDOW || _chunkWindow > MAX_CHUNK_WINDOW) {\\n            revert InvalidChunkWindow();\\n        }\\n        uint256 oldWindow = chunkWindow;\\n        chunkWindow = _chunkWindow;\\n        emit ChunkWindowUpdated(oldWindow, _chunkWindow);\\n    }\\n\\n    // ============ Order Creation ============\\n\\n    /// @notice Create a new conditional order\\n    /// @param params The order parameters\\n    /// @param salt Unique salt for the order\\n    /// @return orderHash The hash identifying this order\\n    function createOrder(\\n        KapanOrderParams calldata params,\\n        bytes32 salt\\n    ) external nonReentrant returns (bytes32 orderHash) {\\n        if (params.user != msg.sender) revert Unauthorized();\\n        if (params.trigger == address(0)) revert InvalidTrigger();\\n        if (params.sellToken == address(0) || params.buyToken == address(0)) revert ZeroAddress();\\n        if (params.sellToken == params.buyToken) revert InvalidTokens();\\n\\n        // Security: Prevent salt reuse\\n        if (userSaltToOrderHash[msg.sender][salt] != bytes32(0)) revert SaltAlreadyUsed();\\n\\n        // Security: Limit orders per user to prevent storage DOS\\n        if (userOrders[msg.sender].length >= MAX_ORDERS_PER_USER) revert MaxOrdersExceeded();\\n\\n        // Validate instructions target the calling user\\n        _validateInstructionUsers(params.preInstructions, msg.sender);\\n        _validateInstructionUsers(params.postInstructions, msg.sender);\\n\\n        // Compute order hash\\n        orderHash = keccak256(abi.encode(params, salt, block.timestamp));\\n\\n        if (orders[orderHash].status != OrderStatus.None) revert OrderAlreadyExists();\\n\\n        // Store order context\\n        orders[orderHash] = OrderContext({\\n            params: params,\\n            status: OrderStatus.Active,\\n            iterationCount: 0,\\n            createdAt: block.timestamp\\n        });\\n\\n        orderSalts[orderHash] = salt;\\n        userOrders[params.user].push(orderHash);\\n        userSaltToOrderHash[params.user][salt] = orderHash;\\n\\n        // Register with ComposableCoW\\n        IConditionalOrder.ConditionalOrderParams memory cowParams = IConditionalOrder.ConditionalOrderParams({\\n            handler: IConditionalOrder(orderHandler),\\n            salt: salt,\\n            staticData: abi.encode(orderHash)\\n        });\\n\\n        composableCoW.create(cowParams, true);\\n\\n        // Ensure vault relayer can spend sellToken\\n        _ensureVaultRelayerApproval(params.sellToken);\\n\\n        emit ConditionalOrderCreated(\\n            orderHash,\\n            params.user,\\n            params.trigger,\\n            params.sellToken,\\n            params.buyToken\\n        );\\n    }\\n\\n    // ============ Order Cancellation ============\\n\\n    /// @notice Cancel an active conditional order\\n    function cancelOrder(bytes32 orderHash) external nonReentrant {\\n        OrderContext storage ctx = orders[orderHash];\\n\\n        if (ctx.status == OrderStatus.None) revert OrderNotFound();\\n        if (ctx.params.user != msg.sender) revert Unauthorized();\\n        if (ctx.status != OrderStatus.Active) revert InvalidOrderState();\\n        if (preHookExecutedForIteration[orderHash] != 0) revert CannotCancelMidExecution();\\n\\n        ctx.status = OrderStatus.Cancelled;\\n\\n        // Remove from ComposableCoW\\n        bytes32 cowOrderHash = composableCoW.hash(\\n            IConditionalOrder.ConditionalOrderParams({\\n                handler: IConditionalOrder(orderHandler),\\n                salt: orderSalts[orderHash],\\n                staticData: abi.encode(orderHash)\\n            })\\n        );\\n        composableCoW.remove(cowOrderHash);\\n\\n        emit ConditionalOrderCancelled(orderHash, msg.sender);\\n    }\\n\\n    // ============ Hook Execution ============\\n\\n    /// @notice Execute pre-hook (called by HooksTrampoline)\\n    /// @param orderHash The order hash\\n    function executePreHook(bytes32 orderHash) external nonReentrant {\\n        if (msg.sender != hooksTrampoline) revert NotHooksTrampoline();\\n        _executePreHookInternal(orderHash);\\n    }\\n\\n    /// @notice Execute pre-hook using (user, salt) lookup\\n    /// @param user The user address\\n    /// @param salt The order salt\\n    function executePreHookBySalt(address user, bytes32 salt) external nonReentrant {\\n        if (msg.sender != hooksTrampoline) revert NotHooksTrampoline();\\n        bytes32 orderHash = userSaltToOrderHash[user][salt];\\n        if (orderHash == bytes32(0)) revert OrderNotFound();\\n        _executePreHookInternal(orderHash);\\n    }\\n\\n    /// @notice Execute post-hook (called by HooksTrampoline)\\n    /// @param orderHash The order hash\\n    function executePostHook(bytes32 orderHash) external nonReentrant {\\n        if (msg.sender != hooksTrampoline) revert NotHooksTrampoline();\\n        _executePostHookInternal(orderHash);\\n    }\\n\\n    /// @notice Execute post-hook using (user, salt) lookup\\n    /// @param user The user address\\n    /// @param salt The order salt\\n    function executePostHookBySalt(address user, bytes32 salt) external nonReentrant {\\n        if (msg.sender != hooksTrampoline) revert NotHooksTrampoline();\\n        bytes32 orderHash = userSaltToOrderHash[user][salt];\\n        if (orderHash == bytes32(0)) revert OrderNotFound();\\n        _executePostHookInternal(orderHash);\\n    }\\n\\n    /// @dev Internal pre-hook execution logic\\n    function _executePreHookInternal(bytes32 orderHash) internal {\\n        OrderContext storage ctx = orders[orderHash];\\n        if (ctx.status != OrderStatus.Active) revert InvalidOrderState();\\n        if (preHookExecutedForIteration[orderHash] != 0) revert PreHookAlreadyExecuted();\\n\\n        // Cache params in memory for gas savings\\n        KapanOrderParams memory params = ctx.params;\\n\\n        // Get sell/buy amounts from trigger BEFORE executing instructions\\n        // (instructions may change protocol state, affecting future calculations)\\n        IOrderTrigger trigger = IOrderTrigger(params.trigger);\\n        (uint256 sellAmount, ) = trigger.calculateExecution(\\n            params.triggerStaticData,\\n            params.user,\\n            ctx.iterationCount\\n        );\\n\\n        // Mark pre-hook as executed\\n        preHookExecutedForIteration[orderHash] = ctx.iterationCount + 1;\\n\\n        // Build and execute instructions\\n        ProtocolTypes.ProtocolInstruction[] memory instructions = _buildInstructions(\\n            params.preInstructions,\\n            sellAmount,\\n            params.sellToken\\n        );\\n        router.processProtocolInstructions(instructions);\\n\\n        // Record balances for delta calculation\\n        preHookSellBalance[orderHash] = IERC20(params.sellToken).balanceOf(address(this));\\n        preHookBuyBalance[orderHash] = IERC20(params.buyToken).balanceOf(address(this));\\n\\n        emit PreHookExecuted(orderHash, ctx.iterationCount);\\n    }\\n\\n    /// @dev Internal post-hook execution logic\\n    function _executePostHookInternal(bytes32 orderHash) internal {\\n        OrderContext storage ctx = orders[orderHash];\\n        if (ctx.status != OrderStatus.Active) revert InvalidOrderState();\\n        if (preHookExecutedForIteration[orderHash] != ctx.iterationCount + 1) revert PreHookNotExecuted();\\n\\n        // Cache params in memory for gas savings\\n        KapanOrderParams memory params = ctx.params;\\n\\n        // Reset pre-hook flag\\n        preHookExecutedForIteration[orderHash] = 0;\\n\\n        // Calculate deltas\\n        uint256 sellBefore = preHookSellBalance[orderHash];\\n        uint256 buyBefore = preHookBuyBalance[orderHash];\\n        uint256 sellAfter = IERC20(params.sellToken).balanceOf(address(this));\\n        uint256 buyAfter = IERC20(params.buyToken).balanceOf(address(this));\\n\\n        delete preHookSellBalance[orderHash];\\n        delete preHookBuyBalance[orderHash];\\n\\n        uint256 actualSellAmount = sellBefore > sellAfter ? sellBefore - sellAfter : 0;\\n        uint256 actualBuyAmount = buyAfter > buyBefore ? buyAfter - buyBefore : 0;\\n\\n        // Validate swap actually occurred\\n        if (actualBuyAmount == 0) revert NoTokensReceived();\\n\\n        // Transfer buy tokens to router for post-instructions\\n        IERC20(params.buyToken).safeTransfer(address(router), actualBuyAmount);\\n\\n        // Build and execute instructions with BOTH amounts available\\n        // UTXO[0] = actualSellAmount (for flash loan repayment via WithdrawCollateral)\\n        // UTXO[1] = actualBuyAmount (for debt repayment)\\n        ProtocolTypes.ProtocolInstruction[] memory instructions = _buildPostHookInstructions(\\n            params.postInstructions,\\n            actualSellAmount,\\n            params.sellToken,\\n            actualBuyAmount,\\n            params.buyToken\\n        );\\n        router.processProtocolInstructions(instructions);\\n\\n        // Refund remaining sellToken to specified address (e.g., adapter for flash loan repayment)\\n        // This handles: leftover from flash loan + withdrawn collateral\\n        if (params.sellTokenRefundAddress != address(0)) {\\n            uint256 remainingSellToken = IERC20(params.sellToken).balanceOf(address(this));\\n            if (remainingSellToken > 0) {\\n                IERC20(params.sellToken).safeTransfer(params.sellTokenRefundAddress, remainingSellToken);\\n            }\\n        }\\n\\n        // Update state\\n        ctx.iterationCount++;\\n\\n        emit TriggerExecuted(orderHash, ctx.iterationCount, actualSellAmount, actualBuyAmount);\\n        emit PostHookExecuted(orderHash, ctx.iterationCount, actualBuyAmount);\\n\\n        // Check completion: trigger says done OR max iterations reached\\n        IOrderTrigger trigger = IOrderTrigger(params.trigger);\\n        bool triggerComplete = trigger.isComplete(params.triggerStaticData, params.user, ctx.iterationCount);\\n        bool maxIterationsReached = params.maxIterations > 0 && ctx.iterationCount >= params.maxIterations;\\n\\n        if (triggerComplete || maxIterationsReached) {\\n            ctx.status = OrderStatus.Completed;\\n            emit ConditionalOrderCompleted(orderHash, params.user, ctx.iterationCount);\\n        }\\n    }\\n\\n    /// @dev Build instruction array with ToOutput prepended (for pre-hook)\\n    function _buildInstructions(\\n        bytes memory storedInstructionsData,\\n        uint256 amount,\\n        address token\\n    ) internal pure returns (ProtocolTypes.ProtocolInstruction[] memory instructions) {\\n        ProtocolTypes.ProtocolInstruction[] memory storedInstructions =\\n            abi.decode(storedInstructionsData, (ProtocolTypes.ProtocolInstruction[]));\\n\\n        instructions = new ProtocolTypes.ProtocolInstruction[](storedInstructions.length + 1);\\n\\n        instructions[0] = ProtocolTypes.ProtocolInstruction({\\n            protocolName: \\\"router\\\",\\n            data: _encodeToOutput(amount, token)\\n        });\\n\\n        for (uint256 i = 0; i < storedInstructions.length; i++) {\\n            instructions[i + 1] = storedInstructions[i];\\n        }\\n    }\\n\\n    /// @dev Build instruction array with TWO ToOutputs prepended (for post-hook)\\n    /// This provides both actualSellAmount and actualBuyAmount to post-instructions:\\n    /// - UTXO[0] = actualSellAmount (sellToken) - needed for WithdrawCollateral to repay flash loan\\n    /// - UTXO[1] = actualBuyAmount (buyToken) - the received tokens from swap\\n    function _buildPostHookInstructions(\\n        bytes memory storedInstructionsData,\\n        uint256 sellAmount,\\n        address sellToken,\\n        uint256 buyAmount,\\n        address buyToken\\n    ) internal pure returns (ProtocolTypes.ProtocolInstruction[] memory instructions) {\\n        ProtocolTypes.ProtocolInstruction[] memory storedInstructions =\\n            abi.decode(storedInstructionsData, (ProtocolTypes.ProtocolInstruction[]));\\n\\n        instructions = new ProtocolTypes.ProtocolInstruction[](storedInstructions.length + 2);\\n\\n        // UTXO[0] = actualSellAmount (for flash loan repayment calculations)\\n        instructions[0] = ProtocolTypes.ProtocolInstruction({\\n            protocolName: \\\"router\\\",\\n            data: _encodeToOutput(sellAmount, sellToken)\\n        });\\n\\n        // UTXO[1] = actualBuyAmount (debt tokens received from swap)\\n        instructions[1] = ProtocolTypes.ProtocolInstruction({\\n            protocolName: \\\"router\\\",\\n            data: _encodeToOutput(buyAmount, buyToken)\\n        });\\n\\n        for (uint256 i = 0; i < storedInstructions.length; i++) {\\n            instructions[i + 2] = storedInstructions[i];\\n        }\\n    }\\n\\n\\n    // ============ ERC-1271 Signature Verification ============\\n\\n    function isValidSignature(\\n        bytes32 _hash,\\n        bytes calldata _signature\\n    ) external view override returns (bytes4) {\\n        (GPv2Order.Data memory order, IComposableCoW.PayloadStruct memory payload) =\\n            abi.decode(_signature, (GPv2Order.Data, IComposableCoW.PayloadStruct));\\n\\n        bytes32 computedHash = GPv2Order.hash(order, settlement.domainSeparator());\\n        if (_hash != computedHash) {\\n            return bytes4(0); // ERC-1271 failure\\n        }\\n\\n        try composableCoW.getTradeableOrderWithSignature(\\n            address(this),\\n            payload.params,\\n            payload.offchainInput,\\n            payload.proof\\n        ) returns (GPv2Order.Data memory expectedOrder, bytes memory) {\\n            if (_orderMatches(order, expectedOrder)) {\\n                return ERC1271_MAGIC_VALUE;\\n            }\\n            return bytes4(0); // Order mismatch\\n        } catch {\\n            return bytes4(0); // ComposableCoW call failed\\n        }\\n    }\\n\\n    function _orderMatches(GPv2Order.Data memory a, GPv2Order.Data memory b) internal pure returns (bool) {\\n        // For dynamic orders, amounts may change slightly due to interest accrual.\\n        // Allow 1% (100 bps) tolerance on amounts.\\n        // Note: validTo is NOT checked (matches old KapanOrderManager behavior)\\n        return address(a.sellToken) == address(b.sellToken) &&\\n               address(a.buyToken) == address(b.buyToken) &&\\n               a.receiver == b.receiver &&\\n               _amountsWithinTolerance(a.sellAmount, b.sellAmount) &&\\n               _amountsWithinTolerance(a.buyAmount, b.buyAmount) &&\\n               a.appData == b.appData &&\\n               a.feeAmount == b.feeAmount &&\\n               a.kind == b.kind &&\\n               a.partiallyFillable == b.partiallyFillable &&\\n               a.sellTokenBalance == b.sellTokenBalance &&\\n               a.buyTokenBalance == b.buyTokenBalance;\\n    }\\n\\n    /// @dev Check if two amounts are within 1% (100 bps) tolerance\\n    /// Note: Some tolerance is needed because:\\n    /// 1. Interest accrues between signature creation and verification\\n    /// 2. Slight rounding differences in trigger calculations\\n    /// The tolerance is kept tight (1%) to prevent solver exploitation.\\n    /// Pre-hook caches amounts before state changes, so larger tolerance shouldn't be needed.\\n    function _amountsWithinTolerance(uint256 a, uint256 b) internal pure returns (bool) {\\n        if (a == b) return true;\\n        uint256 larger = a > b ? a : b;\\n        uint256 diff = a > b ? a - b : b - a;\\n        // 100 bps = 1% = diff/larger < 1/100\\n        return diff * 100 <= larger;\\n    }\\n\\n    // ============ View Functions ============\\n\\n    function getOrder(bytes32 orderHash) external view returns (OrderContext memory) {\\n        return orders[orderHash];\\n    }\\n\\n    function getUserOrders(address user) external view returns (bytes32[] memory) {\\n        return userOrders[user];\\n    }\\n\\n    /// @notice Check if trigger condition is currently met\\n    function isTriggerMet(bytes32 orderHash) external view returns (bool shouldExecute, string memory reason) {\\n        OrderContext storage ctx = orders[orderHash];\\n        if (ctx.status != OrderStatus.Active) {\\n            return (false, \\\"order_not_active\\\");\\n        }\\n\\n        IOrderTrigger trigger = IOrderTrigger(ctx.params.trigger);\\n        return trigger.shouldExecute(ctx.params.triggerStaticData, ctx.params.user);\\n    }\\n\\n    /// @notice Get current execution amounts from trigger\\n    function getExecutionAmounts(bytes32 orderHash) external view returns (uint256 sellAmount, uint256 minBuyAmount) {\\n        OrderContext storage ctx = orders[orderHash];\\n        if (ctx.status != OrderStatus.Active) {\\n            return (0, 0);\\n        }\\n\\n        IOrderTrigger trigger = IOrderTrigger(ctx.params.trigger);\\n        return trigger.calculateExecution(ctx.params.triggerStaticData, ctx.params.user, ctx.iterationCount);\\n    }\\n\\n    // ============ Internal Functions ============\\n\\n    function _calculateValidTo(uint256 createdAt, uint256 iterationCount) internal view returns (uint256 validTo) {\\n        uint256 window = chunkWindow;\\n        uint256 chunkWindowStart = createdAt + (iterationCount * window);\\n        uint256 chunkWindowEnd = chunkWindowStart + window - 1;\\n\\n        if (block.timestamp <= chunkWindowEnd) {\\n            validTo = chunkWindowEnd;\\n        } else {\\n            uint256 elapsedSinceCreate = block.timestamp - createdAt;\\n            uint256 currentWindowIndex = elapsedSinceCreate / window;\\n            validTo = createdAt + ((currentWindowIndex + 1) * window) - 1;\\n        }\\n\\n        // Ensure safe cast to uint32 (GPv2Order requirement)\\n        if (validTo > type(uint32).max) revert ValidToOverflow();\\n    }\\n\\n    function _encodeToOutput(uint256 amount, address token) internal pure returns (bytes memory) {\\n        return abi.encode(amount, token, address(0), uint8(3)); // RouterInstructionType.ToOutput = 3\\n    }\\n\\n    function _validateInstructionUsers(bytes memory instructionsData, address expectedUser) internal pure {\\n        if (instructionsData.length == 0) return;\\n\\n        ProtocolTypes.ProtocolInstruction[] memory instructions =\\n            abi.decode(instructionsData, (ProtocolTypes.ProtocolInstruction[]));\\n\\n        bytes32 routerHash = keccak256(abi.encodePacked(\\\"router\\\"));\\n\\n        for (uint256 i = 0; i < instructions.length; i++) {\\n            bytes32 protocolHash = keccak256(abi.encodePacked(instructions[i].protocolName));\\n\\n            if (protocolHash != routerHash) {\\n                // Lending instruction - validate user\\n                // Note: Unknown protocols will fail at router's _getGateway()\\n                ProtocolTypes.LendingInstruction memory lending =\\n                    abi.decode(instructions[i].data, (ProtocolTypes.LendingInstruction));\\n                if (lending.user != expectedUser) {\\n                    revert InstructionUserMismatch(expectedUser, lending.user);\\n                }\\n            }\\n        }\\n    }\\n\\n    function _ensureVaultRelayerApproval(address token) internal {\\n        address vaultRelayer = settlement.vaultRelayer();\\n        uint256 currentAllowance = IERC20(token).allowance(address(this), vaultRelayer);\\n        if (currentAllowance < type(uint256).max / 2) {\\n            IERC20(token).forceApprove(vaultRelayer, type(uint256).max);\\n        }\\n    }\\n\\n    // ============ Emergency Functions ============\\n\\n    /// @notice Reset a stuck order where pre-hook executed but post-hook failed\\n    /// @dev Only use when an order is permanently stuck due to failed settlement\\n    /// @param orderHash The order hash to reset\\n    function resetStuckOrder(bytes32 orderHash) external onlyOwner {\\n        OrderContext storage ctx = orders[orderHash];\\n        if (ctx.status != OrderStatus.Active) revert InvalidOrderState();\\n\\n        // Only reset if pre-hook was executed (order is stuck)\\n        if (preHookExecutedForIteration[orderHash] == 0) revert PreHookNotExecuted();\\n\\n        // Clear the stuck state\\n        preHookExecutedForIteration[orderHash] = 0;\\n        delete preHookSellBalance[orderHash];\\n        delete preHookBuyBalance[orderHash];\\n\\n        emit StuckOrderReset(orderHash, ctx.params.user);\\n    }\\n\\n    /// @notice Recover tokens accidentally sent to this contract\\n    /// @param token Token address to recover\\n    /// @param to Recipient address\\n    /// @param amount Amount to recover\\n    function recoverTokens(address token, address to, uint256 amount) external onlyOwner {\\n        if (token == address(0)) revert ZeroAddress();\\n        if (to == address(0)) revert ZeroAddress();\\n        IERC20(token).safeTransfer(to, amount);\\n        emit TokensRecovered(token, to, amount);\\n    }\\n}\\n\",\"keccak256\":\"0x45e200df55deb3b45da5412702eaa22be62894cafb8bb4d26a8a1805384f274d\",\"license\":\"MIT\"},\"contracts/v2/interfaces/IOrderTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IOrderTrigger\\n/// @notice Interface for pluggable order triggers in the Kapan conditional order system\\n/// @dev Triggers determine when an order should execute and how much to trade\\ninterface IOrderTrigger {\\n    /// @notice Check if the order should execute based on current conditions\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner (user whose position is being monitored)\\n    /// @return shouldExecute True if the trigger condition is met\\n    /// @return reason Human-readable reason for the result (for debugging/logging)\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (bool shouldExecute, string memory reason);\\n\\n    /// @notice Calculate the execution amounts when the trigger fires\\n    /// @dev Only called when shouldExecute returns true\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far (for chunked orders)\\n    /// @return sellAmount Amount of sell token to trade in this execution\\n    /// @return minBuyAmount Minimum amount to receive (includes slippage protection)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (uint256 sellAmount, uint256 minBuyAmount);\\n\\n    /// @notice Check if the order is complete and should stop executing\\n    /// @dev Called after each execution to determine if order should be marked complete\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far\\n    /// @return complete True if the order goal has been reached\\n    function isComplete(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (bool complete);\\n\\n    /// @notice Get human-readable name of the trigger type\\n    /// @return name Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\\n    function triggerName() external pure returns (string memory name);\\n}\\n\",\"keccak256\":\"0x852a502f0d40f6547adddd882bdbe33f2993af371d691abd211cb372ff646c35\",\"license\":\"MIT\"},\"contracts/v2/interfaces/ProtocolTypes.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nlibrary ProtocolTypes {\\n    struct ProtocolInstruction {\\n        string protocolName;\\n        bytes data;\\n    }\\n\\n    struct Output {\\n        address token;\\n        uint256 amount;\\n    }\\n\\n    // Common lending instruction schema for gateways (deposit/withdraw/borrow/repay)\\n    enum LendingOp {\\n        Deposit,\\n        DepositCollateral,\\n        WithdrawCollateral,\\n        Borrow,\\n        Repay,\\n        GetBorrowBalance,\\n        GetSupplyBalance,\\n        Swap,\\n        SwapExactOut,\\n        SetEMode  // Aave V3 E-Mode: amount encodes categoryId (0 = disable E-Mode)\\n    }\\n    struct InputPtr {\\n        uint256 index;\\n    }\\n    /**\\n     * Cross-protocol instruction.\\n     * - For Compound you can pass `context = abi.encode(address marketBaseToken)`\\n     *   which tells the gateway which Comet (market) to use. Empty means infer from token.\\n     */\\n    struct LendingInstruction {\\n        LendingOp op;\\n        address token; // underlying being acted on (base or collateral)\\n        address user; // end user on whose account we operate\\n        uint256 amount; // amount in underlying units\\n        bytes context; // (optional) protocol-specific blob (e.g., Compound marketBaseToken)\\n        InputPtr input; // (optional) pointer to prior output (UTXO); use if index < inputs.length\\n    }\\n}\\n\",\"keccak256\":\"0x6b3d27ea42baef69a30052ada687149250a56be5942577d654f2f2142a5510c6\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/GPv2Order.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\n/// @title GPv2Order - CoW Protocol order library\\n/// @notice Data structures and helpers for CoW Protocol orders\\nlibrary GPv2Order {\\n    /// @dev The complete order data that is signed by the user\\n    struct Data {\\n        IERC20 sellToken;\\n        IERC20 buyToken;\\n        address receiver;\\n        uint256 sellAmount;\\n        uint256 buyAmount;\\n        uint32 validTo;\\n        bytes32 appData;\\n        uint256 feeAmount;\\n        bytes32 kind;\\n        bool partiallyFillable;\\n        bytes32 sellTokenBalance;\\n        bytes32 buyTokenBalance;\\n    }\\n\\n    /// @dev Order kind constants\\n    bytes32 internal constant KIND_SELL =\\n        keccak256(\\\"sell\\\");\\n    bytes32 internal constant KIND_BUY =\\n        keccak256(\\\"buy\\\");\\n\\n    /// @dev Token balance constants\\n    bytes32 internal constant BALANCE_ERC20 =\\n        keccak256(\\\"erc20\\\");\\n    bytes32 internal constant BALANCE_EXTERNAL =\\n        keccak256(\\\"external\\\");\\n    bytes32 internal constant BALANCE_INTERNAL =\\n        keccak256(\\\"internal\\\");\\n\\n    /// @dev The order EIP-712 type hash\\n    bytes32 internal constant TYPE_HASH =\\n        keccak256(\\n            \\\"Order(\\\"\\n            \\\"address sellToken,\\\"\\n            \\\"address buyToken,\\\"\\n            \\\"address receiver,\\\"\\n            \\\"uint256 sellAmount,\\\"\\n            \\\"uint256 buyAmount,\\\"\\n            \\\"uint32 validTo,\\\"\\n            \\\"bytes32 appData,\\\"\\n            \\\"uint256 feeAmount,\\\"\\n            \\\"string kind,\\\"\\n            \\\"bool partiallyFillable,\\\"\\n            \\\"string sellTokenBalance,\\\"\\n            \\\"string buyTokenBalance\\\"\\n            \\\")\\\"\\n        );\\n\\n    /// @dev Computes the order hash for the given order data\\n    /// @param order The order to hash\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @return orderDigest The order digest\\n    function hash(Data memory order, bytes32 domainSeparator) internal pure returns (bytes32 orderDigest) {\\n        bytes32 structHash = keccak256(\\n            abi.encode(\\n                TYPE_HASH,\\n                order.sellToken,\\n                order.buyToken,\\n                order.receiver,\\n                order.sellAmount,\\n                order.buyAmount,\\n                order.validTo,\\n                order.appData,\\n                order.feeAmount,\\n                order.kind,\\n                order.partiallyFillable,\\n                order.sellTokenBalance,\\n                order.buyTokenBalance\\n            )\\n        );\\n        orderDigest = keccak256(abi.encodePacked(\\\"\\\\x19\\\\x01\\\", domainSeparator, structHash));\\n    }\\n}\\n\",\"keccak256\":\"0x9b8e973f4ab364c4dc43f72ee73171a589c5a9cadfb2778281e3c1e6bfc531f9\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IComposableCoW.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IConditionalOrder } from \\\"./IConditionalOrder.sol\\\";\\nimport { GPv2Order } from \\\"./GPv2Order.sol\\\";\\n\\n/// @title IComposableCoW - Interface for the ComposableCoW contract\\n/// @notice Registry for conditional orders on CoW Protocol\\ninterface IComposableCoW {\\n    /// @dev Proof location for merkle roots\\n    struct Proof {\\n        uint256 location;\\n        bytes data;\\n    }\\n\\n    /// @dev Payload passed for signature verification\\n    struct PayloadStruct {\\n        bytes32[] proof;\\n        IConditionalOrder.ConditionalOrderParams params;\\n        bytes offchainInput;\\n    }\\n\\n    // ============ Events ============\\n\\n    /// @notice Emitted when a conditional order is created\\n    event ConditionalOrderCreated(\\n        address indexed owner,\\n        IConditionalOrder.ConditionalOrderParams params\\n    );\\n\\n    /// @notice Emitted when a merkle root is set\\n    event MerkleRootSet(\\n        address indexed owner,\\n        bytes32 root,\\n        Proof proof\\n    );\\n\\n    // ============ State Variables ============\\n\\n    /// @notice Get the merkle root for an owner\\n    function roots(address owner) external view returns (bytes32);\\n\\n    /// @notice Check if a single order exists\\n    function singleOrders(address owner, bytes32 singleOrderHash) external view returns (bool);\\n\\n    /// @notice Get order-specific storage\\n    function cabinet(address owner, bytes32 ctx) external view returns (bytes32);\\n\\n    // ============ User Functions ============\\n\\n    /// @notice Create a single conditional order\\n    /// @param params The conditional order parameters\\n    /// @param dispatch If true, emit ConditionalOrderCreated event\\n    function create(\\n        IConditionalOrder.ConditionalOrderParams calldata params,\\n        bool dispatch\\n    ) external;\\n\\n    /// @notice Create a conditional order with context\\n    /// @param params The conditional order parameters\\n    /// @param factory Factory to generate context value\\n    /// @param data Data passed to factory\\n    /// @param dispatch If true, emit ConditionalOrderCreated event\\n    function createWithContext(\\n        IConditionalOrder.ConditionalOrderParams calldata params,\\n        IValueFactory factory,\\n        bytes calldata data,\\n        bool dispatch\\n    ) external;\\n\\n    /// @notice Remove a single conditional order\\n    /// @param singleOrderHash Hash of the order to remove: H(ConditionalOrderParams)\\n    function remove(bytes32 singleOrderHash) external;\\n\\n    /// @notice Set the merkle root for conditional orders\\n    /// @param root The merkle root\\n    /// @param proof Proof data for the root\\n    function setRoot(bytes32 root, Proof calldata proof) external;\\n\\n    /// @notice Set the merkle root with context\\n    /// @param root The merkle root\\n    /// @param proof Proof data for the root\\n    /// @param factory Factory to generate context value\\n    /// @param data Data passed to factory\\n    function setRootWithContext(\\n        bytes32 root,\\n        Proof calldata proof,\\n        IValueFactory factory,\\n        bytes calldata data\\n    ) external;\\n\\n    /// @notice Set cabinet value for an order\\n    /// @param ctx The context (order hash)\\n    /// @param value The value to store\\n    function setCabinet(bytes32 ctx, bytes32 value) external;\\n\\n    // ============ Watch-tower Functions ============\\n\\n    /// @notice Get a tradeable order with signature for submission to CoW API\\n    /// @param owner The owner of the conditional order\\n    /// @param params The conditional order parameters\\n    /// @param offchainInput Off-chain provided data\\n    /// @param proof Merkle proof (empty for single orders)\\n    /// @return order The tradeable GPv2Order\\n    /// @return signature The ERC-1271 signature for the order\\n    function getTradeableOrderWithSignature(\\n        address owner,\\n        IConditionalOrder.ConditionalOrderParams calldata params,\\n        bytes calldata offchainInput,\\n        bytes32[] calldata proof\\n    ) external view returns (GPv2Order.Data memory order, bytes memory signature);\\n\\n    /// @notice Compute the hash of conditional order params\\n    /// @param params The conditional order parameters\\n    /// @return The keccak256 hash\\n    function hash(IConditionalOrder.ConditionalOrderParams memory params) external pure returns (bytes32);\\n}\\n\\n/// @title IValueFactory - Interface for context value factories\\ninterface IValueFactory {\\n    function getValue(bytes calldata data) external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0x5d32361b94dc18b01210fb3924a1896ec3d2152c3ee5dee4170ad2ab9ca73c14\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IConditionalOrder.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { GPv2Order } from \\\"./GPv2Order.sol\\\";\\n\\n/// @title IConditionalOrder - Interface for conditional order handlers\\n/// @notice Defines the interface for creating conditional/programmatic orders on CoW Protocol\\ninterface IConditionalOrder {\\n    /// @dev Conditional order parameters stored on-chain\\n    struct ConditionalOrderParams {\\n        IConditionalOrder handler;\\n        bytes32 salt;\\n        bytes staticData;\\n    }\\n\\n    /// @notice Verifies that a discrete order is valid for the conditional order\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender calling isValidSignature\\n    /// @param _hash The EIP-712 order digest\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @param ctx The execution context (H(params) for single, merkle root for tree)\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data NOT known at creation time\\n    /// @param order The proposed discrete order\\n    function verify(\\n        address owner,\\n        address sender,\\n        bytes32 _hash,\\n        bytes32 domainSeparator,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput,\\n        GPv2Order.Data calldata order\\n    ) external view;\\n}\\n\\n/// @title IConditionalOrderGenerator - Interface for conditional order generators\\n/// @notice Extends IConditionalOrder to generate tradeable orders\\ninterface IConditionalOrderGenerator is IConditionalOrder {\\n    /// @notice Generates a tradeable GPv2Order based on the current state\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender (usually ComposableCoW)\\n    /// @param ctx The execution context\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data provided by the watch-tower\\n    /// @return order The generated GPv2Order.Data struct\\n    function getTradeableOrder(\\n        address owner,\\n        address sender,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput\\n    ) external view returns (GPv2Order.Data memory order);\\n}\\n\\n/// @title Conditional Order Errors\\n/// @notice Custom errors for signaling to watch-towers\\n\\n/// @dev Signal to try polling again at the next block\\nerror PollTryNextBlock(string reason);\\n\\n/// @dev Signal to try polling at a specific block\\nerror PollTryAtBlock(uint256 blockNumber, string reason);\\n\\n/// @dev Signal to try polling at a specific timestamp\\nerror PollTryAtEpoch(uint256 timestamp, string reason);\\n\\n/// @dev Signal to stop polling this order (completed or cancelled)\\nerror PollNever(string reason);\\n\\n/// @dev Signal that the order parameters are invalid\\nerror OrderNotValid(string reason);\\n\\n/// @dev Signal that the order is not currently tradeable\\nerror OrderNotReady(string reason);\\n\",\"keccak256\":\"0x8ed6bb23c9714b66979060191d71c9601b8cc69df40b8d9b06d284e00b318eca\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IERC1271.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IERC1271 - Standard Signature Validation Method for Contracts\\n/// @notice Interface for smart contract signature verification (EIP-1271)\\ninterface IERC1271 {\\n    /// @notice Verifies that the signature is valid for the given hash\\n    /// @param _hash The hash of the data signed\\n    /// @param _signature The signature bytes\\n    /// @return magicValue bytes4(0x1626ba7e) if valid, any other value if invalid\\n    function isValidSignature(\\n        bytes32 _hash,\\n        bytes calldata _signature\\n    ) external view returns (bytes4 magicValue);\\n}\\n\\n/// @dev Magic value returned by isValidSignature when the signature is valid\\nbytes4 constant ERC1271_MAGIC_VALUE = 0x1626ba7e;\\n\",\"keccak256\":\"0xfc8d13b64ef33eb48e545921ed5d2cd9aae1ab79a7696d13c35546517cf62afa\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IGPv2Settlement.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IGPv2Settlement - Interface for CoW Protocol Settlement contract\\n/// @notice Minimal interface for interacting with GPv2Settlement\\ninterface IGPv2Settlement {\\n    /// @notice Returns the domain separator used for signing orders\\n    function domainSeparator() external view returns (bytes32);\\n\\n    /// @notice Returns the address of the vault relayer\\n    /// @dev The vault relayer is approved to transfer tokens on behalf of users\\n    function vaultRelayer() external view returns (address);\\n\\n    /// @notice Invalidate an order to prevent it from being filled\\n    /// @dev This marks the order as cancelled in Settlement storage and emits an event\\n    ///      that CoW indexers/Explorer pick up to show \\\"cancelled\\\" status\\n    /// @param orderUid The unique order ID: abi.encodePacked(orderDigest, owner, validTo)\\n    function invalidateOrder(bytes calldata orderUid) external;\\n}\\n\",\"keccak256\":\"0xe5dc751c92f434e79a98219519783b2192f480f5d0dc698323bb7e5d24178b89\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x610100346101ce57601f613cfb38819003918201601f19168301916001600160401b038311848410176101d25780849260a0946040528339810103126101ce57610048816101e6565b610054602083016101e6565b91610061604082016101e6565b9061007a6080610073606084016101e6565b92016101e6565b6001600160a01b039093169384156101bb575f80546001600160a01b031981168717825560405196916001600160a01b03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09080a3600180556107086002556001600160a01b03169182156101ac576001600160a01b03169081156101ac576001600160a01b03169182156101ac576001600160a01b038416156101ac5760805260a05260c05260e052613b0090816101fb82396080518181816101bf01528181612c5201526132c0015260a051818181610d610152818161130e015281816114f901526124c7015260c0518181816104fe01528181610df601528181611a680152612310015260e0518181816102e30152818161047f015281816113aa015281816113fd0152611ae40152f35b63d92e233d60e01b5f5260045ffd5b631e4fbdf760e01b5f525f60045260245ffd5b5f80fd5b634e487b7160e01b5f52604160045260245ffd5b51906001600160a01b03821682036101ce5756fe6080806040526004361015610012575f80fd5b5f905f3560e01c908163031d974214611bc8575080631626ba7e14611b565780632fbff5a414611ac1578063507f0e7414611a975780635116063014611a5357806351fe1db514611a295780635485b15814611a0e57806355024ca714611953578063568ed812146119375780635778472a146118245780635e10bce4146117fa5780635f3e849f1461176357806363c69f08146116dd578063715018a6146116995780637489ec231461147a5780638009fb6a146113d957806381e6d3ce14611394578063856652e91461133d5780638b0f4834146112f85780638da5cb5b146112d15780638f7afbe6146106d55780639c3f1e9014610664578063a4362152146105e4578063b5848305146105bb578063c73bb4bd146104b8578063caf2185614610463578063cea4b43614610420578063d22b0586146103f6578063d7a3aca714610372578063de7cdda414610332578063e0b787e4146102c7578063ea6971861461029d578063eae2b0ab14610281578063ed75efd814610264578063f2fde38b146101f15763f887ea40146101aa575f80fd5b346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b80fd5b50346101ee5760203660031901126101ee5761020b611be2565b6102136130db565b6001600160a01b031680156102505781546001600160a01b03198116821783556001600160a01b03165f516020613aab5f395f51905f528380a380f35b631e4fbdf760e01b82526004829052602482fd5b50346101ee57806003193601126101ee576020604051610e108152f35b50346101ee57806003193601126101ee57602060405160418152f35b50346101ee5760203660031901126101ee5760406020916004358152600a83522054604051908152f35b50346101ee5760203660031901126101ee576102e1612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036103235761031c600435613143565b6001805580f35b631cb3967f60e21b8152600490fd5b50346101ee5760203660031901126101ee5761034f600435612919565b9061036e60405192839215158352604060208401526040830190611c0c565b0390f35b50346101ee5760203660031901126101ee5761038c611be2565b6103946130db565b6001600160a01b031680156103e757600380546001600160a01b0319811683179091556001600160a01b03167f7bf6e789688cd776b5170517f39970fea2870a79d649c8443dd2b0ec62823eb78380a380f35b63d92e233d60e01b8252600482fd5b50346101ee5760203660031901126101ee5760406020916004358152600883522054604051908152f35b50346101ee5760403660031901126101ee576020906040906001600160a01b03610448611be2565b16815260078352818120602435825283522054604051908152f35b50346101ee5760203660031901126101ee5761047d612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036103235761031c600435612b06565b50346101ee5760203660031901126101ee576104d2611be2565b6104da6130db565b6001600160a01b031680156103e757604051634daa966160e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9081156105b0578391610572575b506105418183613793565b6001600160a01b0316907f1ed99bd68e15d0355032c83534ad49f29b5eeba77f51b957e6ee3c09f561a7b88380a380f35b90506020813d6020116105a8575b8161058d60209383611eaf565b810103126105a45761059e9061203f565b5f610536565b8280fd5b3d9150610580565b6040513d85823e3d90fd5b50346101ee57806003193601126101ee576003546040516001600160a01b039091168152602090f35b50346101ee5760203660031901126101ee576004356106016130db565b604181108015610659575b61064a5760407fd41ae331cdd0716e9a1370baa1403c14b9dca36a1be170877840f86efb15846f91600254908060025582519182526020820152a180f35b630e1ccb6f60e31b8252600482fd5b50610e10811161060c565b50346101ee5760203660031901126101ee5760406106bc91600435815260046020522061069081611ed2565b9060ff600a8201541690600c600b820154910154906106c7604051958695608087526080870190611c30565b936020860190611cf0565b604084015260608301520390f35b50346101ee5760403660031901126101ee576004356001600160401b0381116112cd57806004019161016060031983360301126101ee57602435610717612a1a565b61072084612881565b336001600160a01b03909116036112bf5760248301906001600160a01b0361074783612881565b16156112b05760848401926001600160a01b0361076385612881565b16158015611294575b6112855761077984612881565b60a4860192906001600160a01b0361079085612881565b6001600160a01b0390921691161461127657338252600760205260408220818352602052604082205461126757338252600660205260646040832054101561125857606486016107e08189612895565b33916107ed913691611feb565b906107f7916135bb565b60c4870190610806828a612895565b3391610813913691611feb565b9061081d916135bb565b60405160606020820190815290916001600160a01b0361083c8c611bf8565b1660808401526001600160a01b0361085389611bf8565b1660a084015260448a0199818c61086a8d826128c7565b60c0880161016090526101e0880190610882926128f9565b9161088c916128c7565b868303607f190160e08801526108a292916128f9565b6001600160a01b036108b38c611bf8565b166101008601528c866001600160a01b036108cd8c611bf8565b166101208801526108dd916128c7565b868303607f19016101408801526108f492916128f9565b9460e482013592836101608701526101048301359485610180880152610124840196600160a01b6001900361092889611bf8565b166101a08201528061014486019961093f8b611fac565b15156101c08301528b604083015242606083015203601f19810182526109659082611eaf565b5190209c8d8a52600460205260408a20600a015460ff1660048110156112445761123557918b979593918f9795936109bf6040519a6109a38c611e12565b6109b86040519b6109b38d611e41565b611bf8565b8b52611bf8565b60208a0152356001600160401b038111611231576109e39060043691860101612021565b6040890152356001600160401b03811161122d57610a079060043691850101612021565b6060880152610a158d611bf8565b6080880152610a238b611bf8565b60a0880152356001600160401b0381116112295791610a51610a6694926004610a7198979536920101612021565b60c088015260e0870152610100860152611bf8565b610120840152611fac565b610140820152815260016020808301828152604080850187815242606087019081528c8952600485528289209651805188546001600160a01b03199081166001600160a01b03928316178a559682015197890180549097169716969096179094559084015180519394919360028701916001600160401b03821161109b578190610afb8454611d59565b601f81116111d9575b50602090601f8311600114611177578b9261116c575b50508160011b915f199060031b1c19161790555b6060810151805160038701916001600160401b03821161109b578190610b548454611d59565b601f811161111c575b50602090601f83116001146110ba578b926110af575b50508160011b915f199060031b1c19161790555b60808101516004860180546001600160a01b039283166001600160a01b03199182161790915560a083015160058801805491909316911617905560c0810151805160068701916001600160401b03821161109b578190610be78454611d59565b601f811161104b575b50602090601f8311600114610fe9578b92610fde575b50508160011b915f199060031b1c19161790555b60e0810151600786015561010081015160088601556101208101516009860180546101409093015160ff60a01b90151560a01b166001600160a01b039092166001600160a81b03199093169290921717905551600a8401906004811015610fca57815460ff191660ff9190911617905551600b83015551600c909101558582526005602052604082208190556001600160a01b03610cb788612881565b168252600660205260408220805490600160401b821015610fb65790610ce291600182018155611d30565b81545f1960039290921b91821b19169088901b1790556001600160a01b03610d0988612881565b16825260076020526040822081835260205285604083205560018060a01b0360035416906040519087602083015260208252610d46604083611eaf565b60405192610d5384611e5d565b8352602083015260408201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690813b156105a457610dbc839283926040519485809481936335fd70e560e11b83526040600484015260448301906120a4565b6001602483015203925af18015610fab57908291610f96575b5050610de084612881565b604051634daa966160e11b8152906020826004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156105b0578392610f5a575b50604051636eb1769f60e11b81523060048201526001600160a01b038381166024830152919091169290602081604481875afa918215610f4e5791610f0c575b5092610ecd610ec7610ec1610ebb60209b6060978c9a977f0d7b86882845c929e022510097af482fe9d559b56b818bb2c8630eff4d3ed9539a60018060ff1b0311610efc575b5050612881565b94612881565b97612881565b91612881565b604080516001600160a01b0398891681529288168a84015290871690820152941693a360018055604051908152f35b610f0591613793565b5f80610eb4565b9294919390506020833d602011610f46575b81610f2b60209383611eaf565b81010312610f425791519093919290610ecd610e6e565b5f80fd5b3d9150610f1e565b604051903d90823e3d90fd5b9091506020813d602011610f8e575b81610f7660209383611eaf565b810103126105a457610f879061203f565b905f610e2e565b3d9150610f69565b81610fa091611eaf565b6101ee57805f610dd5565b6040513d84823e3d90fd5b634e487b7160e01b84526041600452602484fd5b634e487b7160e01b87526021600452602487fd5b015190505f80610c06565b848c52818c209250601f1984168c5b818110611033575090846001959493921061101b575b505050811b019055610c1a565b01515f1960f88460031b161c191690555f808061100e565b92936020600181928786015181550195019301610ff8565b909150838b5260208b20601f840160051c81019160208510611091575b90601f859493920160051c01905b8181106110835750610bf0565b8c8155849350600101611076565b9091508190611068565b634e487b7160e01b8a52604160045260248afd5b015190505f80610b73565b848c52818c209250601f1984168c5b81811061110457509084600195949392106110ec575b505050811b019055610b87565b01515f1960f88460031b161c191690555f80806110df565b929360206001819287860151815501950193016110c9565b909150838b5260208b20601f840160051c81019160208510611162575b90601f859493920160051c01905b8181106111545750610b5d565b8c8155849350600101611147565b9091508190611139565b015190505f80610b1a565b848c52818c209250601f1984168c5b8181106111c157509084600195949392106111a9575b505050811b019055610b2e565b01515f1960f88460031b161c191690555f808061119c565b92936020600181928786015181550195019301611186565b909150838b5260208b20601f840160051c8101916020851061121f575b90601f859493920160051c01905b8181106112115750610b04565b8c8155849350600101611204565b90915081906111f6565b8980fd5b8a80fd5b8b80fd5b63966753c560e01b8a5260048afd5b634e487b7160e01b8b52602160045260248bfd5b6352f9988b60e01b8252600482fd5b630ced304360e01b8252600482fd5b6333910aef60e11b8252600482fd5b63d92e233d60e01b8152600490fd5b506001600160a01b036112a960a48701612881565b161561076c565b63a768d7fd60e01b8352600483fd5b6282b42960e81b8252600482fd5b5080fd5b50346101ee57806003193601126101ee57546040516001600160a01b039091168152602090f35b50346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346101ee5760403660031901126101ee57611357611be2565b6001600160a01b03168152600660205260408120805460243592908310156101ee5760206113858484611d30565b90549060031b1c604051908152f35b50346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346101ee5760403660031901126101ee576113f3611be2565b6113fb612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316330361146b576001600160a01b031681526007602090815260408083206024358452909152812054801561145c5761031c90613143565b63d36d896560e01b8252600482fd5b631cb3967f60e21b8252600482fd5b5034610f42576020366003190112610f4257600435611497612a1a565b805f52600460205260405f20600a81019060ff82541690600482101561168557811561167657546001600160a01b03163303611668575f190161165957815f52600860205260405f205461164a57600360ff1982541617905560018060a01b037f000000000000000000000000000000000000000000000000000000000000000016611585602060018060a01b0360035416845f526005825260405f205460405190868483015283825261154c604083611eaf565b6040519261155984611e5d565b835283830152604082015260405180938192635500079d60e01b835284600484015260248301906120a4565b0381855afa90811561160d575f91611618575b50813b15610f42575f916024839260405194859384926395bc267360e01b845260048401525af1801561160d576115f8575b5033907f0e00387e025961780b7f127ffab3dfa3118f4d9047a3508c3ae9a0285245a15e8380a36001805580f35b6116059192505f90611eaf565b5f905f6115ca565b6040513d5f823e3d90fd5b90506020813d602011611642575b8161163360209383611eaf565b81010312610f4257515f611598565b3d9150611626565b6313e916e560e01b5f5260045ffd5b632b12537f60e21b5f5260045ffd5b6282b42960e81b5f5260045ffd5b63d36d896560e01b5f5260045ffd5b634e487b7160e01b5f52602160045260245ffd5b34610f42575f366003190112610f42576116b16130db565b5f80546001600160a01b0319811682556001600160a01b03165f516020613aab5f395f51905f528280a3005b34610f42576020366003190112610f42576001600160a01b036116fe611be2565b165f52600660205260405f206040519081602082549182815201915f5260205f20905f5b81811061174d5761036e8561173981870382611eaf565b604051918291602083526020830190611cfd565b8254845260209093019260019283019201611722565b34610f42576060366003190112610f425761177c611be2565b6024356001600160a01b03811691828203610f42576044359061179d6130db565b6001600160a01b03169182156117eb5783156117eb57816117e27f401f439d865a766757ec78675925bd67198d5e78805aa41691b34b5d6a6cbbe69360209386613101565b604051908152a3005b63d92e233d60e01b5f5260045ffd5b34610f42576020366003190112610f425760406118186004356127b8565b82519182526020820152f35b34610f42576020366003190112610f42575f606060405161184481611e12565b60405161185081611e41565b83815283602082015282604082015282808201528360808201528360a08201528260c08201528360e0820152836101008201528361012082015283610140820152815282602082015282604082015201526004355f52600460205260405f206040516118bb81611e12565b6118c482611ed2565b815260ff600a8301541691602082019060048410156116855761191b938252600c600b82015491604085019283520154906060840191825261192760405195869560208752516080602088015260a0870190611c30565b93516040860190611cf0565b5160608401525160808301520390f35b34610f42575f366003190112610f425760206040516107088152f35b34610f42576020366003190112610f425760043561196f6130db565b805f52600460205260405f2060ff600a8201541660048110156116855760010361165957815f52600860205260405f2054156119ff575f82815260086020908152604080832083905560098252808320839055600a909152812081905590546001600160a01b031691907fe2210120d48fe93da6dc8d1873a097516ebbbe5e3f47c5afb525bb2263f1e6e09080a3005b631feb8b7960e21b5f5260045ffd5b34610f42575f366003190112610f4257602060405160648152f35b34610f42576020366003190112610f42576004355f526009602052602060405f2054604051908152f35b34610f42575f366003190112610f42576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610f42576020366003190112610f42576004355f526005602052602060405f2054604051908152f35b34610f42576040366003190112610f4257611ada611be2565b611ae2612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03163303611b475760018060a01b03165f52600760205260405f206024355f5260205260405f2054801561167657611b4190612b06565b60018055005b631cb3967f60e21b5f5260045ffd5b34610f42576040366003190112610f42576024356001600160401b038111610f425736602382011215610f42576004810135906001600160401b038211610f42573660248383010111610f42576020916024611bb592016004356120d3565b6040516001600160e01b03199091168152f35b34610f42575f366003190112610f42576020906002548152f35b600435906001600160a01b0382168203610f4257565b35906001600160a01b0382168203610f4257565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b9060018060a01b03825116815260018060a01b03602083015116602082015261014080611cbc611c86611c7460408701516101606040880152610160870190611c0c565b60608701518682036060880152611c0c565b60018060a01b03608087015116608086015260018060a01b0360a08701511660a086015260c086015185820360c0870152611c0c565b60e080860151908501526101008086015190850152610120808601516001600160a01b031690850152930151151591015290565b9060048210156116855752565b90602080835192838152019201905f5b818110611d1a5750505090565b8251845260209384019390920191600101611d0d565b8054821015611d45575f5260205f2001905f90565b634e487b7160e01b5f52603260045260245ffd5b90600182811c92168015611d87575b6020831014611d7357565b634e487b7160e01b5f52602260045260245ffd5b91607f1691611d68565b5f9291815491611da083611d59565b8083529260018116908115611df55750600114611dbc57505050565b5f9081526020812093945091925b838310611ddb575060209250010190565b600181602092949394548385870101520191019190611dca565b915050602093945060ff929192191683830152151560051b010190565b608081019081106001600160401b03821117611e2d57604052565b634e487b7160e01b5f52604160045260245ffd5b61016081019081106001600160401b03821117611e2d57604052565b606081019081106001600160401b03821117611e2d57604052565b61018081019081106001600160401b03821117611e2d57604052565b604081019081106001600160401b03821117611e2d57604052565b601f909101601f19168101906001600160401b03821190821017611e2d57604052565b90604051611edf81611e41565b82546001600160a01b0390811682526001840154166020820152604051909283916101409160ff9160099190611f2381611f1c8160028601611d91565b0382611eaf565b6040860152604051611f3c81611f1c8160038601611d91565b606086015260048101546001600160a01b03908116608087015260058201541660a0860152604051611f7581611f1c8160068601611d91565b60c0860152600781015460e0860152600881015461010086015201546001600160a01b03811661012085015260a01c161515910152565b35908115158203610f4257565b6001600160401b038111611e2d5760051b60200190565b6001600160401b038111611e2d57601f01601f191660200190565b929192611ff782611fd0565b916120056040519384611eaf565b829481845281830111610f42578281602093845f960137010152565b9080601f83011215610f425781602061203c93359101611feb565b90565b51906001600160a01b0382168203610f4257565b51908115158203610f4257565b81601f82011215610f425760208151910161207a82611fd0565b926120886040519485611eaf565b82845282820111610f4257815f926020928386015e8301015290565b906060604061203c9360018060a01b038151168452602081015160208501520151918160408201520190611c0c565b81838101036101a08112610f425761018013610f4257604051926120f684611e78565b6120ff83611bf8565b845261210d60208401611bf8565b602085015261211e60408401611bf8565b6040850152606083013560608501526080830135608085015260a083013563ffffffff81168103610f425760a085015260c083013560c085015260e083013560e085015261010083013561010085015261217b6101208401611fac565b61012085015261014083810135908501526101608084013590850152610180830135926001600160401b038411610f425760608482018383010312610f4257604051936121c785611e5d565b818101356001600160401b038111610f4257838301601f8284860101011215610f42578082840101356121f981611fb9565b916122076040519384611eaf565b818352602083019086860160208460051b83888a0101010111610f4257906020828688010101915b60208460051b82888a01010101831061278e5750505090865250818101602001356001600160401b038111610f4257606081838501018585010312610f42576040519061227b82611e5d565b8383018101356001600160a01b0381168103610f4257825283830181016020818101359084015260400135906001600160401b038211610f42576122c791868601918587010101612021565b60408201526020860152604081830101359060018060401b038211610f42576122f4938301920101612021565b6040838101919091525163f698da2560e01b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa90811561160d575f9161275c575b507fd5a25ba2e97094ad7d83dc28a6572da797d6b3e7fc6663bd93efb789fc17e48960018060a01b0385511660018060a01b036020870151168660018060a01b036040820151166060820151608083015163ffffffff60a08501511660c08501519060e086015192610100870151946101208801511515966101606101408a0151990151996040519b60208d019d8e5260408d015260608c015260808b015260a08a015260c089015260e08801526101008701526101208601526101408501526101608401526101808301526101a08201526101a0815261242b6101c082611eaf565b51902060405190602082019261190160f01b84526022830152604282015260428152612458606282611eaf565b51902003612756575f61249f60208301516124c3604085015194516124b1604051968795869563137050cb60e11b87523060048801526080602488015260848701906120a4565b85810360031901604487015290611c0c565b83810360031901606485015290611cfd565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa5f9181612659575b506125045750505f90565b815181516001600160a01b03908116911614918261263a575b8261261b575b82612600575b826125e5575b826125d2575b826125bf575b826125aa575b82612591575b8261257c575b82612568575b505061255d575f90565b630b135d3f60e11b90565b610160919250810151910151145f80612553565b9150610140820151610140820151149161254d565b9150610120820151151561012082015115151491612547565b91506101008201516101008201511491612541565b915060e082015160e0820151149161253b565b915060c082015160c08201511491612535565b91506125fa608083015160808301519061387e565b9161252f565b9150612615606083015160608301519061387e565b91612529565b604080820151908301516001600160a01b039081169116149250612523565b602080820151908301516001600160a01b03908116911614925061251d565b9091503d805f833e61266b8183611eaf565b8101908082036101a08112610f425761018013610f42576040519161268f83611e78565b6126988261203f565b83526126a66020830161203f565b60208401526126b76040830161203f565b6040840152606082015160608401526080820151608084015260a082015163ffffffff81168103610f425760a084015260c082015160c084015260e082015160e08401526101008201516101008401526127146101208301612053565b610120840152610140828101519084015261016080830151908401526101808201516001600160401b038111610f425761274e9201612060565b50905f6124f9565b50505f90565b90506020813d602011612786575b8161277760209383611eaf565b81010312610f4257515f612348565b3d915061276a565b60208080938535815201930192915061222f565b9190826040910312610f42576020825192015190565b5f52600460205260405f209060ff600a8301541660048110156116855760010361287a5760018201548254600b840154604080516368c4be2560e01b81526060600482015295909386936001600160a01b03918216938593849390921691612827906064850190600201611d91565b916024840152604483015203915afa91821561160d575f905f9361284a57509190565b905061286f91925060403d604011612873575b6128678183611eaf565b8101906127a2565b9091565b503d61285d565b5f91508190565b356001600160a01b0381168103610f425790565b903590601e1981360301821215610f4257018035906001600160401b038211610f4257602001918136038313610f4257565b9035601e1982360301811215610f42570160208101919035906001600160401b038211610f42578136038313610f4257565b908060209392818452848401375f828201840152601f01601f1916010190565b5f52600460205260405f209060ff600a830154166004811015611685576001036129e857600182015482546040805163632224a760e01b81526004810191909152935f9285926001600160a01b0391821692849283921690612982906044840190600201611d91565b90602483015203915afa91821561160d575f905f936129a057509190565b9250503d805f843e6129b28184611eaf565b820191604081840312610f42576129c881612053565b60208201519093906001600160401b038111610f425761203c9201612060565b90505f906040516129fa604082611eaf565b601081526f6f726465725f6e6f745f61637469766560801b602082015290565b600260015414612a2b576002600155565b633ee5aeb560e01b5f5260045ffd5b91908203918211612a4757565b634e487b7160e01b5f52601160045260245ffd5b602081016020825282518091526040820191602060408360051b8301019401925f915b838310612a8d57505050505090565b9091929394602080612acb600193603f1986820301875289519083612abb8351604084526040840190611c0c565b9201519084818403910152611c0c565b97019301930191939290612a7e565b612af260409295949395606083526060830190611c0c565b6001600160a01b0390951660208201520152565b5f815f52600460205260405f2092600a84019260ff84541660048110156116855760010361165957805f52600860205260405f205490600b86019182549060018201809211612a4757036119ff57612b5f602496611ed2565b94815f5260086020525f6040812055815f52600960205260405f205494825f52600a60205260405f2054966080810196602060018060a01b038951166040519b8c80926370a0823160e01b82523060048301525afa998a1561160d575f9a6130a6575b5060249060a083019a602060018060a01b038d5116604051948580926370a0823160e01b82523060048301525afa92831561160d575f93613072575b50865f5260096020525f6040812055865f52600a6020525f60408120558082115f1461306957612c2d91612a3a565b985b8082111561306157612c4091612a3a565b80156130525789516001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081169a91612c839184918d9116613101565b60c083015189519b5181516001600160a01b039d8e169d9091169a91612cb191602090820181019101613495565b998a5160028101809111612a4757612cc8906138d6565b9c612cd390846139f9565b8d60405191612ce183611e94565b612ce9613933565b83526020830152612cf99061358a565b52612d038d61358a565b50612d0e90846139f9565b60405190612d1b82611e94565b612d23613933565b82526020820152612d338d613597565b52612d3d8c613597565b505f5b8a51811015612d8057612d53818c6135a7565b51906002810191828211612a4757828f612d7992612d73600196836135a7565b526135a7565b5001612d40565b50929598509295989990939699803b15610f425760405163f0dbeea560e01b8152915f918391829084908290612db99060048301612a5b565b03925af1801561160d5761303d575b50610120840180516001600160a01b0316612f95575b505086545f198114612f81577f5b19a0b08bbd8e7537d63d9f1db0947c5eba6d93e02a7e0a1520ea5f29bd644c6040612e9794897f746e7bce16b1125d16e5673941791d7ff1f65d656a3c7346b7c2aa614814850f60608d97600184980180995585519089825260208201528486820152a28151908582526020820152a2602083810151604080860151865191516343fc086560e01b81529586936001600160a01b039081169385938493928992169060048501612ada565b03915afa918215612f76578492612f36575b506101008301518015159182612f2b575b50508115612f23575b50612ed0575b5050505050565b825460ff1916600217909255505191546040519081526001600160a01b0392909216917f11c239861e7b77ea2869389e0f03373ea1d12f407575794b517a10d10c54333390602090a35f80808080612ec9565b90505f612ec3565b101590505f80612eba565b9091506020813d602011612f6e575b81612f5260209383611eaf565b81010312612f6a57612f6390612053565b905f612ea9565b8380fd5b3d9150612f45565b6040513d86823e3d90fd5b634e487b7160e01b85526011600452602485fd5b81516040516370a0823160e01b81523060048201529190602090839060249082906001600160a01b03165afa918215613032578792612ffe575b5081612fdc575b50612dde565b91519151612ff6926001600160a01b039182169116613101565b5f8080612fd6565b9091506020813d60201161302a575b8161301a60209383611eaf565b81010312610f425751905f612fcf565b3d915061300d565b6040513d89823e3d90fd5b61304a9195505f90611eaf565b5f935f612dc8565b639671a89f60e01b5f5260045ffd5b50505f612c40565b50505f98612c2f565b9092506020813d60201161309e575b8161308e60209383611eaf565b81010312610f425751915f612bfe565b3d9150613081565b9099506020813d6020116130d3575b816130c260209383611eaf565b81010312610f425751986024612bc2565b3d91506130b5565b5f546001600160a01b031633036130ee57565b63118cdaa760e01b5f523360045260245ffd5b60405163a9059cbb60e01b60208201526001600160a01b0390921660248301526044808301939093529181526131419161313c606483611eaf565b613957565b565b905f90825f52600460205260405f209060ff600a8301541660048110156116855760010361165957835f52600860205260405f2054613486576131ce9361318983611ed2565b9260018060a01b0360208501511690604080860151600b60018060a01b03885116930193845493849284519b8c94859384936368c4be2560e01b855260048501612ada565b03915afa96871561160d575f97613464575b5060018101809111612a4757825f52600860205260405f2055606084015193608081019561322160018060a01b038851169660208082518301019101613495565b9586519060018201809211612a475761323c613242926138d6565b996139f9565b6040519061324f82611e94565b613257613933565b825260208201526132678961358a565b526132718861358a565b505f5b86518110156132b45761328781886135a7565b51906001810191828211612a4757826132ad916132a66001958e6135a7565b528b6135a7565b5001613274565b509396929591945092917f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316803b15610f425760405163f0dbeea560e01b8152915f9183918290849082906133149060048301612a5b565b03925af1801561160d5761344e575b50516040516370a0823160e01b815230600482015290602090829060249082906001600160a01b03165afa908115610fab57829161341b575b5060249260209186845260098352604084205560a0600180821b0391015116604051938480926370a0823160e01b82523060048301525afa91821561340e5781926133cb575b5091602091604084865f516020613a8b5f395f51905f529652600a8552205554604051908152a2565b9150916020823d602011613406575b816133e760209383611eaf565b81010312610f4257905190915f516020613a8b5f395f51905f526133a2565b3d91506133da565b50604051903d90823e3d90fd5b90506020813d602011613446575b8161343660209383611eaf565b81010312610f425751602461335c565b3d9150613429565b61345b9192505f90611eaf565b5f906020613323565b61347e91975060403d604011612873576128678183611eaf565b50955f6131e0565b63e617d13160e01b5f5260045ffd5b602081830312610f42578051906001600160401b038211610f4257019080601f83011215610f42578151916134c983611fb9565b926134d76040519485611eaf565b80845260208085019160051b83010191838311610f425760208101915b83831061350357505050505090565b82516001600160401b038111610f42578201906040828703601f190112610f42576040519061353182611e94565b60208301516001600160401b038111610f425787602061355392860101612060565b82526040830151916001600160401b038311610f425761357b88602080969581960101612060565b838201528152019201916134f4565b805115611d455760200190565b805160011015611d455760400190565b8051821015611d455760209160051b010190565b9190918051801561378d57906020806135d8938301019101613495565b6040516020810190653937baba32b960d11b8252600681526135fb602682611eaf565b5190205f5b8251811015613786578161361482856135a7565b51516040516136426020828180820195805191829101875e81015f838201520301601f198101835282611eaf565b51902003613653575b600101613600565b602061365f82856135a7565b5101518051810190602081830312610f42576020810151906001600160401b038211610f425701808203601f19810192919060c013610f42576040519160c083016001600160401b03811184821017611e2d576040526020820151600a811015610f425783526136d16040830161203f565b60208401526136e26060830161203f565b604084019081526080830151606085015260a0830151909490916001600160401b038311610f4257602092838061371d930191860101612060565b6080850152607f190112610f425760405191602083016001600160401b03811184821017611e2d5760405260c090910151825260a00152516001600160a01b0390811690861680820361377157505061364b565b63041bc0b160e41b5f5260045260245260445ffd5b5050509050565b50509050565b60405190602082019263095ea7b360e01b845260018060a01b0316928360248401525f196044840152604483526137cb606484611eaf565b82516001600160a01b038316915f91829182855af1906137e96139ca565b82613844575b5081613839575b501561380157505050565b61313c613141936040519063095ea7b360e01b602083015260248201525f604482015260448152613833606482611eaf565b82613957565b90503b15155f6137f6565b8051919250811591821561385c575b5050905f6137ef565b8192509060209181010312610f425760206138779101612053565b5f80613853565b908082146138cf578082119182156138c85780925b156138ba57906138a291612a3a565b606481029080820460641490151715612a4757111590565b6138c391612a3a565b6138a2565b8192613893565b5050600190565b906138e082611fb9565b6138ed6040519182611eaf565b82815280926138fe601f1991611fb9565b01905f5b82811061390e57505050565b60209060405161391d81611e94565b6060815260608382015282828501015201613902565b60405190613942604083611eaf565b60068252653937baba32b960d11b6020830152565b5f8061397f9260018060a01b03169360208151910182865af16139786139ca565b9083613a2c565b80519081151591826139a7575b50506139955750565b635274afe760e01b5f5260045260245ffd5b8192509060209181010312610f425760206139c29101612053565b155f8061398c565b3d156139f4573d906139db82611fd0565b916139e96040519384611eaf565b82523d5f602084013e565b606090565b9060405191602083015260018060a01b031660408201525f6060820152600360808201526080815261203c60a082611eaf565b90613a505750805115613a4157805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580613a81575b613a61575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b15613a5956feed6ad11a587c194b3ad43896e949cb9a05975419926eda9b6b571d1847c9a7aa8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0a264697066735822122032d20429e3a65475abb436679b0cee59ab6fff6b1cdf128a0d6db12d899ed0ae64736f6c634300081e0033",
  "deployedBytecode": "0x6080806040526004361015610012575f80fd5b5f905f3560e01c908163031d974214611bc8575080631626ba7e14611b565780632fbff5a414611ac1578063507f0e7414611a975780635116063014611a5357806351fe1db514611a295780635485b15814611a0e57806355024ca714611953578063568ed812146119375780635778472a146118245780635e10bce4146117fa5780635f3e849f1461176357806363c69f08146116dd578063715018a6146116995780637489ec231461147a5780638009fb6a146113d957806381e6d3ce14611394578063856652e91461133d5780638b0f4834146112f85780638da5cb5b146112d15780638f7afbe6146106d55780639c3f1e9014610664578063a4362152146105e4578063b5848305146105bb578063c73bb4bd146104b8578063caf2185614610463578063cea4b43614610420578063d22b0586146103f6578063d7a3aca714610372578063de7cdda414610332578063e0b787e4146102c7578063ea6971861461029d578063eae2b0ab14610281578063ed75efd814610264578063f2fde38b146101f15763f887ea40146101aa575f80fd5b346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b80fd5b50346101ee5760203660031901126101ee5761020b611be2565b6102136130db565b6001600160a01b031680156102505781546001600160a01b03198116821783556001600160a01b03165f516020613aab5f395f51905f528380a380f35b631e4fbdf760e01b82526004829052602482fd5b50346101ee57806003193601126101ee576020604051610e108152f35b50346101ee57806003193601126101ee57602060405160418152f35b50346101ee5760203660031901126101ee5760406020916004358152600a83522054604051908152f35b50346101ee5760203660031901126101ee576102e1612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036103235761031c600435613143565b6001805580f35b631cb3967f60e21b8152600490fd5b50346101ee5760203660031901126101ee5761034f600435612919565b9061036e60405192839215158352604060208401526040830190611c0c565b0390f35b50346101ee5760203660031901126101ee5761038c611be2565b6103946130db565b6001600160a01b031680156103e757600380546001600160a01b0319811683179091556001600160a01b03167f7bf6e789688cd776b5170517f39970fea2870a79d649c8443dd2b0ec62823eb78380a380f35b63d92e233d60e01b8252600482fd5b50346101ee5760203660031901126101ee5760406020916004358152600883522054604051908152f35b50346101ee5760403660031901126101ee576020906040906001600160a01b03610448611be2565b16815260078352818120602435825283522054604051908152f35b50346101ee5760203660031901126101ee5761047d612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031633036103235761031c600435612b06565b50346101ee5760203660031901126101ee576104d2611be2565b6104da6130db565b6001600160a01b031680156103e757604051634daa966160e11b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9081156105b0578391610572575b506105418183613793565b6001600160a01b0316907f1ed99bd68e15d0355032c83534ad49f29b5eeba77f51b957e6ee3c09f561a7b88380a380f35b90506020813d6020116105a8575b8161058d60209383611eaf565b810103126105a45761059e9061203f565b5f610536565b8280fd5b3d9150610580565b6040513d85823e3d90fd5b50346101ee57806003193601126101ee576003546040516001600160a01b039091168152602090f35b50346101ee5760203660031901126101ee576004356106016130db565b604181108015610659575b61064a5760407fd41ae331cdd0716e9a1370baa1403c14b9dca36a1be170877840f86efb15846f91600254908060025582519182526020820152a180f35b630e1ccb6f60e31b8252600482fd5b50610e10811161060c565b50346101ee5760203660031901126101ee5760406106bc91600435815260046020522061069081611ed2565b9060ff600a8201541690600c600b820154910154906106c7604051958695608087526080870190611c30565b936020860190611cf0565b604084015260608301520390f35b50346101ee5760403660031901126101ee576004356001600160401b0381116112cd57806004019161016060031983360301126101ee57602435610717612a1a565b61072084612881565b336001600160a01b03909116036112bf5760248301906001600160a01b0361074783612881565b16156112b05760848401926001600160a01b0361076385612881565b16158015611294575b6112855761077984612881565b60a4860192906001600160a01b0361079085612881565b6001600160a01b0390921691161461127657338252600760205260408220818352602052604082205461126757338252600660205260646040832054101561125857606486016107e08189612895565b33916107ed913691611feb565b906107f7916135bb565b60c4870190610806828a612895565b3391610813913691611feb565b9061081d916135bb565b60405160606020820190815290916001600160a01b0361083c8c611bf8565b1660808401526001600160a01b0361085389611bf8565b1660a084015260448a0199818c61086a8d826128c7565b60c0880161016090526101e0880190610882926128f9565b9161088c916128c7565b868303607f190160e08801526108a292916128f9565b6001600160a01b036108b38c611bf8565b166101008601528c866001600160a01b036108cd8c611bf8565b166101208801526108dd916128c7565b868303607f19016101408801526108f492916128f9565b9460e482013592836101608701526101048301359485610180880152610124840196600160a01b6001900361092889611bf8565b166101a08201528061014486019961093f8b611fac565b15156101c08301528b604083015242606083015203601f19810182526109659082611eaf565b5190209c8d8a52600460205260408a20600a015460ff1660048110156112445761123557918b979593918f9795936109bf6040519a6109a38c611e12565b6109b86040519b6109b38d611e41565b611bf8565b8b52611bf8565b60208a0152356001600160401b038111611231576109e39060043691860101612021565b6040890152356001600160401b03811161122d57610a079060043691850101612021565b6060880152610a158d611bf8565b6080880152610a238b611bf8565b60a0880152356001600160401b0381116112295791610a51610a6694926004610a7198979536920101612021565b60c088015260e0870152610100860152611bf8565b610120840152611fac565b610140820152815260016020808301828152604080850187815242606087019081528c8952600485528289209651805188546001600160a01b03199081166001600160a01b03928316178a559682015197890180549097169716969096179094559084015180519394919360028701916001600160401b03821161109b578190610afb8454611d59565b601f81116111d9575b50602090601f8311600114611177578b9261116c575b50508160011b915f199060031b1c19161790555b6060810151805160038701916001600160401b03821161109b578190610b548454611d59565b601f811161111c575b50602090601f83116001146110ba578b926110af575b50508160011b915f199060031b1c19161790555b60808101516004860180546001600160a01b039283166001600160a01b03199182161790915560a083015160058801805491909316911617905560c0810151805160068701916001600160401b03821161109b578190610be78454611d59565b601f811161104b575b50602090601f8311600114610fe9578b92610fde575b50508160011b915f199060031b1c19161790555b60e0810151600786015561010081015160088601556101208101516009860180546101409093015160ff60a01b90151560a01b166001600160a01b039092166001600160a81b03199093169290921717905551600a8401906004811015610fca57815460ff191660ff9190911617905551600b83015551600c909101558582526005602052604082208190556001600160a01b03610cb788612881565b168252600660205260408220805490600160401b821015610fb65790610ce291600182018155611d30565b81545f1960039290921b91821b19169088901b1790556001600160a01b03610d0988612881565b16825260076020526040822081835260205285604083205560018060a01b0360035416906040519087602083015260208252610d46604083611eaf565b60405192610d5384611e5d565b8352602083015260408201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690813b156105a457610dbc839283926040519485809481936335fd70e560e11b83526040600484015260448301906120a4565b6001602483015203925af18015610fab57908291610f96575b5050610de084612881565b604051634daa966160e11b8152906020826004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156105b0578392610f5a575b50604051636eb1769f60e11b81523060048201526001600160a01b038381166024830152919091169290602081604481875afa918215610f4e5791610f0c575b5092610ecd610ec7610ec1610ebb60209b6060978c9a977f0d7b86882845c929e022510097af482fe9d559b56b818bb2c8630eff4d3ed9539a60018060ff1b0311610efc575b5050612881565b94612881565b97612881565b91612881565b604080516001600160a01b0398891681529288168a84015290871690820152941693a360018055604051908152f35b610f0591613793565b5f80610eb4565b9294919390506020833d602011610f46575b81610f2b60209383611eaf565b81010312610f425791519093919290610ecd610e6e565b5f80fd5b3d9150610f1e565b604051903d90823e3d90fd5b9091506020813d602011610f8e575b81610f7660209383611eaf565b810103126105a457610f879061203f565b905f610e2e565b3d9150610f69565b81610fa091611eaf565b6101ee57805f610dd5565b6040513d84823e3d90fd5b634e487b7160e01b84526041600452602484fd5b634e487b7160e01b87526021600452602487fd5b015190505f80610c06565b848c52818c209250601f1984168c5b818110611033575090846001959493921061101b575b505050811b019055610c1a565b01515f1960f88460031b161c191690555f808061100e565b92936020600181928786015181550195019301610ff8565b909150838b5260208b20601f840160051c81019160208510611091575b90601f859493920160051c01905b8181106110835750610bf0565b8c8155849350600101611076565b9091508190611068565b634e487b7160e01b8a52604160045260248afd5b015190505f80610b73565b848c52818c209250601f1984168c5b81811061110457509084600195949392106110ec575b505050811b019055610b87565b01515f1960f88460031b161c191690555f80806110df565b929360206001819287860151815501950193016110c9565b909150838b5260208b20601f840160051c81019160208510611162575b90601f859493920160051c01905b8181106111545750610b5d565b8c8155849350600101611147565b9091508190611139565b015190505f80610b1a565b848c52818c209250601f1984168c5b8181106111c157509084600195949392106111a9575b505050811b019055610b2e565b01515f1960f88460031b161c191690555f808061119c565b92936020600181928786015181550195019301611186565b909150838b5260208b20601f840160051c8101916020851061121f575b90601f859493920160051c01905b8181106112115750610b04565b8c8155849350600101611204565b90915081906111f6565b8980fd5b8a80fd5b8b80fd5b63966753c560e01b8a5260048afd5b634e487b7160e01b8b52602160045260248bfd5b6352f9988b60e01b8252600482fd5b630ced304360e01b8252600482fd5b6333910aef60e11b8252600482fd5b63d92e233d60e01b8152600490fd5b506001600160a01b036112a960a48701612881565b161561076c565b63a768d7fd60e01b8352600483fd5b6282b42960e81b8252600482fd5b5080fd5b50346101ee57806003193601126101ee57546040516001600160a01b039091168152602090f35b50346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346101ee5760403660031901126101ee57611357611be2565b6001600160a01b03168152600660205260408120805460243592908310156101ee5760206113858484611d30565b90549060031b1c604051908152f35b50346101ee57806003193601126101ee576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b50346101ee5760403660031901126101ee576113f3611be2565b6113fb612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316330361146b576001600160a01b031681526007602090815260408083206024358452909152812054801561145c5761031c90613143565b63d36d896560e01b8252600482fd5b631cb3967f60e21b8252600482fd5b5034610f42576020366003190112610f4257600435611497612a1a565b805f52600460205260405f20600a81019060ff82541690600482101561168557811561167657546001600160a01b03163303611668575f190161165957815f52600860205260405f205461164a57600360ff1982541617905560018060a01b037f000000000000000000000000000000000000000000000000000000000000000016611585602060018060a01b0360035416845f526005825260405f205460405190868483015283825261154c604083611eaf565b6040519261155984611e5d565b835283830152604082015260405180938192635500079d60e01b835284600484015260248301906120a4565b0381855afa90811561160d575f91611618575b50813b15610f42575f916024839260405194859384926395bc267360e01b845260048401525af1801561160d576115f8575b5033907f0e00387e025961780b7f127ffab3dfa3118f4d9047a3508c3ae9a0285245a15e8380a36001805580f35b6116059192505f90611eaf565b5f905f6115ca565b6040513d5f823e3d90fd5b90506020813d602011611642575b8161163360209383611eaf565b81010312610f4257515f611598565b3d9150611626565b6313e916e560e01b5f5260045ffd5b632b12537f60e21b5f5260045ffd5b6282b42960e81b5f5260045ffd5b63d36d896560e01b5f5260045ffd5b634e487b7160e01b5f52602160045260245ffd5b34610f42575f366003190112610f42576116b16130db565b5f80546001600160a01b0319811682556001600160a01b03165f516020613aab5f395f51905f528280a3005b34610f42576020366003190112610f42576001600160a01b036116fe611be2565b165f52600660205260405f206040519081602082549182815201915f5260205f20905f5b81811061174d5761036e8561173981870382611eaf565b604051918291602083526020830190611cfd565b8254845260209093019260019283019201611722565b34610f42576060366003190112610f425761177c611be2565b6024356001600160a01b03811691828203610f42576044359061179d6130db565b6001600160a01b03169182156117eb5783156117eb57816117e27f401f439d865a766757ec78675925bd67198d5e78805aa41691b34b5d6a6cbbe69360209386613101565b604051908152a3005b63d92e233d60e01b5f5260045ffd5b34610f42576020366003190112610f425760406118186004356127b8565b82519182526020820152f35b34610f42576020366003190112610f42575f606060405161184481611e12565b60405161185081611e41565b83815283602082015282604082015282808201528360808201528360a08201528260c08201528360e0820152836101008201528361012082015283610140820152815282602082015282604082015201526004355f52600460205260405f206040516118bb81611e12565b6118c482611ed2565b815260ff600a8301541691602082019060048410156116855761191b938252600c600b82015491604085019283520154906060840191825261192760405195869560208752516080602088015260a0870190611c30565b93516040860190611cf0565b5160608401525160808301520390f35b34610f42575f366003190112610f425760206040516107088152f35b34610f42576020366003190112610f425760043561196f6130db565b805f52600460205260405f2060ff600a8201541660048110156116855760010361165957815f52600860205260405f2054156119ff575f82815260086020908152604080832083905560098252808320839055600a909152812081905590546001600160a01b031691907fe2210120d48fe93da6dc8d1873a097516ebbbe5e3f47c5afb525bb2263f1e6e09080a3005b631feb8b7960e21b5f5260045ffd5b34610f42575f366003190112610f4257602060405160648152f35b34610f42576020366003190112610f42576004355f526009602052602060405f2054604051908152f35b34610f42575f366003190112610f42576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b34610f42576020366003190112610f42576004355f526005602052602060405f2054604051908152f35b34610f42576040366003190112610f4257611ada611be2565b611ae2612a1a565b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03163303611b475760018060a01b03165f52600760205260405f206024355f5260205260405f2054801561167657611b4190612b06565b60018055005b631cb3967f60e21b5f5260045ffd5b34610f42576040366003190112610f42576024356001600160401b038111610f425736602382011215610f42576004810135906001600160401b038211610f42573660248383010111610f42576020916024611bb592016004356120d3565b6040516001600160e01b03199091168152f35b34610f42575f366003190112610f42576020906002548152f35b600435906001600160a01b0382168203610f4257565b35906001600160a01b0382168203610f4257565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b9060018060a01b03825116815260018060a01b03602083015116602082015261014080611cbc611c86611c7460408701516101606040880152610160870190611c0c565b60608701518682036060880152611c0c565b60018060a01b03608087015116608086015260018060a01b0360a08701511660a086015260c086015185820360c0870152611c0c565b60e080860151908501526101008086015190850152610120808601516001600160a01b031690850152930151151591015290565b9060048210156116855752565b90602080835192838152019201905f5b818110611d1a5750505090565b8251845260209384019390920191600101611d0d565b8054821015611d45575f5260205f2001905f90565b634e487b7160e01b5f52603260045260245ffd5b90600182811c92168015611d87575b6020831014611d7357565b634e487b7160e01b5f52602260045260245ffd5b91607f1691611d68565b5f9291815491611da083611d59565b8083529260018116908115611df55750600114611dbc57505050565b5f9081526020812093945091925b838310611ddb575060209250010190565b600181602092949394548385870101520191019190611dca565b915050602093945060ff929192191683830152151560051b010190565b608081019081106001600160401b03821117611e2d57604052565b634e487b7160e01b5f52604160045260245ffd5b61016081019081106001600160401b03821117611e2d57604052565b606081019081106001600160401b03821117611e2d57604052565b61018081019081106001600160401b03821117611e2d57604052565b604081019081106001600160401b03821117611e2d57604052565b601f909101601f19168101906001600160401b03821190821017611e2d57604052565b90604051611edf81611e41565b82546001600160a01b0390811682526001840154166020820152604051909283916101409160ff9160099190611f2381611f1c8160028601611d91565b0382611eaf565b6040860152604051611f3c81611f1c8160038601611d91565b606086015260048101546001600160a01b03908116608087015260058201541660a0860152604051611f7581611f1c8160068601611d91565b60c0860152600781015460e0860152600881015461010086015201546001600160a01b03811661012085015260a01c161515910152565b35908115158203610f4257565b6001600160401b038111611e2d5760051b60200190565b6001600160401b038111611e2d57601f01601f191660200190565b929192611ff782611fd0565b916120056040519384611eaf565b829481845281830111610f42578281602093845f960137010152565b9080601f83011215610f425781602061203c93359101611feb565b90565b51906001600160a01b0382168203610f4257565b51908115158203610f4257565b81601f82011215610f425760208151910161207a82611fd0565b926120886040519485611eaf565b82845282820111610f4257815f926020928386015e8301015290565b906060604061203c9360018060a01b038151168452602081015160208501520151918160408201520190611c0c565b81838101036101a08112610f425761018013610f4257604051926120f684611e78565b6120ff83611bf8565b845261210d60208401611bf8565b602085015261211e60408401611bf8565b6040850152606083013560608501526080830135608085015260a083013563ffffffff81168103610f425760a085015260c083013560c085015260e083013560e085015261010083013561010085015261217b6101208401611fac565b61012085015261014083810135908501526101608084013590850152610180830135926001600160401b038411610f425760608482018383010312610f4257604051936121c785611e5d565b818101356001600160401b038111610f4257838301601f8284860101011215610f42578082840101356121f981611fb9565b916122076040519384611eaf565b818352602083019086860160208460051b83888a0101010111610f4257906020828688010101915b60208460051b82888a01010101831061278e5750505090865250818101602001356001600160401b038111610f4257606081838501018585010312610f42576040519061227b82611e5d565b8383018101356001600160a01b0381168103610f4257825283830181016020818101359084015260400135906001600160401b038211610f42576122c791868601918587010101612021565b60408201526020860152604081830101359060018060401b038211610f42576122f4938301920101612021565b6040838101919091525163f698da2560e01b81526020816004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa90811561160d575f9161275c575b507fd5a25ba2e97094ad7d83dc28a6572da797d6b3e7fc6663bd93efb789fc17e48960018060a01b0385511660018060a01b036020870151168660018060a01b036040820151166060820151608083015163ffffffff60a08501511660c08501519060e086015192610100870151946101208801511515966101606101408a0151990151996040519b60208d019d8e5260408d015260608c015260808b015260a08a015260c089015260e08801526101008701526101208601526101408501526101608401526101808301526101a08201526101a0815261242b6101c082611eaf565b51902060405190602082019261190160f01b84526022830152604282015260428152612458606282611eaf565b51902003612756575f61249f60208301516124c3604085015194516124b1604051968795869563137050cb60e11b87523060048801526080602488015260848701906120a4565b85810360031901604487015290611c0c565b83810360031901606485015290611cfd565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa5f9181612659575b506125045750505f90565b815181516001600160a01b03908116911614918261263a575b8261261b575b82612600575b826125e5575b826125d2575b826125bf575b826125aa575b82612591575b8261257c575b82612568575b505061255d575f90565b630b135d3f60e11b90565b610160919250810151910151145f80612553565b9150610140820151610140820151149161254d565b9150610120820151151561012082015115151491612547565b91506101008201516101008201511491612541565b915060e082015160e0820151149161253b565b915060c082015160c08201511491612535565b91506125fa608083015160808301519061387e565b9161252f565b9150612615606083015160608301519061387e565b91612529565b604080820151908301516001600160a01b039081169116149250612523565b602080820151908301516001600160a01b03908116911614925061251d565b9091503d805f833e61266b8183611eaf565b8101908082036101a08112610f425761018013610f42576040519161268f83611e78565b6126988261203f565b83526126a66020830161203f565b60208401526126b76040830161203f565b6040840152606082015160608401526080820151608084015260a082015163ffffffff81168103610f425760a084015260c082015160c084015260e082015160e08401526101008201516101008401526127146101208301612053565b610120840152610140828101519084015261016080830151908401526101808201516001600160401b038111610f425761274e9201612060565b50905f6124f9565b50505f90565b90506020813d602011612786575b8161277760209383611eaf565b81010312610f4257515f612348565b3d915061276a565b60208080938535815201930192915061222f565b9190826040910312610f42576020825192015190565b5f52600460205260405f209060ff600a8301541660048110156116855760010361287a5760018201548254600b840154604080516368c4be2560e01b81526060600482015295909386936001600160a01b03918216938593849390921691612827906064850190600201611d91565b916024840152604483015203915afa91821561160d575f905f9361284a57509190565b905061286f91925060403d604011612873575b6128678183611eaf565b8101906127a2565b9091565b503d61285d565b5f91508190565b356001600160a01b0381168103610f425790565b903590601e1981360301821215610f4257018035906001600160401b038211610f4257602001918136038313610f4257565b9035601e1982360301811215610f42570160208101919035906001600160401b038211610f42578136038313610f4257565b908060209392818452848401375f828201840152601f01601f1916010190565b5f52600460205260405f209060ff600a830154166004811015611685576001036129e857600182015482546040805163632224a760e01b81526004810191909152935f9285926001600160a01b0391821692849283921690612982906044840190600201611d91565b90602483015203915afa91821561160d575f905f936129a057509190565b9250503d805f843e6129b28184611eaf565b820191604081840312610f42576129c881612053565b60208201519093906001600160401b038111610f425761203c9201612060565b90505f906040516129fa604082611eaf565b601081526f6f726465725f6e6f745f61637469766560801b602082015290565b600260015414612a2b576002600155565b633ee5aeb560e01b5f5260045ffd5b91908203918211612a4757565b634e487b7160e01b5f52601160045260245ffd5b602081016020825282518091526040820191602060408360051b8301019401925f915b838310612a8d57505050505090565b9091929394602080612acb600193603f1986820301875289519083612abb8351604084526040840190611c0c565b9201519084818403910152611c0c565b97019301930191939290612a7e565b612af260409295949395606083526060830190611c0c565b6001600160a01b0390951660208201520152565b5f815f52600460205260405f2092600a84019260ff84541660048110156116855760010361165957805f52600860205260405f205490600b86019182549060018201809211612a4757036119ff57612b5f602496611ed2565b94815f5260086020525f6040812055815f52600960205260405f205494825f52600a60205260405f2054966080810196602060018060a01b038951166040519b8c80926370a0823160e01b82523060048301525afa998a1561160d575f9a6130a6575b5060249060a083019a602060018060a01b038d5116604051948580926370a0823160e01b82523060048301525afa92831561160d575f93613072575b50865f5260096020525f6040812055865f52600a6020525f60408120558082115f1461306957612c2d91612a3a565b985b8082111561306157612c4091612a3a565b80156130525789516001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081169a91612c839184918d9116613101565b60c083015189519b5181516001600160a01b039d8e169d9091169a91612cb191602090820181019101613495565b998a5160028101809111612a4757612cc8906138d6565b9c612cd390846139f9565b8d60405191612ce183611e94565b612ce9613933565b83526020830152612cf99061358a565b52612d038d61358a565b50612d0e90846139f9565b60405190612d1b82611e94565b612d23613933565b82526020820152612d338d613597565b52612d3d8c613597565b505f5b8a51811015612d8057612d53818c6135a7565b51906002810191828211612a4757828f612d7992612d73600196836135a7565b526135a7565b5001612d40565b50929598509295989990939699803b15610f425760405163f0dbeea560e01b8152915f918391829084908290612db99060048301612a5b565b03925af1801561160d5761303d575b50610120840180516001600160a01b0316612f95575b505086545f198114612f81577f5b19a0b08bbd8e7537d63d9f1db0947c5eba6d93e02a7e0a1520ea5f29bd644c6040612e9794897f746e7bce16b1125d16e5673941791d7ff1f65d656a3c7346b7c2aa614814850f60608d97600184980180995585519089825260208201528486820152a28151908582526020820152a2602083810151604080860151865191516343fc086560e01b81529586936001600160a01b039081169385938493928992169060048501612ada565b03915afa918215612f76578492612f36575b506101008301518015159182612f2b575b50508115612f23575b50612ed0575b5050505050565b825460ff1916600217909255505191546040519081526001600160a01b0392909216917f11c239861e7b77ea2869389e0f03373ea1d12f407575794b517a10d10c54333390602090a35f80808080612ec9565b90505f612ec3565b101590505f80612eba565b9091506020813d602011612f6e575b81612f5260209383611eaf565b81010312612f6a57612f6390612053565b905f612ea9565b8380fd5b3d9150612f45565b6040513d86823e3d90fd5b634e487b7160e01b85526011600452602485fd5b81516040516370a0823160e01b81523060048201529190602090839060249082906001600160a01b03165afa918215613032578792612ffe575b5081612fdc575b50612dde565b91519151612ff6926001600160a01b039182169116613101565b5f8080612fd6565b9091506020813d60201161302a575b8161301a60209383611eaf565b81010312610f425751905f612fcf565b3d915061300d565b6040513d89823e3d90fd5b61304a9195505f90611eaf565b5f935f612dc8565b639671a89f60e01b5f5260045ffd5b50505f612c40565b50505f98612c2f565b9092506020813d60201161309e575b8161308e60209383611eaf565b81010312610f425751915f612bfe565b3d9150613081565b9099506020813d6020116130d3575b816130c260209383611eaf565b81010312610f425751986024612bc2565b3d91506130b5565b5f546001600160a01b031633036130ee57565b63118cdaa760e01b5f523360045260245ffd5b60405163a9059cbb60e01b60208201526001600160a01b0390921660248301526044808301939093529181526131419161313c606483611eaf565b613957565b565b905f90825f52600460205260405f209060ff600a8301541660048110156116855760010361165957835f52600860205260405f2054613486576131ce9361318983611ed2565b9260018060a01b0360208501511690604080860151600b60018060a01b03885116930193845493849284519b8c94859384936368c4be2560e01b855260048501612ada565b03915afa96871561160d575f97613464575b5060018101809111612a4757825f52600860205260405f2055606084015193608081019561322160018060a01b038851169660208082518301019101613495565b9586519060018201809211612a475761323c613242926138d6565b996139f9565b6040519061324f82611e94565b613257613933565b825260208201526132678961358a565b526132718861358a565b505f5b86518110156132b45761328781886135a7565b51906001810191828211612a4757826132ad916132a66001958e6135a7565b528b6135a7565b5001613274565b509396929591945092917f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316803b15610f425760405163f0dbeea560e01b8152915f9183918290849082906133149060048301612a5b565b03925af1801561160d5761344e575b50516040516370a0823160e01b815230600482015290602090829060249082906001600160a01b03165afa908115610fab57829161341b575b5060249260209186845260098352604084205560a0600180821b0391015116604051938480926370a0823160e01b82523060048301525afa91821561340e5781926133cb575b5091602091604084865f516020613a8b5f395f51905f529652600a8552205554604051908152a2565b9150916020823d602011613406575b816133e760209383611eaf565b81010312610f4257905190915f516020613a8b5f395f51905f526133a2565b3d91506133da565b50604051903d90823e3d90fd5b90506020813d602011613446575b8161343660209383611eaf565b81010312610f425751602461335c565b3d9150613429565b61345b9192505f90611eaf565b5f906020613323565b61347e91975060403d604011612873576128678183611eaf565b50955f6131e0565b63e617d13160e01b5f5260045ffd5b602081830312610f42578051906001600160401b038211610f4257019080601f83011215610f42578151916134c983611fb9565b926134d76040519485611eaf565b80845260208085019160051b83010191838311610f425760208101915b83831061350357505050505090565b82516001600160401b038111610f42578201906040828703601f190112610f42576040519061353182611e94565b60208301516001600160401b038111610f425787602061355392860101612060565b82526040830151916001600160401b038311610f425761357b88602080969581960101612060565b838201528152019201916134f4565b805115611d455760200190565b805160011015611d455760400190565b8051821015611d455760209160051b010190565b9190918051801561378d57906020806135d8938301019101613495565b6040516020810190653937baba32b960d11b8252600681526135fb602682611eaf565b5190205f5b8251811015613786578161361482856135a7565b51516040516136426020828180820195805191829101875e81015f838201520301601f198101835282611eaf565b51902003613653575b600101613600565b602061365f82856135a7565b5101518051810190602081830312610f42576020810151906001600160401b038211610f425701808203601f19810192919060c013610f42576040519160c083016001600160401b03811184821017611e2d576040526020820151600a811015610f425783526136d16040830161203f565b60208401526136e26060830161203f565b604084019081526080830151606085015260a0830151909490916001600160401b038311610f4257602092838061371d930191860101612060565b6080850152607f190112610f425760405191602083016001600160401b03811184821017611e2d5760405260c090910151825260a00152516001600160a01b0390811690861680820361377157505061364b565b63041bc0b160e41b5f5260045260245260445ffd5b5050509050565b50509050565b60405190602082019263095ea7b360e01b845260018060a01b0316928360248401525f196044840152604483526137cb606484611eaf565b82516001600160a01b038316915f91829182855af1906137e96139ca565b82613844575b5081613839575b501561380157505050565b61313c613141936040519063095ea7b360e01b602083015260248201525f604482015260448152613833606482611eaf565b82613957565b90503b15155f6137f6565b8051919250811591821561385c575b5050905f6137ef565b8192509060209181010312610f425760206138779101612053565b5f80613853565b908082146138cf578082119182156138c85780925b156138ba57906138a291612a3a565b606481029080820460641490151715612a4757111590565b6138c391612a3a565b6138a2565b8192613893565b5050600190565b906138e082611fb9565b6138ed6040519182611eaf565b82815280926138fe601f1991611fb9565b01905f5b82811061390e57505050565b60209060405161391d81611e94565b6060815260608382015282828501015201613902565b60405190613942604083611eaf565b60068252653937baba32b960d11b6020830152565b5f8061397f9260018060a01b03169360208151910182865af16139786139ca565b9083613a2c565b80519081151591826139a7575b50506139955750565b635274afe760e01b5f5260045260245ffd5b8192509060209181010312610f425760206139c29101612053565b155f8061398c565b3d156139f4573d906139db82611fd0565b916139e96040519384611eaf565b82523d5f602084013e565b606090565b9060405191602083015260018060a01b031660408201525f6060820152600360808201526080815261203c60a082611eaf565b90613a505750805115613a4157805190602001fd5b630a12f52160e11b5f5260045ffd5b81511580613a81575b613a61575090565b639996b31560e01b5f9081526001600160a01b0391909116600452602490fd5b50803b15613a5956feed6ad11a587c194b3ad43896e949cb9a05975419926eda9b6b571d1847c9a7aa8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0a264697066735822122032d20429e3a65475abb436679b0cee59ab6fff6b1cdf128a0d6db12d899ed0ae64736f6c634300081e0033",
  "devdoc": {
    "details": "Uses separate KapanConditionalOrderHandler for IConditionalOrderGenerator.      This contract is the OWNER in ComposableCoW and handles ERC-1271 signature verification.      It intentionally does NOT implement IERC165 to avoid Safe/fallback handler detection. Key differences from KapanOrderManager: - Orders have pluggable triggers (IOrderTrigger) that determine when and how much to execute - Amounts are calculated dynamically at execution time via trigger.calculateExecution() - Instructions are templates that reference UTXO[0] for dynamic amounts",
    "errors": {
      "AddressEmptyCode(address)": [
        {
          "details": "There's no code at `target` (it is not a contract)."
        }
      ],
      "AddressInsufficientBalance(address)": [
        {
          "details": "The ETH balance of the account is not enough to perform the operation."
        }
      ],
      "FailedInnerCall()": [
        {
          "details": "A call to an address target failed. The target may have reverted."
        }
      ],
      "OwnableInvalidOwner(address)": [
        {
          "details": "The owner is not a valid owner account. (eg. `address(0)`)"
        }
      ],
      "OwnableUnauthorizedAccount(address)": [
        {
          "details": "The caller account is not authorized to perform an operation."
        }
      ],
      "ReentrancyGuardReentrantCall()": [
        {
          "details": "Unauthorized reentrant call."
        }
      ],
      "SafeERC20FailedOperation(address)": [
        {
          "details": "An operation with an ERC20 token failed."
        }
      ]
    },
    "kind": "dev",
    "methods": {
      "approveVaultRelayer(address)": {
        "params": {
          "token": "Token to approve"
        }
      },
      "createOrder((address,address,bytes,bytes,address,address,bytes,bytes32,uint256,address,bool),bytes32)": {
        "params": {
          "params": "The order parameters",
          "salt": "Unique salt for the order"
        },
        "returns": {
          "orderHash": "The hash identifying this order"
        }
      },
      "executePostHook(bytes32)": {
        "params": {
          "orderHash": "The order hash"
        }
      },
      "executePostHookBySalt(address,bytes32)": {
        "params": {
          "salt": "The order salt",
          "user": "The user address"
        }
      },
      "executePreHook(bytes32)": {
        "params": {
          "orderHash": "The order hash"
        }
      },
      "executePreHookBySalt(address,bytes32)": {
        "params": {
          "salt": "The order salt",
          "user": "The user address"
        }
      },
      "isValidSignature(bytes32,bytes)": {
        "params": {
          "_hash": "The hash of the data signed",
          "_signature": "The signature bytes"
        },
        "returns": {
          "_0": "bytes4(0x1626ba7e) if valid, any other value if invalid"
        }
      },
      "owner()": {
        "details": "Returns the address of the current owner."
      },
      "recoverTokens(address,address,uint256)": {
        "params": {
          "amount": "Amount to recover",
          "to": "Recipient address",
          "token": "Token address to recover"
        }
      },
      "renounceOwnership()": {
        "details": "Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."
      },
      "resetStuckOrder(bytes32)": {
        "details": "Only use when an order is permanently stuck due to failed settlement",
        "params": {
          "orderHash": "The order hash to reset"
        }
      },
      "setChunkWindow(uint256)": {
        "params": {
          "_chunkWindow": "New chunk window in seconds"
        }
      },
      "setOrderHandler(address)": {
        "params": {
          "_orderHandler": "New order handler address"
        }
      },
      "transferOwnership(address)": {
        "details": "Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."
      }
    },
    "stateVariables": {
      "DEFAULT_CHUNK_WINDOW": {
        "details": "Must be > 60 seconds due to CoW Protocol's min_order_validity_period (default 1 minute) Increased to 30 minutes to allow sufficient time for solver competition and fills"
      },
      "MIN_CHUNK_WINDOW": {
        "details": "Must be > 60 seconds due to CoW Protocol's min_order_validity_period"
      },
      "chunkWindow": {
        "details": "Configurable to tune order validity based on watchtower polling and token characteristics"
      }
    },
    "title": "KapanConditionalOrderManager",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "DEFAULT_CHUNK_WINDOW()": {
        "notice": "Default chunk window duration (30 minutes)"
      },
      "MAX_CHUNK_WINDOW()": {
        "notice": "Maximum allowed chunk window (1 hour)"
      },
      "MAX_ORDERS_PER_USER()": {
        "notice": "Maximum orders per user to prevent storage DOS"
      },
      "MIN_CHUNK_WINDOW()": {
        "notice": "Minimum allowed chunk window (65 seconds)"
      },
      "approveVaultRelayer(address)": {
        "notice": "Approve vault relayer to spend tokens"
      },
      "cancelOrder(bytes32)": {
        "notice": "Cancel an active conditional order"
      },
      "chunkWindow()": {
        "notice": "Chunk window duration for deterministic validTo"
      },
      "composableCoW()": {
        "notice": "The ComposableCoW contract for order registration (immutable)"
      },
      "createOrder((address,address,bytes,bytes,address,address,bytes,bytes32,uint256,address,bool),bytes32)": {
        "notice": "Create a new conditional order"
      },
      "executePostHook(bytes32)": {
        "notice": "Execute post-hook (called by HooksTrampoline)"
      },
      "executePostHookBySalt(address,bytes32)": {
        "notice": "Execute post-hook using (user, salt) lookup"
      },
      "executePreHook(bytes32)": {
        "notice": "Execute pre-hook (called by HooksTrampoline)"
      },
      "executePreHookBySalt(address,bytes32)": {
        "notice": "Execute pre-hook using (user, salt) lookup"
      },
      "getExecutionAmounts(bytes32)": {
        "notice": "Get current execution amounts from trigger"
      },
      "hooksTrampoline()": {
        "notice": "The HooksTrampoline contract (caller for hooks) (immutable)"
      },
      "isTriggerMet(bytes32)": {
        "notice": "Check if trigger condition is currently met"
      },
      "isValidSignature(bytes32,bytes)": {
        "notice": "Verifies that the signature is valid for the given hash"
      },
      "orderHandler()": {
        "notice": "The KapanConditionalOrderHandler for generating orders"
      },
      "orderSalts(bytes32)": {
        "notice": "Salt used for each order (for ComposableCoW cancellation)"
      },
      "orders(bytes32)": {
        "notice": "Order contexts by order hash"
      },
      "preHookExecutedForIteration(bytes32)": {
        "notice": "Track pre-hook execution per order"
      },
      "preHookSellBalance(bytes32)": {
        "notice": "Track balances at end of pre-hook for delta calculation"
      },
      "recoverTokens(address,address,uint256)": {
        "notice": "Recover tokens accidentally sent to this contract"
      },
      "resetStuckOrder(bytes32)": {
        "notice": "Reset a stuck order where pre-hook executed but post-hook failed"
      },
      "router()": {
        "notice": "The KapanRouter for executing lending operations (immutable)"
      },
      "setChunkWindow(uint256)": {
        "notice": "Update the chunk window for order validity"
      },
      "setOrderHandler(address)": {
        "notice": "Update the order handler address"
      },
      "settlement()": {
        "notice": "The GPv2Settlement contract (immutable)"
      },
      "userOrders(address,uint256)": {
        "notice": "User's active orders"
      },
      "userSaltToOrderHash(address,bytes32)": {
        "notice": "Lookup order hash by (user, salt)"
      }
    },
    "notice": "Manages trigger-based conditional orders for Kapan (ADL, stop-loss, etc.)",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 8,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "_owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 845,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "_status",
        "offset": 0,
        "slot": "1",
        "type": "t_uint256"
      },
      {
        "astId": 1061,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "chunkWindow",
        "offset": 0,
        "slot": "2",
        "type": "t_uint256"
      },
      {
        "astId": 1079,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "orderHandler",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 1085,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "orders",
        "offset": 0,
        "slot": "4",
        "type": "t_mapping(t_bytes32,t_struct(OrderContext)1045_storage)"
      },
      {
        "astId": 1090,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "orderSalts",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_bytes32,t_bytes32)"
      },
      {
        "astId": 1096,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "userOrders",
        "offset": 0,
        "slot": "6",
        "type": "t_mapping(t_address,t_array(t_bytes32)dyn_storage)"
      },
      {
        "astId": 1103,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "userSaltToOrderHash",
        "offset": 0,
        "slot": "7",
        "type": "t_mapping(t_address,t_mapping(t_bytes32,t_bytes32))"
      },
      {
        "astId": 1108,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "preHookExecutedForIteration",
        "offset": 0,
        "slot": "8",
        "type": "t_mapping(t_bytes32,t_uint256)"
      },
      {
        "astId": 1113,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "preHookSellBalance",
        "offset": 0,
        "slot": "9",
        "type": "t_mapping(t_bytes32,t_uint256)"
      },
      {
        "astId": 1117,
        "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
        "label": "preHookBuyBalance",
        "offset": 0,
        "slot": "10",
        "type": "t_mapping(t_bytes32,t_uint256)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_bytes32)dyn_storage": {
        "base": "t_bytes32",
        "encoding": "dynamic_array",
        "label": "bytes32[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_bytes_storage": {
        "encoding": "bytes",
        "label": "bytes",
        "numberOfBytes": "32"
      },
      "t_enum(OrderStatus)1000": {
        "encoding": "inplace",
        "label": "enum KapanConditionalOrderManager.OrderStatus",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_array(t_bytes32)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => bytes32[])",
        "numberOfBytes": "32",
        "value": "t_array(t_bytes32)dyn_storage"
      },
      "t_mapping(t_address,t_mapping(t_bytes32,t_bytes32))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(bytes32 => bytes32))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_bytes32,t_bytes32)"
      },
      "t_mapping(t_bytes32,t_bytes32)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => bytes32)",
        "numberOfBytes": "32",
        "value": "t_bytes32"
      },
      "t_mapping(t_bytes32,t_struct(OrderContext)1045_storage)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => struct KapanConditionalOrderManager.OrderContext)",
        "numberOfBytes": "32",
        "value": "t_struct(OrderContext)1045_storage"
      },
      "t_mapping(t_bytes32,t_uint256)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => uint256)",
        "numberOfBytes": "32",
        "value": "t_uint256"
      },
      "t_struct(KapanOrderParams)1033_storage": {
        "encoding": "inplace",
        "label": "struct KapanConditionalOrderManager.KapanOrderParams",
        "members": [
          {
            "astId": 1012,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "user",
            "offset": 0,
            "slot": "0",
            "type": "t_address"
          },
          {
            "astId": 1014,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "trigger",
            "offset": 0,
            "slot": "1",
            "type": "t_address"
          },
          {
            "astId": 1016,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "triggerStaticData",
            "offset": 0,
            "slot": "2",
            "type": "t_bytes_storage"
          },
          {
            "astId": 1018,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "preInstructions",
            "offset": 0,
            "slot": "3",
            "type": "t_bytes_storage"
          },
          {
            "astId": 1020,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "sellToken",
            "offset": 0,
            "slot": "4",
            "type": "t_address"
          },
          {
            "astId": 1022,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "buyToken",
            "offset": 0,
            "slot": "5",
            "type": "t_address"
          },
          {
            "astId": 1024,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "postInstructions",
            "offset": 0,
            "slot": "6",
            "type": "t_bytes_storage"
          },
          {
            "astId": 1026,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "appDataHash",
            "offset": 0,
            "slot": "7",
            "type": "t_bytes32"
          },
          {
            "astId": 1028,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "maxIterations",
            "offset": 0,
            "slot": "8",
            "type": "t_uint256"
          },
          {
            "astId": 1030,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "sellTokenRefundAddress",
            "offset": 0,
            "slot": "9",
            "type": "t_address"
          },
          {
            "astId": 1032,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "isKindBuy",
            "offset": 20,
            "slot": "9",
            "type": "t_bool"
          }
        ],
        "numberOfBytes": "320"
      },
      "t_struct(OrderContext)1045_storage": {
        "encoding": "inplace",
        "label": "struct KapanConditionalOrderManager.OrderContext",
        "members": [
          {
            "astId": 1037,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "params",
            "offset": 0,
            "slot": "0",
            "type": "t_struct(KapanOrderParams)1033_storage"
          },
          {
            "astId": 1040,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "status",
            "offset": 0,
            "slot": "10",
            "type": "t_enum(OrderStatus)1000"
          },
          {
            "astId": 1042,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "iterationCount",
            "offset": 0,
            "slot": "11",
            "type": "t_uint256"
          },
          {
            "astId": 1044,
            "contract": "contracts/v2/cow/KapanConditionalOrderManager.sol:KapanConditionalOrderManager",
            "label": "createdAt",
            "offset": 0,
            "slot": "12",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "416"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}