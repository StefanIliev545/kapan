{
  "address": "0x56F9e6F3AD2d2D63917d7aFcf05066694dCd63F2",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_manager",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "OrderNotValid",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "PollNever",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "PollTryNextBlock",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "staticInput",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "getTradeableOrder",
      "outputs": [
        {
          "components": [
            {
              "internalType": "contract IERC20",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "contract IERC20",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "receiver",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "sellAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "buyAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint32",
              "name": "validTo",
              "type": "uint32"
            },
            {
              "internalType": "bytes32",
              "name": "appData",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "feeAmount",
              "type": "uint256"
            },
            {
              "internalType": "bytes32",
              "name": "kind",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "partiallyFillable",
              "type": "bool"
            },
            {
              "internalType": "bytes32",
              "name": "sellTokenBalance",
              "type": "bytes32"
            },
            {
              "internalType": "bytes32",
              "name": "buyTokenBalance",
              "type": "bytes32"
            }
          ],
          "internalType": "struct GPv2Order.Data",
          "name": "order",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "manager",
      "outputs": [
        {
          "internalType": "contract IKapanConditionalOrderManager",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "interfaceId",
          "type": "bytes4"
        }
      ],
      "name": "supportsInterface",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "staticInput",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        },
        {
          "components": [
            {
              "internalType": "contract IERC20",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "contract IERC20",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "receiver",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "sellAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "buyAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint32",
              "name": "validTo",
              "type": "uint32"
            },
            {
              "internalType": "bytes32",
              "name": "appData",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "feeAmount",
              "type": "uint256"
            },
            {
              "internalType": "bytes32",
              "name": "kind",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "partiallyFillable",
              "type": "bool"
            },
            {
              "internalType": "bytes32",
              "name": "sellTokenBalance",
              "type": "bytes32"
            },
            {
              "internalType": "bytes32",
              "name": "buyTokenBalance",
              "type": "bytes32"
            }
          ],
          "internalType": "struct GPv2Order.Data",
          "name": "order",
          "type": "tuple"
        }
      ],
      "name": "verify",
      "outputs": [],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xe5364a72b3dbcea50441c30238e2d8487b4a68de754d7b57c3d678b330ba4c8c",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "contractAddress": null,
    "transactionIndex": 4,
    "gasUsed": "888418",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x131f50582425247f7c6d976247657e8c1b81c907d9e6028e6bb87695ff5a5888",
    "transactionHash": "0xe5364a72b3dbcea50441c30238e2d8487b4a68de754d7b57c3d678b330ba4c8c",
    "logs": [],
    "blockNumber": 426945406,
    "cumulativeGasUsed": "1208276",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xEBe83a05f3622CE2B8933dAee4C81Db8a726ddab"
  ],
  "numDeployments": 8,
  "solcInputHash": "f7be3f0efed801559856c5f987f8b492",
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_manager\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"OrderNotValid\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"PollNever\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"PollTryNextBlock\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"staticInput\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"name\":\"getTradeableOrder\",\"outputs\":[{\"components\":[{\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"buyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"validTo\",\"type\":\"uint32\"},{\"internalType\":\"bytes32\",\"name\":\"appData\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"feeAmount\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"kind\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"partiallyFillable\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"sellTokenBalance\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"buyTokenBalance\",\"type\":\"bytes32\"}],\"internalType\":\"struct GPv2Order.Data\",\"name\":\"order\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"internalType\":\"contract IKapanConditionalOrderManager\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"staticInput\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"components\":[{\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"buyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"validTo\",\"type\":\"uint32\"},{\"internalType\":\"bytes32\",\"name\":\"appData\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"feeAmount\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"kind\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"partiallyFillable\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"sellTokenBalance\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"buyTokenBalance\",\"type\":\"bytes32\"}],\"internalType\":\"struct GPv2Order.Data\",\"name\":\"order\",\"type\":\"tuple\"}],\"name\":\"verify\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Implements IConditionalOrderGenerator for ComposableCoW integration.      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.      Separating handler from manager is required because:      - Handler must implement IERC165 for ComposableCoW to verify interface support      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path\",\"errors\":{\"OrderNotValid(string)\":[{\"details\":\"Signal that the order parameters are invalid\"}],\"PollNever(string)\":[{\"details\":\"Signal to stop polling this order (completed or cancelled)\"}],\"PollTryNextBlock(string)\":[{\"details\":\"Signal to try polling again at the next block\"}]},\"kind\":\"dev\",\"methods\":{\"getTradeableOrder(address,address,bytes32,bytes,bytes)\":{\"details\":\"Called by ComposableCoW via getTradeableOrderWithSignature\",\"params\":{\"staticInput\":\"ABI-encoded orderHash\"},\"returns\":{\"order\":\"The GPv2Order.Data struct\"}},\"supportsInterface(bytes4)\":{\"details\":\"Required for ComposableCoW to verify handler compatibility\"},\"verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))\":{\"details\":\"Called by ComposableCoW during signature verification\"}},\"title\":\"KapanConditionalOrderHandler\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getTradeableOrder(address,address,bytes32,bytes,bytes)\":{\"notice\":\"Generate a tradeable order if trigger condition is met\"},\"manager()\":{\"notice\":\"The KapanConditionalOrderManager that stores order contexts\"},\"supportsInterface(bytes4)\":{\"notice\":\"Check if contract supports an interface\"},\"verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))\":{\"notice\":\"Verify that a proposed order matches the conditional order\"}},\"notice\":\"Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/v2/cow/KapanConditionalOrderHandler.sol\":\"KapanConditionalOrderHandler\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":10},\"remappings\":[],\"viaIR\":true},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the value of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the value of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the\\n     * caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from `from` to `to` using the\\n     * allowance mechanism. `value` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\\n}\\n\",\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/IERC165.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x4296879f55019b23e135000eb36896057e7101fb7fb859c5ef690cf14643757b\",\"license\":\"MIT\"},\"contracts/v2/cow/KapanConditionalOrderHandler.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IConditionalOrder, IConditionalOrderGenerator, PollTryNextBlock, PollNever, OrderNotValid } from \\\"../interfaces/cow/IConditionalOrder.sol\\\";\\nimport { GPv2Order } from \\\"../interfaces/cow/GPv2Order.sol\\\";\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport { IERC165 } from \\\"@openzeppelin/contracts/utils/introspection/IERC165.sol\\\";\\nimport { IOrderTrigger } from \\\"../interfaces/IOrderTrigger.sol\\\";\\n\\n/// @notice Minimal interface to read from KapanConditionalOrderManager\\ninterface IKapanConditionalOrderManager {\\n    enum OrderStatus { None, Active, Completed, Cancelled }\\n\\n    struct KapanOrderParams {\\n        address user;\\n        address trigger;\\n        bytes triggerStaticData;\\n        bytes preInstructions;\\n        address sellToken;\\n        address buyToken;\\n        bytes postInstructions;\\n        bytes32 appDataHash;\\n        uint256 maxIterations;\\n        address sellTokenRefundAddress;\\n    }\\n\\n    struct OrderContext {\\n        KapanOrderParams params;\\n        OrderStatus status;\\n        uint256 iterationCount;\\n        uint256 createdAt;\\n    }\\n\\n    function getOrder(bytes32 orderHash) external view returns (OrderContext memory);\\n    function cachedSellAmount(bytes32 orderHash) external view returns (uint256);\\n    function cachedBuyAmount(bytes32 orderHash) external view returns (uint256);\\n    function chunkWindow() external view returns (uint256);\\n}\\n\\n/// @title KapanConditionalOrderHandler\\n/// @notice Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)\\n/// @dev Implements IConditionalOrderGenerator for ComposableCoW integration.\\n///      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.\\n///      Separating handler from manager is required because:\\n///      - Handler must implement IERC165 for ComposableCoW to verify interface support\\n///      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path\\ncontract KapanConditionalOrderHandler is IConditionalOrderGenerator, IERC165 {\\n\\n    // ============ State Variables ============\\n\\n    /// @notice The KapanConditionalOrderManager that stores order contexts\\n    IKapanConditionalOrderManager public immutable manager;\\n\\n    // ============ Constructor ============\\n\\n    constructor(address _manager) {\\n        require(_manager != address(0), \\\"Invalid manager\\\");\\n        manager = IKapanConditionalOrderManager(_manager);\\n    }\\n\\n    // ============ IConditionalOrderGenerator Implementation ============\\n\\n    /// @notice Generate a tradeable order if trigger condition is met\\n    /// @dev Called by ComposableCoW via getTradeableOrderWithSignature\\n    /// @param staticInput ABI-encoded orderHash\\n    /// @return order The GPv2Order.Data struct\\n    function getTradeableOrder(\\n        address,\\n        address,\\n        bytes32,\\n        bytes calldata staticInput,\\n        bytes calldata\\n    ) external view override returns (GPv2Order.Data memory order) {\\n        bytes32 orderHash = abi.decode(staticInput, (bytes32));\\n        IKapanConditionalOrderManager.OrderContext memory ctx = manager.getOrder(orderHash);\\n\\n        // Validate order is active\\n        if (ctx.status != IKapanConditionalOrderManager.OrderStatus.Active) {\\n            revert PollNever(\\\"order_not_active\\\");\\n        }\\n\\n        // Get trigger\\n        IOrderTrigger trigger = IOrderTrigger(ctx.params.trigger);\\n\\n        // Check if order is complete\\n        if (trigger.isComplete(ctx.params.triggerStaticData, ctx.params.user, ctx.iterationCount)) {\\n            revert PollNever(\\\"trigger_complete\\\");\\n        }\\n        if (ctx.params.maxIterations > 0 && ctx.iterationCount >= ctx.params.maxIterations) {\\n            revert PollNever(\\\"max_iterations_reached\\\");\\n        }\\n\\n        // Use cached amounts if available (set by pre-hook before state changes)\\n        uint256 sellAmount = manager.cachedSellAmount(orderHash);\\n        uint256 minBuyAmount = manager.cachedBuyAmount(orderHash);\\n\\n        if (sellAmount == 0) {\\n            // No cached amounts - calculate fresh from trigger\\n            (bool shouldExecute, string memory reason) = trigger.shouldExecute(\\n                ctx.params.triggerStaticData,\\n                ctx.params.user\\n            );\\n\\n            if (!shouldExecute) {\\n                revert PollTryNextBlock(reason);\\n            }\\n\\n            (sellAmount, minBuyAmount) = trigger.calculateExecution(\\n                ctx.params.triggerStaticData,\\n                ctx.params.user\\n            );\\n\\n            if (sellAmount == 0) {\\n                revert PollNever(\\\"zero_sell_amount\\\");\\n            }\\n        }\\n\\n        // Calculate deterministic validTo\\n        uint256 validTo = _calculateValidTo(ctx.createdAt, ctx.iterationCount);\\n\\n        // Verify order hasn't expired\\n        if (block.timestamp > validTo) {\\n            revert PollTryNextBlock(\\\"window_expired\\\");\\n        }\\n\\n        // Build the order - receiver is manager (for post-hook token handling)\\n        order = GPv2Order.Data({\\n            sellToken: IERC20(ctx.params.sellToken),\\n            buyToken: IERC20(ctx.params.buyToken),\\n            receiver: address(manager),\\n            sellAmount: sellAmount,\\n            buyAmount: minBuyAmount,\\n            validTo: uint32(validTo),\\n            appData: ctx.params.appDataHash,\\n            feeAmount: 0,\\n            kind: GPv2Order.KIND_SELL,\\n            partiallyFillable: false,\\n            sellTokenBalance: GPv2Order.BALANCE_ERC20,\\n            buyTokenBalance: GPv2Order.BALANCE_ERC20\\n        });\\n    }\\n\\n    /// @notice Verify that a proposed order matches the conditional order\\n    /// @dev Called by ComposableCoW during signature verification\\n    function verify(\\n        address,\\n        address,\\n        bytes32,\\n        bytes32,\\n        bytes32,\\n        bytes calldata staticInput,\\n        bytes calldata,\\n        GPv2Order.Data calldata order\\n    ) external view override {\\n        bytes32 orderHash = abi.decode(staticInput, (bytes32));\\n        IKapanConditionalOrderManager.OrderContext memory ctx = manager.getOrder(orderHash);\\n\\n        if (ctx.status != IKapanConditionalOrderManager.OrderStatus.Active) {\\n            revert OrderNotValid(\\\"order_not_active\\\");\\n        }\\n\\n        // Validate tokens match\\n        if (address(order.sellToken) != ctx.params.sellToken) {\\n            revert OrderNotValid(\\\"sell_token_mismatch\\\");\\n        }\\n        if (address(order.buyToken) != ctx.params.buyToken) {\\n            revert OrderNotValid(\\\"buy_token_mismatch\\\");\\n        }\\n\\n        // Validate receiver is manager\\n        if (order.receiver != address(manager)) {\\n            revert OrderNotValid(\\\"invalid_receiver\\\");\\n        }\\n\\n        // Validate appData\\n        if (order.appData != ctx.params.appDataHash) {\\n            revert OrderNotValid(\\\"appdata_mismatch\\\");\\n        }\\n    }\\n\\n    // ============ Internal Functions ============\\n\\n    /// @notice Calculate deterministic validTo timestamp\\n    /// @dev Reads chunkWindow from manager for consistency\\n    function _calculateValidTo(uint256 createdAt, uint256 iterationCount) internal view returns (uint256) {\\n        uint256 window = manager.chunkWindow();\\n        uint256 chunkWindowStart = createdAt + (iterationCount * window);\\n        uint256 chunkWindowEnd = chunkWindowStart + window - 1;\\n\\n        if (block.timestamp <= chunkWindowEnd) {\\n            return chunkWindowEnd;\\n        }\\n\\n        // Extend to current window\\n        uint256 elapsedSinceCreate = block.timestamp - createdAt;\\n        uint256 currentWindowIndex = elapsedSinceCreate / window;\\n        return createdAt + ((currentWindowIndex + 1) * window) - 1;\\n    }\\n\\n    // ============ ERC-165 Implementation ============\\n\\n    /// @notice Check if contract supports an interface\\n    /// @dev Required for ComposableCoW to verify handler compatibility\\n    function supportsInterface(bytes4 interfaceId) external pure override returns (bool) {\\n        return interfaceId == type(IConditionalOrderGenerator).interfaceId ||\\n               interfaceId == type(IConditionalOrder).interfaceId ||\\n               interfaceId == type(IERC165).interfaceId;\\n    }\\n}\\n\",\"keccak256\":\"0x92c5f1a1ee3bc97ccf6792b1a47bbfbe86fcc69b831e28c041c2f0d1adb10d7b\",\"license\":\"MIT\"},\"contracts/v2/interfaces/IOrderTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IOrderTrigger\\n/// @notice Interface for pluggable order triggers in the Kapan conditional order system\\n/// @dev Triggers determine when an order should execute and how much to trade\\ninterface IOrderTrigger {\\n    /// @notice Check if the order should execute based on current conditions\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner (user whose position is being monitored)\\n    /// @return shouldExecute True if the trigger condition is met\\n    /// @return reason Human-readable reason for the result (for debugging/logging)\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (bool shouldExecute, string memory reason);\\n\\n    /// @notice Calculate the execution amounts when the trigger fires\\n    /// @dev Only called when shouldExecute returns true\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @return sellAmount Amount of sell token to trade in this execution\\n    /// @return minBuyAmount Minimum amount to receive (includes slippage protection)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (uint256 sellAmount, uint256 minBuyAmount);\\n\\n    /// @notice Check if the order is complete and should stop executing\\n    /// @dev Called after each execution to determine if order should be marked complete\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far\\n    /// @return complete True if the order goal has been reached\\n    function isComplete(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (bool complete);\\n\\n    /// @notice Get human-readable name of the trigger type\\n    /// @return name Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\\n    function triggerName() external pure returns (string memory name);\\n}\\n\",\"keccak256\":\"0x0a4632796415a05e04d2d42eabc5691183c2c0b98088fd47e8a939d30c11a308\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/GPv2Order.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\n/// @title GPv2Order - CoW Protocol order library\\n/// @notice Data structures and helpers for CoW Protocol orders\\nlibrary GPv2Order {\\n    /// @dev The complete order data that is signed by the user\\n    struct Data {\\n        IERC20 sellToken;\\n        IERC20 buyToken;\\n        address receiver;\\n        uint256 sellAmount;\\n        uint256 buyAmount;\\n        uint32 validTo;\\n        bytes32 appData;\\n        uint256 feeAmount;\\n        bytes32 kind;\\n        bool partiallyFillable;\\n        bytes32 sellTokenBalance;\\n        bytes32 buyTokenBalance;\\n    }\\n\\n    /// @dev Order kind constants\\n    bytes32 internal constant KIND_SELL =\\n        keccak256(\\\"sell\\\");\\n    bytes32 internal constant KIND_BUY =\\n        keccak256(\\\"buy\\\");\\n\\n    /// @dev Token balance constants\\n    bytes32 internal constant BALANCE_ERC20 =\\n        keccak256(\\\"erc20\\\");\\n    bytes32 internal constant BALANCE_EXTERNAL =\\n        keccak256(\\\"external\\\");\\n    bytes32 internal constant BALANCE_INTERNAL =\\n        keccak256(\\\"internal\\\");\\n\\n    /// @dev The order EIP-712 type hash\\n    bytes32 internal constant TYPE_HASH =\\n        keccak256(\\n            \\\"Order(\\\"\\n            \\\"address sellToken,\\\"\\n            \\\"address buyToken,\\\"\\n            \\\"address receiver,\\\"\\n            \\\"uint256 sellAmount,\\\"\\n            \\\"uint256 buyAmount,\\\"\\n            \\\"uint32 validTo,\\\"\\n            \\\"bytes32 appData,\\\"\\n            \\\"uint256 feeAmount,\\\"\\n            \\\"string kind,\\\"\\n            \\\"bool partiallyFillable,\\\"\\n            \\\"string sellTokenBalance,\\\"\\n            \\\"string buyTokenBalance\\\"\\n            \\\")\\\"\\n        );\\n\\n    /// @dev Computes the order hash for the given order data\\n    /// @param order The order to hash\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @return orderDigest The order digest\\n    function hash(Data memory order, bytes32 domainSeparator) internal pure returns (bytes32 orderDigest) {\\n        bytes32 structHash = keccak256(\\n            abi.encode(\\n                TYPE_HASH,\\n                order.sellToken,\\n                order.buyToken,\\n                order.receiver,\\n                order.sellAmount,\\n                order.buyAmount,\\n                order.validTo,\\n                order.appData,\\n                order.feeAmount,\\n                order.kind,\\n                order.partiallyFillable,\\n                order.sellTokenBalance,\\n                order.buyTokenBalance\\n            )\\n        );\\n        orderDigest = keccak256(abi.encodePacked(\\\"\\\\x19\\\\x01\\\", domainSeparator, structHash));\\n    }\\n}\\n\",\"keccak256\":\"0x9b8e973f4ab364c4dc43f72ee73171a589c5a9cadfb2778281e3c1e6bfc531f9\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IConditionalOrder.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { GPv2Order } from \\\"./GPv2Order.sol\\\";\\n\\n/// @title IConditionalOrder - Interface for conditional order handlers\\n/// @notice Defines the interface for creating conditional/programmatic orders on CoW Protocol\\ninterface IConditionalOrder {\\n    /// @dev Conditional order parameters stored on-chain\\n    struct ConditionalOrderParams {\\n        IConditionalOrder handler;\\n        bytes32 salt;\\n        bytes staticData;\\n    }\\n\\n    /// @notice Verifies that a discrete order is valid for the conditional order\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender calling isValidSignature\\n    /// @param _hash The EIP-712 order digest\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @param ctx The execution context (H(params) for single, merkle root for tree)\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data NOT known at creation time\\n    /// @param order The proposed discrete order\\n    function verify(\\n        address owner,\\n        address sender,\\n        bytes32 _hash,\\n        bytes32 domainSeparator,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput,\\n        GPv2Order.Data calldata order\\n    ) external view;\\n}\\n\\n/// @title IConditionalOrderGenerator - Interface for conditional order generators\\n/// @notice Extends IConditionalOrder to generate tradeable orders\\ninterface IConditionalOrderGenerator is IConditionalOrder {\\n    /// @notice Generates a tradeable GPv2Order based on the current state\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender (usually ComposableCoW)\\n    /// @param ctx The execution context\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data provided by the watch-tower\\n    /// @return order The generated GPv2Order.Data struct\\n    function getTradeableOrder(\\n        address owner,\\n        address sender,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput\\n    ) external view returns (GPv2Order.Data memory order);\\n}\\n\\n/// @title Conditional Order Errors\\n/// @notice Custom errors for signaling to watch-towers\\n\\n/// @dev Signal to try polling again at the next block\\nerror PollTryNextBlock(string reason);\\n\\n/// @dev Signal to try polling at a specific block\\nerror PollTryAtBlock(uint256 blockNumber, string reason);\\n\\n/// @dev Signal to try polling at a specific timestamp\\nerror PollTryAtEpoch(uint256 timestamp, string reason);\\n\\n/// @dev Signal to stop polling this order (completed or cancelled)\\nerror PollNever(string reason);\\n\\n/// @dev Signal that the order parameters are invalid\\nerror OrderNotValid(string reason);\\n\\n/// @dev Signal that the order is not currently tradeable\\nerror OrderNotReady(string reason);\\n\",\"keccak256\":\"0x8ed6bb23c9714b66979060191d71c9601b8cc69df40b8d9b06d284e00b318eca\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a0346100be57601f610fd838819003918201601f19168301916001600160401b038311848410176100c2578084926020946040528339810103126100be57516001600160a01b038116908190036100be57801561008757608052604051610f0190816100d7823960805181818161012201528181610725015281816107e70152610db30152f35b60405162461bcd60e51b815260206004820152600f60248201526e24b73b30b634b21036b0b730b3b2b960891b6044820152606490fd5b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a7146109da5750806314a2a78414610754578063481c6a75146107105763b8296fc414610048575f80fd5b346104fc5760a03660031901126104fc57610061610a45565b5061006a610a5b565b506064356001600160401b0381116104fc5761008a903690600401610a71565b6084356001600160401b0381116104fc576020916100ad84923690600401610a71565b50505f6101606040516100bf81610a9e565b82815282868201528260408201528260608201528260808201528260a08201528260c08201528260e08201528261010082015282610120820152826101408201520152810103126104fc57604051632bbc239560e11b81529035600482018190527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316905f83602481855afa928315610508575f936106ec575b50602083015160048110156106d8575f19016106be5782516020808201516040808401519351818801805192516343fc086560e01b8152606060048201526001600160a01b039485169896919590949093859384939216916101c7906064850190610d1d565b91602484015260448301520381885afa908115610508575f91610684575b5061064b5761010085510151801515908161063f575b506106005760405163268a0ec160e01b81526004810184905293602085602481865afa948515610508575f956105cc575b508493604051906303fc40f560e51b82526004820152602081602481875afa908115610508575f9161059a575b5094156103e0575b506060850151905161027291610d9d565b908142116103a95761018094519260018060a01b036080850151169460e060018060a01b0360a08701511695015163ffffffff604051956102b287610a9e565b888752602087019788526040870195865260608701948552608087019384528160a088019116815260c0870192835260e08701935f85526101008801957ff3b277728b3fee749481eb3e0b3b48980dbbab78658fc419025cb16eee34677587526101208901975f89526101606101408b019a5f516020610eac5f395f51905f528c52019a5f516020610eac5f395f51905f528c526040519c8d5260018060a01b0390511660208d015260018060a01b0390511660408c01525160608b01525160808a0152511660a08801525160c08701525160e0860152516101008501525115156101208401525161014083015251610160820152f35b60405163d05f306560e01b815260206004820152600e60248201526d1dda5b991bddd7d95e1c1a5c995960921b6044820152606490fd5b85516040808201519151905163632224a760e01b815293965093945090925f918391829161041b916001600160a01b03169060048401610d41565b0381855afa908115610508575f905f9261053c575b50156105135750835160408082015191518151632b548a7b60e11b81529493919285929183918291610471916001600160a01b039091169060048401610d41565b03915afa8015610508575f925f916104cb575b50928215610492575f610261565b60405163981b64cd60e01b815260206004820152601060248201526f1e995c9bd7dcd95b1b17d85b5bdd5b9d60821b6044820152606490fd5b9250506040823d604011610500575b816104e760409383610ace565b810103126104fc57602082519201515f610484565b5f80fd5b3d91506104da565b6040513d5f823e3d90fd5b60405163d05f306560e01b815260206004820152908190610538906024830190610d1d565b0390fd5b9150503d805f833e61054e8183610ace565b81016040828203126104fc5761056382610d10565b602083015190926001600160401b0382116104fc57019080601f830112156104fc57815161059392602001610b05565b905f610430565b90506020813d6020116105c4575b816105b560209383610ace565b810103126104fc57515f610259565b3d91506105a8565b9094506020813d6020116105f8575b816105e860209383610ace565b810103126104fc5751935f61022c565b3d91506105db565b60405163981b64cd60e01b81526020600482015260166024820152751b585e17da5d195c985d1a5bdb9cd7dc995858da195960521b6044820152606490fd5b9050815110155f6101fb565b60405163981b64cd60e01b815260206004820152601060248201526f747269676765725f636f6d706c65746560801b6044820152606490fd5b90506020813d6020116106b6575b8161069f60209383610ace565b810103126104fc576106b090610d10565b5f6101e5565b3d9150610692565b60405163981b64cd60e01b81528061053860048201610ce5565b634e487b7160e01b5f52602160045260245ffd5b6107099193503d805f833e6107018183610ace565b810190610b67565b915f610161565b346104fc575f3660031901126104fc576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346104fc576102603660031901126104fc5761076e610a45565b50610777610a5b565b5060a4356001600160401b0381116104fc57610797903690600401610a71565b60c4356001600160401b0381116104fc576107b6903690600401610a71565b50506101803660e31901126104fc5781602091810103126104fc57604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165f82602481845afa918215610508575f926109be575b50602082015160048110156106d8575f19016109a45760e4356001600160a01b038116908181036104fc57508251608001516001600160a01b03160361096857610104356001600160a01b038116908181036104fc5750825160a001516001600160a01b03160361092d57610124356001600160a01b038116908190036104fc57036108f4575160e001516101a435036108bb57005b60405163c8fc272560e01b815260206004820152601060248201526f0c2e0e0c8c2e8c2bedad2e6dac2e8c6d60831b6044820152606490fd5b60405163c8fc272560e01b815260206004820152601060248201526f34b73b30b634b22fb932b1b2b4bb32b960811b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260126024820152710c4eaf2bee8ded6cadcbedad2e6dac2e8c6d60731b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260136024820152720e6cad8d8bee8ded6cadcbedad2e6dac2e8c6d606b1b6044820152606490fd5b60405163c8fc272560e01b81528061053860048201610ce5565b6109d39192503d805f833e6107018183610ace565b9082610825565b346104fc5760203660031901126104fc576004359063ffffffff60e01b82168092036104fc57602091632e0a5bf160e21b8114908115610a34575b8115610a23575b5015158152f35b6301ffc9a760e01b14905083610a1c565b630528a9e160e21b81149150610a15565b600435906001600160a01b03821682036104fc57565b602435906001600160a01b03821682036104fc57565b9181601f840112156104fc578235916001600160401b0383116104fc57602083818601950101116104fc57565b61018081019081106001600160401b03821117610aba57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b03821190821017610aba57604052565b51906001600160a01b03821682036104fc57565b9192916001600160401b038211610aba5760405191610b2e601f8201601f191660200184610ace565b8294818452818301116104fc578281602093845f96015e010152565b9080601f830112156104fc578151610b6492602001610b05565b90565b6020818303126104fc578051906001600160401b0382116104fc57016080818303126104fc5760405191608083016001600160401b03811184821017610aba5760405281516001600160401b0381116104fc578201610140818303126104fc576040519161014083016001600160401b03811184821017610aba57604052610bee82610af1565b8352610bfc60208301610af1565b602084015260408201516001600160401b0381116104fc5781610c20918401610b4a565b604084015260608201516001600160401b0381116104fc5781610c44918401610b4a565b6060840152610c5560808301610af1565b6080840152610c6660a08301610af1565b60a084015260c0820151916001600160401b0383116104fc57610c9161012092610cb2948301610b4a565b60c085015260e081015160e085015261010081015161010085015201610af1565b610120820152825260208101519060048210156104fc576060916020840152604081015160408401520151606082015290565b60609060208152601060208201526f6f726465725f6e6f745f61637469766560801b60408201520190565b519081151582036104fc57565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b90610d59602091949394604084526040840190610d1d565b6001600160a01b03909416910152565b81810292918115918404141715610d7c57565b634e487b7160e01b5f52601160045260245ffd5b91908201809211610d7c57565b60405163018ecba160e11b8152916020836004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa928315610508575f93610e75575b5082610e03610dfd82610e0894610d69565b84610d90565b610d90565b5f198101908111610d7c5780421115610e6f5750804203428111610d7c578215610e5b5782900460018101809111610d7c57610e4d92610e4791610d69565b90610d90565b5f198101908111610d7c5790565b634e487b7160e01b5f52601260045260245ffd5b91505090565b9092506020813d602011610ea3575b81610e9160209383610ace565b810103126104fc575191610e08610deb565b3d9150610e8456fe5a28e9363bb942b639270062aa6bb295f434bcdfc42c97267bf003f272060dc9a2646970667358221220c11a16674b6bd6e2166a1d10bfc3d153f6470d8b58d08876ccd0b2f49db1ed3064736f6c634300081e0033",
  "deployedBytecode": "0x6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a7146109da5750806314a2a78414610754578063481c6a75146107105763b8296fc414610048575f80fd5b346104fc5760a03660031901126104fc57610061610a45565b5061006a610a5b565b506064356001600160401b0381116104fc5761008a903690600401610a71565b6084356001600160401b0381116104fc576020916100ad84923690600401610a71565b50505f6101606040516100bf81610a9e565b82815282868201528260408201528260608201528260808201528260a08201528260c08201528260e08201528261010082015282610120820152826101408201520152810103126104fc57604051632bbc239560e11b81529035600482018190527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316905f83602481855afa928315610508575f936106ec575b50602083015160048110156106d8575f19016106be5782516020808201516040808401519351818801805192516343fc086560e01b8152606060048201526001600160a01b039485169896919590949093859384939216916101c7906064850190610d1d565b91602484015260448301520381885afa908115610508575f91610684575b5061064b5761010085510151801515908161063f575b506106005760405163268a0ec160e01b81526004810184905293602085602481865afa948515610508575f956105cc575b508493604051906303fc40f560e51b82526004820152602081602481875afa908115610508575f9161059a575b5094156103e0575b506060850151905161027291610d9d565b908142116103a95761018094519260018060a01b036080850151169460e060018060a01b0360a08701511695015163ffffffff604051956102b287610a9e565b888752602087019788526040870195865260608701948552608087019384528160a088019116815260c0870192835260e08701935f85526101008801957ff3b277728b3fee749481eb3e0b3b48980dbbab78658fc419025cb16eee34677587526101208901975f89526101606101408b019a5f516020610eac5f395f51905f528c52019a5f516020610eac5f395f51905f528c526040519c8d5260018060a01b0390511660208d015260018060a01b0390511660408c01525160608b01525160808a0152511660a08801525160c08701525160e0860152516101008501525115156101208401525161014083015251610160820152f35b60405163d05f306560e01b815260206004820152600e60248201526d1dda5b991bddd7d95e1c1a5c995960921b6044820152606490fd5b85516040808201519151905163632224a760e01b815293965093945090925f918391829161041b916001600160a01b03169060048401610d41565b0381855afa908115610508575f905f9261053c575b50156105135750835160408082015191518151632b548a7b60e11b81529493919285929183918291610471916001600160a01b039091169060048401610d41565b03915afa8015610508575f925f916104cb575b50928215610492575f610261565b60405163981b64cd60e01b815260206004820152601060248201526f1e995c9bd7dcd95b1b17d85b5bdd5b9d60821b6044820152606490fd5b9250506040823d604011610500575b816104e760409383610ace565b810103126104fc57602082519201515f610484565b5f80fd5b3d91506104da565b6040513d5f823e3d90fd5b60405163d05f306560e01b815260206004820152908190610538906024830190610d1d565b0390fd5b9150503d805f833e61054e8183610ace565b81016040828203126104fc5761056382610d10565b602083015190926001600160401b0382116104fc57019080601f830112156104fc57815161059392602001610b05565b905f610430565b90506020813d6020116105c4575b816105b560209383610ace565b810103126104fc57515f610259565b3d91506105a8565b9094506020813d6020116105f8575b816105e860209383610ace565b810103126104fc5751935f61022c565b3d91506105db565b60405163981b64cd60e01b81526020600482015260166024820152751b585e17da5d195c985d1a5bdb9cd7dc995858da195960521b6044820152606490fd5b9050815110155f6101fb565b60405163981b64cd60e01b815260206004820152601060248201526f747269676765725f636f6d706c65746560801b6044820152606490fd5b90506020813d6020116106b6575b8161069f60209383610ace565b810103126104fc576106b090610d10565b5f6101e5565b3d9150610692565b60405163981b64cd60e01b81528061053860048201610ce5565b634e487b7160e01b5f52602160045260245ffd5b6107099193503d805f833e6107018183610ace565b810190610b67565b915f610161565b346104fc575f3660031901126104fc576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346104fc576102603660031901126104fc5761076e610a45565b50610777610a5b565b5060a4356001600160401b0381116104fc57610797903690600401610a71565b60c4356001600160401b0381116104fc576107b6903690600401610a71565b50506101803660e31901126104fc5781602091810103126104fc57604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165f82602481845afa918215610508575f926109be575b50602082015160048110156106d8575f19016109a45760e4356001600160a01b038116908181036104fc57508251608001516001600160a01b03160361096857610104356001600160a01b038116908181036104fc5750825160a001516001600160a01b03160361092d57610124356001600160a01b038116908190036104fc57036108f4575160e001516101a435036108bb57005b60405163c8fc272560e01b815260206004820152601060248201526f0c2e0e0c8c2e8c2bedad2e6dac2e8c6d60831b6044820152606490fd5b60405163c8fc272560e01b815260206004820152601060248201526f34b73b30b634b22fb932b1b2b4bb32b960811b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260126024820152710c4eaf2bee8ded6cadcbedad2e6dac2e8c6d60731b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260136024820152720e6cad8d8bee8ded6cadcbedad2e6dac2e8c6d606b1b6044820152606490fd5b60405163c8fc272560e01b81528061053860048201610ce5565b6109d39192503d805f833e6107018183610ace565b9082610825565b346104fc5760203660031901126104fc576004359063ffffffff60e01b82168092036104fc57602091632e0a5bf160e21b8114908115610a34575b8115610a23575b5015158152f35b6301ffc9a760e01b14905083610a1c565b630528a9e160e21b81149150610a15565b600435906001600160a01b03821682036104fc57565b602435906001600160a01b03821682036104fc57565b9181601f840112156104fc578235916001600160401b0383116104fc57602083818601950101116104fc57565b61018081019081106001600160401b03821117610aba57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b03821190821017610aba57604052565b51906001600160a01b03821682036104fc57565b9192916001600160401b038211610aba5760405191610b2e601f8201601f191660200184610ace565b8294818452818301116104fc578281602093845f96015e010152565b9080601f830112156104fc578151610b6492602001610b05565b90565b6020818303126104fc578051906001600160401b0382116104fc57016080818303126104fc5760405191608083016001600160401b03811184821017610aba5760405281516001600160401b0381116104fc578201610140818303126104fc576040519161014083016001600160401b03811184821017610aba57604052610bee82610af1565b8352610bfc60208301610af1565b602084015260408201516001600160401b0381116104fc5781610c20918401610b4a565b604084015260608201516001600160401b0381116104fc5781610c44918401610b4a565b6060840152610c5560808301610af1565b6080840152610c6660a08301610af1565b60a084015260c0820151916001600160401b0383116104fc57610c9161012092610cb2948301610b4a565b60c085015260e081015160e085015261010081015161010085015201610af1565b610120820152825260208101519060048210156104fc576060916020840152604081015160408401520151606082015290565b60609060208152601060208201526f6f726465725f6e6f745f61637469766560801b60408201520190565b519081151582036104fc57565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b90610d59602091949394604084526040840190610d1d565b6001600160a01b03909416910152565b81810292918115918404141715610d7c57565b634e487b7160e01b5f52601160045260245ffd5b91908201809211610d7c57565b60405163018ecba160e11b8152916020836004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa928315610508575f93610e75575b5082610e03610dfd82610e0894610d69565b84610d90565b610d90565b5f198101908111610d7c5780421115610e6f5750804203428111610d7c578215610e5b5782900460018101809111610d7c57610e4d92610e4791610d69565b90610d90565b5f198101908111610d7c5790565b634e487b7160e01b5f52601260045260245ffd5b91505090565b9092506020813d602011610ea3575b81610e9160209383610ace565b810103126104fc575191610e08610deb565b3d9150610e8456fe5a28e9363bb942b639270062aa6bb295f434bcdfc42c97267bf003f272060dc9a2646970667358221220c11a16674b6bd6e2166a1d10bfc3d153f6470d8b58d08876ccd0b2f49db1ed3064736f6c634300081e0033",
  "devdoc": {
    "details": "Implements IConditionalOrderGenerator for ComposableCoW integration.      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.      Separating handler from manager is required because:      - Handler must implement IERC165 for ComposableCoW to verify interface support      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path",
    "errors": {
      "OrderNotValid(string)": [
        {
          "details": "Signal that the order parameters are invalid"
        }
      ],
      "PollNever(string)": [
        {
          "details": "Signal to stop polling this order (completed or cancelled)"
        }
      ],
      "PollTryNextBlock(string)": [
        {
          "details": "Signal to try polling again at the next block"
        }
      ]
    },
    "kind": "dev",
    "methods": {
      "getTradeableOrder(address,address,bytes32,bytes,bytes)": {
        "details": "Called by ComposableCoW via getTradeableOrderWithSignature",
        "params": {
          "staticInput": "ABI-encoded orderHash"
        },
        "returns": {
          "order": "The GPv2Order.Data struct"
        }
      },
      "supportsInterface(bytes4)": {
        "details": "Required for ComposableCoW to verify handler compatibility"
      },
      "verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))": {
        "details": "Called by ComposableCoW during signature verification"
      }
    },
    "title": "KapanConditionalOrderHandler",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "getTradeableOrder(address,address,bytes32,bytes,bytes)": {
        "notice": "Generate a tradeable order if trigger condition is met"
      },
      "manager()": {
        "notice": "The KapanConditionalOrderManager that stores order contexts"
      },
      "supportsInterface(bytes4)": {
        "notice": "Check if contract supports an interface"
      },
      "verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))": {
        "notice": "Verify that a proposed order matches the conditional order"
      }
    },
    "notice": "Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}