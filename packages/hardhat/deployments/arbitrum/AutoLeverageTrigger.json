{
  "address": "0xC4abeC1C2BbE9E0C3C6ff43bB3d15CA02E38395f",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_viewRouter",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidTriggerParams",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "AAVE_V3",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "COMPOUND_V3",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "EULER_V2",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MORPHO_BLUE",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "staticData",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "calculateExecution",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "sellAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "minBuyAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "bytes4",
              "name": "protocolId",
              "type": "bytes4"
            },
            {
              "internalType": "bytes",
              "name": "protocolContext",
              "type": "bytes"
            },
            {
              "internalType": "uint256",
              "name": "triggerLtvBps",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "targetLtvBps",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "collateralToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "debtToken",
              "type": "address"
            },
            {
              "internalType": "uint8",
              "name": "collateralDecimals",
              "type": "uint8"
            },
            {
              "internalType": "uint8",
              "name": "debtDecimals",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "maxSlippageBps",
              "type": "uint256"
            },
            {
              "internalType": "uint8",
              "name": "numChunks",
              "type": "uint8"
            }
          ],
          "internalType": "struct AutoLeverageTrigger.TriggerParams",
          "name": "params",
          "type": "tuple"
        }
      ],
      "name": "encodeTriggerParams",
      "outputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "protocolId",
          "type": "bytes4"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "bytes",
          "name": "context",
          "type": "bytes"
        }
      ],
      "name": "getCurrentLtv",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "isComplete",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "staticData",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "shouldExecute",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "triggerName",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "viewRouter",
      "outputs": [
        {
          "internalType": "contract IKapanViewRouter",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xec5fa682d8717cd39cf21171db6e9f68a9d8bfca7cc81853f29d82cdc498eb7e",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "contractAddress": null,
    "transactionIndex": 4,
    "gasUsed": "909201",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x1610b6122d5aa41b382bc27c53f651c9de4596d686f067c490ca635269222ac4",
    "transactionHash": "0xec5fa682d8717cd39cf21171db6e9f68a9d8bfca7cc81853f29d82cdc498eb7e",
    "logs": [],
    "blockNumber": 427616866,
    "cumulativeGasUsed": "1113625",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x605e7b99eeaC2072A78e86bb3E31b301A0743637"
  ],
  "numDeployments": 12,
  "solcInputHash": "0fea5cc4d237037126c3fb60329d2945",
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_viewRouter\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidTriggerParams\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AAVE_V3\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"COMPOUND_V3\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"EULER_V2\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MORPHO_BLUE\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"staticData\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"calculateExecution\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minBuyAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bytes4\",\"name\":\"protocolId\",\"type\":\"bytes4\"},{\"internalType\":\"bytes\",\"name\":\"protocolContext\",\"type\":\"bytes\"},{\"internalType\":\"uint256\",\"name\":\"triggerLtvBps\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"targetLtvBps\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"debtToken\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"collateralDecimals\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"debtDecimals\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"maxSlippageBps\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"numChunks\",\"type\":\"uint8\"}],\"internalType\":\"struct AutoLeverageTrigger.TriggerParams\",\"name\":\"params\",\"type\":\"tuple\"}],\"name\":\"encodeTriggerParams\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"protocolId\",\"type\":\"bytes4\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"context\",\"type\":\"bytes\"}],\"name\":\"getCurrentLtv\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"isComplete\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"staticData\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"shouldExecute\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"triggerName\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"viewRouter\",\"outputs\":[{\"internalType\":\"contract IKapanViewRouter\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Opposite of LtvTrigger - increases leverage when under-leveraged Flow: 1. Pre-hook: Flash loan collateral \\u2192 Deposit \\u2192 Borrow debt \\u2192 Push to OrderManager 2. CoW Swap: Debt \\u2192 Collateral 3. Post-hook: Repay flash loan with received collateral Order params:   - sellToken = debtToken (we're selling borrowed debt)   - buyToken = collateralToken (we're buying collateral to repay flash loan)\",\"kind\":\"dev\",\"methods\":{\"calculateExecution(bytes,address,uint256)\":{\"details\":\"Returns:   - sellAmount: debt tokens to borrow and swap   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)\",\"params\":{\"iterationCount\":\"Number of executions completed so far (for chunked orders)\",\"owner\":\"The order owner\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"minBuyAmount\":\"Minimum amount to receive (includes slippage protection)\",\"sellAmount\":\"Amount of sell token to trade in this execution\"}},\"isComplete(bytes,address,uint256)\":{\"details\":\"Auto-leverage orders are continuous - they never auto-complete. The order remains active and will re-trigger whenever LTV drops below the trigger threshold, up to maxIterations or until user cancels. This provides ongoing leverage management rather than one-shot execution.\",\"params\":{\"iterationCount\":\"Number of executions completed so far\",\"owner\":\"The order owner\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"_0\":\"True if the order goal has been reached\"}},\"shouldExecute(bytes,address)\":{\"params\":{\"owner\":\"The order owner (user whose position is being monitored)\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"_0\":\"True if the trigger condition is met\",\"_1\":\"Human-readable reason for the result (for debugging/logging)\"}},\"triggerName()\":{\"returns\":{\"_0\":\"Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\"}}},\"title\":\"AutoLeverageTrigger\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"calculateExecution(bytes,address,uint256)\":{\"notice\":\"Calculate the execution amounts when the trigger fires\"},\"encodeTriggerParams((bytes4,bytes,uint256,uint256,address,address,uint8,uint8,uint256,uint8))\":{\"notice\":\"Encode trigger params for order creation\"},\"getCurrentLtv(bytes4,address,bytes)\":{\"notice\":\"Get current LTV for a user\"},\"isComplete(bytes,address,uint256)\":{\"notice\":\"Check if the order is complete and should stop executing\"},\"shouldExecute(bytes,address)\":{\"notice\":\"Check if the order should execute based on current conditions\"},\"triggerName()\":{\"notice\":\"Get human-readable name of the trigger type\"}},\"notice\":\"Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/v2/triggers/AutoLeverageTrigger.sol\":\"AutoLeverageTrigger\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":10},\"remappings\":[],\"viaIR\":true},\"sources\":{\"contracts/v2/interfaces/IOrderTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IOrderTrigger\\n/// @notice Interface for pluggable order triggers in the Kapan conditional order system\\n/// @dev Triggers determine when an order should execute and how much to trade\\ninterface IOrderTrigger {\\n    /// @notice Check if the order should execute based on current conditions\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner (user whose position is being monitored)\\n    /// @return shouldExecute True if the trigger condition is met\\n    /// @return reason Human-readable reason for the result (for debugging/logging)\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (bool shouldExecute, string memory reason);\\n\\n    /// @notice Calculate the execution amounts when the trigger fires\\n    /// @dev Only called when shouldExecute returns true\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far (for chunked orders)\\n    /// @return sellAmount Amount of sell token to trade in this execution\\n    /// @return minBuyAmount Minimum amount to receive (includes slippage protection)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (uint256 sellAmount, uint256 minBuyAmount);\\n\\n    /// @notice Check if the order is complete and should stop executing\\n    /// @dev Called after each execution to determine if order should be marked complete\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far\\n    /// @return complete True if the order goal has been reached\\n    function isComplete(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (bool complete);\\n\\n    /// @notice Get human-readable name of the trigger type\\n    /// @return name Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\\n    function triggerName() external pure returns (string memory name);\\n}\\n\",\"keccak256\":\"0x852a502f0d40f6547adddd882bdbe33f2993af371d691abd211cb372ff646c35\",\"license\":\"MIT\"},\"contracts/v2/triggers/AutoLeverageTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IOrderTrigger } from \\\"../interfaces/IOrderTrigger.sol\\\";\\n\\n/// @notice Morpho Blue MarketParams structure\\nstruct MarketParams {\\n    address loanToken;\\n    address collateralToken;\\n    address oracle;\\n    address irm;\\n    uint256 lltv;\\n}\\n\\n/// @title KapanViewRouter Interface (same as LtvTrigger)\\ninterface IKapanViewRouter {\\n    function getCurrentLtv(bytes4 protocolId, address user, bytes calldata context) external view returns (uint256 ltvBps);\\n    function getPositionValue(bytes4 protocolId, address user, bytes calldata context) external view returns (uint256 collateralValueUsd, uint256 debtValueUsd);\\n    function getCollateralPrice(bytes4 protocolId, address collateralToken, bytes calldata context) external view returns (uint256 price);\\n    function getDebtPrice(bytes4 protocolId, address debtToken, bytes calldata context) external view returns (uint256 price);\\n    function getMorphoOraclePrice(MarketParams calldata params) external view returns (uint256 price);\\n}\\n\\n/// @title AutoLeverageTrigger\\n/// @notice Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)\\n/// @dev Opposite of LtvTrigger - increases leverage when under-leveraged\\n///\\n/// Flow:\\n/// 1. Pre-hook: Flash loan collateral \\u2192 Deposit \\u2192 Borrow debt \\u2192 Push to OrderManager\\n/// 2. CoW Swap: Debt \\u2192 Collateral\\n/// 3. Post-hook: Repay flash loan with received collateral\\n///\\n/// Order params:\\n///   - sellToken = debtToken (we're selling borrowed debt)\\n///   - buyToken = collateralToken (we're buying collateral to repay flash loan)\\ncontract AutoLeverageTrigger is IOrderTrigger {\\n    // ============ Errors ============\\n    error InvalidTriggerParams();\\n\\n    // ============ Constants ============\\n    bytes4 public constant AAVE_V3 = bytes4(keccak256(\\\"aave-v3\\\"));\\n    bytes4 public constant COMPOUND_V3 = bytes4(keccak256(\\\"compound-v3\\\"));\\n    bytes4 public constant MORPHO_BLUE = bytes4(keccak256(\\\"morpho-blue\\\"));\\n    bytes4 public constant EULER_V2 = bytes4(keccak256(\\\"euler-v2\\\"));\\n\\n    // ============ Immutables ============\\n    IKapanViewRouter public immutable viewRouter;\\n\\n    // ============ Structs ============\\n\\n    /// @notice Trigger parameters for LTV-based auto-leverage\\n    struct TriggerParams {\\n        bytes4 protocolId;          // Protocol identifier\\n        bytes protocolContext;       // Protocol-specific data\\n        uint256 triggerLtvBps;       // LTV threshold BELOW which to trigger (e.g., 5000 = 50%)\\n        uint256 targetLtvBps;        // Target LTV after leverage (e.g., 7000 = 70%)\\n        address collateralToken;     // Token to BUY (receive from swap, repay flash loan)\\n        address debtToken;           // Token to SELL (borrow and swap)\\n        uint8 collateralDecimals;\\n        uint8 debtDecimals;\\n        uint256 maxSlippageBps;      // Maximum slippage tolerance\\n        uint8 numChunks;             // Number of chunks (1 = full amount)\\n    }\\n\\n    // ============ Constructor ============\\n\\n    constructor(address _viewRouter) {\\n        if (_viewRouter == address(0)) revert InvalidTriggerParams();\\n        viewRouter = IKapanViewRouter(_viewRouter);\\n    }\\n\\n    // ============ IOrderTrigger Implementation ============\\n\\n    /// @inheritdoc IOrderTrigger\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view override returns (bool, string memory) {\\n        TriggerParams memory params = abi.decode(staticData, (TriggerParams));\\n\\n        uint256 currentLtv = viewRouter.getCurrentLtv(params.protocolId, owner, params.protocolContext);\\n\\n        if (currentLtv == 0) {\\n            return (false, \\\"No position\\\");\\n        }\\n\\n        // Trigger when UNDER-leveraged (LTV too low)\\n        if (currentLtv < params.triggerLtvBps) {\\n            return (true, \\\"LTV below threshold - under-leveraged\\\");\\n        }\\n\\n        return (false, \\\"LTV above threshold\\\");\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    /// @dev Returns:\\n    ///   - sellAmount: debt tokens to borrow and swap\\n    ///   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 /* iterationCount */\\n    ) external view override returns (uint256 sellAmount, uint256 minBuyAmount) {\\n        TriggerParams memory params = abi.decode(staticData, (TriggerParams));\\n\\n        // Get current position value in USD (8 decimals)\\n        (uint256 collateralValueUsd, uint256 debtValueUsd) = viewRouter.getPositionValue(\\n            params.protocolId,\\n            owner,\\n            params.protocolContext\\n        );\\n\\n        if (collateralValueUsd == 0) return (0, 0);\\n\\n        uint256 currentLtv = (debtValueUsd * 10000) / collateralValueUsd;\\n        if (currentLtv >= params.targetLtvBps) return (0, 0); // Already at or above target\\n\\n        // Calculate how much additional debt (in USD) to reach target LTV\\n        //\\n        // After leverage:\\n        //   newDebt / newCollateral = targetLTV\\n        //   (D + \\u0394D) / (C + \\u0394C) = targetLTV\\n        //\\n        // Where \\u0394C \\u2248 \\u0394D (collateral received from swapping debt, roughly 1:1 in USD value)\\n        //\\n        // Solving for \\u0394D:\\n        //   D + \\u0394D = targetLTV \\u00d7 (C + \\u0394D)\\n        //   D + \\u0394D = targetLTV \\u00d7 C + targetLTV \\u00d7 \\u0394D\\n        //   \\u0394D \\u00d7 (1 - targetLTV) = targetLTV \\u00d7 C - D\\n        //   \\u0394D = (targetLTV \\u00d7 C - D) / (1 - targetLTV)\\n        //\\n        // This is the inverse of the ADL formula (which reduces both C and D)\\n        uint256 targetDebtUsd = (params.targetLtvBps * collateralValueUsd) / 10000;\\n        if (targetDebtUsd <= debtValueUsd) return (0, 0); // Already at or above target\\n\\n        uint256 numerator = targetDebtUsd - debtValueUsd;\\n        uint256 denominator = 10000 - params.targetLtvBps;\\n        if (denominator == 0) return (0, 0); // Prevent division by zero at 100% LTV\\n\\n        uint256 deltaDebtUsd = (numerator * 10000) / denominator;\\n\\n        // Convert USD to debt token amount\\n        uint256 debtPrice = viewRouter.getDebtPrice(params.protocolId, params.debtToken, params.protocolContext);\\n        sellAmount = (deltaDebtUsd * (10 ** params.debtDecimals)) / debtPrice;\\n\\n        // Apply chunking\\n        uint8 chunks = params.numChunks > 0 ? params.numChunks : 1;\\n        if (chunks > 1) {\\n            sellAmount = sellAmount / chunks;\\n        }\\n\\n        if (sellAmount == 0) return (0, 0);\\n\\n        // Truncate precision to prevent order spam from interest-bearing tokens\\n        // Interest changes cause slightly different amounts each block \\u2192 different order hash \\u2192 spam\\n        sellAmount = _truncatePrecision(sellAmount, params.debtDecimals);\\n\\n        if (sellAmount == 0) return (0, 0);\\n\\n        // Calculate minBuyAmount (collateral) with slippage\\n        // This must cover the flash loan repayment\\n        uint256 expectedCollateral;\\n\\n        if (params.protocolId == MORPHO_BLUE) {\\n            // Morpho uses a special oracle that returns collateral/debt exchange rate at 36 decimals\\n            // Formula: collateralAmount = debtAmount * 1e36 / oraclePrice\\n            // The oracle accounts for decimal differences between tokens\\n            MarketParams memory marketParams = abi.decode(params.protocolContext, (MarketParams));\\n            uint256 morphoOraclePrice = viewRouter.getMorphoOraclePrice(marketParams);\\n            if (morphoOraclePrice > 0) {\\n                // sellAmount is in debt token decimals, result is in collateral token decimals\\n                expectedCollateral = (sellAmount * 1e36) / morphoOraclePrice;\\n            }\\n        } else {\\n            // Standard price-based calculation for other protocols\\n            uint256 collateralPrice = viewRouter.getCollateralPrice(\\n                params.protocolId,\\n                params.collateralToken,\\n                params.protocolContext\\n            );\\n\\n            if (collateralPrice > 0) {\\n                // Expected collateral = sellAmount(debt) \\u00d7 debtPrice / collateralPrice\\n                expectedCollateral = (sellAmount * debtPrice) / collateralPrice;\\n                // Adjust for decimals\\n                expectedCollateral = (expectedCollateral * (10 ** params.collateralDecimals)) / (10 ** params.debtDecimals);\\n            }\\n        }\\n\\n        // Truncate expectedCollateral to prevent spam from price fluctuations\\n        // Must truncate BEFORE applying slippage to preserve full slippage protection\\n        expectedCollateral = _truncatePrecision(expectedCollateral, params.collateralDecimals);\\n\\n        // Apply slippage AFTER truncation\\n        minBuyAmount = (expectedCollateral * (10000 - params.maxSlippageBps)) / 10000;\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    /// @dev Auto-leverage orders are continuous - they never auto-complete.\\n    /// The order remains active and will re-trigger whenever LTV drops below\\n    /// the trigger threshold, up to maxIterations or until user cancels.\\n    /// This provides ongoing leverage management rather than one-shot execution.\\n    function isComplete(\\n        bytes calldata /* staticData */,\\n        address /* owner */,\\n        uint256 /* iterationCount */\\n    ) external pure override returns (bool) {\\n        // Never auto-complete - rely on maxIterations for termination\\n        return false;\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    function triggerName() external pure override returns (string memory) {\\n        return \\\"AutoLeverage\\\";\\n    }\\n\\n    // ============ View Helpers ============\\n\\n    /// @notice Get current LTV for a user\\n    function getCurrentLtv(bytes4 protocolId, address owner, bytes calldata context) external view returns (uint256) {\\n        return viewRouter.getCurrentLtv(protocolId, owner, context);\\n    }\\n\\n    /// @notice Encode trigger params for order creation\\n    function encodeTriggerParams(TriggerParams memory params) external pure returns (bytes memory) {\\n        return abi.encode(params);\\n    }\\n\\n    // ============ Internal Functions ============\\n\\n    /// @dev Truncate precision to prevent order spam from interest accrual\\n    /// - 18 decimals (ETH): keep 5 \\u2192 0.00001\\n    /// - 8 decimals (WBTC): keep 6 \\u2192 0.000001\\n    /// - 6 decimals (USDC): keep 4 \\u2192 $0.0001\\n    function _truncatePrecision(uint256 amount, uint8 decimals) internal pure returns (uint256) {\\n        if (decimals <= 4) return amount;\\n        uint256 keep;\\n        if (decimals > 12) keep = 5;\\n        else if (decimals > 6) keep = 6;\\n        else keep = 4;\\n        uint256 precision = 10 ** (decimals - keep);\\n        return (amount / precision) * precision;\\n    }\\n\\n}\\n\",\"keccak256\":\"0x982b23f479f5483176d1675ecb5b0a4968d178f05bf4e7ed617c2faa8aef6eee\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a03461009657601f61101738819003918201601f19168301916001600160401b0383118484101761009a5780849260209460405283398101031261009657516001600160a01b0381169081900361009657801561008757608052604051610f6890816100af8239608051818181610374015281816104d30152818161083f0152610a050152f35b63f77479dd60e01b5f5260045ffd5b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080806040526004361015610012575f80fd5b5f3560e01c9081633131489f1461054057508063321394961461051e57806343fc0865146105025780634f1cb291146104be578063632224a71461045e57806368c4be251461043857806390359bcc1461041657806399fec7a0146103f45780639de73085146102d1578063b030ddb3146100eb5763dd90a89114610095575f80fd5b346100e7575f3660031901126100e7576100e36040516100b6604082610665565b600c81526b4175746f4c6576657261676560a01b60208201526040519182916020835260208301906105fc565b0390f35b5f80fd5b346100e75760203660031901126100e7576004356001600160401b0381116100e75761014060031982360301126100e75760405161012881610635565b61013482600401610620565b815260248201356001600160401b0381116100e757820191366023840112156100e757600483013561016581610688565b936101736040519586610665565b81855236602482840101116100e7576024829101602086013783016020015f905260208201928352604082019060448101358252606083019060648101358252608481016101c0906105a2565b608085019081526101d360a483016105a2565b60a086019081526101e660c484016106a3565b60c08701908152906101fa60e485016106a3565b9260e0880193845261010088019461010481013586526101240161021d906106a3565b956101208901968752604051998a9960208b016020905263ffffffff60e01b90511660408b01525160608a0161014090526101808a0161025c916105fc565b975160808a01525160a0890152516001600160a01b0390811660c089015290511660e08701525160ff90811661010087015290518116610120860152905161014085015290511661016083015203601f19810182526102bb9082610665565b604051809160208252602082016100e3916105fc565b346100e75760603660031901126100e75760043563ffffffff60e01b81168091036100e7576102fe61058c565b604435906001600160401b0382116100e7576084610322602093369060040161055f565b604051639de7308560e01b815260048101969096526001600160a01b0390931660248601526060604486015260648501839052849283918190848401375f828201840152601f01601f191681010301817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156103e9575f906103b6575b602090604051908152f35b506020813d6020116103e1575b816103d060209383610665565b810103126100e757602090516103ab565b3d91506103c3565b6040513d5f823e3d90fd5b346100e7575f3660031901126100e757604051633028125760e01b8152602090f35b346100e7575f3660031901126100e757604051633c724fef60e11b8152602090f35b346100e757604061045261044b366105b6565b50916109de565b82519182526020820152f35b346100e75760403660031901126100e7576004356001600160401b0381116100e75761049161049f91369060040161055f565b61049961058c565b916107fe565b906100e3604051928392151583526040602084015260408301906105fc565b346100e7575f3660031901126100e7576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346100e757610510366105b6565b5050505060206040515f8152f35b346100e7575f3660031901126100e75760405163bbbf88eb60e01b8152602090f35b346100e7575f3660031901126100e757633af167ff60e01b8152602090f35b9181601f840112156100e7578235916001600160401b0383116100e757602083818601950101116100e757565b602435906001600160a01b03821682036100e757565b35906001600160a01b03821682036100e757565b60606003198201126100e757600435906001600160401b0382116100e7576105e09160040161055f565b90916024356001600160a01b03811681036100e7579060443590565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b35906001600160e01b0319821682036100e757565b61014081019081106001600160401b0382111761065157604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b0382119082101761065157604052565b6001600160401b03811161065157601f01601f191660200190565b359060ff821682036100e757565b6020818303126100e7578035906001600160401b0382116100e7570190610140828203126100e757604051916106e683610635565b6106ef81610620565b835260208101356001600160401b0381116100e75781019082601f830112156100e75781359261071e84610688565b9061072c6040519283610665565b848252602085850101116100e7575f6020856107bf96826101209701838601378301015260208501526040810135604085015260608101356060850152610775608082016105a2565b608085015261078660a082016105a2565b60a085015261079760c082016106a3565b60c08501526107a860e082016106a3565b60e0850152610100810135610100850152016106a3565b61012082015290565b6001600160e01b031990911681526001600160a01b0390911660208201526060604082018190526107fb929101906105fc565b90565b61080a918101906106b1565b602063ffffffff60e01b82511692818301519361083b6040519586938493639de7308560e01b8552600485016107c8565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156103e9575f92610933575b5081156109065760400151116108ba575f90604051610897604082610665565b60138152721315158818589bdd99481d1a1c995cda1bdb19606a1b602082015290565b6001906040516108cb606082610665565b602581527f4c54562062656c6f77207468726573686f6c64202d20756e6465722d6c6576656020820152641c9859d95960da1b604082015290565b50505f90604051610918604082610665565b600b81526a2737903837b9b4ba34b7b760a91b602082015290565b9091506020813d60201161095f575b8161094f60209383610665565b810103126100e75751905f610877565b3d9150610942565b8181029291811591840414171561097a57565b634e487b7160e01b5f52601160045260245ffd5b8115610998570490565b634e487b7160e01b5f52601260045260245ffd5b9190820391821161097a57565b60ff16604d811161097a57600a0a90565b51906001600160a01b03821682036100e757565b6109ed919392938101906106b1565b8051602082018051604080516326a9d0f960e21b81527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169793949093919284928392610a519291906001600160e01b031916600485016107c8565b0381885afa80156103e9575f915f91610e9b575b508115610e81576127108102818104612710148215171561097a5782610a8a9161098e565b916060850192835180911015610e8d5761271091610aa791610967565b0481811115610e275790610aba916109ac565b9051806127100390612710821161097a5761271014610e8157612710820291808304612710149015171561097a57610af19161098e565b825160a08401518351604051630ee9078360e01b8152939793949260209286928392610b34926001600160a01b0316906001600160e01b031916600485016107c8565b0381855afa9283156103e9575f93610e4d575b50610b6c83610b6760e0870198610b6160ff8b51166109b9565b90610967565b61098e565b61012085015160ff168015610e435760ff905b1660018111610e34575b508015610e2757610b9f9060ff88511690610ed4565b958615610e275784515f94906001600160e01b031916633028125760e01b8103610d4957505050519060a0828051810103126100e7576040519060a082016001600160401b038111838210176106515760209260a491604052610c038486016109ca565b8152610c11604086016109ca565b92848201938452610c24606087016109ca565b956040830196875260a0610c3a608083016109ca565b606085019081529101516080840190815260405163168be4db60e01b815293516001600160a01b03908116600486015295518616602485015296518516604484015251909316606482015293516084850152839182905afa9081156103e9575f91610d17575b5080610ce0575b50610cbe610100915b60ff60c08501511690610ed4565b9101516127100390612710821161097a5761271091610cdc91610967565b0490565b6a0c097ce7bc90715b34b9f160241b8581029250858304148515171561097a57610d10610cbe916101009361098e565b9150610ca7565b90506020813d602011610d41575b81610d3260209383610665565b810103126100e757515f610ca0565b3d9150610d25565b602091929594610d809460018060a01b0360808a01511690519260405196879485938493630794e50360e01b8552600485016107c8565b03915afa9182156103e9575f92610deb575b50928161010094610cbe9493610dab575b505050610cb0565b610de39350610dd5610dc6610ddd93610b6760ff948d610967565b610b618360c08b0151166109b9565b9251166109b9565b9061098e565b5f8080610da3565b929150926020833d602011610e1f575b81610e0860209383610665565b810103126100e75791519192909190610100610d92565b3d9150610dfb565b505050505090505f905f90565b610e3d9161098e565b5f610b89565b5060ff6001610b7f565b9092506020813d602011610e79575b81610e6960209383610665565b810103126100e75751915f610b47565b3d9150610e5c565b5050505090505f905f90565b50505050505090505f905f90565b9150506040813d604011610ecc575b81610eb760409383610665565b810103126100e757602081519101515f610a65565b3d9150610eaa565b9060ff166004811115610f2e57610ef690600c811115610f15576005906109ac565b90604d821161097a57610f106107fb92600a0a809261098e565b610967565b6006811115610f26576006906109ac565b6004906109ac565b509056fea264697066735822122004dee65548c21f6e2443660f64374a1ad187ee5579f666cb57bacb2333d90d5064736f6c634300081e0033",
  "deployedBytecode": "0x6080806040526004361015610012575f80fd5b5f3560e01c9081633131489f1461054057508063321394961461051e57806343fc0865146105025780634f1cb291146104be578063632224a71461045e57806368c4be251461043857806390359bcc1461041657806399fec7a0146103f45780639de73085146102d1578063b030ddb3146100eb5763dd90a89114610095575f80fd5b346100e7575f3660031901126100e7576100e36040516100b6604082610665565b600c81526b4175746f4c6576657261676560a01b60208201526040519182916020835260208301906105fc565b0390f35b5f80fd5b346100e75760203660031901126100e7576004356001600160401b0381116100e75761014060031982360301126100e75760405161012881610635565b61013482600401610620565b815260248201356001600160401b0381116100e757820191366023840112156100e757600483013561016581610688565b936101736040519586610665565b81855236602482840101116100e7576024829101602086013783016020015f905260208201928352604082019060448101358252606083019060648101358252608481016101c0906105a2565b608085019081526101d360a483016105a2565b60a086019081526101e660c484016106a3565b60c08701908152906101fa60e485016106a3565b9260e0880193845261010088019461010481013586526101240161021d906106a3565b956101208901968752604051998a9960208b016020905263ffffffff60e01b90511660408b01525160608a0161014090526101808a0161025c916105fc565b975160808a01525160a0890152516001600160a01b0390811660c089015290511660e08701525160ff90811661010087015290518116610120860152905161014085015290511661016083015203601f19810182526102bb9082610665565b604051809160208252602082016100e3916105fc565b346100e75760603660031901126100e75760043563ffffffff60e01b81168091036100e7576102fe61058c565b604435906001600160401b0382116100e7576084610322602093369060040161055f565b604051639de7308560e01b815260048101969096526001600160a01b0390931660248601526060604486015260648501839052849283918190848401375f828201840152601f01601f191681010301817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156103e9575f906103b6575b602090604051908152f35b506020813d6020116103e1575b816103d060209383610665565b810103126100e757602090516103ab565b3d91506103c3565b6040513d5f823e3d90fd5b346100e7575f3660031901126100e757604051633028125760e01b8152602090f35b346100e7575f3660031901126100e757604051633c724fef60e11b8152602090f35b346100e757604061045261044b366105b6565b50916109de565b82519182526020820152f35b346100e75760403660031901126100e7576004356001600160401b0381116100e75761049161049f91369060040161055f565b61049961058c565b916107fe565b906100e3604051928392151583526040602084015260408301906105fc565b346100e7575f3660031901126100e7576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346100e757610510366105b6565b5050505060206040515f8152f35b346100e7575f3660031901126100e75760405163bbbf88eb60e01b8152602090f35b346100e7575f3660031901126100e757633af167ff60e01b8152602090f35b9181601f840112156100e7578235916001600160401b0383116100e757602083818601950101116100e757565b602435906001600160a01b03821682036100e757565b35906001600160a01b03821682036100e757565b60606003198201126100e757600435906001600160401b0382116100e7576105e09160040161055f565b90916024356001600160a01b03811681036100e7579060443590565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b35906001600160e01b0319821682036100e757565b61014081019081106001600160401b0382111761065157604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b0382119082101761065157604052565b6001600160401b03811161065157601f01601f191660200190565b359060ff821682036100e757565b6020818303126100e7578035906001600160401b0382116100e7570190610140828203126100e757604051916106e683610635565b6106ef81610620565b835260208101356001600160401b0381116100e75781019082601f830112156100e75781359261071e84610688565b9061072c6040519283610665565b848252602085850101116100e7575f6020856107bf96826101209701838601378301015260208501526040810135604085015260608101356060850152610775608082016105a2565b608085015261078660a082016105a2565b60a085015261079760c082016106a3565b60c08501526107a860e082016106a3565b60e0850152610100810135610100850152016106a3565b61012082015290565b6001600160e01b031990911681526001600160a01b0390911660208201526060604082018190526107fb929101906105fc565b90565b61080a918101906106b1565b602063ffffffff60e01b82511692818301519361083b6040519586938493639de7308560e01b8552600485016107c8565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156103e9575f92610933575b5081156109065760400151116108ba575f90604051610897604082610665565b60138152721315158818589bdd99481d1a1c995cda1bdb19606a1b602082015290565b6001906040516108cb606082610665565b602581527f4c54562062656c6f77207468726573686f6c64202d20756e6465722d6c6576656020820152641c9859d95960da1b604082015290565b50505f90604051610918604082610665565b600b81526a2737903837b9b4ba34b7b760a91b602082015290565b9091506020813d60201161095f575b8161094f60209383610665565b810103126100e75751905f610877565b3d9150610942565b8181029291811591840414171561097a57565b634e487b7160e01b5f52601160045260245ffd5b8115610998570490565b634e487b7160e01b5f52601260045260245ffd5b9190820391821161097a57565b60ff16604d811161097a57600a0a90565b51906001600160a01b03821682036100e757565b6109ed919392938101906106b1565b8051602082018051604080516326a9d0f960e21b81527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169793949093919284928392610a519291906001600160e01b031916600485016107c8565b0381885afa80156103e9575f915f91610e9b575b508115610e81576127108102818104612710148215171561097a5782610a8a9161098e565b916060850192835180911015610e8d5761271091610aa791610967565b0481811115610e275790610aba916109ac565b9051806127100390612710821161097a5761271014610e8157612710820291808304612710149015171561097a57610af19161098e565b825160a08401518351604051630ee9078360e01b8152939793949260209286928392610b34926001600160a01b0316906001600160e01b031916600485016107c8565b0381855afa9283156103e9575f93610e4d575b50610b6c83610b6760e0870198610b6160ff8b51166109b9565b90610967565b61098e565b61012085015160ff168015610e435760ff905b1660018111610e34575b508015610e2757610b9f9060ff88511690610ed4565b958615610e275784515f94906001600160e01b031916633028125760e01b8103610d4957505050519060a0828051810103126100e7576040519060a082016001600160401b038111838210176106515760209260a491604052610c038486016109ca565b8152610c11604086016109ca565b92848201938452610c24606087016109ca565b956040830196875260a0610c3a608083016109ca565b606085019081529101516080840190815260405163168be4db60e01b815293516001600160a01b03908116600486015295518616602485015296518516604484015251909316606482015293516084850152839182905afa9081156103e9575f91610d17575b5080610ce0575b50610cbe610100915b60ff60c08501511690610ed4565b9101516127100390612710821161097a5761271091610cdc91610967565b0490565b6a0c097ce7bc90715b34b9f160241b8581029250858304148515171561097a57610d10610cbe916101009361098e565b9150610ca7565b90506020813d602011610d41575b81610d3260209383610665565b810103126100e757515f610ca0565b3d9150610d25565b602091929594610d809460018060a01b0360808a01511690519260405196879485938493630794e50360e01b8552600485016107c8565b03915afa9182156103e9575f92610deb575b50928161010094610cbe9493610dab575b505050610cb0565b610de39350610dd5610dc6610ddd93610b6760ff948d610967565b610b618360c08b0151166109b9565b9251166109b9565b9061098e565b5f8080610da3565b929150926020833d602011610e1f575b81610e0860209383610665565b810103126100e75791519192909190610100610d92565b3d9150610dfb565b505050505090505f905f90565b610e3d9161098e565b5f610b89565b5060ff6001610b7f565b9092506020813d602011610e79575b81610e6960209383610665565b810103126100e75751915f610b47565b3d9150610e5c565b5050505090505f905f90565b50505050505090505f905f90565b9150506040813d604011610ecc575b81610eb760409383610665565b810103126100e757602081519101515f610a65565b3d9150610eaa565b9060ff166004811115610f2e57610ef690600c811115610f15576005906109ac565b90604d821161097a57610f106107fb92600a0a809261098e565b610967565b6006811115610f26576006906109ac565b6004906109ac565b509056fea264697066735822122004dee65548c21f6e2443660f64374a1ad187ee5579f666cb57bacb2333d90d5064736f6c634300081e0033",
  "devdoc": {
    "details": "Opposite of LtvTrigger - increases leverage when under-leveraged Flow: 1. Pre-hook: Flash loan collateral → Deposit → Borrow debt → Push to OrderManager 2. CoW Swap: Debt → Collateral 3. Post-hook: Repay flash loan with received collateral Order params:   - sellToken = debtToken (we're selling borrowed debt)   - buyToken = collateralToken (we're buying collateral to repay flash loan)",
    "kind": "dev",
    "methods": {
      "calculateExecution(bytes,address,uint256)": {
        "details": "Returns:   - sellAmount: debt tokens to borrow and swap   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)",
        "params": {
          "iterationCount": "Number of executions completed so far (for chunked orders)",
          "owner": "The order owner",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "minBuyAmount": "Minimum amount to receive (includes slippage protection)",
          "sellAmount": "Amount of sell token to trade in this execution"
        }
      },
      "isComplete(bytes,address,uint256)": {
        "details": "Auto-leverage orders are continuous - they never auto-complete. The order remains active and will re-trigger whenever LTV drops below the trigger threshold, up to maxIterations or until user cancels. This provides ongoing leverage management rather than one-shot execution.",
        "params": {
          "iterationCount": "Number of executions completed so far",
          "owner": "The order owner",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "_0": "True if the order goal has been reached"
        }
      },
      "shouldExecute(bytes,address)": {
        "params": {
          "owner": "The order owner (user whose position is being monitored)",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "_0": "True if the trigger condition is met",
          "_1": "Human-readable reason for the result (for debugging/logging)"
        }
      },
      "triggerName()": {
        "returns": {
          "_0": "Trigger name (e.g., \"LTV\", \"Price\", \"HealthFactor\")"
        }
      }
    },
    "title": "AutoLeverageTrigger",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "calculateExecution(bytes,address,uint256)": {
        "notice": "Calculate the execution amounts when the trigger fires"
      },
      "encodeTriggerParams((bytes4,bytes,uint256,uint256,address,address,uint8,uint8,uint256,uint8))": {
        "notice": "Encode trigger params for order creation"
      },
      "getCurrentLtv(bytes4,address,bytes)": {
        "notice": "Get current LTV for a user"
      },
      "isComplete(bytes,address,uint256)": {
        "notice": "Check if the order is complete and should stop executing"
      },
      "shouldExecute(bytes,address)": {
        "notice": "Check if the order should execute based on current conditions"
      },
      "triggerName()": {
        "notice": "Get human-readable name of the trigger type"
      }
    },
    "notice": "Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}