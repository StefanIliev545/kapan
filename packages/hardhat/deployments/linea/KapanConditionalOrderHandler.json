{
  "address": "0x8A9e3e974058b688D97DD29A3507DF56AaBb7f15",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_manager",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "OrderNotValid",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "PollNever",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "PollTryNextBlock",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "staticInput",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "getTradeableOrder",
      "outputs": [
        {
          "components": [
            {
              "internalType": "contract IERC20",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "contract IERC20",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "receiver",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "sellAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "buyAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint32",
              "name": "validTo",
              "type": "uint32"
            },
            {
              "internalType": "bytes32",
              "name": "appData",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "feeAmount",
              "type": "uint256"
            },
            {
              "internalType": "bytes32",
              "name": "kind",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "partiallyFillable",
              "type": "bool"
            },
            {
              "internalType": "bytes32",
              "name": "sellTokenBalance",
              "type": "bytes32"
            },
            {
              "internalType": "bytes32",
              "name": "buyTokenBalance",
              "type": "bytes32"
            }
          ],
          "internalType": "struct GPv2Order.Data",
          "name": "order",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "manager",
      "outputs": [
        {
          "internalType": "contract IKapanConditionalOrderManager",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "interfaceId",
          "type": "bytes4"
        }
      ],
      "name": "supportsInterface",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "staticInput",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        },
        {
          "components": [
            {
              "internalType": "contract IERC20",
              "name": "sellToken",
              "type": "address"
            },
            {
              "internalType": "contract IERC20",
              "name": "buyToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "receiver",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "sellAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "buyAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint32",
              "name": "validTo",
              "type": "uint32"
            },
            {
              "internalType": "bytes32",
              "name": "appData",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "feeAmount",
              "type": "uint256"
            },
            {
              "internalType": "bytes32",
              "name": "kind",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "partiallyFillable",
              "type": "bool"
            },
            {
              "internalType": "bytes32",
              "name": "sellTokenBalance",
              "type": "bytes32"
            },
            {
              "internalType": "bytes32",
              "name": "buyTokenBalance",
              "type": "bytes32"
            }
          ],
          "internalType": "struct GPv2Order.Data",
          "name": "order",
          "type": "tuple"
        }
      ],
      "name": "verify",
      "outputs": [],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xf07b217b3df989b7da77d4c28d8afc77b7b7c2a8c6b0f632d0950a24e3579d0a",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "contractAddress": null,
    "transactionIndex": 0,
    "gasUsed": "859350",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xb4b56f8134b96b6d4ee2af5533935c165dd0e65965604eb9376f4b75c7933d2b",
    "transactionHash": "0xf07b217b3df989b7da77d4c28d8afc77b7b7c2a8c6b0f632d0950a24e3579d0a",
    "logs": [],
    "blockNumber": 28722722,
    "cumulativeGasUsed": "859350",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x2cfFd26F32cDEc0bC2853a5344144845eCF9D435"
  ],
  "numDeployments": 1,
  "solcInputHash": "0fea5cc4d237037126c3fb60329d2945",
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_manager\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"OrderNotValid\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"PollNever\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"PollTryNextBlock\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"staticInput\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"name\":\"getTradeableOrder\",\"outputs\":[{\"components\":[{\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"buyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"validTo\",\"type\":\"uint32\"},{\"internalType\":\"bytes32\",\"name\":\"appData\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"feeAmount\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"kind\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"partiallyFillable\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"sellTokenBalance\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"buyTokenBalance\",\"type\":\"bytes32\"}],\"internalType\":\"struct GPv2Order.Data\",\"name\":\"order\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"internalType\":\"contract IKapanConditionalOrderManager\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"staticInput\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"components\":[{\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"buyAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint32\",\"name\":\"validTo\",\"type\":\"uint32\"},{\"internalType\":\"bytes32\",\"name\":\"appData\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"feeAmount\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"kind\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"partiallyFillable\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"sellTokenBalance\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"buyTokenBalance\",\"type\":\"bytes32\"}],\"internalType\":\"struct GPv2Order.Data\",\"name\":\"order\",\"type\":\"tuple\"}],\"name\":\"verify\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Implements IConditionalOrderGenerator for ComposableCoW integration.      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.      Separating handler from manager is required because:      - Handler must implement IERC165 for ComposableCoW to verify interface support      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path\",\"errors\":{\"OrderNotValid(string)\":[{\"details\":\"Signal that the order parameters are invalid\"}],\"PollNever(string)\":[{\"details\":\"Signal to stop polling this order (completed or cancelled)\"}],\"PollTryNextBlock(string)\":[{\"details\":\"Signal to try polling again at the next block\"}]},\"kind\":\"dev\",\"methods\":{\"getTradeableOrder(address,address,bytes32,bytes,bytes)\":{\"details\":\"Called by ComposableCoW via getTradeableOrderWithSignature\",\"params\":{\"staticInput\":\"ABI-encoded orderHash\"},\"returns\":{\"order\":\"The GPv2Order.Data struct\"}},\"supportsInterface(bytes4)\":{\"details\":\"Required for ComposableCoW to verify handler compatibility\"},\"verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))\":{\"details\":\"Called by ComposableCoW during signature verification\"}},\"title\":\"KapanConditionalOrderHandler\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"getTradeableOrder(address,address,bytes32,bytes,bytes)\":{\"notice\":\"Generate a tradeable order if trigger condition is met\"},\"manager()\":{\"notice\":\"The KapanConditionalOrderManager that stores order contexts\"},\"supportsInterface(bytes4)\":{\"notice\":\"Check if contract supports an interface\"},\"verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))\":{\"notice\":\"Verify that a proposed order matches the conditional order\"}},\"notice\":\"Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/v2/cow/KapanConditionalOrderHandler.sol\":\"KapanConditionalOrderHandler\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":10},\"remappings\":[],\"viaIR\":true},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the value of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the value of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets a `value` amount of tokens as the allowance of `spender` over the\\n     * caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 value) external returns (bool);\\n\\n    /**\\n     * @dev Moves a `value` amount of tokens from `from` to `to` using the\\n     * allowance mechanism. `value` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 value) external returns (bool);\\n}\\n\",\"keccak256\":\"0xc6a8ff0ea489379b61faa647490411b80102578440ab9d84e9a957cc12164e70\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v5.0.0) (utils/introspection/IERC165.sol)\\n\\npragma solidity ^0.8.20;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x4296879f55019b23e135000eb36896057e7101fb7fb859c5ef690cf14643757b\",\"license\":\"MIT\"},\"contracts/v2/cow/KapanConditionalOrderHandler.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IConditionalOrder, IConditionalOrderGenerator, PollTryNextBlock, PollNever, OrderNotValid } from \\\"../interfaces/cow/IConditionalOrder.sol\\\";\\nimport { GPv2Order } from \\\"../interfaces/cow/GPv2Order.sol\\\";\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport { IERC165 } from \\\"@openzeppelin/contracts/utils/introspection/IERC165.sol\\\";\\nimport { IOrderTrigger } from \\\"../interfaces/IOrderTrigger.sol\\\";\\n\\n/// @notice Minimal interface to read from KapanConditionalOrderManager\\ninterface IKapanConditionalOrderManager {\\n    enum OrderStatus { None, Active, Completed, Cancelled }\\n\\n    struct KapanOrderParams {\\n        address user;\\n        address trigger;\\n        bytes triggerStaticData;\\n        bytes preInstructions;\\n        address sellToken;\\n        address buyToken;\\n        bytes postInstructions;\\n        bytes32 appDataHash;\\n        uint256 maxIterations;\\n        address sellTokenRefundAddress;\\n        bool isKindBuy;\\n    }\\n\\n    struct OrderContext {\\n        KapanOrderParams params;\\n        OrderStatus status;\\n        uint256 iterationCount;\\n        uint256 createdAt;\\n    }\\n\\n    function getOrder(bytes32 orderHash) external view returns (OrderContext memory);\\n    function chunkWindow() external view returns (uint256);\\n}\\n\\n/// @title KapanConditionalOrderHandler\\n/// @notice Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)\\n/// @dev Implements IConditionalOrderGenerator for ComposableCoW integration.\\n///      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.\\n///      Separating handler from manager is required because:\\n///      - Handler must implement IERC165 for ComposableCoW to verify interface support\\n///      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path\\ncontract KapanConditionalOrderHandler is IConditionalOrderGenerator, IERC165 {\\n\\n    // ============ State Variables ============\\n\\n    /// @notice The KapanConditionalOrderManager that stores order contexts\\n    IKapanConditionalOrderManager public immutable manager;\\n\\n    // ============ Constructor ============\\n\\n    constructor(address _manager) {\\n        require(_manager != address(0), \\\"Invalid manager\\\");\\n        manager = IKapanConditionalOrderManager(_manager);\\n    }\\n\\n    // ============ IConditionalOrderGenerator Implementation ============\\n\\n    /// @notice Generate a tradeable order if trigger condition is met\\n    /// @dev Called by ComposableCoW via getTradeableOrderWithSignature\\n    /// @param staticInput ABI-encoded orderHash\\n    /// @return order The GPv2Order.Data struct\\n    function getTradeableOrder(\\n        address,\\n        address,\\n        bytes32,\\n        bytes calldata staticInput,\\n        bytes calldata\\n    ) external view override returns (GPv2Order.Data memory order) {\\n        bytes32 orderHash = abi.decode(staticInput, (bytes32));\\n        IKapanConditionalOrderManager.OrderContext memory ctx = manager.getOrder(orderHash);\\n\\n        // Validate order is active\\n        if (ctx.status != IKapanConditionalOrderManager.OrderStatus.Active) {\\n            revert PollNever(\\\"order_not_active\\\");\\n        }\\n\\n        // Get trigger\\n        IOrderTrigger trigger = IOrderTrigger(ctx.params.trigger);\\n\\n        // Check if order is complete\\n        if (trigger.isComplete(ctx.params.triggerStaticData, ctx.params.user, ctx.iterationCount)) {\\n            revert PollNever(\\\"trigger_complete\\\");\\n        }\\n        if (ctx.params.maxIterations > 0 && ctx.iterationCount >= ctx.params.maxIterations) {\\n            revert PollNever(\\\"max_iterations_reached\\\");\\n        }\\n\\n        // Check trigger condition\\n        (bool shouldExecute, string memory reason) = trigger.shouldExecute(\\n            ctx.params.triggerStaticData,\\n            ctx.params.user\\n        );\\n\\n        if (!shouldExecute) {\\n            revert PollTryNextBlock(reason);\\n        }\\n\\n        // Calculate amounts from trigger (trigger handles precision truncation to prevent spam)\\n        (uint256 sellAmount, uint256 minBuyAmount) = trigger.calculateExecution(\\n            ctx.params.triggerStaticData,\\n            ctx.params.user,\\n            ctx.iterationCount\\n        );\\n\\n        if (sellAmount == 0) {\\n            revert PollNever(\\\"zero_sell_amount\\\");\\n        }\\n\\n        // Calculate deterministic validTo\\n        uint256 validTo = _calculateValidTo(ctx.createdAt, ctx.iterationCount);\\n\\n        // Verify order hasn't expired\\n        if (block.timestamp > validTo) {\\n            revert PollTryNextBlock(\\\"window_expired\\\");\\n        }\\n\\n        // Build the order - receiver is manager (for post-hook token handling)\\n        // For BUY orders: sellAmount = maxSellAmount, buyAmount = exact buyAmount\\n        // For SELL orders: sellAmount = exact sellAmount, buyAmount = minBuyAmount\\n        order = GPv2Order.Data({\\n            sellToken: IERC20(ctx.params.sellToken),\\n            buyToken: IERC20(ctx.params.buyToken),\\n            receiver: address(manager),\\n            sellAmount: sellAmount,\\n            buyAmount: minBuyAmount,\\n            validTo: uint32(validTo),\\n            appData: ctx.params.appDataHash,\\n            feeAmount: 0,\\n            kind: ctx.params.isKindBuy ? GPv2Order.KIND_BUY : GPv2Order.KIND_SELL,\\n            partiallyFillable: false,\\n            sellTokenBalance: GPv2Order.BALANCE_ERC20,\\n            buyTokenBalance: GPv2Order.BALANCE_ERC20\\n        });\\n    }\\n\\n    /// @notice Verify that a proposed order matches the conditional order\\n    /// @dev Called by ComposableCoW during signature verification\\n    function verify(\\n        address,\\n        address,\\n        bytes32,\\n        bytes32,\\n        bytes32,\\n        bytes calldata staticInput,\\n        bytes calldata,\\n        GPv2Order.Data calldata order\\n    ) external view override {\\n        bytes32 orderHash = abi.decode(staticInput, (bytes32));\\n        IKapanConditionalOrderManager.OrderContext memory ctx = manager.getOrder(orderHash);\\n\\n        if (ctx.status != IKapanConditionalOrderManager.OrderStatus.Active) {\\n            revert OrderNotValid(\\\"order_not_active\\\");\\n        }\\n\\n        // Validate tokens match\\n        if (address(order.sellToken) != ctx.params.sellToken) {\\n            revert OrderNotValid(\\\"sell_token_mismatch\\\");\\n        }\\n        if (address(order.buyToken) != ctx.params.buyToken) {\\n            revert OrderNotValid(\\\"buy_token_mismatch\\\");\\n        }\\n\\n        // Validate receiver is manager\\n        if (order.receiver != address(manager)) {\\n            revert OrderNotValid(\\\"invalid_receiver\\\");\\n        }\\n\\n        // Validate appData\\n        if (order.appData != ctx.params.appDataHash) {\\n            revert OrderNotValid(\\\"appdata_mismatch\\\");\\n        }\\n    }\\n\\n    // ============ Internal Functions ============\\n\\n    /// @notice Calculate deterministic validTo timestamp\\n    /// @dev Reads chunkWindow from manager for consistency\\n    function _calculateValidTo(uint256 createdAt, uint256 iterationCount) internal view returns (uint256) {\\n        uint256 window = manager.chunkWindow();\\n        uint256 chunkWindowStart = createdAt + (iterationCount * window);\\n        uint256 chunkWindowEnd = chunkWindowStart + window - 1;\\n\\n        if (block.timestamp <= chunkWindowEnd) {\\n            return chunkWindowEnd;\\n        }\\n\\n        // Extend to current window\\n        uint256 elapsedSinceCreate = block.timestamp - createdAt;\\n        uint256 currentWindowIndex = elapsedSinceCreate / window;\\n        return createdAt + ((currentWindowIndex + 1) * window) - 1;\\n    }\\n\\n    // ============ ERC-165 Implementation ============\\n\\n    /// @notice Check if contract supports an interface\\n    /// @dev Required for ComposableCoW to verify handler compatibility\\n    function supportsInterface(bytes4 interfaceId) external pure override returns (bool) {\\n        return interfaceId == type(IConditionalOrderGenerator).interfaceId ||\\n               interfaceId == type(IConditionalOrder).interfaceId ||\\n               interfaceId == type(IERC165).interfaceId;\\n    }\\n}\\n\",\"keccak256\":\"0xe13475ce0220249d52020e14221383d4a67eb17d6d577919f4dd68519fd9b75a\",\"license\":\"MIT\"},\"contracts/v2/interfaces/IOrderTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IOrderTrigger\\n/// @notice Interface for pluggable order triggers in the Kapan conditional order system\\n/// @dev Triggers determine when an order should execute and how much to trade\\ninterface IOrderTrigger {\\n    /// @notice Check if the order should execute based on current conditions\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner (user whose position is being monitored)\\n    /// @return shouldExecute True if the trigger condition is met\\n    /// @return reason Human-readable reason for the result (for debugging/logging)\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (bool shouldExecute, string memory reason);\\n\\n    /// @notice Calculate the execution amounts when the trigger fires\\n    /// @dev Only called when shouldExecute returns true\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far (for chunked orders)\\n    /// @return sellAmount Amount of sell token to trade in this execution\\n    /// @return minBuyAmount Minimum amount to receive (includes slippage protection)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (uint256 sellAmount, uint256 minBuyAmount);\\n\\n    /// @notice Check if the order is complete and should stop executing\\n    /// @dev Called after each execution to determine if order should be marked complete\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far\\n    /// @return complete True if the order goal has been reached\\n    function isComplete(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (bool complete);\\n\\n    /// @notice Get human-readable name of the trigger type\\n    /// @return name Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\\n    function triggerName() external pure returns (string memory name);\\n}\\n\",\"keccak256\":\"0x852a502f0d40f6547adddd882bdbe33f2993af371d691abd211cb372ff646c35\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/GPv2Order.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IERC20 } from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\n/// @title GPv2Order - CoW Protocol order library\\n/// @notice Data structures and helpers for CoW Protocol orders\\nlibrary GPv2Order {\\n    /// @dev The complete order data that is signed by the user\\n    struct Data {\\n        IERC20 sellToken;\\n        IERC20 buyToken;\\n        address receiver;\\n        uint256 sellAmount;\\n        uint256 buyAmount;\\n        uint32 validTo;\\n        bytes32 appData;\\n        uint256 feeAmount;\\n        bytes32 kind;\\n        bool partiallyFillable;\\n        bytes32 sellTokenBalance;\\n        bytes32 buyTokenBalance;\\n    }\\n\\n    /// @dev Order kind constants\\n    bytes32 internal constant KIND_SELL =\\n        keccak256(\\\"sell\\\");\\n    bytes32 internal constant KIND_BUY =\\n        keccak256(\\\"buy\\\");\\n\\n    /// @dev Token balance constants\\n    bytes32 internal constant BALANCE_ERC20 =\\n        keccak256(\\\"erc20\\\");\\n    bytes32 internal constant BALANCE_EXTERNAL =\\n        keccak256(\\\"external\\\");\\n    bytes32 internal constant BALANCE_INTERNAL =\\n        keccak256(\\\"internal\\\");\\n\\n    /// @dev The order EIP-712 type hash\\n    bytes32 internal constant TYPE_HASH =\\n        keccak256(\\n            \\\"Order(\\\"\\n            \\\"address sellToken,\\\"\\n            \\\"address buyToken,\\\"\\n            \\\"address receiver,\\\"\\n            \\\"uint256 sellAmount,\\\"\\n            \\\"uint256 buyAmount,\\\"\\n            \\\"uint32 validTo,\\\"\\n            \\\"bytes32 appData,\\\"\\n            \\\"uint256 feeAmount,\\\"\\n            \\\"string kind,\\\"\\n            \\\"bool partiallyFillable,\\\"\\n            \\\"string sellTokenBalance,\\\"\\n            \\\"string buyTokenBalance\\\"\\n            \\\")\\\"\\n        );\\n\\n    /// @dev Computes the order hash for the given order data\\n    /// @param order The order to hash\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @return orderDigest The order digest\\n    function hash(Data memory order, bytes32 domainSeparator) internal pure returns (bytes32 orderDigest) {\\n        bytes32 structHash = keccak256(\\n            abi.encode(\\n                TYPE_HASH,\\n                order.sellToken,\\n                order.buyToken,\\n                order.receiver,\\n                order.sellAmount,\\n                order.buyAmount,\\n                order.validTo,\\n                order.appData,\\n                order.feeAmount,\\n                order.kind,\\n                order.partiallyFillable,\\n                order.sellTokenBalance,\\n                order.buyTokenBalance\\n            )\\n        );\\n        orderDigest = keccak256(abi.encodePacked(\\\"\\\\x19\\\\x01\\\", domainSeparator, structHash));\\n    }\\n}\\n\",\"keccak256\":\"0x9b8e973f4ab364c4dc43f72ee73171a589c5a9cadfb2778281e3c1e6bfc531f9\",\"license\":\"MIT\"},\"contracts/v2/interfaces/cow/IConditionalOrder.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { GPv2Order } from \\\"./GPv2Order.sol\\\";\\n\\n/// @title IConditionalOrder - Interface for conditional order handlers\\n/// @notice Defines the interface for creating conditional/programmatic orders on CoW Protocol\\ninterface IConditionalOrder {\\n    /// @dev Conditional order parameters stored on-chain\\n    struct ConditionalOrderParams {\\n        IConditionalOrder handler;\\n        bytes32 salt;\\n        bytes staticData;\\n    }\\n\\n    /// @notice Verifies that a discrete order is valid for the conditional order\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender calling isValidSignature\\n    /// @param _hash The EIP-712 order digest\\n    /// @param domainSeparator The EIP-712 domain separator\\n    /// @param ctx The execution context (H(params) for single, merkle root for tree)\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data NOT known at creation time\\n    /// @param order The proposed discrete order\\n    function verify(\\n        address owner,\\n        address sender,\\n        bytes32 _hash,\\n        bytes32 domainSeparator,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput,\\n        GPv2Order.Data calldata order\\n    ) external view;\\n}\\n\\n/// @title IConditionalOrderGenerator - Interface for conditional order generators\\n/// @notice Extends IConditionalOrder to generate tradeable orders\\ninterface IConditionalOrderGenerator is IConditionalOrder {\\n    /// @notice Generates a tradeable GPv2Order based on the current state\\n    /// @param owner The owner of the conditional order\\n    /// @param sender The msg.sender (usually ComposableCoW)\\n    /// @param ctx The execution context\\n    /// @param staticInput Order-specific data known at creation time\\n    /// @param offchainInput Order-specific data provided by the watch-tower\\n    /// @return order The generated GPv2Order.Data struct\\n    function getTradeableOrder(\\n        address owner,\\n        address sender,\\n        bytes32 ctx,\\n        bytes calldata staticInput,\\n        bytes calldata offchainInput\\n    ) external view returns (GPv2Order.Data memory order);\\n}\\n\\n/// @title Conditional Order Errors\\n/// @notice Custom errors for signaling to watch-towers\\n\\n/// @dev Signal to try polling again at the next block\\nerror PollTryNextBlock(string reason);\\n\\n/// @dev Signal to try polling at a specific block\\nerror PollTryAtBlock(uint256 blockNumber, string reason);\\n\\n/// @dev Signal to try polling at a specific timestamp\\nerror PollTryAtEpoch(uint256 timestamp, string reason);\\n\\n/// @dev Signal to stop polling this order (completed or cancelled)\\nerror PollNever(string reason);\\n\\n/// @dev Signal that the order parameters are invalid\\nerror OrderNotValid(string reason);\\n\\n/// @dev Signal that the order is not currently tradeable\\nerror OrderNotReady(string reason);\\n\",\"keccak256\":\"0x8ed6bb23c9714b66979060191d71c9601b8cc69df40b8d9b06d284e00b318eca\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a0346100be57601f610f5338819003918201601f19168301916001600160401b038311848410176100c2578084926020946040528339810103126100be57516001600160a01b038116908190036100be57801561008757608052604051610e7c90816100d78239608051818181610120015281816106890152818161074b0152610d2e0152f35b60405162461bcd60e51b815260206004820152600f60248201526e24b73b30b634b21036b0b730b3b2b960891b6044820152606490fd5b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a71461093e5750806314a2a784146106b8578063481c6a75146106745763b8296fc414610048575f80fd5b346104c85760a03660031901126104c8576100616109a9565b5061006a6109bf565b506064356001600160401b0381116104c85761008a9036906004016109d5565b6084356001600160401b0381116104c8576020916100ad849236906004016109d5565b50505f6101606040516100bf81610a02565b82815282868201528260408201528260608201528260808201528260a08201528260c08201528260e08201528261010082015282610120820152826101408201520152810103126104c857604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316905f81602481855afa9081156104d4575f91610652575b506020810151600481101561063e575f19016106245780516020808201516040808401519351818601805192516343fc086560e01b81526001600160a01b039485169896919590949093859384936101be939091169060048501610cb8565b0381885afa9081156104d4575f916105ea575b506105b1576101008351015180151590816105a5575b506105665782516040808201519151815163632224a760e01b8152600481019290925290915f91839182916001600160a01b03169061022a906044840190610c94565b9060248301520381885afa9081156104d4575f905f92610508575b50156104df575082516040818101519151835182516368c4be2560e01b81529697929387939284928392610286926001600160a01b03169060048501610cb8565b03915afa9081156104d4575f935f92610495575b50831561045c57606085015190516102b191610d18565b91824211610425579351608081015160a082015160e083015161014090930151610180976001600160a01b03938416979290931695929390156103f95763ffffffff7f6ed88e868af0a1983e3886d5f3e95a2fafbd6c3450bc229e27342283dc429ccc935b6040519661032388610a02565b898852602088019889526040880196875260608801948552608088019081528260a089019216825260c0880193845260e08801945f865261010089019687526101208901975f89526101606101408b019a5f516020610e275f395f51905f528c52019a5f516020610e275f395f51905f528c526040519c8d5260018060a01b0390511660208d015260018060a01b0390511660408c01525160608b01525160808a0152511660a08801525160c08701525160e0860152516101008501525115156101208401525161014083015251610160820152f35b63ffffffff7ff3b277728b3fee749481eb3e0b3b48980dbbab78658fc419025cb16eee34677593610316565b60405163d05f306560e01b815260206004820152600e60248201526d1dda5b991bddd7d95e1c1a5c995960921b6044820152606490fd5b60405163981b64cd60e01b815260206004820152601060248201526f1e995c9bd7dcd95b1b17d85b5bdd5b9d60821b6044820152606490fd5b935090506040833d6040116104cc575b816104b260409383610a32565b810103126104c85760208351930151905f61029a565b5f80fd5b3d91506104a5565b6040513d5f823e3d90fd5b60405163d05f306560e01b815260206004820152908190610504906024830190610c94565b0390fd5b9150503d805f833e61051a8183610a32565b81016040828203126104c85761052f82610acb565b602083015190926001600160401b0382116104c857019080601f830112156104c857815161055f92602001610a69565b905f610245565b60405163981b64cd60e01b81526020600482015260166024820152751b585e17da5d195c985d1a5bdb9cd7dc995858da195960521b6044820152606490fd5b9050815110155f6101e7565b60405163981b64cd60e01b815260206004820152601060248201526f747269676765725f636f6d706c65746560801b6044820152606490fd5b90506020813d60201161061c575b8161060560209383610a32565b810103126104c85761061690610acb565b5f6101d1565b3d91506105f8565b60405163981b64cd60e01b81528061050460048201610c69565b634e487b7160e01b5f52602160045260245ffd5b61066e91503d805f833e6106668183610a32565b810190610ad8565b5f61015f565b346104c8575f3660031901126104c8576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346104c8576102603660031901126104c8576106d26109a9565b506106db6109bf565b5060a4356001600160401b0381116104c8576106fb9036906004016109d5565b60c4356001600160401b0381116104c85761071a9036906004016109d5565b50506101803660e31901126104c85781602091810103126104c857604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165f82602481845afa9182156104d4575f92610922575b506020820151600481101561063e575f19016109085760e4356001600160a01b038116908181036104c857508251608001516001600160a01b0316036108cc57610104356001600160a01b038116908181036104c85750825160a001516001600160a01b03160361089157610124356001600160a01b038116908190036104c85703610858575160e001516101a4350361081f57005b60405163c8fc272560e01b815260206004820152601060248201526f0c2e0e0c8c2e8c2bedad2e6dac2e8c6d60831b6044820152606490fd5b60405163c8fc272560e01b815260206004820152601060248201526f34b73b30b634b22fb932b1b2b4bb32b960811b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260126024820152710c4eaf2bee8ded6cadcbedad2e6dac2e8c6d60731b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260136024820152720e6cad8d8bee8ded6cadcbedad2e6dac2e8c6d606b1b6044820152606490fd5b60405163c8fc272560e01b81528061050460048201610c69565b6109379192503d805f833e6106668183610a32565b9082610789565b346104c85760203660031901126104c8576004359063ffffffff60e01b82168092036104c857602091632e0a5bf160e21b8114908115610998575b8115610987575b5015158152f35b6301ffc9a760e01b14905083610980565b630528a9e160e21b81149150610979565b600435906001600160a01b03821682036104c857565b602435906001600160a01b03821682036104c857565b9181601f840112156104c8578235916001600160401b0383116104c857602083818601950101116104c857565b61018081019081106001600160401b03821117610a1e57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b03821190821017610a1e57604052565b51906001600160a01b03821682036104c857565b9192916001600160401b038211610a1e5760405191610a92601f8201601f191660200184610a32565b8294818452818301116104c8578281602093845f96015e010152565b9080601f830112156104c8578151610ac892602001610a69565b90565b519081151582036104c857565b6020818303126104c8578051906001600160401b0382116104c857016080818303126104c85760405191608083016001600160401b03811184821017610a1e5760405281516001600160401b0381116104c8578201610160818303126104c8576040519161016083016001600160401b03811184821017610a1e57604052610b5f82610a55565b8352610b6d60208301610a55565b602084015260408201516001600160401b0381116104c85781610b91918401610aae565b604084015260608201516001600160401b0381116104c85781610bb5918401610aae565b6060840152610bc660808301610a55565b6080840152610bd760a08301610a55565b60a084015260c0820151916001600160401b0383116104c857610c0261014092610c36948301610aae565b60c085015260e081015160e0850152610100810151610100850152610c2a6101208201610a55565b61012085015201610acb565b610140820152825260208101519060048210156104c8576060916020840152604081015160408401520151606082015290565b60609060208152601060208201526f6f726465725f6e6f745f61637469766560801b60408201520190565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b610cd060409295949395606083526060830190610c94565b6001600160a01b0390951660208201520152565b81810292918115918404141715610cf757565b634e487b7160e01b5f52601160045260245ffd5b91908201809211610cf757565b60405163018ecba160e11b8152916020836004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9283156104d4575f93610df0575b5082610d7e610d7882610d8394610ce4565b84610d0b565b610d0b565b5f198101908111610cf75780421115610dea5750804203428111610cf7578215610dd65782900460018101809111610cf757610dc892610dc291610ce4565b90610d0b565b5f198101908111610cf75790565b634e487b7160e01b5f52601260045260245ffd5b91505090565b9092506020813d602011610e1e575b81610e0c60209383610a32565b810103126104c8575191610d83610d66565b3d9150610dff56fe5a28e9363bb942b639270062aa6bb295f434bcdfc42c97267bf003f272060dc9a2646970667358221220cdf4f8b8e3470a8d2c70a71840d13387a339b9858796afef69cfcb8d5c07e83b64736f6c634300081e0033",
  "deployedBytecode": "0x6080806040526004361015610012575f80fd5b5f3560e01c90816301ffc9a71461093e5750806314a2a784146106b8578063481c6a75146106745763b8296fc414610048575f80fd5b346104c85760a03660031901126104c8576100616109a9565b5061006a6109bf565b506064356001600160401b0381116104c85761008a9036906004016109d5565b6084356001600160401b0381116104c8576020916100ad849236906004016109d5565b50505f6101606040516100bf81610a02565b82815282868201528260408201528260608201528260808201528260a08201528260c08201528260e08201528261010082015282610120820152826101408201520152810103126104c857604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316905f81602481855afa9081156104d4575f91610652575b506020810151600481101561063e575f19016106245780516020808201516040808401519351818601805192516343fc086560e01b81526001600160a01b039485169896919590949093859384936101be939091169060048501610cb8565b0381885afa9081156104d4575f916105ea575b506105b1576101008351015180151590816105a5575b506105665782516040808201519151815163632224a760e01b8152600481019290925290915f91839182916001600160a01b03169061022a906044840190610c94565b9060248301520381885afa9081156104d4575f905f92610508575b50156104df575082516040818101519151835182516368c4be2560e01b81529697929387939284928392610286926001600160a01b03169060048501610cb8565b03915afa9081156104d4575f935f92610495575b50831561045c57606085015190516102b191610d18565b91824211610425579351608081015160a082015160e083015161014090930151610180976001600160a01b03938416979290931695929390156103f95763ffffffff7f6ed88e868af0a1983e3886d5f3e95a2fafbd6c3450bc229e27342283dc429ccc935b6040519661032388610a02565b898852602088019889526040880196875260608801948552608088019081528260a089019216825260c0880193845260e08801945f865261010089019687526101208901975f89526101606101408b019a5f516020610e275f395f51905f528c52019a5f516020610e275f395f51905f528c526040519c8d5260018060a01b0390511660208d015260018060a01b0390511660408c01525160608b01525160808a0152511660a08801525160c08701525160e0860152516101008501525115156101208401525161014083015251610160820152f35b63ffffffff7ff3b277728b3fee749481eb3e0b3b48980dbbab78658fc419025cb16eee34677593610316565b60405163d05f306560e01b815260206004820152600e60248201526d1dda5b991bddd7d95e1c1a5c995960921b6044820152606490fd5b60405163981b64cd60e01b815260206004820152601060248201526f1e995c9bd7dcd95b1b17d85b5bdd5b9d60821b6044820152606490fd5b935090506040833d6040116104cc575b816104b260409383610a32565b810103126104c85760208351930151905f61029a565b5f80fd5b3d91506104a5565b6040513d5f823e3d90fd5b60405163d05f306560e01b815260206004820152908190610504906024830190610c94565b0390fd5b9150503d805f833e61051a8183610a32565b81016040828203126104c85761052f82610acb565b602083015190926001600160401b0382116104c857019080601f830112156104c857815161055f92602001610a69565b905f610245565b60405163981b64cd60e01b81526020600482015260166024820152751b585e17da5d195c985d1a5bdb9cd7dc995858da195960521b6044820152606490fd5b9050815110155f6101e7565b60405163981b64cd60e01b815260206004820152601060248201526f747269676765725f636f6d706c65746560801b6044820152606490fd5b90506020813d60201161061c575b8161060560209383610a32565b810103126104c85761061690610acb565b5f6101d1565b3d91506105f8565b60405163981b64cd60e01b81528061050460048201610c69565b634e487b7160e01b5f52602160045260245ffd5b61066e91503d805f833e6106668183610a32565b810190610ad8565b5f61015f565b346104c8575f3660031901126104c8576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346104c8576102603660031901126104c8576106d26109a9565b506106db6109bf565b5060a4356001600160401b0381116104c8576106fb9036906004016109d5565b60c4356001600160401b0381116104c85761071a9036906004016109d5565b50506101803660e31901126104c85781602091810103126104c857604051632bbc239560e11b8152903560048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165f82602481845afa9182156104d4575f92610922575b506020820151600481101561063e575f19016109085760e4356001600160a01b038116908181036104c857508251608001516001600160a01b0316036108cc57610104356001600160a01b038116908181036104c85750825160a001516001600160a01b03160361089157610124356001600160a01b038116908190036104c85703610858575160e001516101a4350361081f57005b60405163c8fc272560e01b815260206004820152601060248201526f0c2e0e0c8c2e8c2bedad2e6dac2e8c6d60831b6044820152606490fd5b60405163c8fc272560e01b815260206004820152601060248201526f34b73b30b634b22fb932b1b2b4bb32b960811b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260126024820152710c4eaf2bee8ded6cadcbedad2e6dac2e8c6d60731b6044820152606490fd5b60405163c8fc272560e01b81526020600482015260136024820152720e6cad8d8bee8ded6cadcbedad2e6dac2e8c6d606b1b6044820152606490fd5b60405163c8fc272560e01b81528061050460048201610c69565b6109379192503d805f833e6106668183610a32565b9082610789565b346104c85760203660031901126104c8576004359063ffffffff60e01b82168092036104c857602091632e0a5bf160e21b8114908115610998575b8115610987575b5015158152f35b6301ffc9a760e01b14905083610980565b630528a9e160e21b81149150610979565b600435906001600160a01b03821682036104c857565b602435906001600160a01b03821682036104c857565b9181601f840112156104c8578235916001600160401b0383116104c857602083818601950101116104c857565b61018081019081106001600160401b03821117610a1e57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b03821190821017610a1e57604052565b51906001600160a01b03821682036104c857565b9192916001600160401b038211610a1e5760405191610a92601f8201601f191660200184610a32565b8294818452818301116104c8578281602093845f96015e010152565b9080601f830112156104c8578151610ac892602001610a69565b90565b519081151582036104c857565b6020818303126104c8578051906001600160401b0382116104c857016080818303126104c85760405191608083016001600160401b03811184821017610a1e5760405281516001600160401b0381116104c8578201610160818303126104c8576040519161016083016001600160401b03811184821017610a1e57604052610b5f82610a55565b8352610b6d60208301610a55565b602084015260408201516001600160401b0381116104c85781610b91918401610aae565b604084015260608201516001600160401b0381116104c85781610bb5918401610aae565b6060840152610bc660808301610a55565b6080840152610bd760a08301610a55565b60a084015260c0820151916001600160401b0383116104c857610c0261014092610c36948301610aae565b60c085015260e081015160e0850152610100810151610100850152610c2a6101208201610a55565b61012085015201610acb565b610140820152825260208101519060048210156104c8576060916020840152604081015160408401520151606082015290565b60609060208152601060208201526f6f726465725f6e6f745f61637469766560801b60408201520190565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b610cd060409295949395606083526060830190610c94565b6001600160a01b0390951660208201520152565b81810292918115918404141715610cf757565b634e487b7160e01b5f52601160045260245ffd5b91908201809211610cf757565b60405163018ecba160e11b8152916020836004817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9283156104d4575f93610df0575b5082610d7e610d7882610d8394610ce4565b84610d0b565b610d0b565b5f198101908111610cf75780421115610dea5750804203428111610cf7578215610dd65782900460018101809111610cf757610dc892610dc291610ce4565b90610d0b565b5f198101908111610cf75790565b634e487b7160e01b5f52601260045260245ffd5b91505090565b9092506020813d602011610e1e575b81610e0c60209383610a32565b810103126104c8575191610d83610d66565b3d9150610dff56fe5a28e9363bb942b639270062aa6bb295f434bcdfc42c97267bf003f272060dc9a2646970667358221220cdf4f8b8e3470a8d2c70a71840d13387a339b9858796afef69cfcb8d5c07e83b64736f6c634300081e0033",
  "devdoc": {
    "details": "Implements IConditionalOrderGenerator for ComposableCoW integration.      This is a STATELESS handler that reads order data from KapanConditionalOrderManager.      Separating handler from manager is required because:      - Handler must implement IERC165 for ComposableCoW to verify interface support      - Manager (owner) must NOT implement IERC165 to avoid Safe/fallback handler path",
    "errors": {
      "OrderNotValid(string)": [
        {
          "details": "Signal that the order parameters are invalid"
        }
      ],
      "PollNever(string)": [
        {
          "details": "Signal to stop polling this order (completed or cancelled)"
        }
      ],
      "PollTryNextBlock(string)": [
        {
          "details": "Signal to try polling again at the next block"
        }
      ]
    },
    "kind": "dev",
    "methods": {
      "getTradeableOrder(address,address,bytes32,bytes,bytes)": {
        "details": "Called by ComposableCoW via getTradeableOrderWithSignature",
        "params": {
          "staticInput": "ABI-encoded orderHash"
        },
        "returns": {
          "order": "The GPv2Order.Data struct"
        }
      },
      "supportsInterface(bytes4)": {
        "details": "Required for ComposableCoW to verify handler compatibility"
      },
      "verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))": {
        "details": "Called by ComposableCoW during signature verification"
      }
    },
    "title": "KapanConditionalOrderHandler",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "getTradeableOrder(address,address,bytes32,bytes,bytes)": {
        "notice": "Generate a tradeable order if trigger condition is met"
      },
      "manager()": {
        "notice": "The KapanConditionalOrderManager that stores order contexts"
      },
      "supportsInterface(bytes4)": {
        "notice": "Check if contract supports an interface"
      },
      "verify(address,address,bytes32,bytes32,bytes32,bytes,bytes,(address,address,address,uint256,uint256,uint32,bytes32,uint256,bytes32,bool,bytes32,bytes32))": {
        "notice": "Verify that a proposed order matches the conditional order"
      }
    },
    "notice": "Generates CoW Protocol orders for Kapan conditional/trigger-based orders (ADL, stop-loss, etc.)",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}