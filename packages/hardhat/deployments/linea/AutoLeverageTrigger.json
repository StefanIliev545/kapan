{
  "address": "0x23Ee31134b2082dbD505893E06615b70dedfC7B2",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_viewRouter",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidTriggerParams",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "AAVE_V3",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "COMPOUND_V3",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "EULER_V2",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "MORPHO_BLUE",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "VENUS",
      "outputs": [
        {
          "internalType": "bytes4",
          "name": "",
          "type": "bytes4"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "staticData",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "calculateExecution",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "sellAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "minBuyAmount",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "bytes4",
              "name": "protocolId",
              "type": "bytes4"
            },
            {
              "internalType": "bytes",
              "name": "protocolContext",
              "type": "bytes"
            },
            {
              "internalType": "uint256",
              "name": "triggerLtvBps",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "targetLtvBps",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "collateralToken",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "debtToken",
              "type": "address"
            },
            {
              "internalType": "uint8",
              "name": "collateralDecimals",
              "type": "uint8"
            },
            {
              "internalType": "uint8",
              "name": "debtDecimals",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "maxSlippageBps",
              "type": "uint256"
            },
            {
              "internalType": "uint8",
              "name": "numChunks",
              "type": "uint8"
            }
          ],
          "internalType": "struct AutoLeverageTrigger.TriggerParams",
          "name": "params",
          "type": "tuple"
        }
      ],
      "name": "encodeTriggerParams",
      "outputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes4",
          "name": "protocolId",
          "type": "bytes4"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "bytes",
          "name": "context",
          "type": "bytes"
        }
      ],
      "name": "getCurrentLtv",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "isComplete",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "staticData",
          "type": "bytes"
        },
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "shouldExecute",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        },
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "triggerName",
      "outputs": [
        {
          "internalType": "string",
          "name": "",
          "type": "string"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "viewRouter",
      "outputs": [
        {
          "internalType": "contract IKapanViewRouter",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x59b75f1dbc2b1ef26685cac0a6d1d616bfddfa64d6c3486860682a27fdf9160f",
  "receipt": {
    "to": "0x4e59b44847b379578588920cA78FbF26c0B4956C",
    "from": "0x0BE61223F99E57b8b8B7033a77B54Adc7f7cF027",
    "contractAddress": null,
    "transactionIndex": 0,
    "gasUsed": "918932",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x296c760b27321662a07b7ce7ddac850e65332ca5ae6c9e3efbf0fec215dc38f2",
    "transactionHash": "0x59b75f1dbc2b1ef26685cac0a6d1d616bfddfa64d6c3486860682a27fdf9160f",
    "logs": [],
    "blockNumber": 28722748,
    "cumulativeGasUsed": "918932",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xA3c42bb0D4aFE902E8F1bF4924A6A9D763d2762e"
  ],
  "numDeployments": 1,
  "solcInputHash": "3ab01333b9926bcc2073a7f9a5260469",
  "metadata": "{\"compiler\":{\"version\":\"0.8.30+commit.73712a01\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_viewRouter\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"InvalidTriggerParams\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"AAVE_V3\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"COMPOUND_V3\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"EULER_V2\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MORPHO_BLUE\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"VENUS\",\"outputs\":[{\"internalType\":\"bytes4\",\"name\":\"\",\"type\":\"bytes4\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"staticData\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"calculateExecution\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"sellAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minBuyAmount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"bytes4\",\"name\":\"protocolId\",\"type\":\"bytes4\"},{\"internalType\":\"bytes\",\"name\":\"protocolContext\",\"type\":\"bytes\"},{\"internalType\":\"uint256\",\"name\":\"triggerLtvBps\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"targetLtvBps\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"collateralToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"debtToken\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"collateralDecimals\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"debtDecimals\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"maxSlippageBps\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"numChunks\",\"type\":\"uint8\"}],\"internalType\":\"struct AutoLeverageTrigger.TriggerParams\",\"name\":\"params\",\"type\":\"tuple\"}],\"name\":\"encodeTriggerParams\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes4\",\"name\":\"protocolId\",\"type\":\"bytes4\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"context\",\"type\":\"bytes\"}],\"name\":\"getCurrentLtv\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"isComplete\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"staticData\",\"type\":\"bytes\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"shouldExecute\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"triggerName\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"viewRouter\",\"outputs\":[{\"internalType\":\"contract IKapanViewRouter\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Opposite of LtvTrigger - increases leverage when under-leveraged Flow: 1. Pre-hook: Flash loan collateral \\u2192 Deposit \\u2192 Borrow debt \\u2192 Push to OrderManager 2. CoW Swap: Debt \\u2192 Collateral 3. Post-hook: Repay flash loan with received collateral Order params:   - sellToken = debtToken (we're selling borrowed debt)   - buyToken = collateralToken (we're buying collateral to repay flash loan)\",\"kind\":\"dev\",\"methods\":{\"calculateExecution(bytes,address,uint256)\":{\"details\":\"Returns:   - sellAmount: debt tokens to borrow and swap   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)\",\"params\":{\"iterationCount\":\"Number of executions completed so far (for chunked orders)\",\"owner\":\"The order owner\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"minBuyAmount\":\"Minimum amount to receive (includes slippage protection)\",\"sellAmount\":\"Amount of sell token to trade in this execution\"}},\"isComplete(bytes,address,uint256)\":{\"details\":\"Auto-leverage orders are continuous - they never auto-complete. The order remains active and will re-trigger whenever LTV drops below the trigger threshold, up to maxIterations or until user cancels. This provides ongoing leverage management rather than one-shot execution.\",\"params\":{\"iterationCount\":\"Number of executions completed so far\",\"owner\":\"The order owner\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"_0\":\"True if the order goal has been reached\"}},\"shouldExecute(bytes,address)\":{\"params\":{\"owner\":\"The order owner (user whose position is being monitored)\",\"staticData\":\"ABI-encoded trigger-specific parameters\"},\"returns\":{\"_0\":\"True if the trigger condition is met\",\"_1\":\"Human-readable reason for the result (for debugging/logging)\"}},\"triggerName()\":{\"returns\":{\"_0\":\"Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\"}}},\"title\":\"AutoLeverageTrigger\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"calculateExecution(bytes,address,uint256)\":{\"notice\":\"Calculate the execution amounts when the trigger fires\"},\"encodeTriggerParams((bytes4,bytes,uint256,uint256,address,address,uint8,uint8,uint256,uint8))\":{\"notice\":\"Encode trigger params for order creation\"},\"getCurrentLtv(bytes4,address,bytes)\":{\"notice\":\"Get current LTV for a user\"},\"isComplete(bytes,address,uint256)\":{\"notice\":\"Check if the order is complete and should stop executing\"},\"shouldExecute(bytes,address)\":{\"notice\":\"Check if the order should execute based on current conditions\"},\"triggerName()\":{\"notice\":\"Get human-readable name of the trigger type\"}},\"notice\":\"Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/v2/triggers/AutoLeverageTrigger.sol\":\"AutoLeverageTrigger\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":10},\"remappings\":[],\"viaIR\":true},\"sources\":{\"contracts/v2/interfaces/IOrderTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\n/// @title IOrderTrigger\\n/// @notice Interface for pluggable order triggers in the Kapan conditional order system\\n/// @dev Triggers determine when an order should execute and how much to trade\\ninterface IOrderTrigger {\\n    /// @notice Check if the order should execute based on current conditions\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner (user whose position is being monitored)\\n    /// @return shouldExecute True if the trigger condition is met\\n    /// @return reason Human-readable reason for the result (for debugging/logging)\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view returns (bool shouldExecute, string memory reason);\\n\\n    /// @notice Calculate the execution amounts when the trigger fires\\n    /// @dev Only called when shouldExecute returns true\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far (for chunked orders)\\n    /// @return sellAmount Amount of sell token to trade in this execution\\n    /// @return minBuyAmount Minimum amount to receive (includes slippage protection)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (uint256 sellAmount, uint256 minBuyAmount);\\n\\n    /// @notice Check if the order is complete and should stop executing\\n    /// @dev Called after each execution to determine if order should be marked complete\\n    /// @param staticData ABI-encoded trigger-specific parameters\\n    /// @param owner The order owner\\n    /// @param iterationCount Number of executions completed so far\\n    /// @return complete True if the order goal has been reached\\n    function isComplete(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 iterationCount\\n    ) external view returns (bool complete);\\n\\n    /// @notice Get human-readable name of the trigger type\\n    /// @return name Trigger name (e.g., \\\"LTV\\\", \\\"Price\\\", \\\"HealthFactor\\\")\\n    function triggerName() external pure returns (string memory name);\\n}\\n\",\"keccak256\":\"0x852a502f0d40f6547adddd882bdbe33f2993af371d691abd211cb372ff646c35\",\"license\":\"MIT\"},\"contracts/v2/triggers/AutoLeverageTrigger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.30;\\n\\nimport { IOrderTrigger } from \\\"../interfaces/IOrderTrigger.sol\\\";\\n\\n/// @notice Morpho Blue MarketParams structure\\nstruct MarketParams {\\n    address loanToken;\\n    address collateralToken;\\n    address oracle;\\n    address irm;\\n    uint256 lltv;\\n}\\n\\n/// @title KapanViewRouter Interface (same as LtvTrigger)\\ninterface IKapanViewRouter {\\n    function getCurrentLtv(bytes4 protocolId, address user, bytes calldata context) external view returns (uint256 ltvBps);\\n    function getPositionValue(bytes4 protocolId, address user, bytes calldata context) external view returns (uint256 collateralValueUsd, uint256 debtValueUsd);\\n    function getCollateralPrice(bytes4 protocolId, address collateralToken, bytes calldata context) external view returns (uint256 price);\\n    function getDebtPrice(bytes4 protocolId, address debtToken, bytes calldata context) external view returns (uint256 price);\\n    function getMorphoOraclePrice(MarketParams calldata params) external view returns (uint256 price);\\n}\\n\\n/// @title AutoLeverageTrigger\\n/// @notice Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)\\n/// @dev Opposite of LtvTrigger - increases leverage when under-leveraged\\n///\\n/// Flow:\\n/// 1. Pre-hook: Flash loan collateral \\u2192 Deposit \\u2192 Borrow debt \\u2192 Push to OrderManager\\n/// 2. CoW Swap: Debt \\u2192 Collateral\\n/// 3. Post-hook: Repay flash loan with received collateral\\n///\\n/// Order params:\\n///   - sellToken = debtToken (we're selling borrowed debt)\\n///   - buyToken = collateralToken (we're buying collateral to repay flash loan)\\ncontract AutoLeverageTrigger is IOrderTrigger {\\n    // ============ Errors ============\\n    error InvalidTriggerParams();\\n\\n    // ============ Constants ============\\n    bytes4 public constant AAVE_V3 = bytes4(keccak256(\\\"aave-v3\\\"));\\n    bytes4 public constant COMPOUND_V3 = bytes4(keccak256(\\\"compound-v3\\\"));\\n    bytes4 public constant MORPHO_BLUE = bytes4(keccak256(\\\"morpho-blue\\\"));\\n    bytes4 public constant EULER_V2 = bytes4(keccak256(\\\"euler-v2\\\"));\\n    bytes4 public constant VENUS = bytes4(keccak256(\\\"venus\\\"));\\n\\n    // ============ Immutables ============\\n    IKapanViewRouter public immutable viewRouter;\\n\\n    // ============ Structs ============\\n\\n    /// @notice Trigger parameters for LTV-based auto-leverage\\n    struct TriggerParams {\\n        bytes4 protocolId;          // Protocol identifier\\n        bytes protocolContext;       // Protocol-specific data\\n        uint256 triggerLtvBps;       // LTV threshold BELOW which to trigger (e.g., 5000 = 50%)\\n        uint256 targetLtvBps;        // Target LTV after leverage (e.g., 7000 = 70%)\\n        address collateralToken;     // Token to BUY (receive from swap, repay flash loan)\\n        address debtToken;           // Token to SELL (borrow and swap)\\n        uint8 collateralDecimals;\\n        uint8 debtDecimals;\\n        uint256 maxSlippageBps;      // Maximum slippage tolerance\\n        uint8 numChunks;             // Number of chunks (1 = full amount)\\n    }\\n\\n    // ============ Constructor ============\\n\\n    constructor(address _viewRouter) {\\n        if (_viewRouter == address(0)) revert InvalidTriggerParams();\\n        viewRouter = IKapanViewRouter(_viewRouter);\\n    }\\n\\n    // ============ IOrderTrigger Implementation ============\\n\\n    /// @inheritdoc IOrderTrigger\\n    function shouldExecute(\\n        bytes calldata staticData,\\n        address owner\\n    ) external view override returns (bool, string memory) {\\n        TriggerParams memory params = abi.decode(staticData, (TriggerParams));\\n\\n        uint256 currentLtv = viewRouter.getCurrentLtv(params.protocolId, owner, params.protocolContext);\\n\\n        if (currentLtv == 0) {\\n            return (false, \\\"No position\\\");\\n        }\\n\\n        // Trigger when UNDER-leveraged (LTV too low)\\n        if (currentLtv < params.triggerLtvBps) {\\n            return (true, \\\"LTV below threshold - under-leveraged\\\");\\n        }\\n\\n        return (false, \\\"LTV above threshold\\\");\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    /// @dev Returns:\\n    ///   - sellAmount: debt tokens to borrow and swap\\n    ///   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)\\n    function calculateExecution(\\n        bytes calldata staticData,\\n        address owner,\\n        uint256 /* iterationCount */\\n    ) external view override returns (uint256 sellAmount, uint256 minBuyAmount) {\\n        TriggerParams memory params = abi.decode(staticData, (TriggerParams));\\n\\n        // Get current position value in USD (8 decimals)\\n        (uint256 collateralValueUsd, uint256 debtValueUsd) = viewRouter.getPositionValue(\\n            params.protocolId,\\n            owner,\\n            params.protocolContext\\n        );\\n\\n        if (collateralValueUsd == 0) return (0, 0);\\n\\n        uint256 currentLtv = (debtValueUsd * 10000) / collateralValueUsd;\\n        if (currentLtv >= params.targetLtvBps) return (0, 0); // Already at or above target\\n\\n        // Calculate how much additional debt (in USD) to reach target LTV\\n        //\\n        // After leverage:\\n        //   newDebt / newCollateral = targetLTV\\n        //   (D + \\u0394D) / (C + \\u0394C) = targetLTV\\n        //\\n        // Where \\u0394C \\u2248 \\u0394D (collateral received from swapping debt, roughly 1:1 in USD value)\\n        //\\n        // Solving for \\u0394D:\\n        //   D + \\u0394D = targetLTV \\u00d7 (C + \\u0394D)\\n        //   D + \\u0394D = targetLTV \\u00d7 C + targetLTV \\u00d7 \\u0394D\\n        //   \\u0394D \\u00d7 (1 - targetLTV) = targetLTV \\u00d7 C - D\\n        //   \\u0394D = (targetLTV \\u00d7 C - D) / (1 - targetLTV)\\n        //\\n        // This is the inverse of the ADL formula (which reduces both C and D)\\n        uint256 targetDebtUsd = (params.targetLtvBps * collateralValueUsd) / 10000;\\n        if (targetDebtUsd <= debtValueUsd) return (0, 0); // Already at or above target\\n\\n        uint256 numerator = targetDebtUsd - debtValueUsd;\\n        uint256 denominator = 10000 - params.targetLtvBps;\\n        if (denominator == 0) return (0, 0); // Prevent division by zero at 100% LTV\\n\\n        uint256 deltaDebtUsd = (numerator * 10000) / denominator;\\n\\n        // Convert USD to debt token amount\\n        uint256 debtPrice = viewRouter.getDebtPrice(params.protocolId, params.debtToken, params.protocolContext);\\n        sellAmount = (deltaDebtUsd * (10 ** params.debtDecimals)) / debtPrice;\\n\\n        // Apply chunking\\n        uint8 chunks = params.numChunks > 0 ? params.numChunks : 1;\\n        if (chunks > 1) {\\n            sellAmount = sellAmount / chunks;\\n        }\\n\\n        if (sellAmount == 0) return (0, 0);\\n\\n        // Truncate precision to prevent order spam from interest-bearing tokens\\n        // Interest changes cause slightly different amounts each block \\u2192 different order hash \\u2192 spam\\n        sellAmount = _truncatePrecision(sellAmount, params.debtDecimals);\\n\\n        if (sellAmount == 0) return (0, 0);\\n\\n        // Calculate minBuyAmount (collateral) with slippage\\n        // This must cover the flash loan repayment\\n        uint256 expectedCollateral;\\n\\n        if (params.protocolId == MORPHO_BLUE) {\\n            // Morpho uses a special oracle that returns collateral/debt exchange rate at 36 decimals\\n            // Formula: collateralAmount = debtAmount * 1e36 / oraclePrice\\n            // The oracle accounts for decimal differences between tokens\\n            MarketParams memory marketParams = abi.decode(params.protocolContext, (MarketParams));\\n            uint256 morphoOraclePrice = viewRouter.getMorphoOraclePrice(marketParams);\\n            if (morphoOraclePrice > 0) {\\n                // sellAmount is in debt token decimals, result is in collateral token decimals\\n                expectedCollateral = (sellAmount * 1e36) / morphoOraclePrice;\\n            }\\n        } else {\\n            // Standard price-based calculation for other protocols\\n            uint256 collateralPrice = viewRouter.getCollateralPrice(\\n                params.protocolId,\\n                params.collateralToken,\\n                params.protocolContext\\n            );\\n\\n            if (collateralPrice > 0) {\\n                // Expected collateral = sellAmount(debt) \\u00d7 debtPrice / collateralPrice\\n                expectedCollateral = (sellAmount * debtPrice) / collateralPrice;\\n                // Adjust for decimals\\n                expectedCollateral = (expectedCollateral * (10 ** params.collateralDecimals)) / (10 ** params.debtDecimals);\\n            }\\n        }\\n\\n        // Truncate expectedCollateral to prevent spam from price fluctuations\\n        // Must truncate BEFORE applying slippage to preserve full slippage protection\\n        expectedCollateral = _truncatePrecision(expectedCollateral, params.collateralDecimals);\\n\\n        // Apply slippage AFTER truncation\\n        minBuyAmount = (expectedCollateral * (10000 - params.maxSlippageBps)) / 10000;\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    /// @dev Auto-leverage orders are continuous - they never auto-complete.\\n    /// The order remains active and will re-trigger whenever LTV drops below\\n    /// the trigger threshold, up to maxIterations or until user cancels.\\n    /// This provides ongoing leverage management rather than one-shot execution.\\n    function isComplete(\\n        bytes calldata /* staticData */,\\n        address /* owner */,\\n        uint256 /* iterationCount */\\n    ) external pure override returns (bool) {\\n        // Never auto-complete - rely on maxIterations for termination\\n        return false;\\n    }\\n\\n    /// @inheritdoc IOrderTrigger\\n    function triggerName() external pure override returns (string memory) {\\n        return \\\"AutoLeverage\\\";\\n    }\\n\\n    // ============ View Helpers ============\\n\\n    /// @notice Get current LTV for a user\\n    function getCurrentLtv(bytes4 protocolId, address owner, bytes calldata context) external view returns (uint256) {\\n        return viewRouter.getCurrentLtv(protocolId, owner, context);\\n    }\\n\\n    /// @notice Encode trigger params for order creation\\n    function encodeTriggerParams(TriggerParams memory params) external pure returns (bytes memory) {\\n        return abi.encode(params);\\n    }\\n\\n    // ============ Internal Functions ============\\n\\n    /// @dev Truncate precision to prevent order spam from interest accrual\\n    /// - 18 decimals (ETH): keep 5 \\u2192 0.00001\\n    /// - 8 decimals (WBTC): keep 6 \\u2192 0.000001\\n    /// - 6 decimals (USDC): keep 4 \\u2192 $0.0001\\n    function _truncatePrecision(uint256 amount, uint8 decimals) internal pure returns (uint256) {\\n        if (decimals <= 4) return amount;\\n        uint256 keep;\\n        if (decimals > 12) keep = 5;\\n        else if (decimals > 6) keep = 6;\\n        else keep = 4;\\n        uint256 precision = 10 ** (decimals - keep);\\n        return (amount / precision) * precision;\\n    }\\n\\n}\\n\",\"keccak256\":\"0x69130e95b05e6a5f6616e05655253df1d04962bcbd8001a68ddeb4950cb01462\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a03461009657601f61104438819003918201601f19168301916001600160401b0383118484101761009a5780849260209460405283398101031261009657516001600160a01b0381169081900361009657801561008757608052604051610f9590816100af823960805181818161037f015281816104de0152818161086c0152610a320152f35b63f77479dd60e01b5f5260045ffd5b5f80fd5b634e487b7160e01b5f52604160045260245ffdfe6080806040526004361015610012575f80fd5b5f3560e01c9081631a78ccc11461056d575080633131489f1461054b578063321394961461052957806343fc08651461050d5780634f1cb291146104c9578063632224a71461046957806368c4be251461044357806390359bcc1461042157806399fec7a0146103ff5780639de73085146102dc578063b030ddb3146100f65763dd90a891146100a0575f80fd5b346100f2575f3660031901126100f2576100ee6040516100c1604082610692565b600c81526b4175746f4c6576657261676560a01b6020820152604051918291602083526020830190610629565b0390f35b5f80fd5b346100f25760203660031901126100f2576004356001600160401b0381116100f25761014060031982360301126100f25760405161013381610662565b61013f8260040161064d565b815260248201356001600160401b0381116100f257820191366023840112156100f2576004830135610170816106b5565b9361017e6040519586610692565b81855236602482840101116100f2576024829101602086013783016020015f905260208201928352604082019060448101358252606083019060648101358252608481016101cb906105cf565b608085019081526101de60a483016105cf565b60a086019081526101f160c484016106d0565b60c087019081529061020560e485016106d0565b9260e08801938452610100880194610104810135865261012401610228906106d0565b956101208901968752604051998a9960208b016020905263ffffffff60e01b90511660408b01525160608a0161014090526101808a0161026791610629565b975160808a01525160a0890152516001600160a01b0390811660c089015290511660e08701525160ff90811661010087015290518116610120860152905161014085015290511661016083015203601f19810182526102c69082610692565b604051809160208252602082016100ee91610629565b346100f25760603660031901126100f25760043563ffffffff60e01b81168091036100f2576103096105b9565b604435906001600160401b0382116100f257608461032d602093369060040161058c565b604051639de7308560e01b815260048101969096526001600160a01b0390931660248601526060604486015260648501839052849283918190848401375f828201840152601f01601f191681010301817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156103f4575f906103c1575b602090604051908152f35b506020813d6020116103ec575b816103db60209383610692565b810103126100f257602090516103b6565b3d91506103ce565b6040513d5f823e3d90fd5b346100f2575f3660031901126100f257604051633028125760e01b8152602090f35b346100f2575f3660031901126100f257604051633c724fef60e11b8152602090f35b346100f257604061045d610456366105e3565b5091610a0b565b82519182526020820152f35b346100f25760403660031901126100f2576004356001600160401b0381116100f25761049c6104aa91369060040161058c565b6104a46105b9565b9161082b565b906100ee60405192839215158352604060208401526040830190610629565b346100f2575f3660031901126100f2576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346100f25761051b366105e3565b5050505060206040515f8152f35b346100f2575f3660031901126100f25760405163bbbf88eb60e01b8152602090f35b346100f2575f3660031901126100f257604051633af167ff60e01b8152602090f35b346100f2575f3660031901126100f2576308ee5f0360e31b8152602090f35b9181601f840112156100f2578235916001600160401b0383116100f257602083818601950101116100f257565b602435906001600160a01b03821682036100f257565b35906001600160a01b03821682036100f257565b60606003198201126100f257600435906001600160401b0382116100f25761060d9160040161058c565b90916024356001600160a01b03811681036100f2579060443590565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b35906001600160e01b0319821682036100f257565b61014081019081106001600160401b0382111761067e57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b0382119082101761067e57604052565b6001600160401b03811161067e57601f01601f191660200190565b359060ff821682036100f257565b6020818303126100f2578035906001600160401b0382116100f2570190610140828203126100f2576040519161071383610662565b61071c8161064d565b835260208101356001600160401b0381116100f25781019082601f830112156100f25781359261074b846106b5565b906107596040519283610692565b848252602085850101116100f2575f6020856107ec968261012097018386013783010152602085015260408101356040850152606081013560608501526107a2608082016105cf565b60808501526107b360a082016105cf565b60a08501526107c460c082016106d0565b60c08501526107d560e082016106d0565b60e0850152610100810135610100850152016106d0565b61012082015290565b6001600160e01b031990911681526001600160a01b03909116602082015260606040820181905261082892910190610629565b90565b610837918101906106de565b602063ffffffff60e01b8251169281830151936108686040519586938493639de7308560e01b8552600485016107f5565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156103f4575f92610960575b5081156109335760400151116108e7575f906040516108c4604082610692565b60138152721315158818589bdd99481d1a1c995cda1bdb19606a1b602082015290565b6001906040516108f8606082610692565b602581527f4c54562062656c6f77207468726573686f6c64202d20756e6465722d6c6576656020820152641c9859d95960da1b604082015290565b50505f90604051610945604082610692565b600b81526a2737903837b9b4ba34b7b760a91b602082015290565b9091506020813d60201161098c575b8161097c60209383610692565b810103126100f25751905f6108a4565b3d915061096f565b818102929181159184041417156109a757565b634e487b7160e01b5f52601160045260245ffd5b81156109c5570490565b634e487b7160e01b5f52601260045260245ffd5b919082039182116109a757565b60ff16604d81116109a757600a0a90565b51906001600160a01b03821682036100f257565b610a1a919392938101906106de565b8051602082018051604080516326a9d0f960e21b81527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169793949093919284928392610a7e9291906001600160e01b031916600485016107f5565b0381885afa80156103f4575f915f91610ec8575b508115610eae57612710810281810461271014821517156109a75782610ab7916109bb565b916060850192835180911015610eba5761271091610ad491610994565b0481811115610e545790610ae7916109d9565b905180612710039061271082116109a75761271014610eae5761271082029180830461271014901517156109a757610b1e916109bb565b825160a08401518351604051630ee9078360e01b8152939793949260209286928392610b61926001600160a01b0316906001600160e01b031916600485016107f5565b0381855afa9283156103f4575f93610e7a575b50610b9983610b9460e0870198610b8e60ff8b51166109e6565b90610994565b6109bb565b61012085015160ff168015610e705760ff905b1660018111610e61575b508015610e5457610bcc9060ff88511690610f01565b958615610e545784515f94906001600160e01b031916633028125760e01b8103610d7657505050519060a0828051810103126100f2576040519060a082016001600160401b0381118382101761067e5760209260a491604052610c308486016109f7565b8152610c3e604086016109f7565b92848201938452610c51606087016109f7565b956040830196875260a0610c67608083016109f7565b606085019081529101516080840190815260405163168be4db60e01b815293516001600160a01b03908116600486015295518616602485015296518516604484015251909316606482015293516084850152839182905afa9081156103f4575f91610d44575b5080610d0d575b50610ceb610100915b60ff60c08501511690610f01565b910151612710039061271082116109a75761271091610d0991610994565b0490565b6a0c097ce7bc90715b34b9f160241b858102925085830414851517156109a757610d3d610ceb91610100936109bb565b9150610cd4565b90506020813d602011610d6e575b81610d5f60209383610692565b810103126100f257515f610ccd565b3d9150610d52565b602091929594610dad9460018060a01b0360808a01511690519260405196879485938493630794e50360e01b8552600485016107f5565b03915afa9182156103f4575f92610e18575b50928161010094610ceb9493610dd8575b505050610cdd565b610e109350610e02610df3610e0a93610b9460ff948d610994565b610b8e8360c08b0151166109e6565b9251166109e6565b906109bb565b5f8080610dd0565b929150926020833d602011610e4c575b81610e3560209383610692565b810103126100f25791519192909190610100610dbf565b3d9150610e28565b505050505090505f905f90565b610e6a916109bb565b5f610bb6565b5060ff6001610bac565b9092506020813d602011610ea6575b81610e9660209383610692565b810103126100f25751915f610b74565b3d9150610e89565b5050505090505f905f90565b50505050505090505f905f90565b9150506040813d604011610ef9575b81610ee460409383610692565b810103126100f257602081519101515f610a92565b3d9150610ed7565b9060ff166004811115610f5b57610f2390600c811115610f42576005906109d9565b90604d82116109a757610f3d61082892600a0a80926109bb565b610994565b6006811115610f53576006906109d9565b6004906109d9565b509056fea2646970667358221220590d83665ecf73f0424ef0f25bdaa53b2d8124b71d07b381d072748735d112cb64736f6c634300081e0033",
  "deployedBytecode": "0x6080806040526004361015610012575f80fd5b5f3560e01c9081631a78ccc11461056d575080633131489f1461054b578063321394961461052957806343fc08651461050d5780634f1cb291146104c9578063632224a71461046957806368c4be251461044357806390359bcc1461042157806399fec7a0146103ff5780639de73085146102dc578063b030ddb3146100f65763dd90a891146100a0575f80fd5b346100f2575f3660031901126100f2576100ee6040516100c1604082610692565b600c81526b4175746f4c6576657261676560a01b6020820152604051918291602083526020830190610629565b0390f35b5f80fd5b346100f25760203660031901126100f2576004356001600160401b0381116100f25761014060031982360301126100f25760405161013381610662565b61013f8260040161064d565b815260248201356001600160401b0381116100f257820191366023840112156100f2576004830135610170816106b5565b9361017e6040519586610692565b81855236602482840101116100f2576024829101602086013783016020015f905260208201928352604082019060448101358252606083019060648101358252608481016101cb906105cf565b608085019081526101de60a483016105cf565b60a086019081526101f160c484016106d0565b60c087019081529061020560e485016106d0565b9260e08801938452610100880194610104810135865261012401610228906106d0565b956101208901968752604051998a9960208b016020905263ffffffff60e01b90511660408b01525160608a0161014090526101808a0161026791610629565b975160808a01525160a0890152516001600160a01b0390811660c089015290511660e08701525160ff90811661010087015290518116610120860152905161014085015290511661016083015203601f19810182526102c69082610692565b604051809160208252602082016100ee91610629565b346100f25760603660031901126100f25760043563ffffffff60e01b81168091036100f2576103096105b9565b604435906001600160401b0382116100f257608461032d602093369060040161058c565b604051639de7308560e01b815260048101969096526001600160a01b0390931660248601526060604486015260648501839052849283918190848401375f828201840152601f01601f191681010301817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa80156103f4575f906103c1575b602090604051908152f35b506020813d6020116103ec575b816103db60209383610692565b810103126100f257602090516103b6565b3d91506103ce565b6040513d5f823e3d90fd5b346100f2575f3660031901126100f257604051633028125760e01b8152602090f35b346100f2575f3660031901126100f257604051633c724fef60e11b8152602090f35b346100f257604061045d610456366105e3565b5091610a0b565b82519182526020820152f35b346100f25760403660031901126100f2576004356001600160401b0381116100f25761049c6104aa91369060040161058c565b6104a46105b9565b9161082b565b906100ee60405192839215158352604060208401526040830190610629565b346100f2575f3660031901126100f2576040517f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168152602090f35b346100f25761051b366105e3565b5050505060206040515f8152f35b346100f2575f3660031901126100f25760405163bbbf88eb60e01b8152602090f35b346100f2575f3660031901126100f257604051633af167ff60e01b8152602090f35b346100f2575f3660031901126100f2576308ee5f0360e31b8152602090f35b9181601f840112156100f2578235916001600160401b0383116100f257602083818601950101116100f257565b602435906001600160a01b03821682036100f257565b35906001600160a01b03821682036100f257565b60606003198201126100f257600435906001600160401b0382116100f25761060d9160040161058c565b90916024356001600160a01b03811681036100f2579060443590565b805180835260209291819084018484015e5f828201840152601f01601f1916010190565b35906001600160e01b0319821682036100f257565b61014081019081106001600160401b0382111761067e57604052565b634e487b7160e01b5f52604160045260245ffd5b601f909101601f19168101906001600160401b0382119082101761067e57604052565b6001600160401b03811161067e57601f01601f191660200190565b359060ff821682036100f257565b6020818303126100f2578035906001600160401b0382116100f2570190610140828203126100f2576040519161071383610662565b61071c8161064d565b835260208101356001600160401b0381116100f25781019082601f830112156100f25781359261074b846106b5565b906107596040519283610692565b848252602085850101116100f2575f6020856107ec968261012097018386013783010152602085015260408101356040850152606081013560608501526107a2608082016105cf565b60808501526107b360a082016105cf565b60a08501526107c460c082016106d0565b60c08501526107d560e082016106d0565b60e0850152610100810135610100850152016106d0565b61012082015290565b6001600160e01b031990911681526001600160a01b03909116602082015260606040820181905261082892910190610629565b90565b610837918101906106de565b602063ffffffff60e01b8251169281830151936108686040519586938493639de7308560e01b8552600485016107f5565b03817f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03165afa9182156103f4575f92610960575b5081156109335760400151116108e7575f906040516108c4604082610692565b60138152721315158818589bdd99481d1a1c995cda1bdb19606a1b602082015290565b6001906040516108f8606082610692565b602581527f4c54562062656c6f77207468726573686f6c64202d20756e6465722d6c6576656020820152641c9859d95960da1b604082015290565b50505f90604051610945604082610692565b600b81526a2737903837b9b4ba34b7b760a91b602082015290565b9091506020813d60201161098c575b8161097c60209383610692565b810103126100f25751905f6108a4565b3d915061096f565b818102929181159184041417156109a757565b634e487b7160e01b5f52601160045260245ffd5b81156109c5570490565b634e487b7160e01b5f52601260045260245ffd5b919082039182116109a757565b60ff16604d81116109a757600a0a90565b51906001600160a01b03821682036100f257565b610a1a919392938101906106de565b8051602082018051604080516326a9d0f960e21b81527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169793949093919284928392610a7e9291906001600160e01b031916600485016107f5565b0381885afa80156103f4575f915f91610ec8575b508115610eae57612710810281810461271014821517156109a75782610ab7916109bb565b916060850192835180911015610eba5761271091610ad491610994565b0481811115610e545790610ae7916109d9565b905180612710039061271082116109a75761271014610eae5761271082029180830461271014901517156109a757610b1e916109bb565b825160a08401518351604051630ee9078360e01b8152939793949260209286928392610b61926001600160a01b0316906001600160e01b031916600485016107f5565b0381855afa9283156103f4575f93610e7a575b50610b9983610b9460e0870198610b8e60ff8b51166109e6565b90610994565b6109bb565b61012085015160ff168015610e705760ff905b1660018111610e61575b508015610e5457610bcc9060ff88511690610f01565b958615610e545784515f94906001600160e01b031916633028125760e01b8103610d7657505050519060a0828051810103126100f2576040519060a082016001600160401b0381118382101761067e5760209260a491604052610c308486016109f7565b8152610c3e604086016109f7565b92848201938452610c51606087016109f7565b956040830196875260a0610c67608083016109f7565b606085019081529101516080840190815260405163168be4db60e01b815293516001600160a01b03908116600486015295518616602485015296518516604484015251909316606482015293516084850152839182905afa9081156103f4575f91610d44575b5080610d0d575b50610ceb610100915b60ff60c08501511690610f01565b910151612710039061271082116109a75761271091610d0991610994565b0490565b6a0c097ce7bc90715b34b9f160241b858102925085830414851517156109a757610d3d610ceb91610100936109bb565b9150610cd4565b90506020813d602011610d6e575b81610d5f60209383610692565b810103126100f257515f610ccd565b3d9150610d52565b602091929594610dad9460018060a01b0360808a01511690519260405196879485938493630794e50360e01b8552600485016107f5565b03915afa9182156103f4575f92610e18575b50928161010094610ceb9493610dd8575b505050610cdd565b610e109350610e02610df3610e0a93610b9460ff948d610994565b610b8e8360c08b0151166109e6565b9251166109e6565b906109bb565b5f8080610dd0565b929150926020833d602011610e4c575b81610e3560209383610692565b810103126100f25791519192909190610100610dbf565b3d9150610e28565b505050505090505f905f90565b610e6a916109bb565b5f610bb6565b5060ff6001610bac565b9092506020813d602011610ea6575b81610e9660209383610692565b810103126100f25751915f610b74565b3d9150610e89565b5050505090505f905f90565b50505050505090505f905f90565b9150506040813d604011610ef9575b81610ee460409383610692565b810103126100f257602081519101515f610a92565b3d9150610ed7565b9060ff166004811115610f5b57610f2390600c811115610f42576005906109d9565b90604d82116109a757610f3d61082892600a0a80926109bb565b610994565b6006811115610f53576006906109d9565b6004906109d9565b509056fea2646970667358221220590d83665ecf73f0424ef0f25bdaa53b2d8124b71d07b381d072748735d112cb64736f6c634300081e0033",
  "devdoc": {
    "details": "Opposite of LtvTrigger - increases leverage when under-leveraged Flow: 1. Pre-hook: Flash loan collateral → Deposit → Borrow debt → Push to OrderManager 2. CoW Swap: Debt → Collateral 3. Post-hook: Repay flash loan with received collateral Order params:   - sellToken = debtToken (we're selling borrowed debt)   - buyToken = collateralToken (we're buying collateral to repay flash loan)",
    "kind": "dev",
    "methods": {
      "calculateExecution(bytes,address,uint256)": {
        "details": "Returns:   - sellAmount: debt tokens to borrow and swap   - minBuyAmount: collateral tokens expected (must cover flash loan + fee)",
        "params": {
          "iterationCount": "Number of executions completed so far (for chunked orders)",
          "owner": "The order owner",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "minBuyAmount": "Minimum amount to receive (includes slippage protection)",
          "sellAmount": "Amount of sell token to trade in this execution"
        }
      },
      "isComplete(bytes,address,uint256)": {
        "details": "Auto-leverage orders are continuous - they never auto-complete. The order remains active and will re-trigger whenever LTV drops below the trigger threshold, up to maxIterations or until user cancels. This provides ongoing leverage management rather than one-shot execution.",
        "params": {
          "iterationCount": "Number of executions completed so far",
          "owner": "The order owner",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "_0": "True if the order goal has been reached"
        }
      },
      "shouldExecute(bytes,address)": {
        "params": {
          "owner": "The order owner (user whose position is being monitored)",
          "staticData": "ABI-encoded trigger-specific parameters"
        },
        "returns": {
          "_0": "True if the trigger condition is met",
          "_1": "Human-readable reason for the result (for debugging/logging)"
        }
      },
      "triggerName()": {
        "returns": {
          "_0": "Trigger name (e.g., \"LTV\", \"Price\", \"HealthFactor\")"
        }
      }
    },
    "title": "AutoLeverageTrigger",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "calculateExecution(bytes,address,uint256)": {
        "notice": "Calculate the execution amounts when the trigger fires"
      },
      "encodeTriggerParams((bytes4,bytes,uint256,uint256,address,address,uint8,uint8,uint256,uint8))": {
        "notice": "Encode trigger params for order creation"
      },
      "getCurrentLtv(bytes4,address,bytes)": {
        "notice": "Get current LTV for a user"
      },
      "isComplete(bytes,address,uint256)": {
        "notice": "Check if the order is complete and should stop executing"
      },
      "shouldExecute(bytes,address)": {
        "notice": "Check if the order should execute based on current conditions"
      },
      "triggerName()": {
        "notice": "Get human-readable name of the trigger type"
      }
    },
    "notice": "Triggers order execution when position LTV drops BELOW a threshold (auto-leverage)",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}