import{j as a}from"./jsx-runtime-CcWEvojh.js";import{r as d}from"./index-Bk_d_yAU.js";import{a as v,P as k}from"./ProtocolDropdownItem-DLoI1xHs.js";import{f as A}from"./formatPercentage-BDNxS5DB.js";import{F as z}from"./ChevronDownIcon-BxlGDZ4k.js";const P=s=>`${A(s)}%`,c=s=>({aave:"Aave V3",compound:"Compound V3",venus:"Venus",zerolend:"ZeroLend",spark:"Spark",morpho:"Morpho Blue",vesu:"Vesu",nostra:"Nostra"})[s.toLowerCase()]||s,y=d.memo(({protocols:s,selectedProtocol:l,onSelect:f,variant:m="dropdown",label:n,placeholder:N="Select protocol",isLoading:S=!1,disabled:u=!1,currentRate:p,rateType:g="supply",className:b="",gridCols:j=3,showRateBadges:C=!1,compact:i=!1})=>{const r=d.useMemo(()=>s.find(e=>e.name===l),[s,l]),x=d.useCallback(e=>g==="supply"?e.supplyRate:e.borrowRate,[g]),R=d.useCallback(e=>{if(!(e===void 0||p===void 0))return e-p},[p]),w=d.useCallback(e=>{u||f(e)},[u,f]),_=d.useMemo(()=>({gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`}),[j]),h=d.useMemo(()=>s.reduce((e,t)=>(e[t.name]=()=>{t.disabled||w(t.name)},e),{}),[s,w]);return S?a.jsx("div",{className:`flex justify-center py-4 ${b}`,children:a.jsx("span",{className:"loading loading-spinner loading-md"})}):m==="dropdown"?a.jsxs("div",{className:b,children:[n&&a.jsx("label",{className:"text-base-content/80 mb-1 block text-sm font-medium",children:n}),a.jsxs("div",{className:"dropdown w-full",children:[a.jsxs("div",{tabIndex:u?void 0:0,role:"button",className:`
              border-base-300/60 w-full rounded-xl border
              ${i?"p-2":"p-3"}
              flex items-center justify-between
              ${u?"cursor-not-allowed opacity-50":"hover:border-primary/40 cursor-pointer"}
              transition-colors
            `,children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`${i?"size-8":"size-12"} bg-base-200 relative overflow-hidden rounded-full`,children:r?a.jsx(v,{protocolName:r.name,logoUrl:r.logo,size:i?"md":"lg",rounded:"full"}):a.jsx("div",{className:"text-base-content/50 flex size-full items-center justify-center text-xs",children:"Pick"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:`font-semibold ${i?"text-sm":""}`,children:r?c(r.name):N}),(()=>{const e=r&&x(r);return e!==void 0&&a.jsxs("span",{className:"text-base-content/60 text-xs",children:[P(e)," APY"]})})()]})]}),a.jsx(z,{className:"text-base-content/50 size-5"})]}),!u&&a.jsx("div",{tabIndex:0,className:"dropdown-content menu bg-base-100 border-base-200 z-50 w-full overflow-hidden rounded-2xl border p-0 shadow-xl",children:s.length===0?a.jsx("div",{className:"text-base-content/50 px-4 py-3",children:"No protocols available"}):a.jsx("div",{className:"max-h-[240px] overflow-y-auto",children:s.map(e=>{const t=x(e),o=R(t),$=o!==void 0&&o<0,q=o!==void 0&&o>0;return a.jsx(k,{protocolName:e.name,displayName:c(e.name),logoUrl:e.logo,rate:t,isOptimal:e.isOptimal,isRateWorse:$,isRateBetter:q,isSelected:e.name===l,disabled:e.disabled,disabledReason:e.disabledReason,onClick:h[e.name]},e.name)})})})]})]}):m==="grid"?a.jsxs("div",{className:b,children:[n&&a.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[a.jsx("div",{className:"text-base-content/80 text-sm font-semibold",children:n}),C&&r&&p!==void 0&&a.jsx(V,{selectedRate:x(r),currentRate:p,rateType:g})]}),a.jsx("div",{className:"grid gap-2",style:_,children:s.map(e=>{const t=e.name===l,o=x(e);return a.jsxs("div",{className:`
                  ${i?"p-2":"p-2 sm:p-3"}
                  cursor-pointer rounded-lg border transition-all
                  ${t?"border-primary bg-primary/10":"border-base-300 hover:border-primary/40"}
                  ${e.disabled?"cursor-not-allowed opacity-50":""}
                `,onClick:h[e.name],title:e.disabled?e.disabledReason:void 0,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(v,{protocolName:e.name,logoUrl:e.logo,size:i?"xs":"sm",rounded:"md"}),a.jsx("span",{className:`${i?"text-xs":"text-sm"} truncate font-medium`,children:c(e.name)}),e.isOptimal&&a.jsx("span",{className:"badge badge-success badge-xs ml-auto",children:"Best"})]}),o!==void 0&&a.jsxs("div",{className:`${i?"text-[10px]":"text-xs"} text-base-content/60 mt-1`,children:[P(o)," APY"]})]},e.name)})})]}):a.jsxs("div",{className:b,children:[n&&a.jsx("label",{className:"text-base-content/80 mb-2 block text-sm font-medium",children:n}),a.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(e=>{const t=e.name===l;return a.jsxs("button",{type:"button",className:`
                btn btn-sm gap-2
                ${t?"btn-primary":"btn-ghost border-base-300 border"}
                ${e.disabled?"btn-disabled":""}
              `,onClick:h[e.name],title:e.disabled?e.disabledReason:void 0,children:[a.jsx(v,{protocolName:e.name,logoUrl:e.logo,size:"xs",rounded:"md"}),a.jsx("span",{children:c(e.name)})]},e.name)})})]})});y.displayName="ProtocolSelector";const V=d.memo(({selectedRate:s,currentRate:l,rateType:f})=>{if(s===void 0)return null;const m=s-l,n=f==="supply"?m>0:m<0;return Math.abs(m)<.01?a.jsx("span",{className:"badge badge-sm bg-base-200 text-base-content/70 border-0",children:"Same APY"}):a.jsx("span",{className:`badge badge-sm border-0 ${n?"bg-success/15 text-success":"bg-error/15 text-error"}`,children:n?"Better APY":"Lower APY"})});V.displayName="RateBadge";try{c.displayName="formatProtocolName",c.__docgenInfo={description:"Get the display name for a protocol (removes version suffix for cleaner UI)",displayName:"formatProtocolName",props:{}}}catch{}try{y.displayName="ProtocolSelector",y.__docgenInfo={description:`ProtocolSelector - A unified component for selecting lending protocols

Supports three display variants:
- dropdown: A dropdown menu (default) - best for modals with limited space
- grid: A grid of selectable cards - best for showing multiple protocols with rates
- tiles: Compact inline tiles - best for embedded selection`,displayName:"ProtocolSelector",props:{protocols:{defaultValue:null,description:"List of protocol options",name:"protocols",required:!0,type:{name:"ProtocolOption[]"}},selectedProtocol:{defaultValue:null,description:"Currently selected protocol name",name:"selectedProtocol",required:!0,type:{name:"string"}},onSelect:{defaultValue:null,description:"Callback when a protocol is selected",name:"onSelect",required:!0,type:{name:"(protocolName: string) => void"}},variant:{defaultValue:null,description:"Display variant",name:"variant",required:!1,type:{name:"enum",value:[{value:'"dropdown"'},{value:'"grid"'},{value:'"tiles"'}]}},label:{defaultValue:null,description:"Label shown above the selector",name:"label",required:!1,type:{name:"string"}},placeholder:{defaultValue:null,description:"Placeholder text when no protocol is selected",name:"placeholder",required:!1,type:{name:"string"}},isLoading:{defaultValue:null,description:"Whether the selector is in a loading state",name:"isLoading",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"Whether the selector is disabled",name:"disabled",required:!1,type:{name:"boolean"}},currentRate:{defaultValue:null,description:"Current rate to compare against (for showing improvement badges)",name:"currentRate",required:!1,type:{name:"number"}},rateType:{defaultValue:null,description:'Rate type being compared ("supply" or "borrow")',name:"rateType",required:!1,type:{name:"enum",value:[{value:'"borrow"'},{value:'"supply"'}]}},className:{defaultValue:null,description:"Additional className for the container",name:"className",required:!1,type:{name:"string"}},gridCols:{defaultValue:null,description:"Number of grid columns for grid/tiles variant",name:"gridCols",required:!1,type:{name:"number"}},showRateBadges:{defaultValue:null,description:"Whether to show rate badges",name:"showRateBadges",required:!1,type:{name:"boolean"}},compact:{defaultValue:null,description:"Compact mode - smaller padding and text",name:"compact",required:!1,type:{name:"boolean"}}}}}catch{}export{y as P,c as f};
