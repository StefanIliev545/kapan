import{j as tr}from"./jsx-runtime-CcWEvojh.js";import{r as $,R as ky}from"./index-Bk_d_yAU.js";import{X as Ny,Y as By,Z as Dy,_ as Oy,$ as Nf,a0 as Ry,a1 as Xt,a2 as Iu,a3 as Ue,a4 as Bf,a5 as My,a6 as Su,a7 as Ly,a8 as xu,a9 as Cu,aa as Py,ab as ku,ac as Nu,ad as Uy,ae as $y,T as Vy,Q as Hy,P as Fy,J as zy,af as jy,a as qy,m as Yy,O as Zy,h as Df,n as Ky}from"./createSafeContext-Dp97sAkz.js";function Bu(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],o=e.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let u=!1;const h=g=>{Oy(g,()=>e.signal,()=>u=!0)},d=Ny(e.options,e.fetchOptions),f=async(g,y,p)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const b=(()=>{const k={client:e.client,queryKey:e.queryKey,pageParam:y,direction:p?"backward":"forward",meta:e.options.meta};return h(k),k})(),w=await d(b),{maxPages:m}=e.options,I=p?By:Dy;return{pages:I(g.pages,w,m),pageParams:I(g.pageParams,y,m)}};if(i&&s.length){const g=i==="backward",y=g?Wy:Du,p={pages:s,pageParams:o},_=y(r,p);a=await f(p,_,g)}else{const g=t??s.length;do{const y=c===0?o[0]??r.initialPageParam:Du(r,a);if(c>0&&y==null)break;a=await f(a,y),c++}while(c<g)}return a};e.options.persister?e.fetchFn=()=>e.options.persister?.(l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=l}}}function Du(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Wy(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var Gy=class extends Nf{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(t,e,n){const r=new Ry({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#t.add(t);const e=Rs(t);if(typeof e=="string"){const n=this.#e.get(e);n?n.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=Rs(t);if(typeof e=="string"){const n=this.#e.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Rs(t);if(typeof e=="string"){const r=this.#e.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Rs(t);return typeof e=="string"?this.#e.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Xt.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Iu(e,n))}findAll(t={}){return this.getAll().filter(e=>Iu(t,e))}notify(t){Xt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return Xt.batch(()=>Promise.all(t.map(e=>e.continue().catch(Ue))))}};function Rs(t){return t.options.scope?.id}var Qy=class extends Nf{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,n){const r=e.queryKey,i=e.queryHash??Bf(r,e);let s=this.get(i);return s||(s=new My({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(s)),s}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Xt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Su(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Su(t,n)):e}notify(t){Xt.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xy=class{#t;#e;#n;#i;#s;#r;#o;#a;constructor(t={}){this.#t=t.queryCache||new Qy,this.#e=t.mutationCache||new Gy,this.#n=t.defaultOptions||{},this.#i=new Map,this.#s=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#o=Ly.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#a=xu.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#t.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Cu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=this.#t.get(r.queryHash)?.state.data,o=Py(e,s);if(o!==void 0)return this.#t.build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Xt.batch(()=>this.#t.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){const e=this.#t;Xt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#t;return Xt.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Xt.batch(()=>this.#t.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Ue).catch(Ue)}invalidateQueries(t,e={}){return Xt.batch(()=>(this.#t.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Xt.batch(()=>this.#t.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(Ue)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(Ue)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#t.build(this,e);return n.isStaleByTime(Cu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ue).catch(Ue)}fetchInfiniteQuery(t){return t.behavior=Bu(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ue).catch(Ue)}ensureInfiniteQueryData(t){return t.behavior=Bu(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return xu.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#i.set(ku(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],n={};return e.forEach(r=>{Nu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#s.set(ku(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{Nu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bf(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Uy&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}};function Of(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Jy(t,...e){if(!Of(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rf(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Zi(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Vc(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Ga(t){if(!Array.isArray(t))throw new Error("array expected")}function so(t,e){if(!Rf(!0,e))throw new Error(`${t}: array of strings expected`)}function t_(t,e){if(!Rf(!1,e))throw new Error(`${t}: array of numbers expected`)}function e_(...t){const e=s=>s,n=(s,o)=>a=>s(o(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function n_(t){const e=typeof t=="string"?t.split(""):t,n=e.length;so("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(Ga(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:i=>(Ga(i),i.map(s=>{Zi("alphabet.decode",s);const o=r.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return o}))}}function r_(t=""){return Zi("join",t),{encode:e=>(so("join.decode",e),e.join(t)),decode:e=>(Zi("join.decode",e),e.split(t))}}function i_(t,e="="){return Vc(t),Zi("padding",e),{encode(n){for(so("padding.encode",n);n.length*t%8;)n.push(e);return n},decode(n){so("padding.decode",n);let r=n.length;if(r*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===e;r--)if((r-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Mf=(t,e)=>e===0?t:Mf(e,t%e),oo=(t,e)=>t+(e-Mf(t,e)),oa=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function Ou(t,e,n,r){if(Ga(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(oo(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${oo(e,n)}`);let i=0,s=0;const o=oa[e],a=oa[n]-1,c=[];for(const l of t){if(Vc(l),l>=o)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(i=i<<e|l,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=n;s-=n)c.push((i>>s-n&a)>>>0);const u=oa[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-s&a,!r&&s>=e)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&s>0&&c.push(i>>>0),c}function s_(t,e=!1){if(Vc(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(oo(8,t)>32||oo(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Of(n))throw new Error("radix2.encode input should be Uint8Array");return Ou(Array.from(n),8,t,!e)},decode:n=>(t_("radix2.decode",n),Uint8Array.from(Ou(n,t,8,e)))}}const o_=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",a_=(t,e)=>{Zi("base64",t);const n=/^[A-Za-z0-9=+/]+$/,r="base64";if(t.length>0&&!n.test(t))throw new Error("invalid base64");return Uint8Array.fromBase64(t,{alphabet:r,lastChunkHandling:"strict"})},Lf=o_?{encode(t){return Jy(t),t.toBase64()},decode(t){return a_(t)}}:e_(s_(6),n_("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i_(6),r_("")),Pf=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Co="ACCEPTED_ON_L2",ko="ACCEPTED_ON_L1",Hc="SUCCEEDED",Fc="REVERTED",Uf="PENDING",zc="REJECTED",jc="RECEIVED",qc="DECLARE",Yc="DEPLOY",Zc="DEPLOY_ACCOUNT",Kc="INVOKE",Wc="L1_HANDLER",$f="struct",Vf="event",Hf="function",Ff="constructor",zf="l1_handler",jf="enum",qf="view",Yf="external",Zf="WEI",Kf="FRI",Wf={BLOB:"BLOB",CALLDATA:"CALLDATA"},Gf={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Ve={DECLARE:qc,DEPLOY:Yc,DEPLOY_ACCOUNT:Zc,INVOKE:Kc,L1_HANDLER:Wc},Li={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},Pi={RECEIVED:jc,REJECTED:zc,ACCEPTED_ON_L2:Co,ACCEPTED_ON_L1:ko},Qf={ACCEPTED_ON_L2:Co,ACCEPTED_ON_L1:ko},Xf={SUCCEEDED:Hc,REVERTED:Fc},Jf={LATEST:"latest",PENDING:"pending"},th={L1:"L1",L2:"L2"},eh={L1:0,L2:1},Jt={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},nh={V0:Jt.V0,V1:Jt.V1,V2:Jt.V2,F0:Jt.F0,F1:Jt.F1,F2:Jt.F2},rh={V3:Jt.V3,F3:Jt.F3},c_=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Ff,ABI_TYPE_ENUM:jf,ABI_TYPE_FUNCTION:Hf,ABI_TYPE_L1_HANDLER:zf,CALL_TYPE:Gf,CONTRACT:Pf,EBlockTag:Jf,EDAMode:eh,EDataAvailabilityMode:th,ESimulationFlag:Li,ETransactionExecutionStatus:Xf,ETransactionFinalityStatus:Qf,ETransactionStatus:Pi,ETransactionType:Ve,ETransactionVersion:Jt,ETransactionVersion2:nh,ETransactionVersion3:rh,EVENT_ABI_TYPE:Vf,L1_DA_MODE:Wf,PRICE_UNIT_FRI:Kf,PRICE_UNIT_WEI:Zf,STATE_MUTABILITY_EXTERNAL:Yf,STATE_MUTABILITY_VIEW:qf,STATUS_ACCEPTED_ON_L1:ko,STATUS_ACCEPTED_ON_L2:Co,STATUS_PENDING:Uf,STATUS_RECEIVED:jc,STATUS_REJECTED:zc,STATUS_REVERTED:Fc,STATUS_SUCCEEDED:Hc,STRUCT_ABI_TYPE:$f,TXN_TYPE_DECLARE:qc,TXN_TYPE_DEPLOY:Yc,TXN_TYPE_DEPLOY_ACCOUNT:Zc,TXN_TYPE_INVOKE:Kc,TXN_TYPE_L1_HANDLER:Wc},Symbol.toStringTag,{value:"Module"})),ih={ACCOUNTS:"accounts"},sh={ACTIVE:"1",LEGACY:"0"},l_=Object.freeze(Object.defineProperty({__proto__:null,Permission:ih,TypedDataRevision:sh},Symbol.toStringTag,{value:"Module"})),oh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Gc=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Ff,ABI_TYPE_ENUM:jf,ABI_TYPE_FUNCTION:Hf,ABI_TYPE_L1_HANDLER:zf,API:c_,CALL_TYPE:Gf,CONTRACT:Pf,EBlockTag:Jf,EDAMode:eh,EDataAvailabilityMode:th,ESimulationFlag:Li,ETransactionExecutionStatus:Xf,ETransactionFinalityStatus:Qf,ETransactionStatus:Pi,ETransactionType:Ve,ETransactionVersion:Jt,ETransactionVersion2:nh,ETransactionVersion3:rh,EVENT_ABI_TYPE:Vf,L1_DA_MODE:Wf,PAYMASTER_API:oh,PRICE_UNIT_FRI:Kf,PRICE_UNIT_WEI:Zf,Permission:ih,STATE_MUTABILITY_EXTERNAL:Yf,STATE_MUTABILITY_VIEW:qf,STATUS_ACCEPTED_ON_L1:ko,STATUS_ACCEPTED_ON_L2:Co,STATUS_PENDING:Uf,STATUS_RECEIVED:jc,STATUS_REJECTED:zc,STATUS_REVERTED:Fc,STATUS_SUCCEEDED:Hc,STRUCT_ABI_TYPE:$f,TXN_TYPE_DECLARE:qc,TXN_TYPE_DEPLOY:Yc,TXN_TYPE_DEPLOY_ACCOUNT:Zc,TXN_TYPE_INVOKE:Kc,TXN_TYPE_L1_HANDLER:Wc,TypedDataRevision:sh,WALLET_API:l_},Symbol.toStringTag,{value:"Module"})),ah=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ys="ACCEPTED_ON_L2",_s="ACCEPTED_ON_L1",Qc="SUCCEEDED",Xc="REVERTED",Jc="RECEIVED",tl="CANDIDATE",si="PRE_CONFIRMED",el=si.toLowerCase(),nl="DECLARE",rl="DEPLOY",il="DEPLOY_ACCOUNT",sl="INVOKE",ol="L1_HANDLER",ch="struct",lh="event",uh="function",dh="constructor",fh="l1_handler",hh="enum",ph="view",gh="external",yh="WEI",_h="FRI",wh={BLOB:"BLOB",CALLDATA:"CALLDATA"},mh={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},al={DECLARE:nl,DEPLOY:rl,DEPLOY_ACCOUNT:il,INVOKE:sl,L1_HANDLER:ol},Ui={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},dn={RECEIVED:Jc,CANDIDATE:tl,PRE_CONFIRMED:si,ACCEPTED_ON_L2:ys,ACCEPTED_ON_L1:_s},jn={PRE_CONFIRMED:si,ACCEPTED_ON_L2:ys,ACCEPTED_ON_L1:_s},cl={SUCCEEDED:Qc,REVERTED:Xc},bh={LATEST:"latest",PRE_CONFIRMED:el,L1_ACCEPTED:"l1_accepted"},Eh={PRE_CONFIRMED:si,ACCEPTED_ON_L2:ys,ACCEPTED_ON_L1:_s},Ah={L1:"L1",L2:"L2"},vh={L1:0,L2:1},Ie={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Th={V0:Ie.V0,V1:Ie.V1,V2:Ie.V2,F0:Ie.F0,F1:Ie.F1,F2:Ie.F2},Ih={V3:Ie.V3,F3:Ie.F3},u_=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:dh,ABI_TYPE_ENUM:hh,ABI_TYPE_FUNCTION:uh,ABI_TYPE_L1_HANDLER:fh,CALL_TYPE:mh,CONTRACT:ah,EBlockStatus:Eh,EBlockTag:bh,EDAMode:vh,EDataAvailabilityMode:Ah,ESimulationFlag:Ui,ETransactionExecutionStatus:cl,ETransactionFinalityStatus:jn,ETransactionStatus:dn,ETransactionType:al,ETransactionVersion:Ie,ETransactionVersion2:Th,ETransactionVersion3:Ih,EVENT_ABI_TYPE:lh,L1_DA_MODE:wh,PRICE_UNIT_FRI:_h,PRICE_UNIT_WEI:yh,STATE_MUTABILITY_EXTERNAL:gh,STATE_MUTABILITY_VIEW:ph,STATUS_ACCEPTED_ON_L1:_s,STATUS_ACCEPTED_ON_L2:ys,STATUS_CANDIDATE:tl,STATUS_PRE_CONFIRMED:si,STATUS_PRE_CONFIRMED_LOWERCASE:el,STATUS_RECEIVED:Jc,STATUS_REVERTED:Xc,STATUS_SUCCEEDED:Qc,STRUCT_ABI_TYPE:ch,TXN_TYPE_DECLARE:nl,TXN_TYPE_DEPLOY:rl,TXN_TYPE_DEPLOY_ACCOUNT:il,TXN_TYPE_INVOKE:sl,TXN_TYPE_L1_HANDLER:ol},Symbol.toStringTag,{value:"Module"})),Sh={ACCOUNTS:"accounts"},xh={ACTIVE:"1",LEGACY:"0"},d_=Object.freeze(Object.defineProperty({__proto__:null,Permission:Sh,TypedDataRevision:xh},Symbol.toStringTag,{value:"Module"})),f_=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),oi=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:dh,ABI_TYPE_ENUM:hh,ABI_TYPE_FUNCTION:uh,ABI_TYPE_L1_HANDLER:fh,API:u_,CALL_TYPE:mh,CONTRACT:ah,EBlockStatus:Eh,EBlockTag:bh,EDAMode:vh,EDataAvailabilityMode:Ah,ESimulationFlag:Ui,ETransactionExecutionStatus:cl,ETransactionFinalityStatus:jn,ETransactionStatus:dn,ETransactionType:al,ETransactionVersion:Ie,ETransactionVersion2:Th,ETransactionVersion3:Ih,EVENT_ABI_TYPE:lh,L1_DA_MODE:wh,PAYMASTER_API:f_,PRICE_UNIT_FRI:_h,PRICE_UNIT_WEI:yh,Permission:Sh,STATE_MUTABILITY_EXTERNAL:gh,STATE_MUTABILITY_VIEW:ph,STATUS_ACCEPTED_ON_L1:_s,STATUS_ACCEPTED_ON_L2:ys,STATUS_CANDIDATE:tl,STATUS_PRE_CONFIRMED:si,STATUS_PRE_CONFIRMED_LOWERCASE:el,STATUS_RECEIVED:Jc,STATUS_REVERTED:Xc,STATUS_SUCCEEDED:Qc,STRUCT_ABI_TYPE:ch,TXN_TYPE_DECLARE:nl,TXN_TYPE_DEPLOY:rl,TXN_TYPE_DEPLOY_ACCOUNT:il,TXN_TYPE_INVOKE:sl,TXN_TYPE_L1_HANDLER:ol,TypedDataRevision:xh,WALLET_API:d_},Symbol.toStringTag,{value:"Module"}));function ws(t){return h_.test(t)}const h_=/^-?[0-9]+$/;function Ch(t){return p_.test(t)}const p_=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function g_(t,e){if(ws(t))return Number.isSafeInteger(Number.parseInt(t,10));const n=Number.parseFloat(t),r=String(n);if(t===r)return!0;const i=Ru(t),s=Ru(r);return i===s}let yi=(function(t){return t.underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t})({});function y_(t){if(g_(t))return;if(ws(t))return yi.truncate_integer;const e=Number.parseFloat(t);return Number.isFinite(e)?e===0?yi.underflow:yi.truncate_float:yi.overflow}function Ru(t){const{start:e,end:n}=__(t),r=t.substring(e,n),i=r.indexOf(".");return i===-1?r:r.substring(0,i)+r.substring(i+1)}function __(t){let e=0;for(t[0]==="-"&&e++;t[e]==="0"||t[e]===".";)e++;let n=t.lastIndexOf("e");for(n===-1&&(n=t.lastIndexOf("E")),n===-1&&(n=t.length);(t[n-1]==="0"||t[n-1]===".")&&n>e;)n--;return{start:e,end:n}}class w_{isLosslessNumber=!0;constructor(e){if(!Ch(e))throw new Error(`Invalid number (value: "${e}")`);this.value=e}valueOf(){const e=y_(this.value);if(e===void 0||e===yi.truncate_float)return Number.parseFloat(this.value);if(ws(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${e} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function m_(t){return t&&typeof t=="object"&&t.isLosslessNumber||!1}function b_(t){return new w_(t)}function E_(t){return ws(t)?BigInt(t):Number.parseFloat(t)}function A_(t,e){return ll({"":t},"",t,e)}function ll(t,e,n,r){return Array.isArray(n)?r.call(t,e,T_(n,r)):n&&typeof n=="object"&&!m_(n)?r.call(t,e,v_(n,r)):r.call(t,e,n)}function v_(t,e){for(const n of Object.keys(t)){const r=ll(t,n,t[n],e);r!==void 0?t[n]=r:delete t[n]}return t}function T_(t,e){for(let n=0;n<t.length;n++)t[n]=ll(t,String(n),t[n],e);return t}function kh(t,e,n){const r=typeof n=="function"?{parseNumber:n}:n,i=r?.parseNumber??b_,s=r?.onDuplicateKey??E;let o=0;const a=u();return _(a),w(),e?A_(a,e):a;function c(){if(t.charCodeAt(o)===N_){o++,d();const C={};let R=!0;for(;o<t.length&&t.charCodeAt(o)!==Lu;){R?R=!1:(y(),d());const U=o,H=f();if(H===void 0){k();return}d(),p();const z=u();if(z===void 0){M();return}if(Object.prototype.hasOwnProperty.call(C,H)&&!Qa(z,C[H])){const rt=s({key:H,position:U+1,oldValue:C[H],newValue:z});rt!==void 0&&(C[H]=rt)}else C[H]=z}return t.charCodeAt(o)!==Lu&&N(),o++,C}}function l(){if(t.charCodeAt(o)===B_){o++,d();const C=[];let R=!0;for(;o<t.length&&t.charCodeAt(o)!==Pu;){R?R=!1:y();const U=u();b(U),C.push(U)}return t.charCodeAt(o)!==Pu&&T(),o++,C}}function u(){d();const C=f()??g()??c()??l()??h("true",!0)??h("false",!1)??h("null",null);return d(),C}function h(C,R){if(t.slice(o,o+C.length)===C)return o+=C.length,R}function d(){for(;I_(t.charCodeAt(o));)o++}function f(){if(t.charCodeAt(o)===aa){o++;let C="";for(;o<t.length&&t.charCodeAt(o)!==aa;){if(t.charCodeAt(o)===k_){const R=t[o+1],U=C_[R];U!==void 0?(C+=U,o++):R==="u"?Ms(t.charCodeAt(o+2))&&Ms(t.charCodeAt(o+3))&&Ms(t.charCodeAt(o+4))&&Ms(t.charCodeAt(o+5))?(C+=String.fromCharCode(Number.parseInt(t.slice(o+2,o+6),16)),o+=5):j(o):D(o)}else x_(t.charCodeAt(o))?C+=t[o]:O(t[o]);o++}return I(),o++,C}}function g(){const C=o;if(t.charCodeAt(o)===Uu&&(o++,m(C)),t.charCodeAt(o)===ul)o++;else if(S_(t.charCodeAt(o)))for(o++;Ls(t.charCodeAt(o));)o++;if(t.charCodeAt(o)===$_)for(o++,m(C);Ls(t.charCodeAt(o));)o++;if(t.charCodeAt(o)===j_||t.charCodeAt(o)===z_)for(o++,(t.charCodeAt(o)===Uu||t.charCodeAt(o)===L_)&&o++,m(C);Ls(t.charCodeAt(o));)o++;if(o>C)return i(t.slice(C,o))}function y(){if(t.charCodeAt(o)!==U_)throw new SyntaxError(`Comma ',' expected after value ${S()}`);o++}function p(){if(t.charCodeAt(o)!==V_)throw new SyntaxError(`Colon ':' expected after property name ${S()}`);o++}function _(C){if(C===void 0)throw new SyntaxError(`JSON value expected ${S()}`)}function b(C){if(C===void 0)throw new SyntaxError(`Array item expected ${S()}`)}function w(){if(o<t.length)throw new SyntaxError(`Expected end of input ${S()}`)}function m(C){if(!Ls(t.charCodeAt(o))){const R=t.slice(C,o);throw new SyntaxError(`Invalid number '${R}', expecting a digit ${S()}`)}}function I(){if(t.charCodeAt(o)!==aa)throw new SyntaxError(`End of string '"' expected ${S()}`)}function k(){throw new SyntaxError(`Quoted object key expected ${S()}`)}function E(C){let{key:R,position:U}=C;throw new SyntaxError(`Duplicate key '${R}' encountered at position ${U}`)}function N(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${S()}`)}function T(){throw new SyntaxError(`Array item or end of array ']' expected ${S()}`)}function O(C){throw new SyntaxError(`Invalid character '${C}' ${A()}`)}function D(C){const R=t.slice(C,C+2);throw new SyntaxError(`Invalid escape character '${R}' ${A()}`)}function M(){throw new SyntaxError(`Object value expected after ':' ${A()}`)}function j(C){const R=t.slice(C,C+6);throw new SyntaxError(`Invalid unicode character '${R}' ${A()}`)}function A(){return`at position ${o}`}function x(){return o<t.length?`but got '${t[o]}'`:"but reached end of input"}function S(){return`${x()} ${A()}`}}function I_(t){return t===D_||t===O_||t===R_||t===M_}function Ms(t){return t>=ul&&t<=dl||t>=H_&&t<=q_||t>=F_&&t<=Y_}function Ls(t){return t>=ul&&t<=dl}function S_(t){return t>=P_&&t<=dl}function x_(t){return t>=32&&t<=1114111}function Qa(t,e){return t===e?!0:Array.isArray(t)&&Array.isArray(e)?t.length===e.length&&t.every((n,r)=>Qa(n,e[r])):Mu(t)&&Mu(e)?[...new Set([...Object.keys(t),...Object.keys(e)])].every(r=>Qa(t[r],e[r])):!1}function Mu(t){return typeof t=="object"&&t!==null}const C_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},k_=92,N_=123,Lu=125,B_=91,Pu=93,D_=32,O_=10,R_=9,M_=13,aa=34,L_=43,Uu=45,ul=48,P_=49,dl=57,U_=44,$_=46,V_=58,H_=65,F_=97,z_=69,j_=101,q_=70,Y_=102;function Nh(t,e,n,r){const i=Z_(n),s=typeof e=="function"?e.call({"":t},"",t):t;return o(s,"");function o(u,h){if(Array.isArray(r)){const d=r.find(f=>f.test(u));if(d){const f=d.stringify(u);if(typeof f!="string"||!Ch(f))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${f})`);return f}}if(typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u===null||u instanceof Date||u instanceof Boolean||u instanceof Number||u instanceof String)return JSON.stringify(u);if(u?.isLosslessNumber||typeof u=="bigint")return u.toString();if(Array.isArray(u))return a(u,h);if(u&&typeof u=="object")return c(u,h)}function a(u,h){if(u.length===0)return"[]";const d=i?h+i:void 0;let f=i?`[
`:"[";for(let g=0;g<u.length;g++){const y=typeof e=="function"?e.call(u,String(g),u[g]):u[g];i&&(f+=d),typeof y<"u"&&typeof y!="function"?f+=o(y,d):f+="null",g<u.length-1&&(f+=i?`,
`:",")}return f+=i?`
${h}]`:"]",f}function c(u,h){if(typeof u.toJSON=="function")return Nh(u.toJSON(),e,n,void 0);const d=Array.isArray(e)?e.map(String):Object.keys(u);if(d.length===0)return"{}";const f=i?h+i:void 0;let g=!0,y=i?`{
`:"{";for(const p of d){const _=typeof e=="function"?e.call(u,p,u[p]):u[p];if(l(p,_)){g?g=!1:y+=i?`,
`:",";const b=JSON.stringify(p);y+=i?`${f+b}: `:`${b}:`,y+=o(_,f)}}return y+=i?`
${h}}`:"}",y}function l(u,h){return typeof h<"u"&&typeof h!="function"&&typeof h!="symbol"}}function Z_(t){if(typeof t=="number")return" ".repeat(t);if(typeof t=="string"&&t!=="")return t}const No=BigInt(0),Bo=BigInt(1),K_=BigInt(2);function lr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ms(t){if(!lr(t))throw new Error("Uint8Array expected")}function Yr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const W_=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ur(t){ms(t);let e="";for(let n=0;n<t.length;n++)e+=W_[t[n]];return e}function Rr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function fl(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?No:BigInt("0x"+t)}const Me={_0:48,_9:57,A:65,F:70,a:97,f:102};function $u(t){if(t>=Me._0&&t<=Me._9)return t-Me._0;if(t>=Me.A&&t<=Me.F)return t-(Me.A-10);if(t>=Me.a&&t<=Me.f)return t-(Me.a-10)}function wn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=$u(t.charCodeAt(s)),a=$u(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function er(t){return fl(ur(t))}function hl(t){return ms(t),fl(ur(Uint8Array.from(t).reverse()))}function Zr(t,e){return wn(t.toString(16).padStart(e*2,"0"))}function pl(t,e){return Zr(t,e).reverse()}function G_(t){return wn(Rr(t))}function ye(t,e,n){let r;if(typeof e=="string")try{r=wn(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(lr(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Ki(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];ms(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function Q_(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function X_(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const ca=t=>typeof t=="bigint"&&No<=t;function Do(t,e,n){return ca(t)&&ca(e)&&ca(n)&&e<=t&&t<n}function nr(t,e,n,r){if(!Do(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Bh(t){let e;for(e=0;t>No;t>>=Bo,e+=1);return e}function J_(t,e){return t>>BigInt(e)&Bo}function tw(t,e,n){return t|(n?Bo:No)<<BigInt(e)}const gl=t=>(K_<<BigInt(t-1))-Bo,la=t=>new Uint8Array(t),Vu=t=>Uint8Array.from(t);function Dh(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=la(t),i=la(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),c=(h=la())=>{i=a(Vu([0]),h),r=a(),h.length!==0&&(i=a(Vu([1]),h),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){r=a();const f=r.slice();d.push(f),h+=r.length}return Ki(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(l()));)c();return o(),f}}const ew={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||lr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function bs(t,e,n={}){const r=(i,s,o)=>{const a=ew[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const nw=()=>{throw new Error("not implemented")};function Xa(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const rw=Object.freeze(Object.defineProperty({__proto__:null,aInRange:nr,abool:Yr,abytes:ms,bitGet:J_,bitLen:Bh,bitMask:gl,bitSet:tw,bytesToHex:ur,bytesToNumberBE:er,bytesToNumberLE:hl,concatBytes:Ki,createHmacDrbg:Dh,ensureBytes:ye,equalBytes:Q_,hexToBytes:wn,hexToNumber:fl,inRange:Do,isBytes:lr,memoized:Xa,notImplemented:nw,numberToBytesBE:Zr,numberToBytesLE:pl,numberToHexUnpadded:Rr,numberToVarBytesBE:G_,utf8ToBytes:X_,validateObject:bs},Symbol.toStringTag,{value:"Module"}));function $i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function iw(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yl(t,...e){if(!iw(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Kr(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _l(t,e){yl(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Wi=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ua=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ut=(t,e)=>t<<32-e|t>>>e,He=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Oh=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255,_i=He?t=>t:t=>Oh(t);function sn(t){for(let e=0;e<t.length;e++)t[e]=Oh(t[e])}function sw(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function fn(t){return typeof t=="string"&&(t=sw(t)),yl(t),t}let wl=class{clone(){return this._cloneInto()}};function Rh(t){const e=r=>t().update(fn(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ow(t){const e=(r,i)=>t(i).update(fn(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function aw(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}const cw=(t,e,n)=>t&e^~t&n,lw=(t,e,n)=>t&e^t&n^e&n;let uw=class extends wl{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ua(this.buffer)}update(e){Kr(this);const{view:n,buffer:r,blockLen:i}=this;e=fn(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=ua(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Kr(this),_l(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;aw(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=ua(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const dw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),We=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ge=new Uint32Array(64);let fw=class extends uw{constructor(){super(64,32,8,!1),this.A=We[0]|0,this.B=We[1]|0,this.C=We[2]|0,this.D=We[3]|0,this.E=We[4]|0,this.F=We[5]|0,this.G=We[6]|0,this.H=We[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)Ge[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const d=Ge[h-15],f=Ge[h-2],g=Ut(d,7)^Ut(d,18)^d>>>3,y=Ut(f,17)^Ut(f,19)^f>>>10;Ge[h]=y+Ge[h-7]+g+Ge[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=Ut(a,6)^Ut(a,11)^Ut(a,25),f=u+d+cw(a,c,l)+dw[h]+Ge[h]|0,y=(Ut(r,2)^Ut(r,13)^Ut(r,22))+lw(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Ge.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const hw=Rh(()=>new fw);function Hu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pw(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ml(t,...e){if(!pw(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ao(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mh(t,e){ml(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ps=BigInt(2**32-1),Fu=BigInt(32);function gw(t,e=!1){return e?{h:Number(t&Ps),l:Number(t>>Fu&Ps)}:{h:Number(t>>Fu&Ps)|0,l:Number(t&Ps)|0}}function yw(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=gw(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const _w=(t,e,n)=>t<<n|e>>>32-n,ww=(t,e,n)=>e<<n|t>>>32-n,mw=(t,e,n)=>e<<n-32|t>>>64-n,bw=(t,e,n)=>t<<n-32|e>>>64-n;const Ew=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),da=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),be=(t,e)=>t<<32-e|t>>>e,zu=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Aw=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function ju(t){for(let e=0;e<t.length;e++)t[e]=Aw(t[e])}function Lh(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function bl(t){return typeof t=="string"&&(t=Lh(t)),ml(t),t}let Ph=class{clone(){return this._cloneInto()}};function Uh(t){const e=r=>t().update(bl(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const $h=[],Vh=[],Hh=[],vw=BigInt(0),hi=BigInt(1),Tw=BigInt(2),Iw=BigInt(7),Sw=BigInt(256),xw=BigInt(113);for(let t=0,e=hi,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],$h.push(2*(5*r+n)),Vh.push((t+1)*(t+2)/2%64);let i=vw;for(let s=0;s<7;s++)e=(e<<hi^(e>>Iw)*xw)%Sw,e&Tw&&(i^=hi<<(hi<<BigInt(s))-hi);Hh.push(i)}const[Cw,kw]=yw(Hh,!0),qu=(t,e,n)=>n>32?mw(t,e,n):_w(t,e,n),Yu=(t,e,n)=>n>32?bw(t,e,n):ww(t,e,n);function Nw(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],h=qu(l,u,1)^n[a],d=Yu(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=Vh[o],c=qu(i,s,a),l=Yu(i,s,a),u=$h[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Cw[r],t[1]^=kw[r]}n.fill(0)}let Bw=class Fh extends Ph{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Hu(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ew(this.state)}keccak(){zu||ju(this.state32),Nw(this.state32,this.rounds),zu||ju(this.state32),this.posOut=0,this.pos=0}update(e){ao(this);const{blockLen:n,state:r}=this;e=bl(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ao(this,!1),ml(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Hu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Mh(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Fh(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Dw=(t,e,n)=>Uh(()=>new Bw(e,t,n)),Ow=Dw(1,136,256/8);function Rw(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}const Mw=(t,e,n)=>t&e^~t&n,Lw=(t,e,n)=>t&e^t&n^e&n;let Pw=class extends Ph{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=da(this.buffer)}update(e){ao(this);const{view:n,buffer:r,blockLen:i}=this;e=bl(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=da(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ao(this),Mh(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;Rw(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=da(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}};const Uw=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xe=new Uint32Array(64);let $w=class extends Pw{constructor(){super(64,32,8,!1),this.A=Qe[0]|0,this.B=Qe[1]|0,this.C=Qe[2]|0,this.D=Qe[3]|0,this.E=Qe[4]|0,this.F=Qe[5]|0,this.G=Qe[6]|0,this.H=Qe[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)Xe[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const d=Xe[h-15],f=Xe[h-2],g=be(d,7)^be(d,18)^d>>>3,y=be(f,17)^be(f,19)^f>>>10;Xe[h]=y+Xe[h-7]+g+Xe[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=be(a,6)^be(a,11)^be(a,25),f=u+d+Mw(a,c,l)+Uw[h]+Xe[h]|0,y=(be(r,2)^be(r,13)^be(r,22))+Lw(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){Xe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const El=Uh(()=>new $w);const Oo=BigInt(0),Ro=BigInt(1),Vw=BigInt(2);function dr(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Es(t){if(!dr(t))throw new Error("Uint8Array expected")}function Wr(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const Hw=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mn(t){Es(t);let e="";for(let n=0;n<t.length;n++)e+=Hw[t[n]];return e}function Mr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Mo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Oo:BigInt("0x"+t)}const Le={_0:48,_9:57,A:65,F:70,a:97,f:102};function Zu(t){if(t>=Le._0&&t<=Le._9)return t-Le._0;if(t>=Le.A&&t<=Le.F)return t-(Le.A-10);if(t>=Le.a&&t<=Le.f)return t-(Le.a-10)}function fr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,s=0;i<n;i++,s+=2){const o=Zu(t.charCodeAt(s)),a=Zu(t.charCodeAt(s+1));if(o===void 0||a===void 0){const c=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+s)}r[i]=o*16+a}return r}function Rt(t){return Mo(mn(t))}function Al(t){return Es(t),Mo(mn(Uint8Array.from(t).reverse()))}function Gr(t,e){return fr(t.toString(16).padStart(e*2,"0"))}function vl(t,e){return Gr(t,e).reverse()}function Tl(t){return fr(Mr(t))}function ce(t,e,n){let r;if(typeof e=="string")try{r=fr(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(dr(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function Qr(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];Es(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}function Fw(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function zw(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const fa=t=>typeof t=="bigint"&&Oo<=t;function Lo(t,e,n){return fa(t)&&fa(e)&&fa(n)&&e<=t&&t<n}function rr(t,e,n,r){if(!Lo(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function zh(t){let e;for(e=0;t>Oo;t>>=Ro,e+=1);return e}function jw(t,e){return t>>BigInt(e)&Ro}function qw(t,e,n){return t|(n?Ro:Oo)<<BigInt(e)}const Po=t=>(Vw<<BigInt(t-1))-Ro,ha=t=>new Uint8Array(t),Ku=t=>Uint8Array.from(t);function jh(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ha(t),i=ha(t),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...h)=>n(i,r,...h),c=(h=ha())=>{i=a(Ku([0]),h),r=a(),h.length!==0&&(i=a(Ku([1]),h),r=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<e;){r=a();const f=r.slice();d.push(f),h+=r.length}return Qr(...d)};return(h,d)=>{o(),c(h);let f;for(;!(f=d(l()));)c();return o(),f}}const Yw={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||dr(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function As(t,e,n={}){const r=(i,s,o)=>{const a=Yw[s];if(typeof a!="function")throw new Error("invalid validator function");const c=t[i];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+c)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return t}const Zw=()=>{throw new Error("not implemented")};function Ja(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t(n,...r);return e.set(n,s),s}}const Kw=Object.freeze(Object.defineProperty({__proto__:null,aInRange:rr,abool:Wr,abytes:Es,bitGet:jw,bitLen:zh,bitMask:Po,bitSet:qw,bytesToHex:mn,bytesToNumberBE:Rt,bytesToNumberLE:Al,concatBytes:Qr,createHmacDrbg:jh,ensureBytes:ce,equalBytes:Fw,hexToBytes:fr,hexToNumber:Mo,inRange:Lo,isBytes:dr,memoized:Ja,notImplemented:Zw,numberToBytesBE:Gr,numberToBytesLE:vl,numberToHexUnpadded:Mr,numberToVarBytesBE:Tl,utf8ToBytes:zw,validateObject:As},Symbol.toStringTag,{value:"Module"}));const At=BigInt(0),st=BigInt(1),qn=BigInt(2),Ww=BigInt(3),tc=BigInt(4),Wu=BigInt(5),Gu=BigInt(8);function Bt(t,e){const n=t%e;return n>=At?n:e+n}function Gw(t,e,n){if(e<At)throw new Error("invalid exponent, negatives unsupported");if(n<=At)throw new Error("invalid modulus");if(n===st)return At;let r=st;for(;e>At;)e&st&&(r=r*t%n),t=t*t%n,e>>=st;return r}function co(t,e){if(t===At)throw new Error("invert: expected non-zero number");if(e<=At)throw new Error("invert: expected positive modulus, got "+e);let n=Bt(t,e),r=e,i=At,s=st;for(;n!==At;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==st)throw new Error("invert: does not exist");return Bt(i,e)}function Qw(t){const e=(t-st)/qn;let n,r,i;for(n=t-st,r=0;n%qn===At;n/=qn,r++);for(i=qn;i<t&&Gw(i,e,t)!==t-st;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+st)/tc;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+st)/qn;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),h=a.pow(c,s),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(d);f<l&&!a.eql(y,a.ONE);f++)y=a.sqr(y);const g=a.pow(u,st<<BigInt(l-f-1));u=a.sqr(g),h=a.mul(h,g),d=a.mul(d,u),l=f}return h}}function Xw(t){if(t%tc===Ww){const e=(t+st)/tc;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%Gu===Wu){const e=(t-Wu)/Gu;return function(r,i){const s=r.mul(i,qn),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,qn),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return Qw(t)}const Jw=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Il(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Jw.reduce((r,i)=>(r[i]="function",r),e);return As(t,n)}function qh(t,e,n){if(n<At)throw new Error("invalid exponent, negatives unsupported");if(n===At)return t.ONE;if(n===st)return e;let r=t.ONE,i=e;for(;n>At;)n&st&&(r=t.mul(r,i)),i=t.sqr(i),n>>=st;return r}function tm(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function Yh(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Sl(t,e,n=!1,r={}){if(t<=At)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Yh(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:Po(i),ZERO:At,ONE:st,create:c=>Bt(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return At<=c&&c<t},is0:c=>c===At,isOdd:c=>(c&st)===st,neg:c=>Bt(-c,t),eql:(c,l)=>c===l,sqr:c=>Bt(c*c,t),add:(c,l)=>Bt(c+l,t),sub:(c,l)=>Bt(c-l,t),mul:(c,l)=>Bt(c*l,t),pow:(c,l)=>qh(a,c,l),div:(c,l)=>Bt(c*co(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>co(c,t),sqrt:r.sqrt||(c=>(o||(o=Xw(t)),o(a,c))),invertBatch:c=>tm(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?vl(c,s):Gr(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?Al(c):Rt(c)}});return Object.freeze(a)}function Zh(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Kh(t){const e=Zh(t);return e+Math.ceil(e/2)}function em(t,e,n=!1){const r=t.length,i=Zh(e),s=Kh(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?Rt(t):Al(t),a=Bt(o,e-st)+st;return n?vl(a,i):Gr(a,i)}function nm(t){const{Fp:e,mds:n,reversePartialPowIdx:r,roundConstants:i}=t,{roundsFull:s,roundsPartial:o,sboxPower:a,t:c}=t;Il(e);for(const g of["t","roundsFull","roundsPartial"])if(typeof t[g]!="number"||!Number.isSafeInteger(t[g]))throw new Error("invalid number "+g);if(!Array.isArray(n)||n.length!==c)throw new Error("Poseidon: invalid MDS matrix");const l=n.map(g=>{if(!Array.isArray(g)||g.length!==c)throw new Error("invalid MDS matrix row: "+g);return g.map(y=>{if(typeof y!="bigint")throw new Error("invalid MDS matrix bigint: "+y);return e.create(y)})});if(r!==void 0&&typeof r!="boolean")throw new Error("invalid param reversePartialPowIdx="+r);if(s&1)throw new Error("roundsFull is not even"+s);const u=s+o;if(!Array.isArray(i)||i.length!==u)throw new Error("Poseidon: invalid round constants");const h=i.map(g=>{if(!Array.isArray(g)||g.length!==c)throw new Error("invalid round constants");return g.map(y=>{if(typeof y!="bigint"||!e.isValid(y))throw new Error("invalid round constant");return e.create(y)})});if(!a||![3,5,7].includes(a))throw new Error("invalid sboxPower");const d=BigInt(a);let f=g=>qh(e,g,d);return a===3?f=g=>e.mul(e.sqrN(g),g):a===5&&(f=g=>e.mul(e.sqrN(e.sqrN(g)),g)),Object.freeze({...t,rounds:u,sboxFn:f,roundConstants:h,mds:l})}function rm(t){const e=nm(t),{Fp:n,mds:r,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:a,t:c}=e,l=e.roundsFull/2,u=e.reversePartialPowIdx?c-1:0,h=(f,g,y)=>(f=f.map((p,_)=>n.add(p,i[y][_])),g?f=f.map(p=>a(p)):f[u]=a(f[u]),f=r.map(p=>p.reduce((_,b,w)=>n.add(_,n.mulN(b,f[w])),n.ZERO)),f),d=function(g){if(!Array.isArray(g)||g.length!==c)throw new Error("invalid values, expected array of bigints with length "+c);g=g.map(p=>{if(typeof p!="bigint")throw new Error("invalid bigint="+p);return n.create(p)});let y=0;for(let p=0;p<l;p++)g=h(g,!0,y++);for(let p=0;p<o;p++)g=h(g,!1,y++);for(let p=0;p<l;p++)g=h(g,!0,y++);if(y!==s)throw new Error("invalid number of rounds");return g};return d.roundConstants=i,d}const Qu=BigInt(0),Us=BigInt(1);function pa(t,e){const n=e.negate();return t?n:e}function Wh(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ga(t,e){Wh(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function im(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function sm(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ya=new WeakMap,Gh=new WeakMap;function _a(t){return Gh.get(t)||1}function om(t,e){return{constTimeNegate:pa,hasPrecomputes(n){return _a(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>Qu;)r&Us&&(i=i.add(s)),s=s.double(),r>>=Us;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=ga(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=ga(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<s;d++){const f=d*o;let g=Number(i&l);i>>=h,g>o&&(g-=u,i+=Us);const y=f,p=f+Math.abs(g)-1,_=d%2!==0,b=g<0;g===0?c=c.add(pa(_,r[y])):a=a.add(pa(b,r[p]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=ga(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let h=0;h<o;h++){const d=h*a;if(i===Qu)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Us),f===0)continue;let g=r[d+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=ya.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&ya.set(r,i(s))),s},wNAFCached(n,r,i){const s=_a(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=_a(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){Wh(r,e),Gh.set(n,r),ya.delete(n)}}}function am(t,e,n,r){if(im(n,t),sm(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=zh(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],y=Number(g>>BigInt(h)&BigInt(a));c[y]=c[y].add(n[f])}let d=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),d=d.add(g);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Qh(t){return Il(t.Fp),As(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Yh(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Xu(t){t.lowS!==void 0&&Wr("lowS",t.lowS),t.prehash!==void 0&&Wr("prehash",t.prehash)}function cm(t){const e=Qh(t);As(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:lm,hexToBytes:um}=Kw,Se={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:n}=Se;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Mr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Mr(i.length/2|128):"";return Mr(t)+s+i+e},decode(t,e){const{Err:n}=Se;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Se;if(t<qe)throw new e("integer: negative integers are not allowed");let n=Mr(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Se;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return lm(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Se,i=typeof t=="string"?um(t):t;Es(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Se,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},qe=BigInt(0),dt=BigInt(1);BigInt(2);const Ju=BigInt(3);BigInt(4);function dm(t){const e=cm(t),{Fp:n}=e,r=Sl(e.n,e.nBitLength),i=e.toBytes||((y,p,_)=>{const b=p.toAffine();return Qr(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(y=>{const p=y.subarray(1),_=n.fromBytes(p.subarray(0,n.BYTES)),b=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:_,y:b}});function o(y){const{a:p,b:_}=e,b=n.sqr(y),w=n.mul(b,y);return n.add(n.add(w,n.mul(y,p)),_)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return Lo(y,dt,e.n)}function c(y){const{allowedPrivateKeyLengths:p,nByteLength:_,wrapPrivateKey:b,n:w}=e;if(p&&typeof y!="bigint"){if(dr(y)&&(y=mn(y)),typeof y!="string"||!p.includes(y.length))throw new Error("invalid private key");y=y.padStart(_*2,"0")}let m;try{m=typeof y=="bigint"?y:Rt(ce("private key",y,_))}catch{throw new Error("invalid private key, expected hex or "+_+" bytes, got "+typeof y)}return b&&(m=Bt(m,w)),rr("private key",m,dt,w),m}function l(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}const u=Ja((y,p)=>{const{px:_,py:b,pz:w}=y;if(n.eql(w,n.ONE))return{x:_,y:b};const m=y.is0();p==null&&(p=m?n.ONE:n.inv(w));const I=n.mul(_,p),k=n.mul(b,p),E=n.mul(w,p);if(m)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:I,y:k}}),h=Ja(y=>{if(y.is0()){if(e.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:p,y:_}=y.toAffine();if(!n.isValid(p)||!n.isValid(_))throw new Error("bad point: x or y not FE");const b=n.sqr(_),w=o(p);if(!n.eql(b,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(p,_,b){if(this.px=p,this.py=_,this.pz=b,p==null||!n.isValid(p))throw new Error("x required");if(_==null||!n.isValid(_))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:_,y:b}=p||{};if(!p||!n.isValid(_)||!n.isValid(b))throw new Error("invalid affine point");if(p instanceof d)throw new Error("projective point not allowed");const w=m=>n.eql(m,n.ZERO);return w(_)&&w(b)?d.ZERO:new d(_,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const _=n.invertBatch(p.map(b=>b.pz));return p.map((b,w)=>b.toAffine(_[w])).map(d.fromAffine)}static fromHex(p){const _=d.fromAffine(s(ce("pointHex",p)));return _.assertValidity(),_}static fromPrivateKey(p){return d.BASE.multiply(c(p))}static msm(p,_){return am(d,r,p,_)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){h(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:_,py:b,pz:w}=this,{px:m,py:I,pz:k}=p,E=n.eql(n.mul(_,k),n.mul(m,w)),N=n.eql(n.mul(b,k),n.mul(I,w));return E&&N}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:_}=e,b=n.mul(_,Ju),{px:w,py:m,pz:I}=this;let k=n.ZERO,E=n.ZERO,N=n.ZERO,T=n.mul(w,w),O=n.mul(m,m),D=n.mul(I,I),M=n.mul(w,m);return M=n.add(M,M),N=n.mul(w,I),N=n.add(N,N),k=n.mul(p,N),E=n.mul(b,D),E=n.add(k,E),k=n.sub(O,E),E=n.add(O,E),E=n.mul(k,E),k=n.mul(M,k),N=n.mul(b,N),D=n.mul(p,D),M=n.sub(T,D),M=n.mul(p,M),M=n.add(M,N),N=n.add(T,T),T=n.add(N,T),T=n.add(T,D),T=n.mul(T,M),E=n.add(E,T),D=n.mul(m,I),D=n.add(D,D),T=n.mul(D,M),k=n.sub(k,T),N=n.mul(D,O),N=n.add(N,N),N=n.add(N,N),new d(k,E,N)}add(p){l(p);const{px:_,py:b,pz:w}=this,{px:m,py:I,pz:k}=p;let E=n.ZERO,N=n.ZERO,T=n.ZERO;const O=e.a,D=n.mul(e.b,Ju);let M=n.mul(_,m),j=n.mul(b,I),A=n.mul(w,k),x=n.add(_,b),S=n.add(m,I);x=n.mul(x,S),S=n.add(M,j),x=n.sub(x,S),S=n.add(_,w);let C=n.add(m,k);return S=n.mul(S,C),C=n.add(M,A),S=n.sub(S,C),C=n.add(b,w),E=n.add(I,k),C=n.mul(C,E),E=n.add(j,A),C=n.sub(C,E),T=n.mul(O,S),E=n.mul(D,A),T=n.add(E,T),E=n.sub(j,T),T=n.add(j,T),N=n.mul(E,T),j=n.add(M,M),j=n.add(j,M),A=n.mul(O,A),S=n.mul(D,S),j=n.add(j,A),A=n.sub(M,A),A=n.mul(O,A),S=n.add(S,A),M=n.mul(j,S),N=n.add(N,M),M=n.mul(C,S),E=n.mul(x,E),E=n.sub(E,M),M=n.mul(x,j),T=n.mul(C,T),T=n.add(T,M),new d(E,N,T)}subtract(p){return this.add(p.negate())}is0(){return this.equals(d.ZERO)}wNAF(p){return g.wNAFCached(this,p,d.normalizeZ)}multiplyUnsafe(p){const{endo:_,n:b}=e;rr("scalar",p,qe,b);const w=d.ZERO;if(p===qe)return w;if(this.is0()||p===dt)return this;if(!_||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,d.normalizeZ);let{k1neg:m,k1:I,k2neg:k,k2:E}=_.splitScalar(p),N=w,T=w,O=this;for(;I>qe||E>qe;)I&dt&&(N=N.add(O)),E&dt&&(T=T.add(O)),O=O.double(),I>>=dt,E>>=dt;return m&&(N=N.negate()),k&&(T=T.negate()),T=new d(n.mul(T.px,_.beta),T.py,T.pz),N.add(T)}multiply(p){const{endo:_,n:b}=e;rr("scalar",p,dt,b);let w,m;if(_){const{k1neg:I,k1:k,k2neg:E,k2:N}=_.splitScalar(p);let{p:T,f:O}=this.wNAF(k),{p:D,f:M}=this.wNAF(N);T=g.constTimeNegate(I,T),D=g.constTimeNegate(E,D),D=new d(n.mul(D.px,_.beta),D.py,D.pz),w=T.add(D),m=O.add(M)}else{const{p:I,f:k}=this.wNAF(p);w=I,m=k}return d.normalizeZ([w,m])[0]}multiplyAndAddUnsafe(p,_,b){const w=d.BASE,m=(k,E)=>E===qe||E===dt||!k.equals(w)?k.multiplyUnsafe(E):k.multiply(E),I=m(this,_).add(m(p,b));return I.is0()?void 0:I}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:_}=e;if(p===dt)return!0;if(_)return _(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:_}=e;return p===dt?this:_?_(d,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Wr("isCompressed",p),this.assertValidity(),i(d,this,p)}toHex(p=!0){return Wr("isCompressed",p),mn(this.toRawBytes(p))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=om(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function fm(t){const e=Qh(t);return As(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function hm(t){const e=fm(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(A){return Bt(A,r)}function a(A){return co(A,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=dm({...e,toBytes(A,x,S){const C=x.toAffine(),R=n.toBytes(C.x),U=Qr;return Wr("isCompressed",S),S?U(Uint8Array.from([x.hasEvenY()?2:3]),R):U(Uint8Array.from([4]),R,n.toBytes(C.y))},fromBytes(A){const x=A.length,S=A[0],C=A.subarray(1);if(x===i&&(S===2||S===3)){const R=Rt(C);if(!Lo(R,dt,n.ORDER))throw new Error("Point is not on curve");const U=u(R);let H;try{H=n.sqrt(U)}catch(nt){const G=nt instanceof Error?": "+nt.message:"";throw new Error("Point is not on curve"+G)}const z=(H&dt)===dt;return(S&1)===1!==z&&(H=n.neg(H)),{x:R,y:H}}else if(x===s&&S===4){const R=n.fromBytes(C.subarray(0,n.BYTES)),U=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:R,y:U}}else{const R=i,U=s;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+U+", got "+x)}}}),d=A=>mn(Gr(A,e.nByteLength));function f(A){const x=r>>dt;return A>x}function g(A){return f(A)?o(-A):A}const y=(A,x,S)=>Rt(A.slice(x,S));class p{constructor(x,S,C){this.r=x,this.s=S,this.recovery=C,this.assertValidity()}static fromCompact(x){const S=e.nByteLength;return x=ce("compactSignature",x,S*2),new p(y(x,0,S),y(x,S,2*S))}static fromDER(x){const{r:S,s:C}=Se.toSig(ce("DER",x));return new p(S,C)}assertValidity(){rr("r",this.r,dt,r),rr("s",this.s,dt,r)}addRecoveryBit(x){return new p(this.r,this.s,x)}recoverPublicKey(x){const{r:S,s:C,recovery:R}=this,U=k(ce("msgHash",x));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const H=R===2||R===3?S+e.n:S;if(H>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=(R&1)===0?"02":"03",rt=c.fromHex(z+d(H)),nt=a(H),G=o(-U*nt),qt=o(C*nt),_t=c.BASE.multiplyAndAddUnsafe(rt,G,qt);if(!_t)throw new Error("point at infinify");return _t.assertValidity(),_t}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return fr(this.toDERHex())}toDERHex(){return Se.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fr(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const _={isValidPrivateKey(A){try{return l(A),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const A=Kh(e.n);return em(e.randomBytes(A),e.n)},precompute(A=8,x=c.BASE){return x._setWindowSize(A),x.multiply(BigInt(3)),x}};function b(A,x=!0){return c.fromPrivateKey(A).toRawBytes(x)}function w(A){const x=dr(A),S=typeof A=="string",C=(x||S)&&A.length;return x?C===i||C===s:S?C===2*i||C===2*s:A instanceof c}function m(A,x,S=!0){if(w(A))throw new Error("first arg must be private key");if(!w(x))throw new Error("second arg must be public key");return c.fromHex(x).multiply(l(A)).toRawBytes(S)}const I=e.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const x=Rt(A),S=A.length*8-e.nBitLength;return S>0?x>>BigInt(S):x},k=e.bits2int_modN||function(A){return o(I(A))},E=Po(e.nBitLength);function N(A){return rr("num < 2^"+e.nBitLength,A,qe,E),Gr(A,e.nByteLength)}function T(A,x,S=O){if(["recovered","canonical"].some(kt=>kt in S))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:R}=e;let{lowS:U,prehash:H,extraEntropy:z}=S;U==null&&(U=!0),A=ce("msgHash",A),Xu(S),H&&(A=ce("prehashed msgHash",C(A)));const rt=k(A),nt=l(x),G=[N(nt),N(rt)];if(z!=null&&z!==!1){const kt=z===!0?R(n.BYTES):z;G.push(ce("extraEntropy",kt))}const qt=Qr(...G),_t=rt;function Sn(kt){const Yt=I(kt);if(!h(Yt))return;const xn=a(Yt),pe=c.BASE.multiply(Yt).toAffine(),Nt=o(pe.x);if(Nt===qe)return;const ge=o(xn*o(_t+Nt*nt));if(ge===qe)return;let Zt=(pe.x===Nt?0:2)|Number(pe.y&dt),fi=ge;return U&&f(ge)&&(fi=g(ge),Zt^=1),new p(Nt,fi,Zt)}return{seed:qt,k2sig:Sn}}const O={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function M(A,x,S=O){const{seed:C,k2sig:R}=T(A,x,S),U=e;return jh(U.hash.outputLen,U.nByteLength,U.hmac)(C,R)}c.BASE._setWindowSize(8);function j(A,x,S,C=D){const R=A;x=ce("msgHash",x),S=ce("publicKey",S);const{lowS:U,prehash:H,format:z}=C;if(Xu(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const rt=typeof R=="string"||dr(R),nt=!rt&&!z&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!rt&&!nt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,qt;try{if(nt&&(G=new p(R.r,R.s)),rt){try{z!=="compact"&&(G=p.fromDER(R))}catch(Zt){if(!(Zt instanceof Se.Err))throw Zt}!G&&z!=="der"&&(G=p.fromCompact(R))}qt=c.fromHex(S)}catch{return!1}if(!G||U&&G.hasHighS())return!1;H&&(x=e.hash(x));const{r:_t,s:Sn}=G,kt=k(x),Yt=a(Sn),xn=o(kt*Yt),pe=o(_t*Yt),Nt=c.BASE.multiplyAndAddUnsafe(qt,xn,pe)?.toAffine();return Nt?o(Nt.x)===_t:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:m,sign:M,verify:j,ProjectivePoint:c,Signature:p,utils:_}}function td(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xl(t,...e){if(!pm(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function gm(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");td(t.outputLen),td(t.blockLen)}function ed(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}const Cr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ym(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function _m(t){return typeof t=="string"&&(t=ym(t)),xl(t),t}function wm(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];xl(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}let mm=class{clone(){return this._cloneInto()}};function bm(t=32){if(Cr&&typeof Cr.getRandomValues=="function")return Cr.getRandomValues(new Uint8Array(t));if(Cr&&typeof Cr.randomBytes=="function")return Cr.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}let Xh=class extends mm{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,gm(e);const r=_m(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ed(this),this.iHash.update(e),this}digestInto(e){ed(this),xl(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const Jh=(t,e,n)=>new Xh(t,e).update(n).digest();Jh.create=(t,e)=>new Xh(t,e);function Em(t){return{hash:t,hmac:(e,...n)=>Jh(t,e,wm(...n)),randomBytes:bm}}const Gi=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),Kn=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),t0=252;function nd(t){for(;t[0]===0;)t=t.subarray(1);const e=t.length*8-t0,n=Rt(t);return e>0?n>>BigInt(e):n}function e0(t){return typeof t=="string"&&(t=Nl(t),t.length&1&&(t="0"+t)),fr(t)}const br=hm({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Sl(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:Gi,nBitLength:t0,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...Em(El),bits2int:nd,bits2int_modN:t=>{const e=Rt(t).toString(16);return e.length===63&&(t=e0(e+"0")),Bt(nd(t),Gi)}}),Am=br;function Xr(t){return ce("",typeof t=="string"?e0(t):t)}function Uo(t){return mn(Xr(t)).padStart(64,"0")}function Cl(t,e=!1){return br.getPublicKey(Uo(t),e)}function vm(t,e){return br.getSharedSecret(Uo(t),e)}function n0(t){const{r:e,s:n}=t;if(e<0n||e>=Kn)throw new Error(`Signature.r should be [1, ${Kn})`);const r=co(n,Gi);if(r<0n||r>=Kn)throw new Error(`inv(Signature.s) should be [1, ${Kn})`)}function r0(t){const e=Xr(t);if(Rt(e)>=Kn)throw new Error(`msgHash should be [0, ${Kn})`);return e}function i0(t,e,n){const r=br.sign(r0(t),Uo(e),n);return n0(r),r}function s0(t,e,n){if(!(t instanceof Vi)){const r=Xr(t);try{t=Vi.fromDER(r)}catch(i){if(!(i instanceof Se.Err))throw i;t=Vi.fromCompact(r)}}return n0(t),br.verify(t,r0(e),Xr(n))}const{CURVE:Tm,ProjectivePoint:Dr,Signature:Vi,utils:kl}=br;function o0(t){return`0x${mn(t.subarray(1)).replace(/^0+/gm,"")}`}function Nl(t){return t.replace(/^0x/i,"")}function a0(t){const e=Xr(t),n=2n**256n,r=n-Bt(n,Gi);for(let i=0;;i++){const s=ec(Qr(e,Tl(BigInt(i))));if(s<r)return Bt(s,Gi).toString(16);if(i===1e5)throw new Error("grindKey is broken: tried 100k vals")}}function Bl(t){return o0(Cl(t,!0))}function Im(t){if(t=Nl(t),t.length!==130)throw new Error("Wrong ethereum signature");return a0(t.substring(0,64))}const Sm=2n**31n-1n,$s=t=>Number(t&Sm);function xm(t,e,n,r){const i=$s(ec(t)),s=$s(ec(e)),o=Mo(Nl(n));return`m/2645'/${i}'/${s}'/${$s(o)}'/${$s(o>>31n)}'/${r}`}const Qi=[new Dr(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new Dr(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new Dr(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new Dr(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new Dr(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function c0(t,e){const n=[];let r=t;for(let i=0;i<248;i++)n.push(r),r=r.double();r=e;for(let i=0;i<4;i++)n.push(r),r=r.double();return n}const Cm=c0(Qi[1],Qi[2]),km=c0(Qi[3],Qi[4]);function Nm(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"){if(!Number.isSafeInteger(t))throw new Error(`Invalid pedersenArg: ${t}`);e=BigInt(t)}else e=Rt(Xr(t));if(!(0n<=e&&e<br.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${e}`);return e}function rd(t,e,n){let r=Nm(e);for(let i=0;i<252;i++){const s=n[i];if(!s)throw new Error("invalid constant index");if(s.equals(t))throw new Error("Same point");(r&1n)!==0n&&(t=t.add(s)),r>>=1n}return t}function ai(t,e){let n=Qi[0];return n=rd(n,t,Cm),n=rd(n,e,km),o0(n.toRawBytes(!0))}const Bm=(t,e=ai)=>[0,...t,t.length].reduce((n,r)=>e(n,r)),Dm=Po(250),bn=t=>Rt(Ow(t))&Dm,ec=t=>Rt(El(t)),l0=Sl(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function nc(t,e,n){const r=t.fromBytes(El(Lh(`${e}${n}`)));return t.create(r)}function u0(t,e,n,r=0){const i=[],s=[];for(let o=0;o<n;o++)i.push(nc(t,`${e}x`,r*n+o)),s.push(nc(t,`${e}y`,r*n+o));if(new Set([...i,...s]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(o=>s.map(a=>t.inv(t.sub(o,a))))}const Om=[[3,1,1],[1,-1,1],[1,1,-2]].map(t=>t.map(BigInt));function Dl(t,e){if(Il(t.Fp),!Number.isSafeInteger(t.rate)||!Number.isSafeInteger(t.capacity))throw new Error(`Wrong poseidon opts: ${t}`);const n=t.rate+t.capacity,r=t.roundsFull+t.roundsPartial,i=[];for(let o=0;o<r;o++){const a=[];for(let c=0;c<n;c++)a.push(nc(t.Fp,"Hades",n*o+c));i.push(a)}const s=rm({...t,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:e,roundConstants:i});return s.m=n,s.rate=t.rate,s.capacity=t.capacity,s}function Rm(t,e=0){const n=t.rate+t.capacity;if(!Number.isSafeInteger(e))throw new Error(`Wrong mdsAttempt=${e}`);return Dl(t,u0(t.Fp,"HadesMDS",n,e))}const vs=Dl({Fp:l0,rate:2,capacity:1,roundsFull:8,roundsPartial:83},Om);function Ol(t,e,n=vs){return n([t,e,2n])[0]}function Mm(t,e,n=vs){return Tl(Ol(Rt(t),Rt(e),n))}function Lm(t,e=vs){return e([t,0n,1n])[0]}function yt(t,e=vs){const{m:n,rate:r}=e;if(!Array.isArray(t))throw new Error("bigint array expected in values");const i=Array.from(t);for(i.push(1n);i.length%r!==0;)i.push(0n);let s=new Array(n).fill(0n);for(let o=0;o<i.length;o+=r){for(let a=0;a<r;a++){const c=i[o+a];if(typeof c>"u")throw new Error("invalid index");if(typeof s[a]>"u")throw new Error("state[j] is undefined");s[a]=s[a]+c}s=e(s)}return s[0]}const Pm=Object.freeze(Object.defineProperty({__proto__:null,CURVE:Tm,Fp251:l0,MAX_VALUE:Kn,ProjectivePoint:Dr,Signature:Vi,_poseidonMDS:u0,_starkCurve:Am,computeHashOnElements:Bm,ethSigToPrivate:Im,getAccountPath:xm,getPublicKey:Cl,getSharedSecret:vm,getStarkKey:Bl,grindKey:a0,keccak:bn,normalizePrivateKey:Uo,pedersen:ai,poseidonBasic:Dl,poseidonCreate:Rm,poseidonHash:Ol,poseidonHashFunc:Mm,poseidonHashMany:yt,poseidonHashSingle:Lm,poseidonSmall:vs,sign:i0,utils:kl,verify:s0},Symbol.toStringTag,{value:"Module"})),Vs=BigInt(2**32-1),id=BigInt(32);function d0(t,e=!1){return e?{h:Number(t&Vs),l:Number(t>>id&Vs)}:{h:Number(t>>id&Vs)|0,l:Number(t&Vs)|0}}function Um(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=d0(t[i],e);[n[i],r[i]]=[s,o]}return[n,r]}const $m=(t,e,n)=>t<<n|e>>>32-n,Vm=(t,e,n)=>e<<n|t>>>32-n,Hm=(t,e,n)=>e<<n-32|t>>>64-n,Fm=(t,e,n)=>t<<n-32|e>>>64-n,f0=[],h0=[],p0=[],zm=BigInt(0),pi=BigInt(1),jm=BigInt(2),qm=BigInt(7),Ym=BigInt(256),Zm=BigInt(113);for(let t=0,e=pi,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],f0.push(2*(5*r+n)),h0.push((t+1)*(t+2)/2%64);let i=zm;for(let s=0;s<7;s++)e=(e<<pi^(e>>qm)*Zm)%Ym,e&jm&&(i^=pi<<(pi<<BigInt(s))-pi);p0.push(i)}const[Km,Wm]=Um(p0,!0),sd=(t,e,n)=>n>32?Hm(t,e,n):$m(t,e,n),od=(t,e,n)=>n>32?Fm(t,e,n):Vm(t,e,n);function Gm(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],h=sd(l,u,1)^n[a],d=od(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=h,t[o+f+1]^=d}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=h0[o],c=sd(i,s,a),l=od(i,s,a),u=f0[o];i=t[u],s=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Km[r],t[1]^=Wm[r]}n.fill(0)}class Rl extends wl{constructor(e,n,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,$i(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Wi(this.state)}keccak(){He||sn(this.state32),Gm(this.state32,this.rounds),He||sn(this.state32),this.posOut=0,this.pos=0}update(e){Kr(this);const{blockLen:n,state:r}=this;e=fn(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:i}=this;e[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Kr(this,!1),yl(e),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $i(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_l(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Rl(n,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Qm=(t,e,n)=>Rh(()=>new Rl(e,t,n)),Xm=Qm(1,136,256/8);const pt=BigInt(0),ot=BigInt(1),Yn=BigInt(2),Jm=BigInt(3),rc=BigInt(4),ad=BigInt(5),cd=BigInt(8);function $t(t,e){const n=t%e;return n>=pt?n:e+n}function tb(t,e,n){if(e<pt)throw new Error("invalid exponent, negatives unsupported");if(n<=pt)throw new Error("invalid modulus");if(n===ot)return pt;let r=ot;for(;e>pt;)e&ot&&(r=r*t%n),t=t*t%n,e>>=ot;return r}function ae(t,e,n){let r=t;for(;e-- >pt;)r*=r,r%=n;return r}function ic(t,e){if(t===pt)throw new Error("invert: expected non-zero number");if(e<=pt)throw new Error("invert: expected positive modulus, got "+e);let n=$t(t,e),r=e,i=pt,s=ot;for(;n!==pt;){const a=r/n,c=r%n,l=i-s*a;r=n,n=c,i=s,s=l}if(r!==ot)throw new Error("invert: does not exist");return $t(i,e)}function eb(t){const e=(t-ot)/Yn;let n,r,i;for(n=t-ot,r=0;n%Yn===pt;n/=Yn,r++);for(i=Yn;i<t&&tb(i,e,t)!==t-ot;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+ot)/rc;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const s=(n+ot)/Yn;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,i),n),h=a.pow(c,s),d=a.pow(c,n);for(;!a.eql(d,a.ONE);){if(a.eql(d,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(d);f<l&&!a.eql(y,a.ONE);f++)y=a.sqr(y);const g=a.pow(u,ot<<BigInt(l-f-1));u=a.sqr(g),h=a.mul(h,g),d=a.mul(d,u),l=f}return h}}function nb(t){if(t%rc===Jm){const e=(t+ot)/rc;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%cd===ad){const e=(t-ad)/cd;return function(r,i){const s=r.mul(i,Yn),o=r.pow(s,e),a=r.mul(i,o),c=r.mul(r.mul(a,Yn),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),i))throw new Error("Cannot find square root");return l}}return eb(t)}const rb=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ml(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=rb.reduce((r,i)=>(r[i]="function",r),e);return bs(t,n)}function g0(t,e,n){if(n<pt)throw new Error("invalid exponent, negatives unsupported");if(n===pt)return t.ONE;if(n===ot)return e;let r=t.ONE,i=e;for(;n>pt;)n&ot&&(r=t.mul(r,i)),i=t.sqr(i),n>>=ot;return r}function ib(t,e){const n=new Array(e.length),r=e.reduce((s,o,a)=>t.is0(o)?s:(n[a]=s,t.mul(s,o)),t.ONE),i=t.inv(r);return e.reduceRight((s,o,a)=>t.is0(o)?s:(n[a]=t.mul(s,n[a]),t.mul(s,o)),i),n}function y0(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function _0(t,e,n=!1,r={}){if(t<=pt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=y0(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:gl(i),ZERO:pt,ONE:ot,create:c=>$t(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return pt<=c&&c<t},is0:c=>c===pt,isOdd:c=>(c&ot)===ot,neg:c=>$t(-c,t),eql:(c,l)=>c===l,sqr:c=>$t(c*c,t),add:(c,l)=>$t(c+l,t),sub:(c,l)=>$t(c-l,t),mul:(c,l)=>$t(c*l,t),pow:(c,l)=>g0(a,c,l),div:(c,l)=>$t(c*ic(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>ic(c,t),sqrt:r.sqrt||(c=>(o||(o=nb(t)),o(a,c))),invertBatch:c=>ib(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?pl(c,s):Zr(c,s),fromBytes:c=>{if(c.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+c.length);return n?hl(c):er(c)}});return Object.freeze(a)}function w0(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function m0(t){const e=w0(t);return e+Math.ceil(e/2)}function sb(t,e,n=!1){const r=t.length,i=w0(e),s=m0(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=n?er(t):hl(t),a=$t(o,e-ot)+ot;return n?pl(a,i):Zr(a,i)}function b0(t){const{Fp:e,mds:n,reversePartialPowIdx:r,roundConstants:i}=t,{roundsFull:s,roundsPartial:o,sboxPower:a,t:c}=t;Ml(e);for(const g of["t","roundsFull","roundsPartial"])if(typeof t[g]!="number"||!Number.isSafeInteger(t[g]))throw new Error("invalid number "+g);if(!Array.isArray(n)||n.length!==c)throw new Error("Poseidon: invalid MDS matrix");const l=n.map(g=>{if(!Array.isArray(g)||g.length!==c)throw new Error("invalid MDS matrix row: "+g);return g.map(y=>{if(typeof y!="bigint")throw new Error("invalid MDS matrix bigint: "+y);return e.create(y)})});if(r!==void 0&&typeof r!="boolean")throw new Error("invalid param reversePartialPowIdx="+r);if(s&1)throw new Error("roundsFull is not even"+s);const u=s+o;if(!Array.isArray(i)||i.length!==u)throw new Error("Poseidon: invalid round constants");const h=i.map(g=>{if(!Array.isArray(g)||g.length!==c)throw new Error("invalid round constants");return g.map(y=>{if(typeof y!="bigint"||!e.isValid(y))throw new Error("invalid round constant");return e.create(y)})});if(!a||![3,5,7].includes(a))throw new Error("invalid sboxPower");const d=BigInt(a);let f=g=>g0(e,g,d);return a===3?f=g=>e.mul(e.sqrN(g),g):a===5&&(f=g=>e.mul(e.sqrN(e.sqrN(g)),g)),Object.freeze({...t,rounds:u,sboxFn:f,roundConstants:h,mds:l})}function ob(t,e){if(typeof e!="number")throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(t)||t.length%e)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<t.length;i++)r.push(t[i]),r.length===e&&(n.push(r),r=[]);return n}function ab(t){const e=b0(t),{Fp:n,mds:r,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:a,t:c}=e,l=e.roundsFull/2,u=e.reversePartialPowIdx?c-1:0,h=(f,g,y)=>(f=f.map((p,_)=>n.add(p,i[y][_])),g?f=f.map(p=>a(p)):f[u]=a(f[u]),f=r.map(p=>p.reduce((_,b,w)=>n.add(_,n.mulN(b,f[w])),n.ZERO)),f),d=function(g){if(!Array.isArray(g)||g.length!==c)throw new Error("invalid values, expected array of bigints with length "+c);g=g.map(p=>{if(typeof p!="bigint")throw new Error("invalid bigint="+p);return n.create(p)});let y=0;for(let p=0;p<l;p++)g=h(g,!0,y++);for(let p=0;p<o;p++)g=h(g,!1,y++);for(let p=0;p<l;p++)g=h(g,!0,y++);if(y!==s)throw new Error("invalid number of rounds");return g};return d.roundConstants=i,d}const cb=Object.freeze(Object.defineProperty({__proto__:null,poseidon:ab,splitConstants:ob,validateOpts:b0},Symbol.toStringTag,{value:"Module"}));const ld=BigInt(0),Hs=BigInt(1);function wa(t,e){const n=e.negate();return t?n:e}function E0(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function ma(t,e){E0(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function lb(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ub(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const ba=new WeakMap,A0=new WeakMap;function Ea(t){return A0.get(t)||1}function db(t,e){return{constTimeNegate:wa,hasPrecomputes(n){return Ea(n)!==1},unsafeLadder(n,r,i=t.ZERO){let s=n;for(;r>ld;)r&Hs&&(i=i.add(s)),s=s.double(),r>>=Hs;return i},precomputeWindow(n,r){const{windows:i,windowSize:s}=ma(r,e),o=[];let a=n,c=a;for(let l=0;l<i;l++){c=a,o.push(c);for(let u=1;u<s;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,i){const{windows:s,windowSize:o}=ma(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<s;d++){const f=d*o;let g=Number(i&l);i>>=h,g>o&&(g-=u,i+=Hs);const y=f,p=f+Math.abs(g)-1,_=d%2!==0,b=g<0;g===0?c=c.add(wa(_,r[y])):a=a.add(wa(b,r[p]))}return{p:a,f:c}},wNAFUnsafe(n,r,i,s=t.ZERO){const{windows:o,windowSize:a}=ma(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let h=0;h<o;h++){const d=h*a;if(i===ld)break;let f=Number(i&c);if(i>>=u,f>a&&(f-=l,i+=Hs),f===0)continue;let g=r[d+Math.abs(f)-1];f<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(n,r,i){let s=ba.get(r);return s||(s=this.precomputeWindow(r,n),n!==1&&ba.set(r,i(s))),s},wNAFCached(n,r,i){const s=Ea(n);return this.wNAF(s,this.getPrecomputes(s,n,i),r)},wNAFCachedUnsafe(n,r,i,s){const o=Ea(n);return o===1?this.unsafeLadder(n,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,s)},setWindowSize(n,r){E0(r,e),A0.set(n,r),ba.delete(n)}}}function fb(t,e,n,r){if(lb(n,t),ub(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=Bh(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i),l=Math.floor((e.BITS-1)/o)*o;let u=i;for(let h=l;h>=0;h-=o){c.fill(i);for(let f=0;f<r.length;f++){const g=r[f],y=Number(g>>BigInt(h)&BigInt(a));c[y]=c[y].add(n[f])}let d=i;for(let f=c.length-1,g=i;f>0;f--)g=g.add(c[f]),d=d.add(g);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function v0(t){return Ml(t.Fp),bs(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...y0(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function ud(t){t.lowS!==void 0&&Yr("lowS",t.lowS),t.prehash!==void 0&&Yr("prehash",t.prehash)}function hb(t){const e=v0(t);bs(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=e;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:pb,hexToBytes:gb}=rw,xe={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(t,e)=>{const{Err:n}=xe;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=Rr(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const s=r>127?Rr(i.length/2|128):"";return Rr(t)+s+i+e},decode(t,e){const{Err:n}=xe;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=xe;if(t<_e)throw new e("integer: negative integers are not allowed");let n=Rr(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=xe;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return pb(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=xe,i=typeof t=="string"?gb(t):t;ms(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,s),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=xe,r=e.encode(2,n.encode(t.r)),i=e.encode(2,n.encode(t.s)),s=r+i;return e.encode(48,s)}},_e=BigInt(0),Q=BigInt(1),Je=BigInt(2),lo=BigInt(3),dd=BigInt(4);function T0(t){const e=hb(t),{Fp:n}=e,r=_0(e.n,e.nBitLength),i=e.toBytes||((y,p,_)=>{const b=p.toAffine();return Ki(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),s=e.fromBytes||(y=>{const p=y.subarray(1),_=n.fromBytes(p.subarray(0,n.BYTES)),b=n.fromBytes(p.subarray(n.BYTES,2*n.BYTES));return{x:_,y:b}});function o(y){const{a:p,b:_}=e,b=n.sqr(y),w=n.mul(b,y);return n.add(n.add(w,n.mul(y,p)),_)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(y){return Do(y,Q,e.n)}function c(y){const{allowedPrivateKeyLengths:p,nByteLength:_,wrapPrivateKey:b,n:w}=e;if(p&&typeof y!="bigint"){if(lr(y)&&(y=ur(y)),typeof y!="string"||!p.includes(y.length))throw new Error("invalid private key");y=y.padStart(_*2,"0")}let m;try{m=typeof y=="bigint"?y:er(ye("private key",y,_))}catch{throw new Error("invalid private key, expected hex or "+_+" bytes, got "+typeof y)}return b&&(m=$t(m,w)),nr("private key",m,Q,w),m}function l(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}const u=Xa((y,p)=>{const{px:_,py:b,pz:w}=y;if(n.eql(w,n.ONE))return{x:_,y:b};const m=y.is0();p==null&&(p=m?n.ONE:n.inv(w));const I=n.mul(_,p),k=n.mul(b,p),E=n.mul(w,p);if(m)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:I,y:k}}),h=Xa(y=>{if(y.is0()){if(e.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:p,y:_}=y.toAffine();if(!n.isValid(p)||!n.isValid(_))throw new Error("bad point: x or y not FE");const b=n.sqr(_),w=o(p);if(!n.eql(b,w))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(p,_,b){if(this.px=p,this.py=_,this.pz=b,p==null||!n.isValid(p))throw new Error("x required");if(_==null||!n.isValid(_))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(p){const{x:_,y:b}=p||{};if(!p||!n.isValid(_)||!n.isValid(b))throw new Error("invalid affine point");if(p instanceof d)throw new Error("projective point not allowed");const w=m=>n.eql(m,n.ZERO);return w(_)&&w(b)?d.ZERO:new d(_,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(p){const _=n.invertBatch(p.map(b=>b.pz));return p.map((b,w)=>b.toAffine(_[w])).map(d.fromAffine)}static fromHex(p){const _=d.fromAffine(s(ye("pointHex",p)));return _.assertValidity(),_}static fromPrivateKey(p){return d.BASE.multiply(c(p))}static msm(p,_){return fb(d,r,p,_)}_setWindowSize(p){g.setWindowSize(this,p)}assertValidity(){h(this)}hasEvenY(){const{y:p}=this.toAffine();if(n.isOdd)return!n.isOdd(p);throw new Error("Field doesn't support isOdd")}equals(p){l(p);const{px:_,py:b,pz:w}=this,{px:m,py:I,pz:k}=p,E=n.eql(n.mul(_,k),n.mul(m,w)),N=n.eql(n.mul(b,k),n.mul(I,w));return E&&N}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:p,b:_}=e,b=n.mul(_,lo),{px:w,py:m,pz:I}=this;let k=n.ZERO,E=n.ZERO,N=n.ZERO,T=n.mul(w,w),O=n.mul(m,m),D=n.mul(I,I),M=n.mul(w,m);return M=n.add(M,M),N=n.mul(w,I),N=n.add(N,N),k=n.mul(p,N),E=n.mul(b,D),E=n.add(k,E),k=n.sub(O,E),E=n.add(O,E),E=n.mul(k,E),k=n.mul(M,k),N=n.mul(b,N),D=n.mul(p,D),M=n.sub(T,D),M=n.mul(p,M),M=n.add(M,N),N=n.add(T,T),T=n.add(N,T),T=n.add(T,D),T=n.mul(T,M),E=n.add(E,T),D=n.mul(m,I),D=n.add(D,D),T=n.mul(D,M),k=n.sub(k,T),N=n.mul(D,O),N=n.add(N,N),N=n.add(N,N),new d(k,E,N)}add(p){l(p);const{px:_,py:b,pz:w}=this,{px:m,py:I,pz:k}=p;let E=n.ZERO,N=n.ZERO,T=n.ZERO;const O=e.a,D=n.mul(e.b,lo);let M=n.mul(_,m),j=n.mul(b,I),A=n.mul(w,k),x=n.add(_,b),S=n.add(m,I);x=n.mul(x,S),S=n.add(M,j),x=n.sub(x,S),S=n.add(_,w);let C=n.add(m,k);return S=n.mul(S,C),C=n.add(M,A),S=n.sub(S,C),C=n.add(b,w),E=n.add(I,k),C=n.mul(C,E),E=n.add(j,A),C=n.sub(C,E),T=n.mul(O,S),E=n.mul(D,A),T=n.add(E,T),E=n.sub(j,T),T=n.add(j,T),N=n.mul(E,T),j=n.add(M,M),j=n.add(j,M),A=n.mul(O,A),S=n.mul(D,S),j=n.add(j,A),A=n.sub(M,A),A=n.mul(O,A),S=n.add(S,A),M=n.mul(j,S),N=n.add(N,M),M=n.mul(C,S),E=n.mul(x,E),E=n.sub(E,M),M=n.mul(x,j),T=n.mul(C,T),T=n.add(T,M),new d(E,N,T)}subtract(p){return this.add(p.negate())}is0(){return this.equals(d.ZERO)}wNAF(p){return g.wNAFCached(this,p,d.normalizeZ)}multiplyUnsafe(p){const{endo:_,n:b}=e;nr("scalar",p,_e,b);const w=d.ZERO;if(p===_e)return w;if(this.is0()||p===Q)return this;if(!_||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,p,d.normalizeZ);let{k1neg:m,k1:I,k2neg:k,k2:E}=_.splitScalar(p),N=w,T=w,O=this;for(;I>_e||E>_e;)I&Q&&(N=N.add(O)),E&Q&&(T=T.add(O)),O=O.double(),I>>=Q,E>>=Q;return m&&(N=N.negate()),k&&(T=T.negate()),T=new d(n.mul(T.px,_.beta),T.py,T.pz),N.add(T)}multiply(p){const{endo:_,n:b}=e;nr("scalar",p,Q,b);let w,m;if(_){const{k1neg:I,k1:k,k2neg:E,k2:N}=_.splitScalar(p);let{p:T,f:O}=this.wNAF(k),{p:D,f:M}=this.wNAF(N);T=g.constTimeNegate(I,T),D=g.constTimeNegate(E,D),D=new d(n.mul(D.px,_.beta),D.py,D.pz),w=T.add(D),m=O.add(M)}else{const{p:I,f:k}=this.wNAF(p);w=I,m=k}return d.normalizeZ([w,m])[0]}multiplyAndAddUnsafe(p,_,b){const w=d.BASE,m=(k,E)=>E===_e||E===Q||!k.equals(w)?k.multiplyUnsafe(E):k.multiply(E),I=m(this,_).add(m(p,b));return I.is0()?void 0:I}toAffine(p){return u(this,p)}isTorsionFree(){const{h:p,isTorsionFree:_}=e;if(p===Q)return!0;if(_)return _(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:p,clearCofactor:_}=e;return p===Q?this:_?_(d,this):this.multiplyUnsafe(e.h)}toRawBytes(p=!0){return Yr("isCompressed",p),this.assertValidity(),i(d,this,p)}toHex(p=!0){return Yr("isCompressed",p),ur(this.toRawBytes(p))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,g=db(d,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function yb(t){const e=v0(t);return bs(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function I0(t){const e=yb(t),{Fp:n,n:r}=e,i=n.BYTES+1,s=2*n.BYTES+1;function o(A){return $t(A,r)}function a(A){return ic(A,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=T0({...e,toBytes(A,x,S){const C=x.toAffine(),R=n.toBytes(C.x),U=Ki;return Yr("isCompressed",S),S?U(Uint8Array.from([x.hasEvenY()?2:3]),R):U(Uint8Array.from([4]),R,n.toBytes(C.y))},fromBytes(A){const x=A.length,S=A[0],C=A.subarray(1);if(x===i&&(S===2||S===3)){const R=er(C);if(!Do(R,Q,n.ORDER))throw new Error("Point is not on curve");const U=u(R);let H;try{H=n.sqrt(U)}catch(nt){const G=nt instanceof Error?": "+nt.message:"";throw new Error("Point is not on curve"+G)}const z=(H&Q)===Q;return(S&1)===1!==z&&(H=n.neg(H)),{x:R,y:H}}else if(x===s&&S===4){const R=n.fromBytes(C.subarray(0,n.BYTES)),U=n.fromBytes(C.subarray(n.BYTES,2*n.BYTES));return{x:R,y:U}}else{const R=i,U=s;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+U+", got "+x)}}}),d=A=>ur(Zr(A,e.nByteLength));function f(A){const x=r>>Q;return A>x}function g(A){return f(A)?o(-A):A}const y=(A,x,S)=>er(A.slice(x,S));class p{constructor(x,S,C){this.r=x,this.s=S,this.recovery=C,this.assertValidity()}static fromCompact(x){const S=e.nByteLength;return x=ye("compactSignature",x,S*2),new p(y(x,0,S),y(x,S,2*S))}static fromDER(x){const{r:S,s:C}=xe.toSig(ye("DER",x));return new p(S,C)}assertValidity(){nr("r",this.r,Q,r),nr("s",this.s,Q,r)}addRecoveryBit(x){return new p(this.r,this.s,x)}recoverPublicKey(x){const{r:S,s:C,recovery:R}=this,U=k(ye("msgHash",x));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const H=R===2||R===3?S+e.n:S;if(H>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const z=(R&1)===0?"02":"03",rt=c.fromHex(z+d(H)),nt=a(H),G=o(-U*nt),qt=o(C*nt),_t=c.BASE.multiplyAndAddUnsafe(rt,G,qt);if(!_t)throw new Error("point at infinify");return _t.assertValidity(),_t}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return wn(this.toDERHex())}toDERHex(){return xe.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wn(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const _={isValidPrivateKey(A){try{return l(A),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const A=m0(e.n);return sb(e.randomBytes(A),e.n)},precompute(A=8,x=c.BASE){return x._setWindowSize(A),x.multiply(BigInt(3)),x}};function b(A,x=!0){return c.fromPrivateKey(A).toRawBytes(x)}function w(A){const x=lr(A),S=typeof A=="string",C=(x||S)&&A.length;return x?C===i||C===s:S?C===2*i||C===2*s:A instanceof c}function m(A,x,S=!0){if(w(A))throw new Error("first arg must be private key");if(!w(x))throw new Error("second arg must be public key");return c.fromHex(x).multiply(l(A)).toRawBytes(S)}const I=e.bits2int||function(A){if(A.length>8192)throw new Error("input is too large");const x=er(A),S=A.length*8-e.nBitLength;return S>0?x>>BigInt(S):x},k=e.bits2int_modN||function(A){return o(I(A))},E=gl(e.nBitLength);function N(A){return nr("num < 2^"+e.nBitLength,A,_e,E),Zr(A,e.nByteLength)}function T(A,x,S=O){if(["recovered","canonical"].some(kt=>kt in S))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:R}=e;let{lowS:U,prehash:H,extraEntropy:z}=S;U==null&&(U=!0),A=ye("msgHash",A),ud(S),H&&(A=ye("prehashed msgHash",C(A)));const rt=k(A),nt=l(x),G=[N(nt),N(rt)];if(z!=null&&z!==!1){const kt=z===!0?R(n.BYTES):z;G.push(ye("extraEntropy",kt))}const qt=Ki(...G),_t=rt;function Sn(kt){const Yt=I(kt);if(!h(Yt))return;const xn=a(Yt),pe=c.BASE.multiply(Yt).toAffine(),Nt=o(pe.x);if(Nt===_e)return;const ge=o(xn*o(_t+Nt*nt));if(ge===_e)return;let Zt=(pe.x===Nt?0:2)|Number(pe.y&Q),fi=ge;return U&&f(ge)&&(fi=g(ge),Zt^=1),new p(Nt,fi,Zt)}return{seed:qt,k2sig:Sn}}const O={lowS:e.lowS,prehash:!1},D={lowS:e.lowS,prehash:!1};function M(A,x,S=O){const{seed:C,k2sig:R}=T(A,x,S),U=e;return Dh(U.hash.outputLen,U.nByteLength,U.hmac)(C,R)}c.BASE._setWindowSize(8);function j(A,x,S,C=D){const R=A;x=ye("msgHash",x),S=ye("publicKey",S);const{lowS:U,prehash:H,format:z}=C;if(ud(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(z!==void 0&&z!=="compact"&&z!=="der")throw new Error("format must be compact or der");const rt=typeof R=="string"||lr(R),nt=!rt&&!z&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!rt&&!nt)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let G,qt;try{if(nt&&(G=new p(R.r,R.s)),rt){try{z!=="compact"&&(G=p.fromDER(R))}catch(Zt){if(!(Zt instanceof xe.Err))throw Zt}!G&&z!=="der"&&(G=p.fromCompact(R))}qt=c.fromHex(S)}catch{return!1}if(!G||U&&G.hasHighS())return!1;H&&(x=e.hash(x));const{r:_t,s:Sn}=G,kt=k(x),Yt=a(Sn),xn=o(kt*Yt),pe=o(_t*Yt),Nt=c.BASE.multiplyAndAddUnsafe(qt,xn,pe)?.toAffine();return Nt?o(Nt.x)===_t:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:m,sign:M,verify:j,ProjectivePoint:c,Signature:p,utils:_}}function S0(t,e){const n=t.ORDER;let r=_e;for(let g=n-Q;g%Je===_e;g/=Je)r+=Q;const i=r,s=Je<<i-Q-Q,o=s*Je,a=(n-Q)/o,c=(a-Q)/Je,l=o-Q,u=s,h=t.pow(e,a),d=t.pow(e,(a+Q)/Je);let f=(g,y)=>{let p=h,_=t.pow(y,l),b=t.sqr(_);b=t.mul(b,y);let w=t.mul(g,b);w=t.pow(w,c),w=t.mul(w,_),_=t.mul(w,y),b=t.mul(w,g);let m=t.mul(b,_);w=t.pow(m,u);let I=t.eql(w,t.ONE);_=t.mul(b,d),w=t.mul(m,p),b=t.cmov(_,b,I),m=t.cmov(w,m,I);for(let k=i;k>Q;k--){let E=k-Je;E=Je<<E-Q;let N=t.pow(m,E);const T=t.eql(N,t.ONE);_=t.mul(b,p),p=t.mul(p,p),N=t.mul(m,p),b=t.cmov(_,b,T),m=t.cmov(N,m,T)}return{isValid:I,value:b}};if(t.ORDER%dd===lo){const g=(t.ORDER-lo)/dd,y=t.sqrt(t.neg(e));f=(p,_)=>{let b=t.sqr(_);const w=t.mul(p,_);b=t.mul(b,w);let m=t.pow(b,g);m=t.mul(m,w);const I=t.mul(m,y),k=t.mul(t.sqr(m),_),E=t.eql(k,p);let N=t.cmov(I,m,E);return{isValid:E,value:N}}}return f}function _b(t,e){if(Ml(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=S0(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,s,o,a,c,l,u,h;i=t.sqr(r),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),l=t.sqr(a),c=t.mul(l,e.A),s=t.add(s,c),s=t.mul(s,o),l=t.mul(l,a),c=t.mul(l,e.B),s=t.add(s,c),u=t.mul(i,o);const{isValid:d,value:f}=n(s,l);h=t.mul(i,r),h=t.mul(h,f),u=t.cmov(u,o,d),h=t.cmov(h,f,d);const g=t.isOdd(r)===t.isOdd(h);return h=t.cmov(t.neg(h),h,g),u=t.div(u,a),{x:u,y:h}}}const wb=Object.freeze(Object.defineProperty({__proto__:null,DER:xe,SWUFpSqrtRatio:S0,mapToCurveSimpleSWU:_b,weierstrass:I0,weierstrassPoints:T0},Symbol.toStringTag,{value:"Module"})),mb=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3]);class bb extends wl{constructor(e,n,r={},i,s,o){if(super(),this.blockLen=e,this.outputLen=n,this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,$i(e),$i(n),$i(i),n<0||n>i)throw new Error("outputLen bigger than keyLen");if(r.key!==void 0&&(r.key.length<1||r.key.length>i))throw new Error("key length must be undefined or 1.."+i);if(r.salt!==void 0&&r.salt.length!==s)throw new Error("salt must be undefined or "+s);if(r.personalization!==void 0&&r.personalization.length!==o)throw new Error("personalization must be undefined or "+o);this.buffer=new Uint8Array(e),this.buffer32=Wi(this.buffer)}update(e){Kr(this);const{blockLen:n,buffer:r,buffer32:i}=this;e=fn(e);const s=e.length,o=e.byteOffset,a=e.buffer;for(let c=0;c<s;){this.pos===n&&(He||sn(i),this.compress(i,0,!1),He||sn(i),this.pos=0);const l=Math.min(n-this.pos,s-c),u=o+c;if(l===n&&!(u%4)&&c+l<s){const h=new Uint32Array(a,u,Math.floor((s-c)/4));He||sn(h);for(let d=0;c+n<s;d+=i.length,c+=n)this.length+=n,this.compress(h,d,!1);He||sn(h);continue}r.set(e.subarray(c,c+l),this.pos),this.pos+=l,this.length+=l,c+=l}return this}digestInto(e){Kr(this),_l(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,this.buffer.subarray(n).fill(0),He||sn(r),this.compress(r,0,!0),He||sn(r);const i=Wi(e);this.get().forEach((s,o)=>i[o]=_i(s))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.length=r,e.finished=i,e.destroyed=s,e.outputLen=o,e.buffer.set(n),e.pos=a,e}}const wt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);function tn(t,e,n,r,i){return t=t+e+i|0,r=Ut(r^t,16),n=n+r|0,e=Ut(e^n,12),{a:t,b:e,c:n,d:r}}function en(t,e,n,r,i){return t=t+e+i|0,r=Ut(r^t,8),n=n+r|0,e=Ut(e^n,7),{a:t,b:e,c:n,d:r}}function Eb(t,e,n,r,i,s,o,a,c,l,u,h,d,f,g,y,p,_,b,w){let m=0;for(let I=0;I<r;I++)({a:i,b:c,c:d,d:p}=tn(i,c,d,p,n[e+t[m++]])),{a:i,b:c,c:d,d:p}=en(i,c,d,p,n[e+t[m++]]),{a:s,b:l,c:f,d:_}=tn(s,l,f,_,n[e+t[m++]]),{a:s,b:l,c:f,d:_}=en(s,l,f,_,n[e+t[m++]]),{a:o,b:u,c:g,d:b}=tn(o,u,g,b,n[e+t[m++]]),{a:o,b:u,c:g,d:b}=en(o,u,g,b,n[e+t[m++]]),{a,b:h,c:y,d:w}=tn(a,h,y,w,n[e+t[m++]]),{a,b:h,c:y,d:w}=en(a,h,y,w,n[e+t[m++]]),{a:i,b:l,c:g,d:w}=tn(i,l,g,w,n[e+t[m++]]),{a:i,b:l,c:g,d:w}=en(i,l,g,w,n[e+t[m++]]),{a:s,b:u,c:y,d:p}=tn(s,u,y,p,n[e+t[m++]]),{a:s,b:u,c:y,d:p}=en(s,u,y,p,n[e+t[m++]]),{a:o,b:h,c:d,d:_}=tn(o,h,d,_,n[e+t[m++]]),{a:o,b:h,c:d,d:_}=en(o,h,d,_,n[e+t[m++]]),{a,b:c,c:f,d:b}=tn(a,c,f,b,n[e+t[m++]]),{a,b:c,c:f,d:b}=en(a,c,f,b,n[e+t[m++]]);return{v0:i,v1:s,v2:o,v3:a,v4:c,v5:l,v6:u,v7:h,v8:d,v9:f,v10:g,v11:y,v12:p,v13:_,v14:b,v15:w}}class Ab extends bb{constructor(e={}){super(64,e.dkLen===void 0?32:e.dkLen,e,32,8,8),this.v0=wt[0]|0,this.v1=wt[1]|0,this.v2=wt[2]|0,this.v3=wt[3]|0,this.v4=wt[4]|0,this.v5=wt[5]|0,this.v6=wt[6]|0,this.v7=wt[7]|0;const n=e.key?e.key.length:0;if(this.v0^=this.outputLen|n<<8|65536|1<<24,e.salt){const r=Wi(fn(e.salt));this.v4^=_i(r[0]),this.v5^=_i(r[1])}if(e.personalization){const r=Wi(fn(e.personalization));this.v6^=_i(r[0]),this.v7^=_i(r[1])}if(e.key){const r=new Uint8Array(this.blockLen);r.set(fn(e.key)),this.update(r)}}get(){const{v0:e,v1:n,v2:r,v3:i,v4:s,v5:o,v6:a,v7:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.v0=e|0,this.v1=n|0,this.v2=r|0,this.v3=i|0,this.v4=s|0,this.v5=o|0,this.v6=a|0,this.v7=c|0}compress(e,n,r){const{h:i,l:s}=d0(BigInt(this.length)),{v0:o,v1:a,v2:c,v3:l,v4:u,v5:h,v6:d,v7:f,v8:g,v9:y,v10:p,v11:_,v12:b,v13:w,v14:m,v15:I}=Eb(mb,n,e,10,this.v0,this.v1,this.v2,this.v3,this.v4,this.v5,this.v6,this.v7,wt[0],wt[1],wt[2],wt[3],s^wt[4],i^wt[5],r?~wt[6]:wt[6],wt[7]);this.v0^=o^g,this.v1^=a^y,this.v2^=c^p,this.v3^=l^_,this.v4^=u^b,this.v5^=h^w,this.v6^=d^m,this.v7^=f^I}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0)}}const vb=ow(t=>new Ab(t));const Tb=4,fd=0,hd=1,Ib=2;function ci(t){let e=t.length;for(;--e>=0;)t[e]=0}const Sb=0,x0=1,xb=2,Cb=3,kb=258,Ll=29,Ts=256,Xi=Ts+1+Ll,zr=30,Pl=19,C0=2*Xi+1,Wn=15,Aa=16,Nb=7,Ul=256,k0=16,N0=17,B0=18,sc=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Gs=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Bb=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),D0=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Db=512,Fe=new Array((Xi+2)*2);ci(Fe);const Hi=new Array(zr*2);ci(Hi);const Ji=new Array(Db);ci(Ji);const ts=new Array(kb-Cb+1);ci(ts);const $l=new Array(Ll);ci($l);const uo=new Array(zr);ci(uo);function va(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}let O0,R0,M0;function Ta(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const L0=t=>t<256?Ji[t]:Ji[256+(t>>>7)],es=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},Vt=(t,e,n)=>{t.bi_valid>Aa-n?(t.bi_buf|=e<<t.bi_valid&65535,es(t,t.bi_buf),t.bi_buf=e>>Aa-t.bi_valid,t.bi_valid+=n-Aa):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},ke=(t,e,n)=>{Vt(t,n[e*2],n[e*2+1])},P0=(t,e)=>{let n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1},Ob=t=>{t.bi_valid===16?(es(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},Rb=(t,e)=>{const n=e.dyn_tree,r=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,o=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,c=e.stat_desc.max_length;let l,u,h,d,f,g,y=0;for(d=0;d<=Wn;d++)t.bl_count[d]=0;for(n[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<C0;l++)u=t.heap[l],d=n[n[u*2+1]*2+1]+1,d>c&&(d=c,y++),n[u*2+1]=d,!(u>r)&&(t.bl_count[d]++,f=0,u>=a&&(f=o[u-a]),g=n[u*2],t.opt_len+=g*(d+f),s&&(t.static_len+=g*(i[u*2+1]+f)));if(y!==0){do{for(d=c-1;t.bl_count[d]===0;)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[c]--,y-=2}while(y>0);for(d=c;d!==0;d--)for(u=t.bl_count[d];u!==0;)h=t.heap[--l],!(h>r)&&(n[h*2+1]!==d&&(t.opt_len+=(d-n[h*2+1])*n[h*2],n[h*2+1]=d),u--)}},U0=(t,e,n)=>{const r=new Array(Wn+1);let i=0,s,o;for(s=1;s<=Wn;s++)i=i+n[s-1]<<1,r[s]=i;for(o=0;o<=e;o++){let a=t[o*2+1];a!==0&&(t[o*2]=P0(r[a]++,a))}},Mb=()=>{let t,e,n,r,i;const s=new Array(Wn+1);for(n=0,r=0;r<Ll-1;r++)for($l[r]=n,t=0;t<1<<sc[r];t++)ts[n++]=r;for(ts[n-1]=r,i=0,r=0;r<16;r++)for(uo[r]=i,t=0;t<1<<Gs[r];t++)Ji[i++]=r;for(i>>=7;r<zr;r++)for(uo[r]=i<<7,t=0;t<1<<Gs[r]-7;t++)Ji[256+i++]=r;for(e=0;e<=Wn;e++)s[e]=0;for(t=0;t<=143;)Fe[t*2+1]=8,t++,s[8]++;for(;t<=255;)Fe[t*2+1]=9,t++,s[9]++;for(;t<=279;)Fe[t*2+1]=7,t++,s[7]++;for(;t<=287;)Fe[t*2+1]=8,t++,s[8]++;for(U0(Fe,Xi+1,s),t=0;t<zr;t++)Hi[t*2+1]=5,Hi[t*2]=P0(t,5);O0=new va(Fe,sc,Ts+1,Xi,Wn),R0=new va(Hi,Gs,0,zr,Wn),M0=new va(new Array(0),Bb,0,Pl,Nb)},$0=t=>{let e;for(e=0;e<Xi;e++)t.dyn_ltree[e*2]=0;for(e=0;e<zr;e++)t.dyn_dtree[e*2]=0;for(e=0;e<Pl;e++)t.bl_tree[e*2]=0;t.dyn_ltree[Ul*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},V0=t=>{t.bi_valid>8?es(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},pd=(t,e,n,r)=>{const i=e*2,s=n*2;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]},Ia=(t,e,n)=>{const r=t.heap[n];let i=n<<1;for(;i<=t.heap_len&&(i<t.heap_len&&pd(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!pd(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r},gd=(t,e,n)=>{let r,i,s=0,o,a;if(t.sym_next!==0)do r=t.pending_buf[t.sym_buf+s++]&255,r+=(t.pending_buf[t.sym_buf+s++]&255)<<8,i=t.pending_buf[t.sym_buf+s++],r===0?ke(t,i,e):(o=ts[i],ke(t,o+Ts+1,e),a=sc[o],a!==0&&(i-=$l[o],Vt(t,i,a)),r--,o=L0(r),ke(t,o,n),a=Gs[o],a!==0&&(r-=uo[o],Vt(t,r,a)));while(s<t.sym_next);ke(t,Ul,e)},oc=(t,e)=>{const n=e.dyn_tree,r=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems;let o,a,c=-1,l;for(t.heap_len=0,t.heap_max=C0,o=0;o<s;o++)n[o*2]!==0?(t.heap[++t.heap_len]=c=o,t.depth[o]=0):n[o*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=c<2?++c:0,n[l*2]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=r[l*2+1]);for(e.max_code=c,o=t.heap_len>>1;o>=1;o--)Ia(t,n,o);l=s;do o=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Ia(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=o,t.heap[--t.heap_max]=a,n[l*2]=n[o*2]+n[a*2],t.depth[l]=(t.depth[o]>=t.depth[a]?t.depth[o]:t.depth[a])+1,n[o*2+1]=n[a*2+1]=l,t.heap[1]=l++,Ia(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],Rb(t,e),U0(n,c,t.bl_count)},yd=(t,e,n)=>{let r,i=-1,s,o=e[1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),e[(n+1)*2+1]=65535,r=0;r<=n;r++)s=o,o=e[(r+1)*2+1],!(++a<c&&s===o)&&(a<l?t.bl_tree[s*2]+=a:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[k0*2]++):a<=10?t.bl_tree[N0*2]++:t.bl_tree[B0*2]++,a=0,i=s,o===0?(c=138,l=3):s===o?(c=6,l=3):(c=7,l=4))},_d=(t,e,n)=>{let r,i=-1,s,o=e[1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),r=0;r<=n;r++)if(s=o,o=e[(r+1)*2+1],!(++a<c&&s===o)){if(a<l)do ke(t,s,t.bl_tree);while(--a!==0);else s!==0?(s!==i&&(ke(t,s,t.bl_tree),a--),ke(t,k0,t.bl_tree),Vt(t,a-3,2)):a<=10?(ke(t,N0,t.bl_tree),Vt(t,a-3,3)):(ke(t,B0,t.bl_tree),Vt(t,a-11,7));a=0,i=s,o===0?(c=138,l=3):s===o?(c=6,l=3):(c=7,l=4)}},Lb=t=>{let e;for(yd(t,t.dyn_ltree,t.l_desc.max_code),yd(t,t.dyn_dtree,t.d_desc.max_code),oc(t,t.bl_desc),e=Pl-1;e>=3&&t.bl_tree[D0[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},Pb=(t,e,n,r)=>{let i;for(Vt(t,e-257,5),Vt(t,n-1,5),Vt(t,r-4,4),i=0;i<r;i++)Vt(t,t.bl_tree[D0[i]*2+1],3);_d(t,t.dyn_ltree,e-1),_d(t,t.dyn_dtree,n-1)},Ub=t=>{let e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return fd;if(t.dyn_ltree[18]!==0||t.dyn_ltree[20]!==0||t.dyn_ltree[26]!==0)return hd;for(n=32;n<Ts;n++)if(t.dyn_ltree[n*2]!==0)return hd;return fd};let wd=!1;const $b=t=>{wd||(Mb(),wd=!0),t.l_desc=new Ta(t.dyn_ltree,O0),t.d_desc=new Ta(t.dyn_dtree,R0),t.bl_desc=new Ta(t.bl_tree,M0),t.bi_buf=0,t.bi_valid=0,$0(t)},H0=(t,e,n,r)=>{Vt(t,(Sb<<1)+(r?1:0),3),V0(t),es(t,n),es(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},Vb=t=>{Vt(t,x0<<1,3),ke(t,Ul,Fe),Ob(t)},Hb=(t,e,n,r)=>{let i,s,o=0;t.level>0?(t.strm.data_type===Ib&&(t.strm.data_type=Ub(t)),oc(t,t.l_desc),oc(t,t.d_desc),o=Lb(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=n+5,n+4<=i&&e!==-1?H0(t,e,n,r):t.strategy===Tb||s===i?(Vt(t,(x0<<1)+(r?1:0),3),gd(t,Fe,Hi)):(Vt(t,(xb<<1)+(r?1:0),3),Pb(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),gd(t,t.dyn_ltree,t.dyn_dtree)),$0(t),r&&V0(t)},Fb=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(ts[n]+Ts+1)*2]++,t.dyn_dtree[L0(e)*2]++),t.sym_next===t.sym_end);var zb=$b,jb=H0,qb=Hb,Yb=Fb,Zb=Vb,Kb={_tr_init:zb,_tr_stored_block:jb,_tr_flush_block:qb,_tr_tally:Yb,_tr_align:Zb};const Wb=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var ns=Wb;const Gb=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},Qb=new Uint32Array(Gb()),Xb=(t,e,n,r)=>{const i=Qb,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var ft=Xb,hr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$o={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Jb,_tr_stored_block:ac,_tr_flush_block:t1,_tr_tally:hn,_tr_align:e1}=Kb,{Z_NO_FLUSH:pn,Z_PARTIAL_FLUSH:n1,Z_FULL_FLUSH:r1,Z_FINISH:ue,Z_BLOCK:md,Z_OK:bt,Z_STREAM_END:bd,Z_STREAM_ERROR:De,Z_DATA_ERROR:i1,Z_BUF_ERROR:Sa,Z_DEFAULT_COMPRESSION:s1,Z_FILTERED:o1,Z_HUFFMAN_ONLY:Fs,Z_RLE:a1,Z_FIXED:c1,Z_DEFAULT_STRATEGY:l1,Z_UNKNOWN:u1,Z_DEFLATED:Vo}=$o,d1=9,f1=15,h1=8,p1=29,g1=256,cc=g1+1+p1,y1=30,_1=19,w1=2*cc+1,m1=15,Y=3,an=258,Oe=an+Y+1,b1=32,Jr=42,Vl=57,lc=69,uc=73,dc=91,fc=103,Gn=113,wi=666,Ot=1,li=2,pr=3,ui=4,E1=3,Qn=(t,e)=>(t.msg=hr[e],e),Ed=t=>t*2-(t>4?9:0),on=t=>{let e=t.length;for(;--e>=0;)t[e]=0},A1=t=>{let e,n,r,i=t.w_size;e=t.hash_size,r=e;do n=t.head[--r],t.head[r]=n>=i?n-i:0;while(--e);e=i,r=e;do n=t.prev[--r],t.prev[r]=n>=i?n-i:0;while(--e)};let v1=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask,gn=v1;const Kt=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))},re=(t,e)=>{t1(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Kt(t.strm)},W=(t,e)=>{t.pending_buf[t.pending++]=e},gi=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},hc=(t,e,n,r)=>{let i=t.avail_in;return i>r&&(i=r),i===0?0:(t.avail_in-=i,e.set(t.input.subarray(t.next_in,t.next_in+i),n),t.state.wrap===1?t.adler=ns(t.adler,e,i,n):t.state.wrap===2&&(t.adler=ft(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)},F0=(t,e)=>{let n=t.max_chain_length,r=t.strstart,i,s,o=t.prev_length,a=t.nice_match;const c=t.strstart>t.w_size-Oe?t.strstart-(t.w_size-Oe):0,l=t.window,u=t.w_mask,h=t.prev,d=t.strstart+an;let f=l[r+o-1],g=l[r+o];t.prev_length>=t.good_match&&(n>>=2),a>t.lookahead&&(a=t.lookahead);do if(i=e,!(l[i+o]!==g||l[i+o-1]!==f||l[i]!==l[r]||l[++i]!==l[r+1])){r+=2,i++;do;while(l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&l[++r]===l[++i]&&r<d);if(s=an-(d-r),r=d-an,s>o){if(t.match_start=e,o=s,s>=a)break;f=l[r+o-1],g=l[r+o]}}while((e=h[e&u])>c&&--n!==0);return o<=t.lookahead?o:t.lookahead},ti=t=>{const e=t.w_size;let n,r,i;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-Oe)&&(t.window.set(t.window.subarray(e,e+e-r),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),A1(t),r+=e),t.strm.avail_in===0)break;if(n=hc(t.strm,t.window,t.strstart+t.lookahead,r),t.lookahead+=n,t.lookahead+t.insert>=Y)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=gn(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=gn(t,t.ins_h,t.window[i+Y-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<Y)););}while(t.lookahead<Oe&&t.strm.avail_in!==0)},z0=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r,i,s,o=0,a=t.strm.avail_in;do{if(r=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s||(s=t.strm.avail_out-s,i=t.strstart-t.block_start,r>i+t.strm.avail_in&&(r=i+t.strm.avail_in),r>s&&(r=s),r<n&&(r===0&&e!==ue||e===pn||r!==i+t.strm.avail_in)))break;o=e===ue&&r===i+t.strm.avail_in?1:0,ac(t,0,0,o),t.pending_buf[t.pending-4]=r,t.pending_buf[t.pending-3]=r>>8,t.pending_buf[t.pending-2]=~r,t.pending_buf[t.pending-1]=~r>>8,Kt(t.strm),i&&(i>r&&(i=r),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,r-=i),r&&(hc(t.strm,t.strm.output,t.strm.next_out,r),t.strm.next_out+=r,t.strm.avail_out-=r,t.strm.total_out+=r)}while(o===0);return a-=t.strm.avail_in,a&&(a>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=a&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-a,t.strm.next_in),t.strstart),t.strstart+=a,t.insert+=a>t.w_size-t.insert?t.w_size-t.insert:a),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),o?ui:e!==pn&&e!==ue&&t.strm.avail_in===0&&t.strstart===t.block_start?li:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(hc(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s,n=s>t.w_size?t.w_size:s,i=t.strstart-t.block_start,(i>=n||(i||e===ue)&&e!==pn&&t.strm.avail_in===0&&i<=s)&&(r=i>s?s:i,o=e===ue&&t.strm.avail_in===0&&r===i?1:0,ac(t,t.block_start,r,o),t.block_start+=r,Kt(t.strm)),o?pr:Ot)},xa=(t,e)=>{let n,r;for(;;){if(t.lookahead<Oe){if(ti(t),t.lookahead<Oe&&e===pn)return Ot;if(t.lookahead===0)break}if(n=0,t.lookahead>=Y&&(t.ins_h=gn(t,t.ins_h,t.window[t.strstart+Y-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-Oe&&(t.match_length=F0(t,n)),t.match_length>=Y)if(r=hn(t,t.strstart-t.match_start,t.match_length-Y),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Y){t.match_length--;do t.strstart++,t.ins_h=gn(t,t.ins_h,t.window[t.strstart+Y-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=gn(t,t.ins_h,t.window[t.strstart+1]);else r=hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(re(t,!1),t.strm.avail_out===0))return Ot}return t.insert=t.strstart<Y-1?t.strstart:Y-1,e===ue?(re(t,!0),t.strm.avail_out===0?pr:ui):t.sym_next&&(re(t,!1),t.strm.avail_out===0)?Ot:li},kr=(t,e)=>{let n,r,i;for(;;){if(t.lookahead<Oe){if(ti(t),t.lookahead<Oe&&e===pn)return Ot;if(t.lookahead===0)break}if(n=0,t.lookahead>=Y&&(t.ins_h=gn(t,t.ins_h,t.window[t.strstart+Y-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Y-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Oe&&(t.match_length=F0(t,n),t.match_length<=5&&(t.strategy===o1||t.match_length===Y&&t.strstart-t.match_start>4096)&&(t.match_length=Y-1)),t.prev_length>=Y&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-Y,r=hn(t,t.strstart-1-t.prev_match,t.prev_length-Y),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=gn(t,t.ins_h,t.window[t.strstart+Y-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=Y-1,t.strstart++,r&&(re(t,!1),t.strm.avail_out===0))return Ot}else if(t.match_available){if(r=hn(t,0,t.window[t.strstart-1]),r&&re(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Ot}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=hn(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Y-1?t.strstart:Y-1,e===ue?(re(t,!0),t.strm.avail_out===0?pr:ui):t.sym_next&&(re(t,!1),t.strm.avail_out===0)?Ot:li},T1=(t,e)=>{let n,r,i,s;const o=t.window;for(;;){if(t.lookahead<=an){if(ti(t),t.lookahead<=an&&e===pn)return Ot;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=Y&&t.strstart>0&&(i=t.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){s=t.strstart+an;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<s);t.match_length=an-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Y?(n=hn(t,1,t.match_length-Y),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(re(t,!1),t.strm.avail_out===0))return Ot}return t.insert=0,e===ue?(re(t,!0),t.strm.avail_out===0?pr:ui):t.sym_next&&(re(t,!1),t.strm.avail_out===0)?Ot:li},I1=(t,e)=>{let n;for(;;){if(t.lookahead===0&&(ti(t),t.lookahead===0)){if(e===pn)return Ot;break}if(t.match_length=0,n=hn(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(re(t,!1),t.strm.avail_out===0))return Ot}return t.insert=0,e===ue?(re(t,!0),t.strm.avail_out===0?pr:ui):t.sym_next&&(re(t,!1),t.strm.avail_out===0)?Ot:li};function Ee(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}const mi=[new Ee(0,0,0,0,z0),new Ee(4,4,8,4,xa),new Ee(4,5,16,8,xa),new Ee(4,6,32,32,xa),new Ee(4,4,16,16,kr),new Ee(8,16,32,32,kr),new Ee(8,16,128,128,kr),new Ee(8,32,128,256,kr),new Ee(32,128,258,1024,kr),new Ee(32,258,258,4096,kr)],S1=t=>{t.window_size=2*t.w_size,on(t.head),t.max_lazy_match=mi[t.level].max_lazy,t.good_match=mi[t.level].good_length,t.nice_match=mi[t.level].nice_length,t.max_chain_length=mi[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Y-1,t.match_available=0,t.ins_h=0};function x1(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Vo,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(w1*2),this.dyn_dtree=new Uint16Array((2*y1+1)*2),this.bl_tree=new Uint16Array((2*_1+1)*2),on(this.dyn_ltree),on(this.dyn_dtree),on(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(m1+1),this.heap=new Uint16Array(2*cc+1),on(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*cc+1),on(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Is=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==Jr&&e.status!==Vl&&e.status!==lc&&e.status!==uc&&e.status!==dc&&e.status!==fc&&e.status!==Gn&&e.status!==wi?1:0},j0=t=>{if(Is(t))return Qn(t,De);t.total_in=t.total_out=0,t.data_type=u1;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?Vl:e.wrap?Jr:Gn,t.adler=e.wrap===2?0:1,e.last_flush=-2,Jb(e),bt},q0=t=>{const e=j0(t);return e===bt&&S1(t.state),e},C1=(t,e)=>Is(t)||t.state.wrap!==2?De:(t.state.gzhead=e,bt),Y0=(t,e,n,r,i,s)=>{if(!t)return De;let o=1;if(e===s1&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>d1||n!==Vo||r<8||r>15||e<0||e>9||s<0||s>c1||r===8&&o!==1)return Qn(t,De);r===8&&(r=9);const a=new x1;return t.state=a,a.strm=t,a.status=Jr,a.wrap=o,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Y-1)/Y),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=e,a.strategy=s,a.method=n,q0(t)},k1=(t,e)=>Y0(t,e,Vo,f1,h1,l1),N1=(t,e)=>{if(Is(t)||e>md||e<0)return t?Qn(t,De):De;const n=t.state;if(!t.output||t.avail_in!==0&&!t.input||n.status===wi&&e!==ue)return Qn(t,t.avail_out===0?Sa:De);const r=n.last_flush;if(n.last_flush=e,n.pending!==0){if(Kt(t),t.avail_out===0)return n.last_flush=-1,bt}else if(t.avail_in===0&&Ed(e)<=Ed(r)&&e!==ue)return Qn(t,Sa);if(n.status===wi&&t.avail_in!==0)return Qn(t,Sa);if(n.status===Jr&&n.wrap===0&&(n.status=Gn),n.status===Jr){let i=Vo+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=Fs||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,i|=s<<6,n.strstart!==0&&(i|=b1),i+=31-i%31,gi(n,i),n.strstart!==0&&(gi(n,t.adler>>>16),gi(n,t.adler&65535)),t.adler=1,n.status=Gn,Kt(t),n.pending!==0)return n.last_flush=-1,bt}if(n.status===Vl){if(t.adler=0,W(n,31),W(n,139),W(n,8),n.gzhead)W(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),W(n,n.gzhead.time&255),W(n,n.gzhead.time>>8&255),W(n,n.gzhead.time>>16&255),W(n,n.gzhead.time>>24&255),W(n,n.level===9?2:n.strategy>=Fs||n.level<2?4:0),W(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(W(n,n.gzhead.extra.length&255),W(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=ft(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=lc;else if(W(n,0),W(n,0),W(n,0),W(n,0),W(n,0),W(n,n.level===9?2:n.strategy>=Fs||n.level<2?4:0),W(n,E1),n.status=Gn,Kt(t),n.pending!==0)return n.last_flush=-1,bt}if(n.status===lc){if(n.gzhead.extra){let i=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=a,Kt(t),n.pending!==0)return n.last_flush=-1,bt;i=0,s-=a}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=uc}if(n.status===uc){if(n.gzhead.name){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i)),Kt(t),n.pending!==0)return n.last_flush=-1,bt;i=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,W(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=dc}if(n.status===dc){if(n.gzhead.comment){let i=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i)),Kt(t),n.pending!==0)return n.last_flush=-1,bt;i=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,W(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=ft(t.adler,n.pending_buf,n.pending-i,i))}n.status=fc}if(n.status===fc){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Kt(t),n.pending!==0))return n.last_flush=-1,bt;W(n,t.adler&255),W(n,t.adler>>8&255),t.adler=0}if(n.status=Gn,Kt(t),n.pending!==0)return n.last_flush=-1,bt}if(t.avail_in!==0||n.lookahead!==0||e!==pn&&n.status!==wi){let i=n.level===0?z0(n,e):n.strategy===Fs?I1(n,e):n.strategy===a1?T1(n,e):mi[n.level].func(n,e);if((i===pr||i===ui)&&(n.status=wi),i===Ot||i===pr)return t.avail_out===0&&(n.last_flush=-1),bt;if(i===li&&(e===n1?e1(n):e!==md&&(ac(n,0,0,!1),e===r1&&(on(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Kt(t),t.avail_out===0))return n.last_flush=-1,bt}return e!==ue?bt:n.wrap<=0?bd:(n.wrap===2?(W(n,t.adler&255),W(n,t.adler>>8&255),W(n,t.adler>>16&255),W(n,t.adler>>24&255),W(n,t.total_in&255),W(n,t.total_in>>8&255),W(n,t.total_in>>16&255),W(n,t.total_in>>24&255)):(gi(n,t.adler>>>16),gi(n,t.adler&65535)),Kt(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?bt:bd)},B1=t=>{if(Is(t))return De;const e=t.state.status;return t.state=null,e===Gn?Qn(t,i1):bt},D1=(t,e)=>{let n=e.length;if(Is(t))return De;const r=t.state,i=r.wrap;if(i===2||i===1&&r.status!==Jr||r.lookahead)return De;if(i===1&&(t.adler=ns(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){i===0&&(on(r.head),r.strstart=0,r.block_start=0,r.insert=0);let c=new Uint8Array(r.w_size);c.set(e.subarray(n-r.w_size,n),0),e=c,n=r.w_size}const s=t.avail_in,o=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,ti(r);r.lookahead>=Y;){let c=r.strstart,l=r.lookahead-(Y-1);do r.ins_h=gn(r,r.ins_h,r.window[c+Y-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++;while(--l);r.strstart=c,r.lookahead=Y-1,ti(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=Y-1,r.match_available=0,t.next_in=o,t.input=a,t.avail_in=s,r.wrap=i,bt};var O1=k1,R1=Y0,M1=q0,L1=j0,P1=C1,U1=N1,$1=B1,V1=D1,H1="pako deflate (from Nodeca project)",Fi={deflateInit:O1,deflateInit2:R1,deflateReset:M1,deflateResetKeep:L1,deflateSetHeader:P1,deflate:U1,deflateEnd:$1,deflateSetDictionary:V1,deflateInfo:H1};const F1=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var z1=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)F1(n,r)&&(t[r]=n[r])}}return t},j1=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},Ho={assign:z1,flattenChunks:j1};let Z0=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Z0=!1}const rs=new Uint8Array(256);for(let t=0;t<256;t++)rs[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;rs[254]=rs[254]=1;var q1=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const Y1=(t,e)=>{if(e<65534&&t.subarray&&Z0)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var Z1=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=rs[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return Y1(s,i)},K1=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+rs[t[n]]>e?n:e},is={string2buf:q1,buf2string:Z1,utf8border:K1};function W1(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var K0=W1;const W0=Object.prototype.toString,{Z_NO_FLUSH:G1,Z_SYNC_FLUSH:Q1,Z_FULL_FLUSH:X1,Z_FINISH:J1,Z_OK:fo,Z_STREAM_END:tE,Z_DEFAULT_COMPRESSION:eE,Z_DEFAULT_STRATEGY:nE,Z_DEFLATED:rE}=$o;function Fo(t){this.options=Ho.assign({level:eE,method:rE,chunkSize:16384,windowBits:15,memLevel:8,strategy:nE},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new K0,this.strm.avail_out=0;let n=Fi.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==fo)throw new Error(hr[n]);if(e.header&&Fi.deflateSetHeader(this.strm,e.header),e.dictionary){let r;if(typeof e.dictionary=="string"?r=is.string2buf(e.dictionary):W0.call(e.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(e.dictionary):r=e.dictionary,n=Fi.deflateSetDictionary(this.strm,r),n!==fo)throw new Error(hr[n]);this._dict_set=!0}}Fo.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let i,s;if(this.ended)return!1;for(e===~~e?s=e:s=e===!0?J1:G1,typeof t=="string"?n.input=is.string2buf(t):W0.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(s===Q1||s===X1)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Fi.deflate(n,s),i===tE)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Fi.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===fo;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Fo.prototype.onData=function(t){this.chunks.push(t)};Fo.prototype.onEnd=function(t){t===fo&&(this.result=Ho.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function iE(t,e){const n=new Fo(e);if(n.push(t,!0),n.err)throw n.msg||hr[n.err];return n.result}function sE(t,e){return e=e||{},e.gzip=!0,iE(t,e)}var oE=sE,aE={gzip:oE};const zs=16209,cE=16191;var lE=function(e,n){let r,i,s,o,a,c,l,u,h,d,f,g,y,p,_,b,w,m,I,k,E,N,T,O;const D=e.state;r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,O=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),c=D.dmax,l=D.wsize,u=D.whave,h=D.wnext,d=D.window,f=D.hold,g=D.bits,y=D.lencode,p=D.distcode,_=(1<<D.lenbits)-1,b=(1<<D.distbits)-1;t:do{g<15&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),w=y[f&_];e:for(;;){if(m=w>>>24,f>>>=m,g-=m,m=w>>>16&255,m===0)O[s++]=w&65535;else if(m&16){I=w&65535,m&=15,m&&(g<m&&(f+=T[r++]<<g,g+=8),I+=f&(1<<m)-1,f>>>=m,g-=m),g<15&&(f+=T[r++]<<g,g+=8,f+=T[r++]<<g,g+=8),w=p[f&b];n:for(;;){if(m=w>>>24,f>>>=m,g-=m,m=w>>>16&255,m&16){if(k=w&65535,m&=15,g<m&&(f+=T[r++]<<g,g+=8,g<m&&(f+=T[r++]<<g,g+=8)),k+=f&(1<<m)-1,k>c){e.msg="invalid distance too far back",D.mode=zs;break t}if(f>>>=m,g-=m,m=s-o,k>m){if(m=k-m,m>u&&D.sane){e.msg="invalid distance too far back",D.mode=zs;break t}if(E=0,N=d,h===0){if(E+=l-m,m<I){I-=m;do O[s++]=d[E++];while(--m);E=s-k,N=O}}else if(h<m){if(E+=l+h-m,m-=h,m<I){I-=m;do O[s++]=d[E++];while(--m);if(E=0,h<I){m=h,I-=m;do O[s++]=d[E++];while(--m);E=s-k,N=O}}}else if(E+=h-m,m<I){I-=m;do O[s++]=d[E++];while(--m);E=s-k,N=O}for(;I>2;)O[s++]=N[E++],O[s++]=N[E++],O[s++]=N[E++],I-=3;I&&(O[s++]=N[E++],I>1&&(O[s++]=N[E++]))}else{E=s-k;do O[s++]=O[E++],O[s++]=O[E++],O[s++]=O[E++],I-=3;while(I>2);I&&(O[s++]=O[E++],I>1&&(O[s++]=O[E++]))}}else if((m&64)===0){w=p[(w&65535)+(f&(1<<m)-1)];continue n}else{e.msg="invalid distance code",D.mode=zs;break t}break}}else if((m&64)===0){w=y[(w&65535)+(f&(1<<m)-1)];continue e}else if(m&32){D.mode=cE;break t}else{e.msg="invalid literal/length code",D.mode=zs;break t}break}}while(r<i&&s<a);I=g>>3,r-=I,g-=I<<3,f&=(1<<g)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),D.hold=f,D.bits=g};const Nr=15,Ad=852,vd=592,Td=0,Ca=1,Id=2,uE=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dE=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fE=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),hE=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pE=(t,e,n,r,i,s,o,a)=>{const c=a.bits;let l=0,u=0,h=0,d=0,f=0,g=0,y=0,p=0,_=0,b=0,w,m,I,k,E,N=null,T;const O=new Uint16Array(Nr+1),D=new Uint16Array(Nr+1);let M=null,j,A,x;for(l=0;l<=Nr;l++)O[l]=0;for(u=0;u<r;u++)O[e[n+u]]++;for(f=c,d=Nr;d>=1&&O[d]===0;d--);if(f>d&&(f=d),d===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(h=1;h<d&&O[h]===0;h++);for(f<h&&(f=h),p=1,l=1;l<=Nr;l++)if(p<<=1,p-=O[l],p<0)return-1;if(p>0&&(t===Td||d!==1))return-1;for(D[1]=0,l=1;l<Nr;l++)D[l+1]=D[l]+O[l];for(u=0;u<r;u++)e[n+u]!==0&&(o[D[e[n+u]]++]=u);if(t===Td?(N=M=o,T=20):t===Ca?(N=uE,M=dE,T=257):(N=fE,M=hE,T=0),b=0,u=0,l=h,E=s,g=f,y=0,I=-1,_=1<<f,k=_-1,t===Ca&&_>Ad||t===Id&&_>vd)return 1;for(;;){j=l-y,o[u]+1<T?(A=0,x=o[u]):o[u]>=T?(A=M[o[u]-T],x=N[o[u]-T]):(A=96,x=0),w=1<<l-y,m=1<<g,h=m;do m-=w,i[E+(b>>y)+m]=j<<24|A<<16|x|0;while(m!==0);for(w=1<<l-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,u++,--O[l]===0){if(l===d)break;l=e[n+o[u]]}if(l>f&&(b&k)!==I){for(y===0&&(y=f),E+=h,g=l-y,p=1<<g;g+y<d&&(p-=O[g+y],!(p<=0));)g++,p<<=1;if(_+=1<<g,t===Ca&&_>Ad||t===Id&&_>vd)return 1;I=b&k,i[I]=f<<24|g<<16|E-s|0}}return b!==0&&(i[E+b]=l-y<<24|64<<16|0),a.bits=f,0};var zi=pE;const gE=0,G0=1,Q0=2,{Z_FINISH:Sd,Z_BLOCK:yE,Z_TREES:js,Z_OK:gr,Z_STREAM_END:_E,Z_NEED_DICT:wE,Z_STREAM_ERROR:de,Z_DATA_ERROR:X0,Z_MEM_ERROR:J0,Z_BUF_ERROR:mE,Z_DEFLATED:xd}=$o,zo=16180,Cd=16181,kd=16182,Nd=16183,Bd=16184,Dd=16185,Od=16186,Rd=16187,Md=16188,Ld=16189,ho=16190,Pe=16191,ka=16192,Pd=16193,Na=16194,Ud=16195,$d=16196,Vd=16197,Hd=16198,qs=16199,Ys=16200,Fd=16201,zd=16202,jd=16203,qd=16204,Yd=16205,Ba=16206,Zd=16207,Kd=16208,et=16209,tp=16210,ep=16211,bE=852,EE=592,AE=15,vE=AE,Wd=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function TE(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Er=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<zo||e.mode>ep?1:0},np=t=>{if(Er(t))return de;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=zo,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(bE),e.distcode=e.distdyn=new Int32Array(EE),e.sane=1,e.back=-1,gr},rp=t=>{if(Er(t))return de;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,np(t)},ip=(t,e)=>{let n;if(Er(t))return de;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?de:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,rp(t))},sp=(t,e)=>{if(!t)return de;const n=new TE;t.state=n,n.strm=t,n.window=null,n.mode=zo;const r=ip(t,e);return r!==gr&&(t.state=null),r},IE=t=>sp(t,vE);let Gd=!0,Da,Oa;const SE=t=>{if(Gd){Da=new Int32Array(512),Oa=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(zi(G0,t.lens,0,288,Da,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;zi(Q0,t.lens,0,32,Oa,0,t.work,{bits:5}),Gd=!1}t.lencode=Da,t.lenbits=9,t.distcode=Oa,t.distbits=5},op=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},xE=(t,e)=>{let n,r,i,s,o,a,c,l,u,h,d,f,g,y,p=0,_,b,w,m,I,k,E,N;const T=new Uint8Array(4);let O,D;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Er(t)||!t.output||!t.input&&t.avail_in!==0)return de;n=t.state,n.mode===Pe&&(n.mode=ka),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,l=n.hold,u=n.bits,h=a,d=c,N=gr;t:for(;;)switch(n.mode){case zo:if(n.wrap===0){n.mode=ka;break}for(;u<16;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,T[0]=l&255,T[1]=l>>>8&255,n.check=ft(n.check,T,2,0),l=0,u=0,n.mode=Cd;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=et;break}if((l&15)!==xd){t.msg="unknown compression method",n.mode=et;break}if(l>>>=4,u-=4,E=(l&15)+8,n.wbits===0&&(n.wbits=E),E>15||E>n.wbits){t.msg="invalid window size",n.mode=et;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=l&512?Ld:Pe,l=0,u=0;break;case Cd:for(;u<16;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==xd){t.msg="unknown compression method",n.mode=et;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=et;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=ft(n.check,T,2,0)),l=0,u=0,n.mode=kd;case kd:for(;u<32;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,n.check=ft(n.check,T,4,0)),l=0,u=0,n.mode=Nd;case Nd:for(;u<16;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=ft(n.check,T,2,0)),l=0,u=0,n.mode=Bd;case Bd:if(n.flags&1024){for(;u<16;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(T[0]=l&255,T[1]=l>>>8&255,n.check=ft(n.check,T,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=Dd;case Dd:if(n.flags&1024&&(f=n.length,f>a&&(f=a),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+f),E)),n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,f,s)),a-=f,s+=f,n.length-=f),n.length))break t;n.length=0,n.mode=Od;case Od:if(n.flags&2048){if(a===0)break t;f=0;do E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,f,s)),a-=f,s+=f,E)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=Rd;case Rd:if(n.flags&4096){if(a===0)break t;f=0;do E=r[s+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&f<a);if(n.flags&512&&n.wrap&4&&(n.check=ft(n.check,r,f,s)),a-=f,s+=f,E)break t}else n.head&&(n.head.comment=null);n.mode=Md;case Md:if(n.flags&512){for(;u<16;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){t.msg="header crc mismatch",n.mode=et;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Pe;break;case Ld:for(;u<32;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}t.adler=n.check=Wd(l),l=0,u=0,n.mode=ho;case ho:if(n.havedict===0)return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=l,n.bits=u,wE;t.adler=n.check=1,n.mode=Pe;case Pe:if(e===yE||e===js)break t;case ka:if(n.last){l>>>=u&7,u-=u&7,n.mode=Ba;break}for(;u<3;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=Pd;break;case 1:if(SE(n),n.mode=qs,e===js){l>>>=2,u-=2;break t}break;case 2:n.mode=$d;break;case 3:t.msg="invalid block type",n.mode=et}l>>>=2,u-=2;break;case Pd:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=et;break}if(n.length=l&65535,l=0,u=0,n.mode=Na,e===js)break t;case Na:n.mode=Ud;case Ud:if(f=n.length,f){if(f>a&&(f=a),f>c&&(f=c),f===0)break t;i.set(r.subarray(s,s+f),o),a-=f,s+=f,c-=f,o+=f,n.length-=f;break}n.mode=Pe;break;case $d:for(;u<14;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=et;break}n.have=0,n.mode=Vd;case Vd:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.lens[M[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[M[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,O={bits:n.lenbits},N=zi(gE,n.lens,0,19,n.lencode,0,n.work,O),n.lenbits=O.bits,N){t.msg="invalid code lengths set",n.mode=et;break}n.have=0,n.mode=Hd;case Hd:for(;n.have<n.nlen+n.ndist;){for(;p=n.lencode[l&(1<<n.lenbits)-1],_=p>>>24,b=p>>>16&255,w=p&65535,!(_<=u);){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(w<16)l>>>=_,u-=_,n.lens[n.have++]=w;else{if(w===16){for(D=_+2;u<D;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(l>>>=_,u-=_,n.have===0){t.msg="invalid bit length repeat",n.mode=et;break}E=n.lens[n.have-1],f=3+(l&3),l>>>=2,u-=2}else if(w===17){for(D=_+3;u<D;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}l>>>=_,u-=_,E=0,f=3+(l&7),l>>>=3,u-=3}else{for(D=_+7;u<D;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}l>>>=_,u-=_,E=0,f=11+(l&127),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=et;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===et)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=et;break}if(n.lenbits=9,O={bits:n.lenbits},N=zi(G0,n.lens,0,n.nlen,n.lencode,0,n.work,O),n.lenbits=O.bits,N){t.msg="invalid literal/lengths set",n.mode=et;break}if(n.distbits=6,n.distcode=n.distdyn,O={bits:n.distbits},N=zi(Q0,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,O),n.distbits=O.bits,N){t.msg="invalid distances set",n.mode=et;break}if(n.mode=qs,e===js)break t;case qs:n.mode=Ys;case Ys:if(a>=6&&c>=258){t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=l,n.bits=u,lE(t,d),o=t.next_out,i=t.output,c=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,l=n.hold,u=n.bits,n.mode===Pe&&(n.back=-1);break}for(n.back=0;p=n.lencode[l&(1<<n.lenbits)-1],_=p>>>24,b=p>>>16&255,w=p&65535,!(_<=u);){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(b&&(b&240)===0){for(m=_,I=b,k=w;p=n.lencode[k+((l&(1<<m+I)-1)>>m)],_=p>>>24,b=p>>>16&255,w=p&65535,!(m+_<=u);){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}l>>>=m,u-=m,n.back+=m}if(l>>>=_,u-=_,n.back+=_,n.length=w,b===0){n.mode=Yd;break}if(b&32){n.back=-1,n.mode=Pe;break}if(b&64){t.msg="invalid literal/length code",n.mode=et;break}n.extra=b&15,n.mode=Fd;case Fd:if(n.extra){for(D=n.extra;u<D;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=zd;case zd:for(;p=n.distcode[l&(1<<n.distbits)-1],_=p>>>24,b=p>>>16&255,w=p&65535,!(_<=u);){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if((b&240)===0){for(m=_,I=b,k=w;p=n.distcode[k+((l&(1<<m+I)-1)>>m)],_=p>>>24,b=p>>>16&255,w=p&65535,!(m+_<=u);){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}l>>>=m,u-=m,n.back+=m}if(l>>>=_,u-=_,n.back+=_,b&64){t.msg="invalid distance code",n.mode=et;break}n.offset=w,n.extra=b&15,n.mode=jd;case jd:if(n.extra){for(D=n.extra;u<D;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=et;break}n.mode=qd;case qd:if(c===0)break t;if(f=d-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=et;break}f>n.wnext?(f-=n.wnext,g=n.wsize-f):g=n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=i,g=o-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do i[o++]=y[g++];while(--f);n.length===0&&(n.mode=Ys);break;case Yd:if(c===0)break t;i[o++]=n.length,c--,n.mode=Ys;break;case Ba:if(n.wrap){for(;u<32;){if(a===0)break t;a--,l|=r[s++]<<u,u+=8}if(d-=c,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?ft(n.check,i,d,o-d):ns(n.check,i,d,o-d)),d=c,n.wrap&4&&(n.flags?l:Wd(l))!==n.check){t.msg="incorrect data check",n.mode=et;break}l=0,u=0}n.mode=Zd;case Zd:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break t;a--,l+=r[s++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=et;break}l=0,u=0}n.mode=Kd;case Kd:N=_E;break t;case et:N=X0;break t;case tp:return J0;case ep:default:return de}return t.next_out=o,t.avail_out=c,t.next_in=s,t.avail_in=a,n.hold=l,n.bits=u,(n.wsize||d!==t.avail_out&&n.mode<et&&(n.mode<Ba||e!==Sd))&&op(t,t.output,t.next_out,d-t.avail_out),h-=t.avail_in,d-=t.avail_out,t.total_in+=h,t.total_out+=d,n.total+=d,n.wrap&4&&d&&(t.adler=n.check=n.flags?ft(n.check,i,d,t.next_out-d):ns(n.check,i,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Pe?128:0)+(n.mode===qs||n.mode===Na?256:0),(h===0&&d===0||e===Sd)&&N===gr&&(N=mE),N},CE=t=>{if(Er(t))return de;let e=t.state;return e.window&&(e.window=null),t.state=null,gr},kE=(t,e)=>{if(Er(t))return de;const n=t.state;return(n.wrap&2)===0?de:(n.head=e,e.done=!1,gr)},NE=(t,e)=>{const n=e.length;let r,i,s;return Er(t)||(r=t.state,r.wrap!==0&&r.mode!==ho)?de:r.mode===ho&&(i=1,i=ns(i,e,n,0),i!==r.check)?X0:(s=op(t,e,n,n),s?(r.mode=tp,J0):(r.havedict=1,gr))};var BE=rp,DE=ip,OE=np,RE=IE,ME=sp,LE=xE,PE=CE,UE=kE,$E=NE,VE="pako inflate (from Nodeca project)",ze={inflateReset:BE,inflateReset2:DE,inflateResetKeep:OE,inflateInit:RE,inflateInit2:ME,inflate:LE,inflateEnd:PE,inflateGetHeader:UE,inflateSetDictionary:$E,inflateInfo:VE};function HE(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var FE=HE;const ap=Object.prototype.toString,{Z_NO_FLUSH:zE,Z_FINISH:jE,Z_OK:ss,Z_STREAM_END:Ra,Z_NEED_DICT:Ma,Z_STREAM_ERROR:qE,Z_DATA_ERROR:Qd,Z_MEM_ERROR:YE}=$o;function jo(t){this.options=Ho.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new K0,this.strm.avail_out=0;let n=ze.inflateInit2(this.strm,e.windowBits);if(n!==ss)throw new Error(hr[n]);if(this.header=new FE,ze.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=is.string2buf(e.dictionary):ap.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=ze.inflateSetDictionary(this.strm,e.dictionary),n!==ss)))throw new Error(hr[n])}jo.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?jE:zE,ap.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=ze.inflate(n,o),s===Ma&&i&&(s=ze.inflateSetDictionary(n,i),s===ss?s=ze.inflate(n,o):s===Qd&&(s=Ma));n.avail_in>0&&s===Ra&&n.state.wrap>0&&t[n.next_in]!==0;)ze.inflateReset(n),s=ze.inflate(n,o);switch(s){case qE:case Qd:case Ma:case YE:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===Ra))if(this.options.to==="string"){let c=is.utf8border(n.output,n.next_out),l=n.next_out-c,u=is.buf2string(n.output,c);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===ss&&a===0)){if(s===Ra)return s=ze.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};jo.prototype.onData=function(t){this.chunks.push(t)};jo.prototype.onEnd=function(t){t===ss&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ho.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ZE(t,e){const n=new jo(e);if(n.push(t),n.err)throw n.msg||hr[n.err];return n.result}var KE=ZE,WE={ungzip:KE};const{gzip:GE}=aE,{ungzip:QE}=WE;var XE=GE,JE=QE;function Xd(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function tA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function qo(t,...e){if(!tA(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function eA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Xd(t.outputLen),Xd(t.blockLen)}function po(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function nA(t,e){qo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Br=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;const La=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Ae=(t,e)=>t<<32-e|t>>>e;function rA(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Hl(t){return typeof t=="string"&&(t=rA(t)),qo(t),t}function iA(...t){let e=0;for(let r=0;r<t.length;r++){const i=t[r];qo(i),e+=i.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const s=t[r];n.set(s,i),i+=s.length}return n}class cp{clone(){return this._cloneInto()}}function sA(t){const e=r=>t().update(Hl(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function oA(t=32){if(Br&&typeof Br.getRandomValues=="function")return Br.getRandomValues(new Uint8Array(t));if(Br&&typeof Br.randomBytes=="function")return Br.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function aA(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}const cA=(t,e,n)=>t&e^~t&n,lA=(t,e,n)=>t&e^t&n^e&n;class uA extends cp{constructor(e,n,r,i){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=La(this.buffer)}update(e){po(this);const{view:n,buffer:r,blockLen:i}=this;e=Hl(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const c=La(e);for(;i<=s-o;o+=i)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){po(this),nA(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;aA(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=La(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%n&&e.buffer.set(r),e}}const dA=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),rn=new Uint32Array(64);class fA extends uA{constructor(){super(64,32,8,!1),this.A=nn[0]|0,this.B=nn[1]|0,this.C=nn[2]|0,this.D=nn[3]|0,this.E=nn[4]|0,this.F=nn[5]|0,this.G=nn[6]|0,this.H=nn[7]|0}get(){const{A:e,B:n,C:r,D:i,E:s,F:o,G:a,H:c}=this;return[e,n,r,i,s,o,a,c]}set(e,n,r,i,s,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let h=0;h<16;h++,n+=4)rn[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const d=rn[h-15],f=rn[h-2],g=Ae(d,7)^Ae(d,18)^d>>>3,y=Ae(f,17)^Ae(f,19)^f>>>10;rn[h]=y+rn[h-7]+g+rn[h-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const d=Ae(a,6)^Ae(a,11)^Ae(a,25),f=u+d+cA(a,c,l)+dA[h]+rn[h]|0,y=(Ae(r,2)^Ae(r,13)^Ae(r,22))+lA(r,i,s)|0;u=l,l=c,c=a,a=o+f|0,o=s,s=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,i,s,o,a,c,l,u)}roundClean(){rn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const hA=sA(()=>new fA);class lp extends cp{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,eA(e);const r=Hl(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return po(this),this.iHash.update(e),this}digestInto(e){po(this),qo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const up=(t,e,n)=>new lp(t,e).update(n).digest();up.create=(t,e)=>new lp(t,e);function pA(t){return{hash:t,hmac:(e,...n)=>up(t,e,iA(...n)),randomBytes:oA}}function gA(t,e){const n=r=>I0({...t,...pA(r)});return Object.freeze({...n(e),create:n})}const dp=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Jd=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),yA=BigInt(1),pc=BigInt(2),tf=(t,e)=>(t+e/pc)/e;function _A(t){const e=dp,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,h=ae(u,n,e)*u%e,d=ae(h,n,e)*u%e,f=ae(d,pc,e)*l%e,g=ae(f,i,e)*f%e,y=ae(g,s,e)*g%e,p=ae(y,a,e)*y%e,_=ae(p,c,e)*p%e,b=ae(_,a,e)*y%e,w=ae(b,n,e)*u%e,m=ae(w,o,e)*g%e,I=ae(m,r,e)*l%e,k=ae(I,pc,e);if(!gc.eql(gc.sqr(k),t))throw new Error("Cannot find square root");return k}const gc=_0(dp,void 0,void 0,{sqrt:_A}),fp=gA({a:BigInt(0),b:BigInt(7),Fp:gc,n:Jd,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=Jd,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-yA*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=tf(s*t,e),c=tf(-r*t,e);let l=$t(t-a*n-c*i,e),u=$t(-a*r-c*s,e);const h=l>o,d=u>o;if(h&&(l=e-l),d&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},hA);BigInt(0);fp.ProjectivePoint;const hp=(t,e,n=[])=>{const r=Object.getOwnPropertyDescriptors(e);for(let i of n)delete r[i];Object.defineProperties(t,r)},os=(t,e=[t])=>{const n=Object.getPrototypeOf(t);return n===null?e:os(n,[...e,n])},wA=(...t)=>{if(t.length===0)return;let e;const n=t.map(r=>os(r));for(;n.every(r=>r.length>0);){const r=n.map(s=>s.pop()),i=r[0];if(r.every(s=>s===i))e=i;else break}return e},ef=(t,e,n=[])=>{var r;const i=(r=wA(...t))!==null&&r!==void 0?r:Object.prototype,s=Object.create(i),o=os(i);for(let a of t){let c=os(a);for(let l=c.length-1;l>=0;l--){let u=c[l];o.indexOf(u)===-1&&(hp(s,u,["constructor",...n]),o.push(u))}}return s.constructor=e,s},yc=t=>t.filter((e,n)=>t.indexOf(e)==n),pp=new WeakMap,mA=t=>pp.get(t),bA=(t,e)=>pp.set(t,e),nf=(t,e)=>{var n,r;const i=yc([...Object.getOwnPropertyNames(t),...Object.getOwnPropertyNames(e)]),s={};for(let o of i)s[o]=yc([...(n=t?.[o])!==null&&n!==void 0?n:[],...(r=e?.[o])!==null&&r!==void 0?r:[]]);return s},rf=(t,e)=>{var n,r,i,s;return{property:nf((n=t?.property)!==null&&n!==void 0?n:{},(r=e?.property)!==null&&r!==void 0?r:{}),method:nf((i=t?.method)!==null&&i!==void 0?i:{},(s=e?.method)!==null&&s!==void 0?s:{})}},EA=(t,e)=>{var n,r,i,s,o,a;return{class:yc([...(n=t?.class)!==null&&n!==void 0?n:[],...(r=e?.class)!==null&&r!==void 0?r:[]]),static:rf((i=t?.static)!==null&&i!==void 0?i:{},(s=e?.static)!==null&&s!==void 0?s:{}),instance:rf((o=t?.instance)!==null&&o!==void 0?o:{},(a=e?.instance)!==null&&a!==void 0?a:{})}},AA=new Map,vA=(...t)=>{var e;const n=new Set,r=new Set([...t]);for(;r.size>0;)for(let i of r){const s=os(i.prototype).map(l=>l.constructor),o=(e=mA(i))!==null&&e!==void 0?e:[],c=[...s,...o].filter(l=>!n.has(l));for(let l of c)r.add(l);n.add(i),r.delete(i)}return[...n]},TA=(...t)=>{const e=vA(...t).map(n=>AA.get(n)).filter(n=>!!n);return e.length==0?{}:e.length==1?e[0]:e.reduce((n,r)=>EA(n,r))};function IA(...t){var e,n,r;const i=t.map(a=>a.prototype);function s(...a){for(const c of t)hp(this,new c(...a))}s.prototype=ef(i,s),Object.setPrototypeOf(s,ef(t,null,["prototype"]));let o=s;{const a=TA(...t);for(let c of(e=a?.class)!==null&&e!==void 0?e:[]){const l=c(o);l&&(o=l)}sf((n=a?.static)!==null&&n!==void 0?n:{},o),sf((r=a?.instance)!==null&&r!==void 0?r:{},o.prototype)}return bA(o,t),o}const sf=(t,e)=>{const n=t.property,r=t.method;if(n)for(let i in n)for(let s of n[i])s(e,i);if(r)for(let i in r)for(let s of r[i])s(e,i,Object.getOwnPropertyDescriptor(e,i))};var gp=Object.defineProperty,SA=Object.getOwnPropertyDescriptor,xA=Object.getOwnPropertyNames,CA=Object.prototype.hasOwnProperty,X=(t,e)=>{for(var n in e)gp(t,n,{get:e[n],enumerable:!0})},kA=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xA(e))!CA.call(t,i)&&i!==n&&gp(t,i,{get:()=>e[i],enumerable:!(r=SA(e,i))||r.enumerable});return t},yp=(t,e,n)=>(kA(t,e,"default"),n),jr={};X(jr,{ADDR_BOUND:()=>ql,API_VERSION:()=>kp,BaseUrl:()=>$A,DEFAULT_GLOBAL_CONFIG:()=>Rp,HARDENING_4BYTES:()=>UA,HARDENING_BYTE:()=>PA,IS_BROWSER:()=>wp,LegacyUDC:()=>LA,MASK_250:()=>xp,MASK_31:()=>Cp,MAX_STORAGE_ITEM_SIZE:()=>Np,NetworkName:()=>di,OutsideExecutionCallerAny:()=>Bp,PAYMASTER_RPC_NODES:()=>Lp,PRIME:()=>at,RANGE_FELT:()=>go,RANGE_I128:()=>Pr,RANGE_I16:()=>Si,RANGE_I32:()=>xi,RANGE_I64:()=>Ci,RANGE_I8:()=>Ii,RANGE_U128:()=>Lr,RANGE_U16:()=>Ai,RANGE_U32:()=>MA,RANGE_U64:()=>vi,RANGE_U8:()=>Ei,RANGE_U96:()=>Ti,RPC_DEFAULT_NODES:()=>Mp,SNIP9_V1_INTERFACE_ID:()=>Dp,SNIP9_V2_INTERFACE_ID:()=>Op,SN_VERSION_IMPLEMENTING_BLAKE_FOR_COMPILED_CLASS:()=>_c,SYSTEM_MESSAGES:()=>ct,StarknetChainId:()=>zt,SupportedRpcVersion:()=>yn,TEXT_TO_FELT_MAX_LEN:()=>jl,TransactionHashPrefix:()=>vn,UDC:()=>cs,ZERO:()=>Mt});var L={};X(L,{JRPC:()=>NA,PAYMASTER_API:()=>oh,RPCSPEC08:()=>Gc,RPCSPEC09:()=>oi});var NA={},_p={};yp(_p,oi);yp(L,_p);var BA={};X(BA,{IS_BROWSER:()=>wp,addHexPrefix:()=>P,arrayBufferToString:()=>mp,atobUniversal:()=>bp,bigIntToUint8Array:()=>gt,btoaUniversal:()=>Ep,buf2hex:()=>Ar,calcByteLength:()=>vp,concatenateArrayBuffer:()=>bi,hexStringToUint8Array:()=>Ip,padLeft:()=>Ap,pascalToSnake:()=>OA,removeHexPrefix:()=>vt,sanitizeBytes:()=>Tp,sanitizeHex:()=>zl,stringToUint8Array:()=>Zo,uint8ArrayToBigInt:()=>as,utf8ToArray:()=>yr,utf8ToBigInt:()=>fe,utf8ToUint8Array:()=>Yo});var wp=typeof window<"u",Fl="0";function mp(t){return new Uint8Array(t).reduce((e,n)=>e+String.fromCharCode(n),"")}function Yo(t){return new TextEncoder().encode(t)}var yr=Yo;function fe(t){return as(Yo(t))}function bp(t){return Lf.decode(t)}function Ep(t){return Lf.encode(new Uint8Array(t))}function Ar(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function vt(t){return t.startsWith("0x")||t.startsWith("0X")?t.slice(2):t}function P(t){return`0x${vt(t)}`}function DA(t,e,n,r=Fl){const i=e-t.length;let s=t;return i>0&&(s=r.repeat(i)+t),s}function Ap(t,e,n=Fl){return DA(t,e,!0,n)}function vp(t,e=8){const{length:n}=t,r=n%e;return r?(n-r)/e*e+e:n}function Tp(t,e=8,n=Fl){return Ap(t,vp(t,e),n)}function zl(t){const e=vt(t),n=Tp(e,2);return n&&P(n)}var OA=t=>/[a-z]/.test(t)?t.split(/(?=[A-Z])/).join("_").toUpperCase():t;function bi(t){const e=t.reduce((i,s)=>i+s.byteLength,0),n=new Uint8Array(e);let r=0;return t.forEach(i=>{n.set(i,r),r+=i.byteLength}),n}function Ip(t){if(!Sp(P(t)))throw new Error(`Invalid hex string: "${t}"`);const e=vt(zl(t)),n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r/2]=parseInt(e.substring(r,r+2),16);return n}function Sp(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}function RA(t){return/^[0-9]+$/.test(t)}function Zo(t){if(Sp(t))return Ip(t);if(RA(t)){const e=BigInt(t);return gt(e)}return Yo(t)}function gt(t){if(t<0n)throw new Error(`Cannot convert negative bigint ${t} to Uint8Array`);if(t===0n)return new Uint8Array([0]);let e=t.toString(16);e.length%2!==0&&(e=`0${e}`);const n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r/2]=parseInt(e.substring(r,r+2),16);return n}function as(t){if(!t||t.length===0)return 0n;let e="0x";for(let n=0;n<t.length;n+=1)e+=t[n].toString(16).padStart(2,"0");return BigInt(e)}var jl=31,Mt=0n,xp=2n**250n-1n,Cp=2n**31n-1n,kp=Mt,at=2n**251n+17n*2n**192n+1n,Np=256n,ql=2n**251n-Np,he=(t,e)=>({min:t,max:e}),go=he(Mt,at-1n),Ei=he(Mt,2n**8n-1n),Ai=he(Mt,2n**16n-1n),MA=he(Mt,2n**32n-1n),vi=he(Mt,2n**64n-1n),Ti=he(Mt,2n**96n-1n),Lr=he(Mt,2n**128n-1n),Ii=he(-(2n**7n),2n**7n-1n),Si=he(-(2n**15n),2n**15n-1n),xi=he(-(2n**31n),2n**31n-1n),Ci=he(-(2n**63n),2n**63n-1n),Pr=he(-(2n**127n),2n**127n-1n),LA={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},cs={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},Bp="0x414e595f43414c4c4552",Dp="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",Op="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",PA=128,UA=2147483648n,$A={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},di={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},zt={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},vn={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},yn={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Rp={rpcVersion:"0.9.0",transactionVersion:L.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0,blake:void 0},Mp={SN_MAIN:["https://api.zan.top/public/starknet-mainnet/rpc/"],SN_SEPOLIA:["https://api.zan.top/public/starknet-sepolia/rpc/"]},Lp={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ct={legacyTxWarningMessage:`You are using a deprecated transaction version (V0,V1,V2)!
Update to the latest V3 transactions!`,legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},_c="0.14.1",VA=class ki{static instance;config;constructor(){this.initialize()}initialize(){this.config={...Rp}}static getInstance(){return ki.instance||(ki.instance=new ki),ki.instance}get(e,n){return this.config[e]??n}set(e,n){this.config[e]=n}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}},se=VA.getInstance(),Zs={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},HA=class Ni{static instance;config;constructor(){this.config=se}static getInstance(){return Ni.instance||(Ni.instance=new Ni),Ni.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){const n=this.config.get("logLevel","INFO");return e<=Zs[n]}formatMessage(e){const{level:n,message:r,timestamp:i,data:s}=e;let o=`[${i}] ${n}: ${r}`;if(s)try{o+=`
${JSON.stringify(s,null,2)}`}catch(a){o+=`
[JSON.stringify Error/Circular]: ${a}`}return o}log(e,n,r){if(!this.shouldLog(Zs[e]))return;const i={level:e,message:n,timestamp:this.getTimestamp(),data:r},s=this.formatMessage(i);switch(e){case"DEBUG":console.debug(s);break;case"INFO":console.info(s);break;case"WARN":console.warn(s);break;case"ERROR":case"FATAL":console.error(s);break;case"OFF":break;default:console.log(s);break}}debug(e,n){this.log("DEBUG",e,n)}info(e,n){this.log("INFO",e,n)}warn(e,n){this.log("WARN",e,n)}error(e,n){this.log("ERROR",e,n)}fatal(e,n){this.log("FATAL",e,n)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Zs).filter(e=>this.shouldLog(Zs[e])&&e!=="OFF")}},lt=HA.getInstance(),Bi={};X(Bi,{RpcChannel:()=>mv});var{ETransactionVersion:Gt}=oi,{ETransactionVersion3:Di}=oi,{EDataAvailabilityMode:yo}=Gc,{EDAMode:of}=Gc;function Qs(t){return"l1_data_gas"in t}var{ETransactionExecutionStatus:_o}=oi,{EBlockTag:Ht}=oi,cn={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},Wt={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},FA={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},Xn={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},zA="core::starknet::eth_address::EthAddress",jA="core::zeroable::NonZero::";function af(t){return"execute"in t}var qA={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},YA={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},Ur={UNSUPPORTED:"0",V1:"1",V2:"2"},ZA={};X(ZA,{parse:()=>vr,parseAlwaysAsBig:()=>WA,stringify:()=>oe});var KA=t=>{if(!ws(t))return parseFloat(t);const e=parseInt(t,10);return Number.isSafeInteger(e)?e:BigInt(t)},vr=t=>kh(String(t),void 0,KA),WA=t=>kh(String(t),void 0,E_),oe=(t,e,n,r)=>Nh(t,e,n,r),Pp=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;rpcMethods;constructor(t){this.nodeUrl=t.nodeUrl,this.headers=t.headers,this.interval=t.interval,this.baseFetch=t.baseFetch,this.rpcMethods=t.rpcMethods}async wait(){return(!this.delayPromise||!this.delayPromiseResolve)&&(this.delayPromise=new Promise(t=>{this.delayPromiseResolve=t})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(t,e,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:t.description||String(t),params:e??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(t){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:oe(t),headers:this.headers})).json()}async fetch(t,e,n){const r=this.addPendingRequest(t,e,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const a=this.sendBatch(Object.values(i));Object.keys(i).forEach(c=>{this.batchPromises[c]=a})}const s=await this.batchPromises[r];delete this.batchPromises[r];const o=s.find(a=>a.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(t)}`);return o}};function v(t,e){if(!t)throw new Error(e||"Assertion failure")}var Up={};X(Up,{addPercent:()=>te,assertInRange:()=>Zl,bigNumberishArrayToDecimalStringArray:()=>Hp,bigNumberishArrayToHexadecimalStringArray:()=>ei,cleanHex:()=>JA,getDecimalString:()=>e2,getHexString:()=>Fp,getHexStringArray:()=>Kl,getNext:()=>K,hexToBytes:()=>Ko,hexToDecimalString:()=>Vp,isBigNumberish:()=>_r,isHex:()=>Lt,isHexString:()=>QA,isStringWholeNumber:()=>Tr,stringToSha256ToArrayBuff4:()=>n2,toBigInt:()=>xt,toCairoBool:()=>zp,toHex:()=>B,toHex64:()=>t2,toHexString:()=>$p,toStorageKey:()=>Yl,tryToBigInt:()=>XA});var Tt=t=>typeof t>"u"||t===void 0;function tt(t){return typeof t=="number"}function ls(t){return typeof t=="boolean"}function Ft(t){return typeof t=="bigint"}function F(t){return typeof t=="string"}function Xs(t){return typeof Buffer<"u"&&t instanceof Buffer}function J(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function GA(t){return Number.isInteger(t)}function Lt(t){return/^0[xX][0-9a-fA-F]*$/.test(t)}var QA=Lt;function xt(t){return BigInt(t)}function XA(t){return t?BigInt(t):void 0}function B(t){return P(xt(t).toString(16))}var $p=B;function JA(t){return B(t)}function Yl(t){return P(xt(t).toString(16).padStart(64,"0"))}function t2(t){const e=P(xt(t).toString(16).padStart(64,"0"));if(e.length!==66)throw TypeError("number is too big for hex 0x(64) representation");return e}function Vp(t){return BigInt(P(t)).toString(10)}function Zl(t,e,n,r=""){const i=r===""?"invalid length":`invalid ${r} length`,s=BigInt(t),o=BigInt(e),a=BigInt(n);v(s>=o&&s<=a,`Message not signable, ${i}.`)}function Hp(t){return t.map(e=>xt(e).toString(10))}function ei(t){return t.map(e=>B(e))}function Tr(t){return/^\d+$/.test(t)}function e2(t){if(Lt(t))return Vp(t);if(Tr(t))return t;throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Fp(t){if(Lt(t))return t;if(Tr(t))return $p(t);throw new Error(`${t} needs to be a hex-string or whole-number-string`)}function Kl(t){return t.map(Fp)}function zp(t){return(+t).toString()}function Ko(t){if(!Lt(t))throw new Error(`${t} needs to be a hex-string`);let e=vt(t);return e.length%2!==0&&(e=`0${e}`),wn(e)}function te(t,e){const n=BigInt(t);return n+n*BigInt(e)/100n}function n2(t){const n=(r=>Number(r&Cp))(BigInt(P(Ar(hw(t)))));return Ko(B(n))}function _r(t){return tt(t)||Ft(t)||F(t)&&(Lt(t)||Tr(t))}function K(t){const e=t.next();if(e.done)throw new Error("Unexpected end of response");return e.value}var r2={};X(r2,{getL1MessageHash:()=>qp,getL2MessageHash:()=>jp,getSelector:()=>Ss,getSelectorFromName:()=>it,keccakBn:()=>Wl,solidityUint256PackedKeccak256:()=>xs,starknetKeccak:()=>Gl});function Wl(t){const e=vt(B(BigInt(t))),n=e.length%2===0?e:`0${e}`;return P(bn(Ko(P(n))).toString(16))}function i2(t){return P(bn(yr(t)).toString(16))}function Gl(t){return BigInt(i2(t))&xp}function it(t){return B(Gl(t))}function Ss(t){return tt(t)||Ft(t)?B(t):Lt(t)?t:Tr(t)?B(t):it(t)}function xs(t){const e=P(t.reduce((n,r)=>n+vt(B(r)).padStart(64,"0"),""));return P(ur(Xm(Ko(e))))}function jp(t,e,n,r,i){return xs([t,e,i,n,r.length,...r])}function qp(t,e,n){return xs([t,e,n.length,...n])}var s2={};X(s2,{decodeShortString:()=>ni,encodeShortString:()=>ut,isASCII:()=>Ql,isDecimalString:()=>Xl,isLongText:()=>Jl,isShortString:()=>Cs,isShortText:()=>o2,isText:()=>Ct,splitLongString:()=>tu});function Ql(t){return/^[\x00-\x7F]*$/.test(t)}function Cs(t){return t.length<=jl}function Xl(t){return/^[0-9]*$/i.test(t)}function Ct(t){return F(t)&&!Lt(t)&&!Tr(t)}var o2=t=>Ct(t)&&Cs(t),Jl=t=>Ct(t)&&!Cs(t);function tu(t){const e=RegExp(`[^]{1,${jl}}`,"g");return t.match(e)||[]}function ut(t){if(!Ql(t))throw new Error(`${t} is not an ASCII string`);if(!Cs(t))throw new Error(`${t} is too long`);return P(t.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function ni(t){if(!Ql(t))throw new Error(`${t} is not an ASCII string`);if(Lt(t))return vt(t).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(Xl(t))return ni("0X".concat(BigInt(t).toString(16)));throw new Error(`${t} is not Hex or decimal`)}var a2={};X(a2,{byteArrayFromString:()=>eu,stringFromByteArray:()=>c2});function c2(t){const e=BigInt(t.pending_word)===0n?"":ni(B(t.pending_word));return t.data.reduce((n,r)=>{const i=BigInt(r)===0n?"":ni(B(r));return n+i},"")+e}function eu(t){const e=tu(t),n=e[e.length-1],r=e.map(ut),[i,s]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?[]:r,pending_word:i,pending_word_len:s}}var Yp={};X(Yp,{felt:()=>Et,getAbiContractVersion:()=>iu,getArrayType:()=>Re,isCairo1Abi:()=>ru,isCairo1Type:()=>En,isLen:()=>wr,isTypeArray:()=>Ke,isTypeBool:()=>Qo,isTypeContractAddress:()=>b2,isTypeEnum:()=>Ir,isTypeEthAddress:()=>Sr,isTypeFelt:()=>ri,isTypeInt:()=>w2,isTypeLiteral:()=>nu,isTypeNamedTuple:()=>Zp,isTypeNonZero:()=>xr,isTypeOption:()=>Wo,isTypeResult:()=>Go,isTypeSecp256k1Point:()=>Xo,isTypeStruct:()=>ks,isTypeTuple:()=>Tn,isTypeU96:()=>Kp,isTypeUint:()=>us,isTypeUint256:()=>m2,tuple:()=>ii,uint256:()=>wc,uint512:()=>E2});function jt(t){return Object.defineProperty(t,"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}function Jn(t){if(Ft(t)||Number.isInteger(t))return t.toString();if(F(t)){if(Lt(t))return BigInt(t).toString();if(Ct(t)){if(!Cs(t))throw new Error(`${t} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(ut(t)).toString()}if(Tr(t))return t}if(ls(t))return`${+t}`;throw new Error(`${t} can't be computed by felt()`)}var ln=class Cn{data;static abiSelector="core::felt252";constructor(e){Cn.validate(e);const n=Cn.__processData(e);this.data=n.subarray(n.findIndex(r=>r>0))}static __processData(e){if(F(e))return Zo(e);if(Ft(e))return gt(e);if(Number.isInteger(e))return gt(BigInt(e));if(ls(e))return gt(BigInt(e?1:0));throw new Error(`${e} can't be computed by felt()`)}toBigInt(){return as(this.data)}decodeUtf8(){return new TextDecoder().decode(this.data)}toHexString(){return P(this.toBigInt().toString(16))}toApiRequest(){return jt([this.toHexString()])}static validate(e){v(e!==null,"null value is not allowed for felt252"),v(e!==void 0,"undefined value is not allowed for felt252"),v(F(e)||tt(e)||Ft(e)||ls(e),`Unsupported data type '${typeof e}' for felt252. Expected string, number, bigint, or boolean`);const n=Cn.__processData(e),r=as(n);v(r>=0n&&r<at,`Value ${n} is out of felt252 range [0, ${at})`)}static is(e){try{return Cn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Cn.abiSelector}static factoryFromApiResponse(e){return new Cn(K(e))}},Oi=(1n<<128n)-1n,l2=(1n<<256n)-1n,u2=0n,d2=340282366920938463463374607431768211455n,f2=340282366920938463463374607431768211455n,h2=0n,p2=0n,It=class kn{low;high;static abiSelector="core::integer::u256";constructor(...e){if(J(e[0])&&e.length===1&&"low"in e[0]&&"high"in e[0]){const n=kn.validateProps(e[0].low,e[0].high);this.low=n.low,this.high=n.high}else if(e.length===1){const n=kn.validate(e[0]);this.low=n&Oi,this.high=n>>128n}else if(e.length===2){const n=kn.validateProps(e[0],e[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(e){v(e!==null,"null value is not allowed for u256"),v(e!==void 0,"undefined value is not allowed for u256"),v(_r(e)||J(e),`Unsupported data type '${typeof e}' for u256. Expected string, number, bigint, or Uint256 object`);const n=BigInt(e);return v(n>=u2,"bigNumberish is smaller than UINT_256_MIN"),v(n<=l2,"bigNumberish is bigger than UINT_256_MAX"),n}static validateProps(e,n){const r=BigInt(e),i=BigInt(n);return v(r>=h2&&r<=d2,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),v(i>=p2&&i<=f2,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:i}}static is(e){try{kn.validate(e)}catch{return!1}return!0}static isAbiType(e){return e===kn.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=K(e);return new kn(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:P(this.low.toString(16)),high:P(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[Jn(this.low),Jn(this.high)]}},g2=(1n<<512n)-1n,y2=0n,_2=0n,ie=class Nn{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...e){if(J(e[0])&&e.length===1&&"limb0"in e[0]&&"limb1"in e[0]&&"limb2"in e[0]&&"limb3"in e[0]){const n=Nn.validateProps(e[0].limb0,e[0].limb1,e[0].limb2,e[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(e.length===1){const n=Nn.validate(e[0]);this.limb0=n&Oi,this.limb1=(n&Oi<<128n)>>128n,this.limb2=(n&Oi<<256n)>>256n,this.limb3=n>>384n}else if(e.length===4){const n=Nn.validateProps(e[0],e[1],e[2],e[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){v(e!==null,"null value is not allowed for u512"),v(e!==void 0,"undefined value is not allowed for u512"),v(_r(e)||J(e),`Unsupported data type '${typeof e}' for u512. Expected string, number, bigint, or Uint512 object`);const n=BigInt(e);return v(n>=y2,"bigNumberish is smaller than UINT_512_MIN."),v(n<=g2,"bigNumberish is bigger than UINT_512_MAX."),n}static validateProps(e,n,r,i){const s=BigInt(e),o=BigInt(n),a=BigInt(r),c=BigInt(i);return[s,o,a,c].forEach((l,u)=>{v(l>=_2&&l<=Oi,`limb${u} is not in the range of a u128 number`)}),{limb0:s,limb1:o,limb2:a,limb3:c}}static is(e){try{Nn.validate(e)}catch{return!1}return!0}static isAbiType(e){return e===Nn.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=K(e),i=K(e),s=K(e);return new Nn(n,r,i,s)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:P(this.limb0.toString(16)),limb1:P(this.limb1.toString(16)),limb2:P(this.limb2.toString(16)),limb3:P(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[Jn(this.limb0),Jn(this.limb1),Jn(this.limb2),Jn(this.limb3)]}},wr=t=>/_len$/.test(t),ri=t=>t==="felt"||t==="core::felt252",Ke=t=>/\*/.test(t)||t.startsWith("core::array::Array::")||t.startsWith("core::array::Span::"),Tn=t=>/^\(.*\)$/i.test(t),Zp=t=>/\(.*\)/i.test(t)&&t.includes(":"),ks=(t,e)=>t in e,Ir=(t,e)=>t in e,Wo=t=>t.startsWith("core::option::Option::"),Go=t=>t.startsWith("core::result::Result::"),us=t=>Object.values(Wt).includes(t),w2=t=>Object.values(FA).includes(t),m2=t=>It.isAbiType(t),nu=t=>Object.values(Xn).includes(t),Qo=t=>t==="core::bool",b2=t=>t===Xn.ContractAddress,Sr=t=>t===zA,Kp=t=>t==="core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>",Xo=t=>t===Xn.Secp256k1Point,En=t=>t.includes("::"),Re=t=>En(t)?t.substring(t.indexOf("<")+1,t.lastIndexOf(">")):t.replace("*","");function ru(t){const{cairo:e}=iu(t);if(e===void 0)throw Error("Unable to determine Cairo version");return e==="1"}function xr(t){return t.startsWith(jA)}function iu(t){if(t.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const e=t.find(r=>(r.type==="function"||r.type==="constructor")&&(r.inputs.length||r.outputs.length));if(!e)return{cairo:void 0,compiler:void 0};const n=e.inputs.length?e.inputs:e.outputs;return En(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var wc=t=>new It(t).toUint256DecimalString(),E2=t=>new ie(t).toUint512DecimalString(),ii=(...t)=>({...t});function Et(t){return Jn(t)}var Ns=class{variant;constructor(t){const e=Object.values(t);if(e.length===0)throw new Error("This Enum must have at least 1 variant");if(e.filter(r=>!Tt(r)).length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=t}unwrap(){return Object.values(this.variant).find(e=>!Tt(e))}activeVariant(){const e=Object.entries(this.variant).find(n=>!Tt(n[1]));return Tt(e)?"":e[0]}},we={Some:0,None:1},mc=class{Some;None;constructor(t,e){if(!(t in Object.values(we)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(t===we.Some){if(Tt(e))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=e,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!Tt(this.Some)}isNone(){return this.None===!0}},ee={Ok:0,Err:1},bc=class{Ok;Err;constructor(t,e){if(!(t in Object.values(ee)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");t===ee.Ok?(this.Ok=e,this.Err=void 0):(this.Ok=void 0,this.Err=e)}unwrap(){if(!Tt(this.Ok))return this.Ok;if(!Tt(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!Tt(this.Ok)}isErr(){return!Tt(this.Err)}},Pa={isBN:(t,e,n)=>{if(!Ft(t[n]))throw new Error(`Data and formatter mismatch on ${n}:${e[n]}, expected response data ${n}:${t[n]} to be BN instead it is ${typeof t[n]}`)},unknown:(t,e,n)=>{throw new Error(`Unhandled formatter type on ${n}:${e[n]} for data ${n}:${t[n]}`)}};function Js(t,e,n){return Object.entries(t).reduce((r,[i,s])=>{const o=n??e[i];if(!(i in e)&&!n)return r[i]=s,r;if(o==="string"){if(Array.isArray(t[i])){const a=Js(t[i],t[i].map(c=>o));return r[i]=Object.values(a).join(""),r}return Pa.isBN(t,e,i),r[i]=ni(s),r}if(o==="number")return Pa.isBN(t,e,i),r[i]=Number(s),r;if(typeof o=="function")return r[i]=o(s),r;if(Array.isArray(o)){const a=Js(t[i],o,o[0]);return r[i]=Object.values(a),r}return J(o)?(r[i]=Js(t[i],o),r):(Pa.unknown(t,e,i),r)},{})}var me=class $e{static MAX_BYTE_SIZE=31;data;static abiSelector="core::bytes_31::bytes31";constructor(e){$e.validate(e);const n=$e.__processData(e);this.data=new Uint8Array($e.MAX_BYTE_SIZE),this.data.set(n,$e.MAX_BYTE_SIZE-n.length)}static __processData(e){if(F(e))return Zo(e);if(Xs(e))return new Uint8Array(e);if(e instanceof Uint8Array)return new Uint8Array(e);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return as(this.data)}decodeUtf8(){const e=this.data.findIndex(r=>r>0),n=this.data.subarray(e>=0?e:1/0);return new TextDecoder().decode(n)}toHexString(e){const n=e==="padded"?Ar(this.data):this.toBigInt().toString(16);return P(n)}static validate(e){const n=$e.__processData(e).length;v(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(e){try{return $e.validate(e),!0}catch{return!1}}static isAbiType(e){return e===$e.abiSelector}static factoryFromApiResponse(e){return new $e(K(e))}},A2={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},v2=A2;function T2(t,e=t.constructor){const{captureStackTrace:n}=Error;n&&n(t,e)}function I2(t,e){const{setPrototypeOf:n}=Object;n?n(t,e):t.__proto__=e}var S2=class extends Error{name;constructor(t){super(t),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),I2(this,new.target.prototype),T2(this)}},St=class extends S2{},ds=class extends St{constructor(t,e,n){super(`RPC: ${e} with params ${oe(n,null,2)}

      ${t.code}: ${t.message}: ${oe(t.data)}`),this.baseError=t,this.request={method:e,params:n}}request;get code(){return this.baseError.code}isType(t){return v2[t]===this.code}},x2=se.get("buffer")||typeof Buffer<"u"&&Buffer||typeof globalThis<"u"&&globalThis.Buffer||typeof window<"u"&&window.Buffer||typeof global<"u"&&global.Buffer||class{constructor(){throw new St(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static from(t){throw new St(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static isBuffer(t){const e=se.get("buffer")||typeof Buffer<"u"&&Buffer;return e&&e.isBuffer&&e.isBuffer(t)}},Ks=class Bn{data;static abiSelector="core::u32::u32";constructor(e){Bn.validate(e),this.data=Bn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Bn.__processData(e);v(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(e){try{return Bn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Bn.abiSelector}static factoryFromApiResponse(e){return new Bn(K(e))}},Ye=class Or{data=[];pending_word;pending_word_len;static abiSelector="core::byte_array::ByteArray";constructor(...e){if(e.length===3){const[o,a,c]=e;v(Array.isArray(o)&&a instanceof ln&&c instanceof Ks,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=o,this.pending_word=a,this.pending_word_len=c;return}const n=e[0];Or.validate(n);const{data:r,pending_word:i,pending_word_len:s}=Or.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=s}static __processData(e){let n;if(e instanceof Uint8Array)n=e;else if(Xs(e))n=new Uint8Array(e);else if(F(e))n=Zo(e);else if(Ft(e))n=gt(e);else if(GA(e))n=gt(BigInt(e));else throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");const r=me.MAX_BYTE_SIZE,i=Math.floor(n.length/r),s=n.length%r,o=[];let a,c;for(let l=0;l<i;l+=1){const u=l*r,h=u+r,d=n.slice(u,h);o.push(new me(d))}if(s>0){const l=n.slice(i*r);let u="0x";for(let h=0;h<l.length;h+=1)u+=l[h].toString(16).padStart(2,"0");a=new ln(u),c=new Ks(s)}else a=new ln(0),c=new Ks(0);return{data:o,pending_word:a,pending_word_len:c}}toApiRequest(){return this.assertInitialized(),jt([P(this.data.length.toString(16)),...this.data.flatMap(e=>e.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const e=bi(this.toElements());return new TextDecoder().decode(e)}toBigInt(){const e=bi(this.toElements());if(e.length===0)return 0n;let n=0n;return e.forEach(r=>{n=n*256n+BigInt(r)}),n}toHexString(){const e=bi(this.toElements()),n=e.length===0?"0":Ar(e);return P(n)}toBuffer(){const e=bi(this.toElements());return x2.from(e)}toElements(){this.assertInitialized();const e=this.data.flatMap(r=>r.data),n=Number(this.pending_word_len.toBigInt());if(n){const r=new Uint8Array(n),i=n-this.pending_word.data.length;r.set(this.pending_word.data,i),e.push(r)}return e}assertInitialized(){v(this.data&&this.pending_word!==void 0&&this.pending_word_len!==void 0,"CairoByteArray is not properly initialized")}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!Array.isArray(e)||e instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),v(typeof e!="object"||Xs(e)||e instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),v(!tt(e)||e>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),v(!Ft(e)||e>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),v(e instanceof Uint8Array||Xs(e)||F(e)||tt(e)||Ft(e),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(e){try{return Or.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Or.abiSelector}static factoryFromApiResponse(e){const n=Array.from({length:Number(K(e))},()=>me.factoryFromApiResponse(e)),r=ln.factoryFromApiResponse(e),i=Ks.factoryFromApiResponse(e);return new Or(n,r,i)}},wo=class Dn{data;static abiSelector="core::integer::u8";constructor(e){Dn.validate(e),this.data=Dn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Dn.__processData(e);v(n>=Ei.min&&n<=Ei.max,`Value is out of u8 range [${Ei.min}, ${Ei.max}]`)}static is(e){try{return Dn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Dn.abiSelector}static factoryFromApiResponse(e){return new Dn(K(e))}},mo=class On{data;static abiSelector="core::integer::u16";constructor(e){On.validate(e),this.data=On.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=On.__processData(e);v(n>=Ai.min&&n<=Ai.max,`Value is out of u16 range [${Ai.min}, ${Ai.max}]`)}static is(e){try{return On.validate(e),!0}catch{return!1}}static isAbiType(e){return e===On.abiSelector}static factoryFromApiResponse(e){return new On(K(e))}},bo=class Rn{data;static abiSelector="core::integer::u64";constructor(e){Rn.validate(e),this.data=Rn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Rn.__processData(e);v(n>=vi.min&&n<=vi.max,`Value is out of u64 range [${vi.min}, ${vi.max}]`)}static is(e){try{return Rn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Rn.abiSelector}static factoryFromApiResponse(e){return new Rn(K(e))}},Eo=class Mn{data;static abiSelector="core::integer::u96";constructor(e){Mn.validate(e),this.data=Mn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Mn.__processData(e);v(n>=Ti.min&&n<=Ti.max,`Value is out of u96 range [${Ti.min}, ${Ti.max}]`)}static is(e){try{return Mn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Mn.abiSelector}static factoryFromApiResponse(e){return new Mn(K(e))}},Ao=class Ln{data;static abiSelector="core::integer::u128";constructor(e){Ln.validate(e),this.data=Ln.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data))}toHexString(){return P(this.toBigInt().toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Ln.__processData(e);v(n>=Lr.min&&n<=Lr.max,`Value is out of u128 range [${Lr.min}, ${Lr.max}]`)}static is(e){try{return Ln.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Ln.abiSelector}static factoryFromApiResponse(e){return new Ln(K(e))}},ir=class Pn{data;static abiSelector="core::integer::i8";constructor(e){Pn.validate(e),this.data=Pn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data>=0n?this.data:256n+this.data))}toHexString(){const e=this.toBigInt();if(e<0n){const n=at+e;return P(n.toString(16))}return P(e.toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Pn.__processData(e);v(n>=Ii.min&&n<=Ii.max,`Value is out of i8 range [${Ii.min}, ${Ii.max}]`)}static is(e){try{return Pn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Pn.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=BigInt(n),i=r>at/2n?r-at:r;return new Pn(i)}},sr=class Un{data;static abiSelector="core::integer::i16";constructor(e){Un.validate(e),this.data=Un.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data>=0n?this.data:65536n+this.data))}toHexString(){const e=this.toBigInt();if(e<0n){const n=at+e;return P(n.toString(16))}return P(e.toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Un.__processData(e);v(n>=Si.min&&n<=Si.max,`Value is out of i16 range [${Si.min}, ${Si.max}]`)}static is(e){try{return Un.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Un.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=BigInt(n),i=r>at/2n?r-at:r;return new Un(i)}},or=class $n{data;static abiSelector="core::integer::i32";constructor(e){$n.validate(e),this.data=$n.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const e=this.toBigInt();if(e<0n){const n=at+e;return P(n.toString(16))}return P(e.toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=$n.__processData(e);v(n>=xi.min&&n<=xi.max,`Value is out of i32 range [${xi.min}, ${xi.max}]`)}static is(e){try{return $n.validate(e),!0}catch{return!1}}static isAbiType(e){return e===$n.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=BigInt(n),i=r>at/2n?r-at:r;return new $n(i)}},ar=class Vn{data;static abiSelector="core::integer::i64";constructor(e){Vn.validate(e),this.data=Vn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const e=this.toBigInt();if(e<0n){const n=at+e;return P(n.toString(16))}return P(e.toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Vn.__processData(e);v(n>=Ci.min&&n<=Ci.max,`Value is out of i64 range [${Ci.min}, ${Ci.max}]`)}static is(e){try{return Vn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Vn.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=BigInt(n),i=r>at/2n?r-at:r;return new Vn(i)}},cr=class Hn{data;static abiSelector="core::integer::i128";constructor(e){Hn.validate(e),this.data=Hn.__processData(e)}static __processData(e){return F(e)&&Ct(e)?fe(e):BigInt(e)}toApiRequest(){return jt([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(gt(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const e=this.toBigInt();if(e<0n){const n=at+e;return P(n.toString(16))}return P(e.toString(16))}static validate(e){v(e!=null,"Invalid input: null or undefined"),v(!J(e)&&!Array.isArray(e),"Invalid input: objects are not supported"),v(!tt(e)||Number.isInteger(e),"Invalid input: decimal numbers are not supported, only integers");const n=Hn.__processData(e);v(n>=Pr.min&&n<=Pr.max,`Value is out of i128 range [${Pr.min}, ${Pr.max}]`)}static is(e){try{return Hn.validate(e),!0}catch{return!1}}static isAbiType(e){return e===Hn.abiSelector}static factoryFromApiResponse(e){const n=K(e),r=BigInt(n),i=r>at/2n?r-at:r;return new Hn(i)}},Wp={request:{[me.abiSelector]:t=>new me(t).toApiRequest(),[Ye.abiSelector]:t=>new Ye(t).toApiRequest(),[ln.abiSelector]:t=>Et(t),[It.abiSelector]:t=>new It(t).toApiRequest(),[ie.abiSelector]:t=>new ie(t).toApiRequest(),[wo.abiSelector]:t=>Et(t),[mo.abiSelector]:t=>Et(t),[bo.abiSelector]:t=>Et(t),[Eo.abiSelector]:t=>Et(t),[Ao.abiSelector]:t=>Et(t),[ir.abiSelector]:t=>new ir(t).toApiRequest(),[sr.abiSelector]:t=>new sr(t).toApiRequest(),[or.abiSelector]:t=>new or(t).toApiRequest(),[ar.abiSelector]:t=>new ar(t).toApiRequest(),[cr.abiSelector]:t=>new cr(t).toApiRequest()},response:{[me.abiSelector]:t=>me.factoryFromApiResponse(t).decodeUtf8(),[Ye.abiSelector]:t=>Ye.factoryFromApiResponse(t).decodeUtf8(),[ln.abiSelector]:t=>BigInt(K(t)),[It.abiSelector]:t=>It.factoryFromApiResponse(t).toBigInt(),[ie.abiSelector]:t=>ie.factoryFromApiResponse(t).toBigInt(),[wo.abiSelector]:t=>BigInt(K(t)),[mo.abiSelector]:t=>BigInt(K(t)),[bo.abiSelector]:t=>BigInt(K(t)),[Eo.abiSelector]:t=>BigInt(K(t)),[Ao.abiSelector]:t=>BigInt(K(t)),[ir.abiSelector]:t=>BigInt(K(t)),[sr.abiSelector]:t=>BigInt(K(t)),[or.abiSelector]:t=>BigInt(K(t)),[ar.abiSelector]:t=>BigInt(K(t)),[cr.abiSelector]:t=>BigInt(K(t))}},C2=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Wp}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.reduce((e,n)=>wr(n.name)?e:e+1,0)}getMethod(t){return this.abi.find(e=>e.name===t)}getLegacyFormat(){return this.abi}},k2=class{abi;parsingStrategy;constructor(t,e){this.abi=t,this.parsingStrategy=e||Wp}getRequestParser(t){if(this.parsingStrategy.request[t])return this.parsingStrategy.request[t];throw new Error(`Parser for ${t} not found`)}getResponseParser(t){if(this.parsingStrategy.response[t])return this.parsingStrategy.response[t];throw new Error(`Parser for ${t} not found`)}methodInputsLength(t){return t.inputs.length}getMethod(t){return this.abi.find(n=>n.type==="interface")?.items?.find(n=>n.name===t)}getLegacyFormat(){return this.abi.flatMap(t=>t.type==="interface"?t.items:t)}};function Ec(t,e){const n=N2(t);if(n===0||n===1)return new C2(t,e);if(n===2)return new k2(t,e);throw Error(`Unsupported ABI version ${n}`)}function N2(t){return t.find(e=>e.type==="interface")?2:ru(t)?1:0}function cf(t,e,n){return t==="constructor"&&!n&&!e.length}function B2(t){const e=t.substring(0,t.indexOf(":")),n=t.substring(e.length+1);return{name:e,type:n}}function D2(t){if(!t.includes("("))return{subTuple:[],result:t};const e=[];let n="",r=0;for(;r<t.length;){if(t[r]==="("){let i=1;const s=r;for(r++;i;)t[r]===")"&&i--,t[r]==="("&&i++,r++;e.push(t.substring(s,r)),n+=" ",r--}else n+=t[r];r++}return{subTuple:e,result:n}}function O2(t){const e=t.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=D2(e);let i=r.split(",").map(s=>n.length?s.replace(" ",n.shift()):s);return Zp(t)&&(i=i.reduce((s,o)=>s.concat(B2(o)),[])),i}function lf(t,e,n){for(let r=0,i=0;r<t.length;r++)if(t[r]===e)i++;else if(t[r]===n&&--i===0)return r;return Number.POSITIVE_INFINITY}function R2(t){const e=t.slice(1,-1),n=[];let r=0,i;for(;r<e.length;){switch(!0){case e[r]==="(":{i=r+lf(e.slice(r),"(",")")+1;break}case(e.startsWith("core::result::Result::<",r)||e.startsWith("core::array::Array::<",r)||e.startsWith("core::option::Option::<",r)):{i=r+lf(e.slice(r),"<",">")+1;break}default:{const s=e.indexOf(",",r);i=s!==-1?s:Number.POSITIVE_INFINITY}}n.push(e.slice(r,i)),r=i+2}return n}function su(t){return En(t)?R2(t):O2(t)}var Dt=class Fn{content;arrayType;constructor(e,n){v(Fn.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{Fn.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=Fn.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}v(r===e.length,`The ABI type ${n} is expecting ${r} items. ${e.length} items provided.`),this.content=e,this.arrayType=n}static getFixedArraySize(e){const n=e.match(new RegExp("(?<=; )\\d+(?=\\])"));if(n===null)throw new Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(n[0])}getFixedArraySize(){return Fn.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{const n=e.match(new RegExp("(?<=\\[).+(?=;)"));if(n===null)throw new Error(`ABI type ${e} do not includes a valid type of data.`);return n[0]};getFixedArrayType(){return Fn.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((n,r,i)=>(n[i]=r,n),{})}compile(){return Fn.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&new RegExp("(?<=\\[).+(?=;)").test(e)&&new RegExp("(?<=; )\\d+(?=\\])").test(e)}};function M2(t){return Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`)}function L2(t){return Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`)}function P2(t,e,n,r){const i=(h,d)=>{if(Dt.isTypeFixedArray(d))return a(h,d);if(Ke(d))return o(h,d);if(Ir(d,r)){const f=r[d];return l(h,f)}if(Tn(d))return c(h,d);if(Sr(d)||xr(d)||Ye.isAbiType(d)||Kp(d)||Xo(d))return h;if(It.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!("low"in f&&"high"in f))throw M2(d);return{low:f.low,high:f.high}}if(ie.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!["limb0","limb1","limb2","limb3"].every(g=>g in f))throw L2(d);return{limb0:f.limb0,limb1:f.limb1,limb2:f.limb2,limb3:f.limb3}}if(ks(d,n)){const f=n[d].members;return s(h,f)}return h},s=(h,d)=>d.reduce((g,y)=>{const p=_=>Object.defineProperty(g,y.name,{enumerable:!0,value:_??h[y.name]});if(h[y.name]==="undefined"&&(En(y.type)||!wr(y.name)))throw Error(`Your object needs a property with key : ${y.name} .`);return p(i(h[y.name],y.type)),g},{});function o(h,d){const f=Re(d);return F(h)?h:h.map(g=>i(g,f))}function a(h,d){const f=Dt.getFixedArrayType(d),g=Dt.getFixedArraySize(d);if(Array.isArray(h)){if(g!==h.length)throw new Error(`ABI type ${d}: array provided do not includes  ${g} items. ${h.length} items provided.`);return h.map(y=>i(y,f))}if(g!==Object.keys(h).length)throw new Error(`ABI type ${d}: object provided do not includes  ${g} properties. ${Object.keys(h).length} items provided.`);return i(h,f)}function c(h,d){return su(d).reduce((y,p,_)=>{const b=Object.keys(h),w=I=>Object.defineProperty(y,_.toString(),{enumerable:!0,value:I??h[b[_]]}),m=p?.type?p.type:p;return w(i(h[b[_]],m)),y},{})}const l=(h,d)=>{if(Go(d.name)){const p=h,_=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(",")),b=d.name.substring(d.name.indexOf(",")+1,d.name.lastIndexOf(">"));return p.isOk()?new bc(ee.Ok,i(h.unwrap(),_)):new bc(ee.Err,i(h.unwrap(),b))}if(Wo(d.name)){const p=h,_=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(">"));return p.isSome()?new mc(we.Some,i(p.unwrap(),_)):new mc(we.None,{})}const f=h,y=Object.entries(f.variant).map(p=>{if(Tt(p[1]))return p;const _=d.type.substring(d.type.lastIndexOf("<")+1,d.type.lastIndexOf(">"));return _==="()"?p:[p[0],i(f.unwrap(),_)]});return new Ns(Object.fromEntries(y))};return e.reduce((h,d)=>{const f=g=>Object.defineProperty(h,d.name,{enumerable:!0,value:g});return wr(d.name)&&!En(d.type)||f(i(t[d.name],d.type)),h},{})}function qr({type:t,val:e,parser:n}){switch(!0){case It.isAbiType(t):return n.getRequestParser(t)(e);case ie.isAbiType(t):return n.getRequestParser(t)(e);case wo.isAbiType(t):return n.getRequestParser(t)(e);case mo.isAbiType(t):return n.getRequestParser(t)(e);case bo.isAbiType(t):return n.getRequestParser(t)(e);case Eo.isAbiType(t):return n.getRequestParser(t)(e);case Ao.isAbiType(t):return n.getRequestParser(t)(e);case ir.isAbiType(t):return n.getRequestParser(t)(e);case sr.isAbiType(t):return n.getRequestParser(t)(e);case or.isAbiType(t):return n.getRequestParser(t)(e);case ar.isAbiType(t):return n.getRequestParser(t)(e);case cr.isAbiType(t):return n.getRequestParser(t)(e);case me.isAbiType(t):return n.getRequestParser(t)(e);case Xo(t):{const r=vt(B(e)).padStart(128,"0"),i=wc(P(r.slice(-64))),s=wc(P(r.slice(0,-64)));return[Et(s.low),Et(s.high),Et(i.low),Et(i.high)]}default:return n.getRequestParser(ln.abiSelector)(e)}}function U2(t,e){const n=su(e),r=Object.values(t);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((i,s)=>({element:r[s],type:i.type??i}))}function le({element:t,type:e,structs:n,enums:r,parser:i}){if(t===void 0)throw Error(`Missing parameter for type ${e}`);if(Dt.isTypeFixedArray(e)){const s=Dt.getFixedArrayType(e);let o=[];if(Array.isArray(t))o=new Dt(t,e).content;else if(typeof t=="object")o=Object.values(t),v(o.length===Dt.getFixedArraySize(e),`ABI type ${e}: object provided do not includes  ${Dt.getFixedArraySize(e)} items. ${o.length} items provided.`);else throw new Error(`ABI type ${e}: not an Array representing a cairo.fixedArray() provided.`);return o.reduce((a,c)=>a.concat(le({element:c,type:s,structs:n,enums:r,parser:i})),[])}if(Array.isArray(t)){const s=[];s.push(Et(t.length));const o=Re(e);return t.reduce((a,c)=>a.concat(le({element:c,type:o,structs:n,enums:r,parser:i})),s)}if(It.isAbiType(e)||ie.isAbiType(e))return i.getRequestParser(e)(t);if(n[e]&&n[e].members.length){if(Sr(e))return qr({type:e,val:t,parser:i});if(Ye.isAbiType(e))return i.getRequestParser(e)(t);const{members:s}=n[e],o=t;return s.reduce((a,c)=>a.concat(le({element:o[c.name],type:c.type,structs:n,enums:r,parser:i})),[])}if(Tn(e))return U2(t,e).reduce((o,a)=>{const c=le({element:a.element,type:a.type,structs:n,enums:r,parser:i});return o.concat(c)},[]);if(Ir(e,r)){const{variants:s}=r[e];if(Wo(e)){const d=t;if(d.isSome()){const f=s.find(p=>p.name==="Some");if(Tt(f))throw Error("Error in abi : Option has no 'Some' variant.");const g=f.type;if(g==="()")return we.Some.toString();const y=le({element:d.unwrap(),type:g,structs:n,enums:r,parser:i});return Array.isArray(y)?[we.Some.toString(),...y]:[we.Some.toString(),y]}return we.None.toString()}if(Go(e)){const d=t;if(d.isOk()){const p=s.find(w=>w.name==="Ok");if(Tt(p))throw Error("Error in abi : Result has no 'Ok' variant.");const _=p.type;if(_==="()")return ee.Ok.toString();const b=le({element:d.unwrap(),type:_,structs:n,enums:r,parser:i});return Array.isArray(b)?[ee.Ok.toString(),...b]:[ee.Ok.toString(),b]}const f=s.find(p=>p.name==="Err");if(Tt(f))throw Error("Error in abi : Result has no 'Err' variant.");const g=f.type;if(g==="()")return ee.Err.toString();const y=le({element:d.unwrap(),type:g,structs:n,enums:r,parser:i});return Array.isArray(y)?[ee.Err.toString(),...y]:[ee.Err.toString(),y]}const o=t,a=o.activeVariant(),c=s.find(d=>d.name===a);if(Tt(c))throw Error(`Not find in abi : Enum has no '${a}' variant.`);const l=c.type,u=s.findIndex(d=>d.name===a);if(l==="()")return u.toString();const h=le({element:o.unwrap(),type:l,structs:n,enums:r,parser:i});return Array.isArray(h)?[u.toString(),...h]:[u.toString(),h]}if(xr(e))return qr({type:Re(e),val:t,parser:i});if(typeof t=="object")throw Error(`Parameter ${t} do not align with abi parameter ${e}`);return qr({type:e,val:t,parser:i})}function $2({argsIterator:t,input:e,structs:n,enums:r,parser:i}){const{name:s,type:o}=e;let{value:a}=t.next();switch(!0){case Dt.isTypeFixedArray(o):if(!Array.isArray(a)&&typeof a!="object")throw Error(`ABI expected parameter ${s} to be an array or an object, got ${a}`);return le({element:a,type:e.type,structs:n,enums:r,parser:i});case Ke(o):if(!Array.isArray(a)&&!Ct(a))throw Error(`ABI expected parameter ${s} to be array or long string, got ${a}`);return F(a)&&(a=tu(a)),le({element:a,type:e.type,structs:n,enums:r,parser:i});case xr(o):return qr({type:Re(o),val:a,parser:i});case Sr(o):return qr({type:o,val:a,parser:i});case(ks(o,n)||Tn(o)||It.isAbiType(o)):return le({element:a,type:o,structs:n,enums:r,parser:i});case Ir(o,r):return le({element:a,type:o,structs:n,enums:r,parser:i});default:return qr({type:o,val:a,parser:i})}}function Ac(t,e,n){let r;switch(!0){case Qo(t):return r=e.next().value,!!BigInt(r);case It.isAbiType(t):return n.getResponseParser(t)(e);case ie.isAbiType(t):return n.getResponseParser(t)(e);case wo.isAbiType(t):return n.getResponseParser(t)(e);case mo.isAbiType(t):return n.getResponseParser(t)(e);case bo.isAbiType(t):return n.getResponseParser(t)(e);case Eo.isAbiType(t):return n.getResponseParser(t)(e);case Ao.isAbiType(t):return n.getResponseParser(t)(e);case ir.isAbiType(t):return n.getResponseParser(t)(e);case sr.isAbiType(t):return n.getResponseParser(t)(e);case or.isAbiType(t):return n.getResponseParser(t)(e);case ar.isAbiType(t):return n.getResponseParser(t)(e);case cr.isAbiType(t):return n.getResponseParser(t)(e);case Sr(t):return r=e.next().value,BigInt(r);case me.isAbiType(t):return n.getResponseParser(t)(e);case Xo(t):const i=vt(e.next().value).padStart(32,"0"),s=vt(e.next().value).padStart(32,"0"),o=vt(e.next().value).padStart(32,"0"),a=vt(e.next().value).padStart(32,"0");return BigInt(P(s+i+a+o));default:return n.getResponseParser(ln.abiSelector)(e)}}function Qt(t,e,n,r,i){if(e.type==="()")return{};if(It.isAbiType(e.type)||ie.isAbiType(e.type)||Ye.isAbiType(e.type))return n.getResponseParser(e.type)(t);if(Dt.isTypeFixedArray(e.type)){const s=[],o={type:Dt.getFixedArrayType(e.type)},a=Dt.getFixedArraySize(e.type);for(;s.length<a;)s.push(Qt(t,o,n,r,i));return s}if(Ke(e.type)){const s=[],o={type:Re(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Qt(t,o,n,r,i));return s}if(xr(e.type)){const s={type:Re(e.type)};return Qt(t,s,n,r,i)}if(r&&e.type in r&&r[e.type])return Sr(e.type)?Ac(e.type,t,n):r[e.type].members.reduce((s,o)=>(s[o.name]=Qt(t,o,n,r,i),s),{});if(i&&e.type in i&&i[e.type]){const s=Number(t.next().value),o=i[e.type].variants.reduce((c,l,u)=>u===s?(c[l.name]=Qt(t,{type:l.type},n,r,i),c):(c[l.name]=void 0,c),{});if(e.type.startsWith("core::option::Option")){const c=s===we.Some?o.Some:void 0;return new mc(s,c)}if(e.type.startsWith("core::result::Result")){let c;return s===ee.Ok?c=o.Ok:c=o.Err,new bc(s,c)}return new Ns(o)}if(Tn(e.type))return su(e.type).reduce((o,a,c)=>{const l=a?.name?a.name:c,h={type:a?.type?a.type:a};return o[l]=Qt(t,h,n,r,i),o},{});if(Ke(e.type)){const s=[],o={type:Re(e.type)},a=BigInt(t.next().value);for(;s.length<a;)s.push(Qt(t,o,n,r,i));return s}return Ac(e.type,t,n)}function vo({responseIterator:t,output:e,structs:n,enums:r,parsedResult:i,parser:s}){const{name:o,type:a}=e;let c;switch(!0){case wr(o):return c=t.next().value,BigInt(c);case(n&&a in n||Tn(a)):return Qt(t,e,s,n,r);case(r&&Ir(a,r)):return Qt(t,e,s,n,r);case Dt.isTypeFixedArray(a):return Qt(t,e,s,n,r);case Ke(a):if(En(a))return Qt(t,e,s,n,r);const l=[];if(i&&i[`${o}_len`]){const u=i[`${o}_len`];for(;l.length<u;)l.push(Qt(t,{type:e.type.replace("*","")},s,n,r))}return l;case xr(a):return Qt(t,e,s,n,r);default:return Ac(a,t,s)}}var ou=(t,e)=>{if(v(F(t)||tt(t)||Ft(t),`Validate: arg ${e.name} should be a felt typed as (String, Number or BigInt)`),F(t)&&!Lt(t))return;const n=BigInt(t.toString(10));v(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`)},Jo=(t,e)=>{tt(t)&&v(t<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),v(F(t)||tt(t)||Ft(t)||J(t)&&"low"in t&&"high"in t||J(t)&&["limb0","limb1","limb2","limb3"].every(r=>r in t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (String, Number or BigInt), but is ${typeof t} ${t}.`);let n;switch(e.type){case Wt.u256:n=new It(t).toBigInt();break;case Wt.u512:n=new ie(t).toBigInt();break;default:n=xt(t)}switch(e.type){case Wt.u8:v(n>=0n&&n<=255n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0 - 255]`);break;case Wt.u16:v(n>=0n&&n<=65535n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 65535]`);break;case Wt.u32:v(n>=0n&&n<=4294967295n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 4294967295]`);break;case Wt.u64:v(n>=0n&&n<=2n**64n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^64-1]`);break;case Wt.u128:v(n>=0n&&n<=2n**128n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^128-1]`);break;case Wt.u256:v(n>=0n&&n<=2n**256n-1n,`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^256-1`);break;case Wt.u512:v(ie.is(n),`Validate: arg ${e.name} is ${e.type} should be in range 0 - 2^512-1`);break;case Xn.ClassHash:v(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case Xn.ContractAddress:v(n>=0n&&n<=2n**252n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^252-1]`);break;case Xn.Secp256k1Point:{v(n>=0n&&n<=2n**512n-1n,`Validate: arg ${e.name} must be ${e.type} : a 512 bits number.`);break}case Xn.U96:{v(n>=0n&&n<=2n**96n-1n,`Validate: arg ${e.name} must be ${e.type} : a 96 bits number.`);break}}},Gp=(t,e)=>{v(ls(t),`Validate: arg ${e.name} of cairo type ${e.type} should be type (Boolean)`)},Qp=(t,e,n)=>{if(e.type===Wt.u256||e.type===Wt.u512){Jo(t,e);return}if(Sr(e.type)){v(!J(t),`EthAddress type is waiting a BigNumberish. Got "${t}"`);const r=BigInt(t.toString(10));v(r>=0n&&r<=2n**160n-1n,`Validate: arg ${e.name} cairo typed ${e.type} should be in range [0, 2^160-1]`);return}v(J(t),`Validate: arg ${e.name} is cairo type struct (${e.type}), and should be defined as a js object (not array)`),n[e.type].members.forEach(({name:r})=>{v(Object.keys(t).includes(r),`Validate: arg ${e.name} should have a property ${r}`)})},Xp=(t,e)=>{v(J(t),`Validate: arg ${e.name} is cairo type Enum (${e.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(t)),r=[...Object.getOwnPropertyNames(t),...n];if(!(Wo(e.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(Go(e.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${e.name}, type ${e.type}, value received "${t}", is not an Enum.`)},Jp=(t,e)=>{v(J(t),`Validate: arg ${e.name} should be a tuple (defined as object)`)},tg=(t,e,n,r)=>{const i=Ke(e.type),s=i?Re(e.type):Dt.getFixedArrayType(e.type);if(i&&ri(s)&&Jl(t))return;let o=[];if(i)v(Array.isArray(t),`Validate: arg ${e.name} should be an Array`),o=t;else switch(!0){case Array.isArray(t):o=t;break;case typeof t=="object":o=Object.values(t);break;default:throw new Error(`Validate: arg ${e.name} should be an Array or an object.`)}switch(!0){case ri(s):o.forEach(a=>ou(a,e));break;case Tn(s):o.forEach(a=>Jp(a,{name:e.name}));break;case Ke(s):o.forEach(a=>tg(a,{name:"",type:s},n,r));break;case ks(s,n):o.forEach(a=>Qp(a,{name:e.name,type:s},n));break;case Ir(s,r):o.forEach(a=>Xp(a,{name:e.name,type:s}));break;case(us(s)||nu(s)):o.forEach(a=>Jo(a,{name:"",type:s}));break;case Qo(s):o.forEach(a=>Gp(a,e));break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${o}`)}},V2=(t,e)=>{const n=Re(e.type);switch(v(us(n)&&n!==ie.abiSelector||ri(n),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case ri(n):ou(t,e),v(BigInt(t.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case us(n):Jo(t,{name:"",type:n}),n===Wt.u256?v(new It(t).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):v(xt(t)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${t}"`)}};function uf(t,e,n,r){t.inputs.reduce((i,s)=>{const o=e[i];switch(!0){case wr(s.name):return i;case ri(s.type):ou(o,s);break;case me.isAbiType(s.type):me.validate(o);break;case(us(s.type)||nu(s.type)):Jo(o,s);break;case Qo(s.type):Gp(o,s);break;case Ye.isAbiType(s.type):Ye.validate(o);break;case ir.isAbiType(s.type):ir.validate(o);break;case sr.isAbiType(s.type):sr.validate(o);break;case or.isAbiType(s.type):or.validate(o);break;case ar.isAbiType(s.type):ar.validate(o);break;case cr.isAbiType(s.type):cr.validate(o);break;case(Ke(s.type)||Dt.isTypeFixedArray(s.type)):tg(o,s,n,r);break;case ks(s.type,n):Qp(o,s,n);break;case Ir(s.type,r):Xp(o,s);break;case Tn(s.type):Jp(o,s);break;case xr(s.type):V2(o,s);break;default:throw new Error(`Validate Unhandled: argument ${s.name}, type ${s.type}, value ${o}`)}return i+1},0)}var V=class Ri{abi;parser;structs;enums;constructor(e,n){this.structs=Ri.getAbiStruct(e),this.enums=Ri.getAbiEnum(e),this.parser=Ec(e,n),this.abi=this.parser.getLegacyFormat()}validate(e,n,r=[]){if(e!==cn.DEPLOY){const o=this.abi.filter(a=>{if(a.type!=="function")return!1;const c=a.stateMutability==="view"||a.state_mutability==="view";return e===cn.INVOKE?!c:c}).map(a=>a.name);v(o.includes(n),`${e===cn.INVOKE?"invocable":"viewable"} method not found in abi`)}const i=this.abi.find(o=>e===cn.DEPLOY?o.name===n&&o.type==="constructor":o.name===n&&o.type==="function");if(cf(n,r,i))return;const s=this.parser.methodInputsLength(i);if(r.length!==s)throw Error(`Invalid number of arguments, expected ${s} arguments, but got ${r.length}`);uf(i,r,this.structs,this.enums)}compile(e,n){const r=this.abi.find(a=>a.name===e);if(cf(e,n,r))return[];let i;if(Array.isArray(n))i=n;else{const a=P2(n,r.inputs,this.structs,this.enums);i=Object.values(a),uf(r,i,this.structs,this.enums)}const s=i[Symbol.iterator](),o=r.inputs.reduce((a,c)=>wr(c.name)&&!En(c.type)?a:a.concat($2({argsIterator:s,input:c,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(o,"__compiled__",{enumerable:!1,writable:!1,value:!0}),o}static compile(e){const n=i=>{const s=(a,c=".")=>{const l=Array.isArray(a)?[a.length.toString(),...a]:a;return Object.entries(l).flatMap(([u,h])=>{let d=h;u==="entrypoint"?d=it(d):Jl(d)&&(d=eu(d));const f=Array.isArray(l)&&u==="0"?"$$len":u;if(Ft(d))return[[`${c}${f}`,Et(d)]];if(Object(d)===d){const g=Object.getOwnPropertyNames(Object.getPrototypeOf(d)),y=[...Object.getOwnPropertyNames(d),...g];if(y.includes("isSome")&&y.includes("isNone")){const p=d,_=p.isSome()?we.Some:we.None;return p.isSome()?s({0:_,1:p.unwrap()},`${c}${f}.`):[[`${c}${f}`,Et(_)]]}if(y.includes("isOk")&&y.includes("isErr")){const p=d,_=p.isOk()?ee.Ok:ee.Err;return s({0:_,1:p.unwrap()},`${c}${f}.`)}if(y.includes("variant")&&y.includes("activeVariant")){const p=d,_=p.activeVariant(),w=Object.keys(p.variant).findIndex(m=>m===_);return typeof p.unwrap()=="object"&&Object.keys(p.unwrap()).length===0?[[`${c}${f}`,Et(w)]]:s({0:w,1:p.unwrap()},`${c}${f}.`)}return s(d,`${c}${f}.`)}return[[`${c}${f}`,Et(d)]]})};return Object.fromEntries(s(i))};let r;if(Array.isArray(e)){const i={...e},s=n(i);r=Object.values(s)}else{const i=n(e);r=Object.values(i)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(e,n){const{outputs:r}=this.abi.find(o=>o.name===e),i=n.flat()[Symbol.iterator](),s=r.flat().reduce((o,a,c)=>{const l=a.name??c;return o[l]=vo({responseIterator:i,output:a,structs:this.structs,enums:this.enums,parsedResult:o,parser:this.parser}),o[l]&&o[`${l}_len`]&&delete o[`${l}_len`],o},{});return Object.keys(s).length===1&&0 in s?s[0]:s}format(e,n,r){const i=this.parse(e,n);return Js(i,r)}static getAbiStruct(e){return e.filter(n=>n.type==="struct").reduce((n,r)=>({...n,[r.name]:r}),{})}static getAbiEnum(e){const n=e.filter(r=>r.type==="enum").reduce((r,i)=>({...r,[i.name]:i}),{});return delete n["core::bool"],n}static toCalldata(e=[]){return Ri.compile(e)}static toHex(e=[]){return Ri.compile(e).map(r=>B(r))}decodeParameters(e,n){const r=Array.isArray(e)?e:[e],i=n.flat()[Symbol.iterator](),s=r.map(o=>vo({responseIterator:i,output:{name:"",type:o},parser:this.parser,structs:this.structs,enums:this.enums}));return s.length===1?s[0]:s}},H2={};X(H2,{COMPILED_CLASS_VERSION:()=>cu,blake2sHashMany:()=>mr,calculateContractAddressFromHash:()=>ji,calculateDeclareTransactionHash:()=>dg,calculateDeployAccountTransactionHash:()=>fg,calculateInvokeTransactionHash:()=>ug,calculateL2MessageTxHash:()=>lg,computeCompiledClassHash:()=>Sg,computeCompiledClassHashBlake:()=>Tg,computeCompiledClassHashPoseidon:()=>bg,computeContractClassHash:()=>Ig,computeHashOnElements:()=>Ce,computeHintedClassHash:()=>gg,computeLegacyContractClassHash:()=>yg,computePedersenHash:()=>hs,computePedersenHashOnElements:()=>pg,computePoseidonHash:()=>_g,computePoseidonHashOnElements:()=>wg,computeSierraContractClassHash:()=>Eg,encodeBuiltins:()=>lu,flattenEntryPointData:()=>nv,formatSpaces:()=>fs,getL1MessageHash:()=>qp,getL2MessageHash:()=>jp,getSelector:()=>Ss,getSelectorFromName:()=>it,hashByteCodeSegments:()=>mg,hashByteCodeSegmentsBlake:()=>vg,keccakBn:()=>Wl,nullSkipReplacer:()=>hg,poseidon:()=>cb,solidityUint256PackedKeccak256:()=>xs,starknetKeccak:()=>Gl});var F2={};X(F2,{calculateDeclareTransactionHash:()=>ag,calculateDeployAccountTransactionHash:()=>og,calculateInvokeTransactionHash:()=>cg,calculateTransactionHashCommon:()=>ea,encodeDataResourceBoundsL1:()=>ig,encodeResourceBoundsL1:()=>ng,encodeResourceBoundsL2:()=>rg,hashDAMode:()=>eg,hashFeeFieldV3B3:()=>sg});var _n=t=>t.map(e=>BigInt(e)),z2=32n,j2=64n,ta=128n,au=j2+ta,q2=BigInt(ut("L1_GAS")),Y2=BigInt(ut("L2_GAS")),Z2=BigInt(ut("L1_DATA"));function eg(t,e){return(BigInt(t)<<z2)+BigInt(e)}function ng(t){return(q2<<au)+(t.l1_gas.max_amount<<ta)+t.l1_gas.max_price_per_unit}function rg(t){return(Y2<<au)+(t.l2_gas.max_amount<<ta)+t.l2_gas.max_price_per_unit}function ig(t){return(Z2<<au)+(t.l1_data_gas.max_amount<<ta)+t.l1_data_gas.max_price_per_unit}function sg(t,e){const n=ng(e),r=rg(e),i=ig(e);return yt([BigInt(t),n,r,i])}function ea(t,e,n,r,i,s,o,a,c,l,u=[]){const h=sg(s,l),d=eg(a,c),f=_n([t,e,n,h,yt(_n(o)),r,i,d,..._n(u)]);return B(yt(f))}function og(t,e,n,r,i,s,o,a,c,l,u,h){return ea(vn.DEPLOY_ACCOUNT,i,t,s,o,u,h,a,c,l,[yt(_n(n)),e,r])}function ag(t,e,n,r,i,s,o,a,c,l,u,h){return ea(vn.DECLARE,r,n,i,s,u,_n(h),a,c,l,[yt(_n(o)),t,e])}function cg(t,e,n,r,i,s,o,a,c,l,u){return ea(vn.INVOKE,e,t,r,i,l,u,o,a,c,[yt(_n(s)),yt(_n(n))])}var K2={};X(K2,{calculateDeclareTransactionHash:()=>G2,calculateDeployAccountTransactionHash:()=>Q2,calculateL2MessageTxHash:()=>lg,calculateTransactionHash:()=>X2,calculateTransactionHashCommon:()=>Bs,computeHashOnElements:()=>vc});var W2={};X(W2,{starkCurve:()=>Pm,weierstrass:()=>wb});function vc(t){return[...t,t.length].reduce((e,n)=>ai(xt(e),xt(n)),0).toString()}function Bs(t,e,n,r,i,s,o,a=[]){const c=vc(i),l=[t,e,n,r,c,s,o,...a];return vc(l)}function G2(t,e,n,r,i,s,o){return Bs(vn.DECLARE,n,e,0,[t],r,i,[s,...o?[o]:[]])}function Q2(t,e,n,r,i,s,o,a){const c=[e,r,...n];return Bs(vn.DEPLOY_ACCOUNT,i,t,0,c,s,o,[a])}function X2(t,e,n,r,i,s){return Bs(vn.INVOKE,e,t,0,n,r,i,[s])}function lg(t,e,n,r,i,s){const o=[t,...r];return Bs(vn.L1_HANDLER,0,e,Ss(n),o,0,i,[s])}function J2(t){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(t.version)}function ug(t){if(J2(t))return cg(t.senderAddress,t.version,t.compiledCalldata,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function tv(t){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(t.version)}function dg(t){if(tv(t))return ag(t.classHash,t.compiledClassHash,t.senderAddress,t.version,t.chainId,t.nonce,t.accountDeploymentData,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function ev(t){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(t.version)}function fg(t){if(ev(t))return og(t.contractAddress,t.classHash,t.compiledConstructorCalldata,t.salt,t.version,t.chainId,t.nonce,t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode,t.resourceBounds,t.tip,t.paymasterData);throw new Error("Invalid Tx version for hash calculation")}var cu="COMPILED_CLASS_V1";function fs(t){let e=!1;const n=[];for(const r of t)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(e=!e),e?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function hg(t,e){return t==="attributes"||t==="accessible_scopes"?Array.isArray(e)&&e.length===0?void 0:e:t==="debug_info"?null:e===null?void 0:e}function lu(t){return t.map(e=>BigInt(ut(e)))}function nv(t,e){return t.flatMap((n,r)=>[BigInt(n.selector),BigInt(n.offset),...e[r]])}function hs(t,e){return ai(BigInt(t),BigInt(e))}function Ce(t){return[...t,t.length].reduce((e,n)=>ai(BigInt(e),BigInt(n)),0).toString()}var pg=Ce;function ji(t,e,n,r){const i=V.compile(n),s=Ce(i),o=Et("0x535441524b4e45545f434f4e54524143545f41444452455353"),a=Ce([o,r,t,e,s]);return B(BigInt(a)%ql)}function gg(t){const{abi:e,program:n}=t,i=fs(oe({abi:e,program:n},hg));return P(bn(yr(i)).toString(16))}function yg(t){const e=F(t)?vr(t):t,n=B(kp),r=Ce(e.entry_points_by_type.EXTERNAL.flatMap(l=>[l.selector,l.offset])),i=Ce(e.entry_points_by_type.L1_HANDLER.flatMap(l=>[l.selector,l.offset])),s=Ce(e.entry_points_by_type.CONSTRUCTOR.flatMap(l=>[l.selector,l.offset])),o=Ce(e.program.builtins.map(l=>ut(l))),a=gg(e),c=Ce(e.program.data);return Ce([n,r,i,s,o,a,c])}function _g(t,e){return B(Ol(BigInt(t),BigInt(e)))}function wg(t){return B(yt(t.map(e=>BigInt(e))))}function rv(t){return yt(lu(t))}function Ua(t){const e=t.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),rv(n.builtins)]);return yt(e)}function mg(t){const e=t.bytecode.map(s=>BigInt(s)),n=t.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(s=>{const o=e.slice(r,r+=s);return[BigInt(s),yt(o)]});return 1n+yt(i)}function bg(t){const e=BigInt(ut(cu)),n=Ua(t.entry_points_by_type.EXTERNAL),r=Ua(t.entry_points_by_type.L1_HANDLER),i=Ua(t.entry_points_by_type.CONSTRUCTOR),s=t.bytecode_segment_lengths?mg(t):yt(t.bytecode.map(o=>BigInt(o)));return B(yt([e,n,r,i,s]))}function $a(t){const e=t.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return yt(e)}function iv(t){const e=fs(oe(t.abi,null));return BigInt(P(bn(yr(e)).toString(16)))}function Eg(t){const n=BigInt(ut("CONTRACT_CLASS_V0.1.0")),r=$a(t.entry_points_by_type.EXTERNAL),i=$a(t.entry_points_by_type.L1_HANDLER),s=$a(t.entry_points_by_type.CONSTRUCTOR),o=iv(t),a=yt(t.sierra_program.map(c=>BigInt(c)));return B(yt([n,r,i,s,o,a]))}function sv(t){return se.get("blake")?.(t)||vb(t,{dkLen:32})}function mr(t){const e=0x8000000000000000n,r=[],i=new ArrayBuffer(32),s=new DataView(i);for(const u of t){const h=u&0xffffffffffffffffn,d=(u&0xffffffffffffffff0000000000000000n)>>64n,f=(u&0xffffffffffffffff00000000000000000000000000000000n)>>128n,g=(u&0xffffffffffffffff000000000000000000000000000000000000000000000000n)>>192n;if(s.setBigUint64(0,g,!1),s.setBigUint64(8,f,!1),s.setBigUint64(16,d,!1),s.setBigUint64(24,h,!1),u<e){const y=s.getUint32(24,!1),p=s.getUint32(28,!1);r.push(y,p)}else{const y=s.getUint32(0,!1)|2147483648,p=s.getUint32(4,!1),_=s.getUint32(8,!1),b=s.getUint32(12,!1),w=s.getUint32(16,!1),m=s.getUint32(20,!1),I=s.getUint32(24,!1),k=s.getUint32(28,!1);r.push(y,p,_,b,w,m,I,k)}}const o=new ArrayBuffer(r.length*4),a=new DataView(o);for(let u=0;u<r.length;u++)a.setUint32(u*4,r[u],!0);const c=sv(new Uint8Array(o));let l=0n;for(let u=0;u<32;u++)l|=BigInt(c[u])<<BigInt(u*8);return l%at}function ov(t){return mr(lu(t))}function Va(t){const e=t.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),ov(n.builtins)]);return mr(e)}function Ag(t,e){if(typeof e=="number"){const o=[];for(let a=0;a<e;a++){const c=t.next();if(c.done)throw new Error("Bytecode length mismatch");o.push(c.value)}return[e,mr(o)]}const n=e.map(o=>Ag(t,o)),r=n.flatMap(([o,a])=>[BigInt(o),a]),i=mr(r)+1n;return[n.reduce((o,[a])=>o+a,0),i]}function vg(t){const e=t.bytecode.map(o=>BigInt(o)),n=t.bytecode_segment_lengths;if(!n)return mr(e);const r=e[Symbol.iterator](),[i,s]=Ag(r,n);if(i!==e.length)throw new Error(`Bytecode length mismatch: expected ${e.length}, got ${i}`);return s}function Tg(t){const e=BigInt(ut(cu)),n=Va(t.entry_points_by_type.EXTERNAL),r=Va(t.entry_points_by_type.L1_HANDLER),i=Va(t.entry_points_by_type.CONSTRUCTOR),s=vg(t);return B(mr([e,n,r,i,s]))}function Mi(t){const e=t.version?B(t.version):Gt.V3;return e===Gt.V3||e===Gt.F3}function je(t,e){const n=t.split("."),r=e.split(".");return n.every((i,s)=>i==="*"||i===r[s])}function uu(t,e={allowAnyPatchVersion:!1}){return Object.values(yn).some(n=>je(e.allowAnyPatchVersion?av(n):n,t))}function av(t){const e=t.split(".");return e.length<3?t:`${e[0]}.${e[1]}.*`}function cv(t){const[e,n]=t.replace(/^v/,"").split(".");return`v${e}_${n}`}function lv(t,e){const n=t.split(".").map(Number),r=e.split(".").map(Number),i=Math.max(n.length,r.length);for(let s=0;s<i;s+=1){const o=n[s]||0,a=r[s]||0;if(o>a)return 1;if(o<a)return-1}return 0}function Ig(t){const e=F(t)?vr(t):t;return"sierra_program"in e?Eg(e):yg(e)}function Sg(t,e=_c){return lv(e,_c)>=0?Tg(t):bg(t)}var uv={};X(uv,{ZeroFeeEstimate:()=>kg,compressProgram:()=>du,decompressProgram:()=>To,formatSignature:()=>Ds,getFullPublicKey:()=>fv,intDAM:()=>zn,randomAddress:()=>fu,resourceBoundsToBigInt:()=>hv,resourceBoundsToEstimateFeeResponse:()=>Cg,resourceBoundsToHexString:()=>$r,signatureToDecimalArray:()=>dv,signatureToHexArray:()=>Ne,toFeeVersion:()=>Ng,toOverheadOverallFee:()=>Tc,toOverheadResourceBounds:()=>Io,toTransactionVersion:()=>qi,v3Details:()=>Pt,zeroResourceBounds:()=>xg});function du(t){const e=F(t)?t:oe(t),n=XE(e);return Ep(n)}function To(t){if(Array.isArray(t))return t;const e=mp(JE(bp(t)));return vr(e)}function fu(){const t=kl.randomPrivateKey();return Bl(t)}function Ds(t){if(!t)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(t))return t.map(e=>B(e));try{const{r:e,s:n}=t;return[B(e),B(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function dv(t){return Hp(Ds(t))}function Ne(t){return ei(Ds(t))}function xg(){return Io(kg(),!1)}function Io(t,e=se.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:te(t.l2_gas_consumed,e!==!1?e.l2_gas.max_amount:0),max_price_per_unit:te(t.l2_gas_price,e!==!1?e.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:te(t.l1_gas_consumed,e!==!1?e.l1_gas.max_amount:0),max_price_per_unit:te(t.l1_gas_price,e!==!1?e.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:te(t.l1_data_gas_consumed,e!==!1?e.l1_data_gas.max_amount:0),max_price_per_unit:te(t.l1_data_gas_price,e!==!1?e.l1_data_gas.max_price_per_unit:0)}}}function Cg(t){return{resourceBounds:t,overall_fee:t.l1_gas.max_amount*t.l1_gas.max_price_per_unit+t.l1_data_gas.max_amount*t.l1_data_gas.max_price_per_unit+t.l2_gas.max_amount*t.l2_gas.max_price_per_unit,unit:"FRI"}}function Tc(t,e=se.get("resourceBoundsOverhead")){return te(t.l1_gas_consumed,e!==!1?e.l1_gas.max_amount:0)*te(t.l1_gas_price,e!==!1?e.l1_gas.max_price_per_unit:0)+te(t.l1_data_gas_consumed,e!==!1?e.l1_data_gas.max_amount:0)*te(t.l1_data_gas_price,e!==!1?e.l1_data_gas.max_price_per_unit:0)+te(t.l2_gas_consumed,e!==!1?e.l2_gas.max_amount:0)*te(t.l2_gas_price,e!==!1?e.l2_gas.max_price_per_unit:0)}function kg(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function zn(t){if(t===yo.L1)return of.L1;if(t===yo.L2)return of.L2;throw Error("EDAM conversion")}function qi(t,e){const n=B(e||t);if(!Object.values(Di).includes(n))throw Error(`${e?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function Ng(t){if(!t)return;const e=B(t);if(e===Gt.V0)return Gt.F0;if(e===Gt.V1)return Gt.F1;if(e===Gt.V2)return Gt.F2;if(e===Gt.V3)return Gt.F3;throw Error(`toFeeVersion: ${e} is not supported`)}function Pt(t){return{tip:t.tip||0,paymasterData:t.paymasterData||[],accountDeploymentData:t.accountDeploymentData||[],nonceDataAvailabilityMode:t.nonceDataAvailabilityMode||yo.L1,feeDataAvailabilityMode:t.feeDataAvailabilityMode||yo.L1,resourceBounds:t.resourceBounds??xg()}}function fv(t){const e=B(t);return P(Ar(Cl(e,!1)))}function $r(t){const e=n=>{if(Ft(n))return B(n);if(J(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=e(n[i])}),r}return n};return e(t)}function hv(t){const e=n=>{if(F(n))return BigInt(n);if(J(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=e(n[i])}),r}return n};return e(t)}function Ze(t){return"sierra_program"in(F(t)?vr(t):t)}function Vr(t,e){const n={...t};if(Ze(t.contract)&&(!t.compiledClassHash&&t.casm&&(n.compiledClassHash=Sg(t.casm,e)),!n.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(n.classHash=t.classHash??Ig(t.contract),!n.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return n}var pv={};X(pv,{ethRandomPrivateKey:()=>gv,validateAndParseEthAddress:()=>hu});function gv(){return zl(Ar(fp.utils.randomPrivateKey()))}function hu(t){Zl(t,Mt,2n**160n-1n,"Ethereum Address ");const e=P(vt(B(t)).padStart(40,"0"));return v(!!e.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),e}var So=typeof globalThis<"u"&&globalThis.fetch.bind(globalThis)||typeof window<"u"&&window.fetch.bind(window)||typeof global<"u"&&global.fetch.bind(global)||(()=>{throw new St("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),yv={};X(yv,{Block:()=>q,createSierraContractClass:()=>Bg,extractAbi:()=>Dg,getDefaultNodeUrl:()=>ps,getDefaultNodes:()=>Og,getSupportedRpcVersions:()=>_v,parseContract:()=>pu,validBlockTags:()=>Rg,wait:()=>un});function un(t){return new Promise(e=>{setTimeout(e,t)})}function Bg(t){const e={...t};return delete e.sierra_program_debug_info,e.abi=fs(oe(t.abi)),e.sierra_program=fs(oe(t.sierra_program)),e.sierra_program=du(e.sierra_program),e}function pu(t){const e=F(t)?vr(t):t;return Ze(t)?Bg(e):{...e,..."program"in e&&{program:du(e.program)}}}function Dg(t){return F(t.abi)?vr(t.abi):t.abi}var ps=(t,e=!1,n)=>{e||lt.info("Using default public node url, please provide nodeUrl in provider options!");const i=Og(n??se.get("rpcVersion"))[t??di.SN_SEPOLIA],s=Math.floor(Math.random()*i.length);return i[s]};function Og(t){const e=cv(t);return Object.fromEntries(Object.entries(Mp).map(([n,r])=>[n,r.map(i=>`${i}${e}`)]))}function _v(){return[...new Set(Object.values(yn))]}var Rg=Object.values(Ht),q=class{hash=null;number=null;tag=null;setIdentifier(t){if(F(t))if(Xl(t))this.number=parseInt(t,10);else if(Lt(t))this.hash=t;else if(Rg.includes(t))this.tag=t;else throw TypeError(`Block identifier unmanaged: ${t}`);else Ft(t)?this.hash=B(t):tt(t)?this.number=t:this.tag=Ht.LATEST;if(tt(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(t){this.setIdentifier(t)}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(t){this.setIdentifier(t)}valueOf=()=>this.number;toString=()=>this.hash},wv={};X(wv,{fromCallsToExecuteCalldata:()=>Lg,fromCallsToExecuteCalldata_cairo1:()=>Pg,getCompiledCalldata:()=>Hr,getExecuteCalldata:()=>gu,getVersionsByType:()=>yu,transformCallsToMulticallArrays:()=>Mg});function Hr(t,e){return Array.isArray(t)&&"__compiled__"in t?t:Array.isArray(t)&&Array.isArray(t[0])&&"__compiled__"in t[0]?t[0]:e()}var Mg=t=>{const e=[],n=[];return t.forEach(r=>{const i=V.compile(r.calldata||[]);e.push({to:xt(r.contractAddress).toString(10),selector:xt(it(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:i.length.toString()}),n.push(...i)}),{callArray:e,calldata:V.compile({calldata:n})}},Lg=t=>{const{callArray:e,calldata:n}=Mg(t);return[...V.compile({callArray:e}),...n]},Pg=t=>{const e=t.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:V.compile(n.calldata)}));return V.compile({orderCalls:e})},gu=(t,e="0")=>e==="1"?Pg(t):Lg(t);function yu(t){return t==="fee"?{v3:Gt.F3}:{v3:Gt.V3}}var Ha={headers:{"Content-Type":"application/json"},blockIdentifier:Ht.LATEST,retries:200},mv=class{id="RPC081";channelSpecVersion=yn.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(di).includes(o)?this.nodeUrl=ps(o,t?.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=ps(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||se.get("fetch")||So,this.blockIdentifier=r??Ha.blockIdentifier,this.chainId=i,this.headers={...Ha.headers,...s},this.retries=a??Ha.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,tt(n)&&(this.batchClient=new Pp({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),lt.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oe(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ds(n,t,e);if(r instanceof St)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:s,result:o}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,s),o}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(je(this.channelSpecVersion,t)||lt.error(ct.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!uu(t))throw new St(`${ct.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=B(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new q(r).identifier,s=ei(t),o=ei(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=B(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(t=this.blockIdentifier){return(await this.getBlockWithTxHashes(t)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new q(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=B(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new q(n).identifier,o=[];return r&&o.push(Li.SKIP_VALIDATE),i&&o.push(Li.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(a=>this.buildTransaction(a)),simulation_flags:o})}async waitForTransaction(t,e){const n=B(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[Pi.REJECTED],l=e?.successStates??[Pi.ACCEPTED_ON_L2,Pi.ACCEPTED_ON_L1],u={[dn.RECEIVED]:ct.txEvictedFromMempool,[dn.PRE_CONFIRMED]:ct.consensusFailed,[dn.CANDIDATE]:ct.txFailsBlockBuildingValidation},h=[];let d;for(;!s;){await un(a);try{d=await this.getTransactionStatus(n),h.push(d.finality_status);const g=d.execution_status,y=d.finality_status;if(!y)throw new Error("waiting for transaction status");if(c.includes(g)||c.includes(y)){const p=`${g}: ${y}`,_=new Error(p);throw _.response=d,o=!0,_}else(l.includes(g)||l.includes(y))&&(s=!0)}catch(g){if(g instanceof Error&&o)throw g;if(g instanceof ds&&g.isType("TXN_HASH_NOT_FOUND")){lt.info("txLife: ",h);const y=u[h.at(-1)];if(y&&i<=0)throw new Error(y);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await un(a)}return f}getStorageAt(t,e,n=this.blockIdentifier){const r=B(t),i=Yl(e),s=new q(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new q(e).identifier,i={simulation_flags:n?[Li.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(s=>this.buildTransaction(s,"fee")),block_id:r,...i})}async invoke(t,e){let n;if(Mi(e))if(Qs(e.resourceBounds))n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Ve.INVOKE,sender_address:t.contractAddress,calldata:V.toHex(t.calldata),version:Jt.V3,signature:Ne(t.signature),nonce:B(e.nonce),resource_bounds:$r(e.resourceBounds),tip:B(e.tip),paymaster_data:e.paymasterData.map(r=>B(r)),account_deployment_data:e.accountDeploymentData.map(r=>B(r)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}});else throw Error(ct.SWOldV3);else throw Error(ct.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:t,signature:e,senderAddress:n,compiledClassHash:r},i){let s;if(Ze(t)&&Mi(i))if(Qs(i.resourceBounds))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Ve.DECLARE,sender_address:n,compiled_class_hash:r||"",version:Jt.V3,signature:Ne(e),nonce:B(i.nonce),contract_class:{sierra_program:To(t.sierra_program),contract_class_version:t.contract_class_version,entry_points_by_type:t.entry_points_by_type,abi:t.abi},resource_bounds:$r(i.resourceBounds),tip:B(i.tip),paymaster_data:i.paymasterData.map(o=>B(o)),account_deployment_data:i.accountDeploymentData.map(o=>B(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ct.SWOldV3);else throw Error(ct.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:t,constructorCalldata:e,addressSalt:n,signature:r},i){let s;if(Mi(i))if(Qs(i.resourceBounds))s=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Ve.DEPLOY_ACCOUNT,version:Jt.V3,signature:Ne(r),nonce:B(i.nonce),contract_address_salt:B(n||0),constructor_calldata:V.toHex(e||[]),class_hash:B(t),resource_bounds:$r(i.resourceBounds),tip:B(i.tip),paymaster_data:i.paymasterData.map(o=>B(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ct.SWOldV3);else throw Error(ct.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(t,e=this.blockIdentifier){const n=new q(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:it(t.entrypoint),calldata:V.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:hu(n),to_address:B(r),entry_point_selector:Ss(i),payload:Kl(s)},a=new q(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=yu(e);let r;if(Mi(t))r={signature:Ne(t.signature),nonce:B(t.nonce),resource_bounds:$r(t.resourceBounds),tip:B(t.tip),paymaster_data:t.paymasterData.map(i=>B(i)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(i=>B(i))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(t.type===Ve.INVOKE)return{type:Ve.INVOKE,sender_address:t.contractAddress,calldata:V.toHex(t.calldata),version:B(t.version||n.v3),...r};if(t.type===Ve.DECLARE){if(!Ze(t.contract))throw lt.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:t.type,contract_class:{...t.contract,sierra_program:To(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,version:B(t.version||n.v3),...r}}if(t.type===Ve.DEPLOY_ACCOUNT){const{account_deployment_data:i,...s}=r;return{type:t.type,constructor_calldata:V.toHex(t.constructorCalldata||[]),class_hash:B(t.classHash),contract_address_salt:B(t.addressSalt||0),version:B(t.version||n.v3),...s}}throw Error("RPC buildTransaction received unknown TransactionType")}},Zn={};X(Zn,{RpcChannel:()=>bv});var Fa={headers:{"Content-Type":"application/json"},blockIdentifier:Ht.LATEST,retries:200},bv=class{id="RPC090";channelSpecVersion=yn.v0_9_0;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(t){const{baseFetch:e,batch:n,blockIdentifier:r,chainId:i,headers:s,nodeUrl:o,retries:a,specVersion:c,transactionRetryIntervalFallback:l,waitMode:u}=t||{};Object.values(di).includes(o)?this.nodeUrl=ps(o,t?.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=ps(void 0,t?.default,this.channelSpecVersion),this.baseFetch=e||se.get("fetch")||So,this.blockIdentifier=r??Fa.blockIdentifier,this.chainId=i,this.headers={...Fa.headers,...s},this.retries=a??Fa.retries,this.specVersion=c,this.transactionRetryIntervalFallback=l,this.waitMode=u??!1,this.requestId=0,tt(n)&&(this.batchClient=new Pp({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),lt.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(t){this.chainId=t}fetch(t,e,n=0){const r={id:n,jsonrpc:"2.0",method:t,...e&&{params:e}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oe(r),headers:this.headers})}errorHandler(t,e,n,r){if(n)throw new ds(n,t,e);if(r instanceof St)throw r;if(r)throw Error(r.message)}async fetchEndpoint(t,e){try{if(this.batchClient){const{error:s,result:o}=await this.batchClient.fetch(t,e,this.requestId+=1);return this.errorHandler(t,e,s),o}const n=await this.fetch(t,e,this.requestId+=1),{error:r,result:i}=await n.json();return this.errorHandler(t,e,r),i}catch(n){throw this.errorHandler(t,e,n?.response?.data,n),n}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const t=await this.fetchEndpoint("starknet_specVersion");if(je(this.channelSpecVersion,t)||lt.error(ct.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!uu(t))throw new St(`${ct.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=t}return this.specVersion}getMessagesStatus(t){const e=B(t);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:e})}getStorageProof(t=[],e=[],n=[],r=this.blockIdentifier){const i=new q(r).identifier,s=ei(t),o=ei(e);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:s,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(t){const e=B(t);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:e})}getNonceForAddress(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}async getStarknetVersion(t=this.blockIdentifier){return(await this.getBlockWithTxHashes(t)).starknet_version}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:e})}getBlockWithTxs(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:e})}getBlockWithReceipts(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:e})}getBlockStateUpdate(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:e})}getBlockTransactionsTraces(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:e})}getBlockTransactionCount(t=this.blockIdentifier){const e=new q(t).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:e})}getTransactionByHash(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:e})}getTransactionByBlockIdAndIndex(t,e){const n=new q(t).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:e})}getTransactionReceipt(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:e})}getTransactionTrace(t){const e=B(t);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:e})}getTransactionStatus(t){const e=B(t);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:e})}simulateTransaction(t,e={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=e,s=new q(n).identifier,o=[];return r&&o.push(Ui.SKIP_VALIDATE),i&&o.push(Ui.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:t.map(a=>this.buildTransaction(a)),simulation_flags:o})}async waitForTransaction(t,e){const n=B(t);let r=e?.retries??this.retries,i=e?.lifeCycleRetries??3,s=!1,o=!1;const a=e?.retryInterval??this.transactionRetryIntervalDefault,c=e?.errorStates??[],l=e?.successStates??[jn.ACCEPTED_ON_L2,jn.ACCEPTED_ON_L1],u={[dn.RECEIVED]:ct.txEvictedFromMempool,[dn.PRE_CONFIRMED]:ct.consensusFailed,[dn.CANDIDATE]:ct.txFailsBlockBuildingValidation},h=[];let d;for(;!s;){await un(a);try{d=await this.getTransactionStatus(n),h.push(d.finality_status);const g=d.execution_status,y=d.finality_status;if(!y)throw new Error("waiting for transaction status");if(c.includes(g)||c.includes(y)){const p=`${g}: ${y}`,_=new Error(p);throw _.response=d,o=!0,_}else(l.includes(g)||l.includes(y))&&(s=!0)}catch(g){if(g instanceof Error&&o)throw g;if(g instanceof ds&&g.isType("TXN_HASH_NOT_FOUND")){lt.info("txLife: ",h);const y=u[h.at(-1)];if(y&&i<=0)throw new Error(y);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await un(a)}return f}async fastWaitForTransaction(t,e,n,r){const i=BigInt(n);let s=r?.retries??50;const o=r?.retryInterval??500,a=[cl.REVERTED],c=[jn.ACCEPTED_ON_L2,jn.ACCEPTED_ON_L1,jn.PRE_CONFIRMED];let l;const u=new Date().getTime();for(;s>0;){await un(o),l=await this.getTransactionStatus(t),lt.info(`${s} ${JSON.stringify(l)} ${(new Date().getTime()-u)/1e3}s.`);const h=l.execution_status??"",d=l.finality_status;if(a.includes(h)){const f=`${h}: ${d}`,g=new Error(f);throw g.response=l,g}else if(c.includes(d)){let f=i;for(;f===i&&s>0;){if(f=BigInt(await this.getNonceForAddress(e,Ht.PRE_CONFIRMED)),lt.info(`${s} Checking new nonce ${f} ${(new Date().getTime()-u)/1e3}s.`),f!==i)return!0;await un(o),s-=1}return!1}s-=1}return!1}getStorageAt(t,e,n=this.blockIdentifier){const r=B(t),i=Yl(e),s=new q(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:s})}getClassHashAt(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(t,e=this.blockIdentifier){const n=B(t),r=new q(e).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(t,{blockIdentifier:e=this.blockIdentifier,skipValidate:n=!0}={}){const r=new q(e).identifier,i={simulation_flags:n?[Ui.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:t.map(s=>this.buildTransaction(s,"fee")),block_id:r,...i})}async invoke(t,e){const n=this.buildTransaction({type:L.ETransactionType.INVOKE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(t,e){const n=this.buildTransaction({type:L.ETransactionType.DECLARE,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(t,e){const n=this.buildTransaction({type:L.ETransactionType.DEPLOY_ACCOUNT,...t,...e},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(t,e=this.blockIdentifier){const n=new q(e).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:t.contractAddress,entry_point_selector:it(t.entrypoint),calldata:V.toHex(t.calldata)},block_id:n})}estimateMessageFee(t,e=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:s}=t,o={from_address:hu(n),to_address:B(r),entry_point_selector:Ss(i),payload:Kl(s)},a=new q(e).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(t){return this.fetchEndpoint("starknet_getEvents",{filter:t})}buildTransaction(t,e){const n=yu(e);v(Mi(t),ct.legacyTxRPC08Message),v(e!=="transaction"||Qs(t.resourceBounds),ct.SWOldV3);const r={signature:Ne(t.signature),nonce:B(t.nonce),resource_bounds:$r(t.resourceBounds),tip:B(t.tip),paymaster_data:t.paymasterData.map(i=>B(i)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode,account_deployment_data:t.accountDeploymentData.map(i=>B(i)),version:qi(n.v3,t.version)};if(t.type===L.ETransactionType.INVOKE)return{type:al.INVOKE,sender_address:t.contractAddress,calldata:V.toHex(t.calldata),...r};if(t.type===L.ETransactionType.DECLARE)return v(Ze(t.contract),"Declaring non Sierra contract using RPC 0.9"),{type:t.type,contract_class:{...t.contract,sierra_program:To(t.contract.sierra_program)},compiled_class_hash:t.compiledClassHash||"",sender_address:t.senderAddress,...r};if(t.type===L.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:i,...s}=r;return{type:t.type,constructor_calldata:V.toHex(t.constructorCalldata||[]),class_hash:B(t.classHash),contract_address_salt:B(t.addressSalt||0),...s}}throw Error("RPC buildTransaction received unknown TransactionType")}};typeof WebSocket<"u"&&WebSocket||typeof globalThis<"u"&&globalThis.WebSocket||typeof window<"u"&&window.WebSocket&&window.WebSocket.bind(window)||typeof global<"u"&&global.WebSocket;var df=class{resourceBoundsOverhead;constructor(t){this.resourceBoundsOverhead=t}parseGetBlockResponse(t){return t}parseTransactionReceipt(t){return t}parseFeeEstimateBulkResponse(t){return t.map(e=>({resourceBounds:Io(e,this.resourceBoundsOverhead),overall_fee:Tc(e,this.resourceBoundsOverhead),unit:e.unit}))}parseSimulateTransactionResponse(t){return t.map(e=>({transaction_trace:e.transaction_trace,resourceBounds:Io(e.fee_estimation,this.resourceBoundsOverhead),overall_fee:Tc(e.fee_estimation,this.resourceBoundsOverhead),unit:e.fee_estimation.unit}))}parseContractClassResponse(t){return{...t,abi:F(t.abi)?JSON.parse(t.abi):t.abi}}parseL1GasPriceResponse(t){return t.l1_gas_price.price_in_wei}};function Ev(t){return t.version==="0x3"&&"tip"in t&&F(t.tip)&&(t.type==="INVOKE"||t.type==="DECLARE"||t.type==="DEPLOY_ACCOUNT")}function Av(t){return!!t.channel.batchClient}function Ug(t,e=!0){return t.transactions.filter(Ev).map(n=>BigInt(n.tip)).filter(n=>e||n>0n)}function $g(t,e){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:t,transactionsTipsFound:e}}}function ff(t,e){const n=e/100*(t.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return t[r];const s=n-r,o=t[r],l=(t[i]-o)*BigInt(Math.round(s*1e3))/1000n;return o+l}function Vg(t){v(t.length>0,"Cannot calculate statistics from empty tip array");const e=t.reduce((f,g)=>g<f?g:f,go.max),n=t.reduce((f,g)=>g>f?g:f,0n),i=t.reduce((f,g)=>f+g,0n)/BigInt(t.length),s=[...t].sort((f,g)=>f<g?-1:f>g?1:0),o=Math.floor(s.length/2);let a;s.length%2===0?a=(s[o-1]+s[o])/2n:a=s[o];const c=new Map;t.forEach(f=>{c.set(f,(c.get(f)||0)+1)});const{modeTip:l}=Array.from(c.entries()).reduce((f,[g,y])=>y>f.maxCount||y===f.maxCount&&g<f.modeTip?{maxCount:y,modeTip:g}:f,{maxCount:0,modeTip:0n}),u=ff(s,90),h=ff(s,95);return{minTip:e,maxTip:n,averageTip:i,medianTip:a,modeTip:l,recommendedTip:a,p90Tip:u,p95Tip:h}}async function Hg(t,e){try{const n=await t.getBlockWithTxs(e);return tt(n.block_number)?n.block_number:(await t.getBlockLatestAccepted()).block_number}catch(n){throw new St(`Failed to determine starting block number: ${n instanceof Error?n.message:"Unknown error"}`)}}async function vv(t,e){try{return await t.getBlockWithTxs(e)}catch(n){return lt.warn(`Failed to fetch block ${e}:`,n),null}}function Fg(t,e){const n=Math.max(0,t-e+1),r=t-n+1;return Array.from({length:r},(i,s)=>t-s)}async function Tv(t,e){const n=e.map(async r=>{try{return await t.getBlockWithTxs(r)}catch(i){return lt.warn(`Failed to fetch block ${r} in parallel:`,i),null}});return Promise.all(n)}async function Iv(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const o=await Hg(t,e),a=Fg(o,r),c=await Tv(t,a),l=c.filter(d=>d!==null).flatMap(d=>Ug(d,s)),u=c.filter(d=>d!==null).length;return l.length<i?(lt.error(`Insufficient transaction data: found ${l.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),$g(u,l)):{...Vg(l),metrics:{blocksAnalyzed:u,transactionsTipsFound:l}}}catch(o){throw new St(`Failed to analyze tip statistics (parallel): ${o instanceof Error?o.message:"Unknown error"}`)}}async function Sv(t,e,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:s=!0}=n;try{const o=await Hg(t,e),a=Fg(o,r),c=[];let l=0;for(const h of a){const d=await vv(t,h);if(d){l+=1;const f=Ug(d,s);if(c.push(...f),c.length>=i)break}}return c.length<i?(lt.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${l} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),$g(l,c)):{...Vg(c),metrics:{blocksAnalyzed:l,transactionsTipsFound:c}}}catch(o){throw new St(`Failed to analyze tip statistics (sequential): ${o instanceof Error?o.message:"Unknown error"}`)}}async function xv(t,e=Ht.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return v(Number.isInteger(r),"maxBlocks parameter must be an integer"),v(r>=1,"maxBlocks parameter must be greater than or equal to 1"),v(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),v(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),v(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),Av(t)?Iv(t,e,n):Sv(t,e,n)}var hf=class Ic{statusReceipt;value;constructor(e){Object.assign(this,e);const[n,r]=Ic.isSuccess(e)?["SUCCEEDED",e]:Ic.isReverted(e)?["REVERTED",e]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value(i){return n in i?i[n](r):i._()},writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>n==="SUCCEEDED",writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>n==="REVERTED",writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>n==="ERROR",writable:!1,enumerable:!1,configurable:!1}})}match;isSuccess;isReverted;isError;static isSuccess(e){return e.execution_status===_o.SUCCEEDED}static isReverted(e){return e.execution_status===_o.REVERTED}},Cv={[_o.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:t=>t,getValue:t=>t},[_o.REVERTED]:{statusReceipt:"REVERTED",getBaseData:t=>t,getValue:t=>t}};function pf(t){const e=Cv[t.execution_status];let n;if(e){const{statusReceipt:r,getBaseData:i,getValue:s}=e,o=s(t);n={...i(t),statusReceipt:r,value:o,match(a){return r in a?a[r](o):a._()},isSuccess(){return r==="SUCCEEDED"},isReverted(){return r==="REVERTED"},isError(){return!1}}}else{const r=new Error("Unknown response type");n={statusReceipt:"ERROR",value:r,match(i){return"ERROR"in i?i.ERROR(r):i._()},isSuccess(){return!1},isReverted(){return!1},isError(){return!0}}}return Object.setPrototypeOf(n,hf.prototype),Object.defineProperty(n,"constructor",{value:hf,writable:!1,enumerable:!1,configurable:!1}),n}var kv={};X(kv,{encodeData:()=>Wg,encodeType:()=>Zg,encodeValue:()=>Yi,getDependencies:()=>wu,getMessageHash:()=>Os,getStructHash:()=>gs,getTypeHash:()=>Kg,isMerkleTreeType:()=>Yg,prepareSelector:()=>qg,validateTypedData:()=>na,verifyMessage:()=>Ov});var Nv={};X(Nv,{MerkleTree:()=>_u,proofMerklePath:()=>zg});var _u=class to{leaves;branches=[];root;hashMethod;constructor(e,n=hs){this.hashMethod=n,this.leaves=e,this.root=this.build(e)}build(e){if(e.length===1)return e[0];e.length!==this.leaves.length&&this.branches.push(e);const n=[];for(let r=0;r<e.length;r+=2)r+1===e.length?n.push(to.hash(e[r],"0x0",this.hashMethod)):n.push(to.hash(e[r],e[r+1],this.hashMethod));return this.build(n)}static hash(e,n,r=hs){const[i,s]=[BigInt(e),BigInt(n)].sort((o,a)=>o>=a?1:-1);return r(i,s)}getProof(e,n=this.leaves,r=[]){const i=n.indexOf(e);if(i===-1)throw new Error("leaf not found");if(n.length===1)return r;const s=i%2===0,o=(s?n[i+1]:n[i-1])??"0x0",a=[...r,o],c=this.leaves.length===n.length?-1:this.branches.findIndex(u=>u.length===n.length),l=this.branches[c+1]??[this.root];return this.getProof(to.hash(s?e:o,s?o:e,this.hashMethod),l,a)}};function zg(t,e,n,r=hs){if(n.length===0)return t===e;const[i,...s]=n;return zg(t,_u.hash(e,i,r),s,r)}var Bv={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},ne={[L.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:wg,hashMerkleMethod:_g,escapeTypeString:t=>`"${t}"`,presetTypes:Bv},[L.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:pg,hashMerkleMethod:hs,escapeTypeString:t=>t,presetTypes:{}}};function Ws(t,e,{min:n,max:r}){const i=BigInt(t);v(i>=n&&i<=r,`${i} (${e}) is out of bounds [${n}, ${r}]`)}function jg({types:t,domain:e}){if(ne[L.TypedDataRevision.ACTIVE].domain in t&&e.revision?.toString()===L.TypedDataRevision.ACTIVE)return L.TypedDataRevision.ACTIVE;if(ne[L.TypedDataRevision.LEGACY].domain in t&&(e.revision??L.TypedDataRevision.LEGACY)===L.TypedDataRevision.LEGACY)return L.TypedDataRevision.LEGACY}function ve(t){try{return B(t)}catch{if(F(t))return B(ut(t));throw new Error(`Invalid BigNumberish: ${t}`)}}function na(t){const e=t;return!!(e.message&&e.primaryType&&e.types&&jg(e))}function qg(t){return Lt(t)?t:it(t)}function Yg(t){return t.type==="merkletree"}function wu(t,e,n=[],r="",i=L.TypedDataRevision.LEGACY){let s=[e];return e[e.length-1]==="*"?s=[e.slice(0,-1)]:i===L.TypedDataRevision.ACTIVE&&(e==="enum"?s=[r]:e.match(/^\(.*\)$/)&&(s=e.slice(1,-1).split(",").map(o=>o[o.length-1]==="*"?o.slice(0,-1):o))),s.filter(o=>!n.includes(o)&&t[o]).reduce((o,a)=>[...o,...[a,...t[a].reduce((c,l)=>[...c,...wu(t,l.type,c,l.contains,i).filter(u=>!c.includes(u))],[])].filter(c=>!o.includes(c))],[])}function Dv(t,e){if(e.parent&&e.key){const r=t[e.parent].find(s=>s.name===e.key);if(!Yg(r))throw new Error(`${e.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${e.key}`);return r.contains}return"raw"}function Zg(t,e,n=L.TypedDataRevision.LEGACY){const r=n===L.TypedDataRevision.ACTIVE?{...t,...ne[n].presetTypes}:t,[i,...s]=wu(r,e,void 0,void 0,n),o=i?[i,...s.sort()]:[],a=ne[n].escapeTypeString;return o.map(c=>{const l=r[c].map(u=>{const h=u.type==="enum"&&n===L.TypedDataRevision.ACTIVE?u.contains:u.type,d=h.match(/^\(.*\)$/)?`(${h.slice(1,-1).split(",").map(f=>f&&a(f)).join(",")})`:a(h);return`${a(u.name)}:${d}`});return`${a(c)}(${l})`}).join("")}function Kg(t,e,n=L.TypedDataRevision.LEGACY){return it(Zg(t,e,n))}function Yi(t,e,n,r={},i=L.TypedDataRevision.LEGACY){if(t[e])return[e,gs(t,e,n,i)];if(ne[i].presetTypes[e])return[e,gs(ne[i].presetTypes,e,n,i)];if(e.endsWith("*")){const s=n.map(o=>Yi(t,e.slice(0,-1),o,void 0,i)[1]);return[e,ne[i].hashMethod(s)]}switch(e){case"enum":{if(i===L.TypedDataRevision.ACTIVE){const[s,o]=Object.entries(n)[0],a=t[r.parent].find(d=>d.name===r.key),c=t[a.contains],l=c.find(d=>d.name===s),u=c.indexOf(l),h=l.type.slice(1,-1).split(",").map((d,f)=>{if(!d)return d;const g=o[f];return Yi(t,d,g,void 0,i)[1]});return[e,ne[i].hashMethod([u,...h])]}return[e,ve(n)]}case"merkletree":{const s=Dv(t,r),o=n.map(c=>Yi(t,s,c,void 0,i)[1]),{root:a}=new _u(o,ne[i].hashMerkleMethod);return["felt",a]}case"selector":return["felt",qg(n)];case"string":{if(i===L.TypedDataRevision.ACTIVE){const s=eu(n),o=[s.data.length,...s.data,s.pending_word,s.pending_word_len];return[e,ne[i].hashMethod(o)]}return[e,ve(n)]}case"i128":{if(i===L.TypedDataRevision.ACTIVE){const s=BigInt(n);return Ws(s,e,Pr),[e,ve(s<0n?at+s:s)]}return[e,ve(n)]}case"timestamp":case"u128":return i===L.TypedDataRevision.ACTIVE&&Ws(n,e,Lr),[e,ve(n)];case"felt":case"shortstring":return i===L.TypedDataRevision.ACTIVE&&Ws(ve(n),e,go),[e,ve(n)];case"ClassHash":case"ContractAddress":return i===L.TypedDataRevision.ACTIVE&&Ws(n,e,go),[e,ve(n)];case"bool":return i===L.TypedDataRevision.ACTIVE&&v(ls(n),`Type mismatch for ${e} ${n}`),[e,ve(n)];default:{if(i===L.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${e}`);return[e,ve(n)]}}}function Wg(t,e,n,r=L.TypedDataRevision.LEGACY){const i=t[e]??ne[r].presetTypes[e],[s,o]=i.reduce(([a,c],l)=>{if(n[l.name]===void 0||n[l.name]===null&&l.type!=="enum")throw new Error(`Cannot encode data: missing data for '${l.name}'`);const u=n[l.name],h={parent:e,key:l.name},[d,f]=Yi(t,l.type,u,h,r);return[[...a,d],[...c,f]]},[["felt"],[Kg(t,e,r)]]);return[s,o]}function gs(t,e,n,r=L.TypedDataRevision.LEGACY){return ne[r].hashMethod(Wg(t,e,n,r)[1])}function Os(t,e){if(!na(t))throw new Error("Typed data does not match JSON schema");const n=jg(t),{domain:r,hashMethod:i}=ne[n],s=[ut("StarkNet Message"),gs(t.types,r,t.domain,n),e,gs(t.types,t.primaryType,t.message,n)];return i(s)}function Ov(t,e,n,r){const i=na(t);if(!_r(t)&&!i)throw new Error("message has a wrong format.");if(i&&r===void 0)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!_r(r))throw new Error("accountAddress shall be a BigNumberish");const s=i?Os(t,r):B(t),o=Array.isArray(e)?new Vi(BigInt(e[0]),BigInt(e[1])):e,a=B(n);return s0(o,s,a)}async function Rv(t,e,n,r,i,s){const o=na(e);if(!_r(e)&&!o)throw new Error("message has a wrong format.");if(!_r(r))throw new Error("accountAddress shall be a BigNumberish");const a=o?Os(e,r):B(e),c=i?[i]:["isValidSignature","is_valid_signature"],l=s||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const h of c)try{const d=await t.callContract({contractAddress:B(r),entrypoint:h,calldata:V.compile({hash:xt(a).toString(),signature:Ds(n)})});if(l.nokResponse.includes(d[0].toString()))return!1;if(l.okResponse.length===0||l.okResponse.includes(d[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(d){if(l.error.some(f=>d.message.includes(f)))return!1;u=d}throw Error(`Signature verification Error: ${u}`)}async function Mv(t,e=t.blockIdentifier){const n=await t.getBlockWithTxHashes(e);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}var Gg=class{responseParser;channel;constructor(t){if(t&&"channel"in t)this.channel=t.channel,this.responseParser="responseParser"in t?t.responseParser:new df;else{const e=t;if(e&&e.specVersion)if(je("0.8",e.specVersion))this.channel=new Bi.RpcChannel({...e,waitMode:!1});else if(je("0.9",e.specVersion))this.channel=new Zn.RpcChannel({...e,waitMode:!1});else throw new Error(`unsupported channel for spec version: ${e.specVersion}`);else if(je("0.8",se.get("rpcVersion")))this.channel=new Bi.RpcChannel({...e,waitMode:!1});else if(je("0.9",se.get("rpcVersion")))this.channel=new Zn.RpcChannel({...e,waitMode:!1});else throw new Error("unable to define spec version for channel");this.responseParser=new df(e?.resourceBoundsOverhead)}}static async create(t){const n=await new Bi.RpcChannel({...t}).getSpecVersion();if(uu(n)||lt.warn(`Using incompatible node spec version ${n}`),je("0.8",n))return new this({...t,specVersion:yn.v0_8_1});if(je("0.9",n))return new this({...t,specVersion:yn.v0_9_0});throw new St(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(yn).toString()}`)}fetch(t,e,n=0){return this.channel.fetch(t,e,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getStarknetVersion(t){return this.channel.getStarknetVersion(t)}async getNonceForAddress(t,e){return this.channel.getNonceForAddress(t,e)}async getBlock(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(t){return this.channel.getBlockWithTxHashes(t)}async getBlockWithTxs(t){return this.channel.getBlockWithTxs(t)}async waitForBlock(t=Ht.LATEST,e=5e3){if(t===Ht.LATEST||t==="pending")return;const n=await this.getBlockNumber(),r=t===Ht.PRE_CONFIRMED?n+1:Number(B(t));if(r<=n)return;const{retries:i}=this.channel;let s=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await un(e),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(t){return this.channel.getBlockWithTxHashes(t).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(t=this.channel.blockIdentifier){if(this.channel instanceof Zn.RpcChannel)return Mv(this.channel,t);throw new St("Unsupported method for RPC version")}async getL1MessageHash(t){const e=await this.channel.getTransactionByHash(t);v(e.type==="L1_HANDLER","This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:s}=e,o=[n[0],r,s,i,n.length-1,...n.slice(1)];return xs(o)}async getBlockWithReceipts(t){return this.channel.getBlockWithReceipts(t)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(t){return this.channel.getBlockStateUpdate(t)}async getBlockTransactionsTraces(t){return this.channel.getBlockTransactionsTraces(t)}async getBlockTransactionCount(t){return this.channel.getBlockTransactionCount(t)}async getTransaction(t){return this.channel.getTransactionByHash(t)}async getTransactionByHash(t){return this.channel.getTransactionByHash(t)}async getTransactionByBlockIdAndIndex(t,e){return this.channel.getTransactionByBlockIdAndIndex(t,e)}async getTransactionReceipt(t){const e=await this.channel.getTransactionReceipt(t),n=this.responseParser.parseTransactionReceipt(e);return pf(n)}async getTransactionTrace(t){return this.channel.getTransactionTrace(t)}async getTransactionStatus(t){return this.channel.getTransactionStatus(t)}async getSimulateTransaction(t,e){return this.channel.simulateTransaction(t,e).then(n=>this.responseParser.parseSimulateTransactionResponse(n))}async waitForTransaction(t,e){const n=await this.channel.waitForTransaction(t,e);return pf(n)}async fastWaitForTransaction(t,e,n,r){if(this.channel instanceof Zn.RpcChannel)return await this.channel.fastWaitForTransaction(t,e,n,r);throw new Error("Unsupported channel type")}async getStorageAt(t,e,n){return this.channel.getStorageAt(t,e,n)}async getClassHashAt(t,e){return this.channel.getClassHashAt(t,e)}async getClassByHash(t){return this.getClass(t)}async getClass(t,e){return this.channel.getClass(t,e).then(this.responseParser.parseContractClassResponse)}async getClassAt(t,e){return this.channel.getClassAt(t,e).then(this.responseParser.parseContractClassResponse)}async getContractVersion(t,e,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(t)i=await this.getClassAt(t,n);else if(e)i=await this.getClass(e,n);else throw Error("getContractVersion require contractAddress or classHash");return Ze(i)?r?{cairo:"1",compiler:iu(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.INVOKE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.DECLARE,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(t,e,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.DEPLOY_ACCOUNT,...t,...e}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(t,e){return this.channel.getEstimateFee(t,e).then(n=>this.responseParser.parseFeeEstimateBulkResponse(n))}async invokeFunction(t,e){return this.channel.invoke(t,e)}async declareContract(t,e){return this.channel.declare(t,e)}async deployAccountContract(t,e){return this.channel.deployAccount(t,e)}async callContract(t,e){return this.channel.callContract(t,e)}async estimateMessageFee(t,e){return this.channel.estimateMessageFee(t,e)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(t){if(this.channel instanceof Bi.RpcChannel)return this.channel.getEvents(t);if(this.channel instanceof Zn.RpcChannel)return this.channel.getEvents(t);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(t,e,n,r,i){return Rv(this,t,e,n,r,i)}async isClassDeclared(t,e){let n;if(!t.classHash&&"contract"in t)n=Vr(t,await this.channel.getStarknetVersion()).classHash;else if(t.classHash)n=t.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,e)instanceof Object}catch(r){if(r instanceof St)return!1;throw r}}async prepareInvocations(t){const e=[];for(const n of t)n.type===L.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||e.unshift(n):e.push(n);return e}async getL1MessagesStatus(t){return this.channel.getMessagesStatus(t)}async getStorageProof(t,e,n,r){return this.channel.getStorageProof(t,e,n,r)}async getCompiledCasm(t){return this.channel.getCompiledCasm(t)}async getEstimateTip(t,e={}){return xv(this,t,e)}},Lv={};X(Lv,{StarknetIdContract:()=>Cc,StarknetIdIdentityContract:()=>kc,StarknetIdMulticallContract:()=>Nc,StarknetIdPfpContract:()=>Dc,StarknetIdPopContract:()=>Oc,StarknetIdVerifierContract:()=>Bc,dynamicCallData:()=>Z,dynamicFelt:()=>mt,execution:()=>Te,getStarknetIdContract:()=>eo,getStarknetIdIdentityContract:()=>Qg,getStarknetIdMulticallContract:()=>Xg,getStarknetIdPfpContract:()=>ty,getStarknetIdPopContract:()=>ey,getStarknetIdVerifierContract:()=>Jg,isStarkDomain:()=>ny,useDecoded:()=>xo,useEncoded:()=>mu});var Be="abcdefghijklmnopqrstuvwxyz0123456789-",Fr=BigInt(Be.length+1),ht="",gf=BigInt(Be.length),Sc=BigInt(ht.length),yf=BigInt(ht.length+1);function xc(t){let e=0;for(;t.endsWith(ht[ht.length-1]);)t=t.substring(0,t.length-1),e+=1;return[t,e]}function xo(t){let e="";return t.forEach(n=>{for(;n!==Mt;){const s=n%Fr;if(n/=Fr,s===BigInt(Be.length)){const o=n/yf;if(o===Mt){const a=n%yf;n=o,a===Mt?e+=Be[0]:e+=ht[Number(a)-1]}else{const a=n%Sc;e+=ht[Number(a)],n/=Sc}}else e+=Be[Number(s)]}const[r,i]=xc(e);i&&(e=r+(i%2===0?ht[ht.length-1].repeat(i/2-1)+ht[0]+Be[1]:ht[ht.length-1].repeat((i-1)/2+1))),e+="."}),e&&e.concat("stark")}function mu(t){let e=BigInt(0),n=BigInt(1);if(t.endsWith(ht[0]+Be[1])){const[r,i]=xc(t.substring(0,t.length-2));t=r+ht[ht.length-1].repeat(2*(i+1))}else{const[r,i]=xc(t);i&&(t=r+ht[ht.length-1].repeat(1+2*(i-1)))}for(let r=0;r<t.length;r+=1){const i=t[r],s=Be.indexOf(i),o=BigInt(Be.indexOf(i));if(s!==-1)r===t.length-1&&t[r]===Be[0]?(e+=n*gf,n*=Fr,n*=Fr):(e+=n*o,n*=Fr);else if(ht.indexOf(i)!==-1){e+=n*gf,n*=Fr;const a=(r===t.length-1?1:0)+ht.indexOf(i);e+=n*BigInt(a),n*=Sc}}return e}var Cc={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function eo(t){switch(t){case zt.SN_MAIN:return Cc.MAINNET;case zt.SN_SEPOLIA:return Cc.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var kc={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function Qg(t){switch(t){case zt.SN_MAIN:return kc.MAINNET;case zt.SN_SEPOLIA:return kc.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Nc="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Xg(t){switch(t){case zt.SN_MAIN:return Nc;case zt.SN_SEPOLIA:return Nc;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var Bc={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function Jg(t){switch(t){case zt.SN_MAIN:return Bc.MAINNET;case zt.SN_SEPOLIA:return Bc.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Dc={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function ty(t){switch(t){case zt.SN_MAIN:return Dc.MAINNET;case zt.SN_SEPOLIA:return Dc.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var Oc={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function ey(t){switch(t){case zt.SN_MAIN:return Oc.MAINNET;case zt.SN_SEPOLIA:return Oc.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Te(t,e=void 0,n=void 0){return new Ns({Static:t,IfEqual:e?ii(e[0],e[1],e[2]):void 0,IfNotEqual:n?ii(n[0],n[1],n[2]):void 0})}function mt(t,e=void 0){return new Ns({Hardcoded:t,Reference:e?ii(e[0],e[1]):void 0})}function Z(t,e=void 0,n=void 0){return new Ns({Hardcoded:t,Reference:e?ii(e[0],e[1]):void 0,ArrayReference:n?ii(n[0],n[1]):void 0})}function ny(t){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(t)}var Pv=class no{async getStarkName(e,n){return no.getStarkName(this,e,n)}async getAddressFromStarkName(e,n){return no.getAddressFromStarkName(this,e,n)}async getStarkProfile(e,n,r,i,s,o,a){return no.getStarkProfile(this,e,n,r,i,s,o,a)}static async getStarkName(e,n,r){const i=await e.getChainId(),s=r??eo(i);try{const a=(await e.callContract({contractAddress:s,entrypoint:"address_to_domain",calldata:V.compile({address:n,hint:[]})})).map(l=>BigInt(l)).slice(1),c=xo(a);if(!c)throw Error("Starkname not found");return c}catch(o){throw o instanceof Error&&o.message==="Starkname not found"?o:Error("Could not get stark name")}}static async getAddressFromStarkName(e,n,r){const i=n.endsWith(".stark")?n:`${n}.stark`;if(!ny(i))throw new Error("Invalid domain, must be a valid .stark domain");const s=await e.getChainId(),o=r??eo(s);try{const a=i.replace(".stark","").split(".").map(l=>mu(l).toString(10));return(await e.callContract({contractAddress:o,entrypoint:"domain_to_address",calldata:V.compile({domain:a,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,n,r,i,s,o,a,c){const l=await e.getChainId(),u=r??eo(l),h=i??Qg(l),d=s??Jg(l),f=o??ty(l),g=a??ey(l),y=c??Xg(l);try{const p=[{execution:Te({}),to:Z(u),selector:Z(it("address_to_domain")),calldata:[Z(n),Z("0")]},{execution:Te({}),to:mt(u),selector:mt(it("domain_to_id")),calldata:[Z(void 0,void 0,[0,0])]},{execution:Te({}),to:mt(h),selector:mt(it("get_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("twitter")),Z(d),Z("0")]},{execution:Te({}),to:mt(h),selector:mt(it("get_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("github")),Z(d),Z("0")]},{execution:Te({}),to:mt(h),selector:mt(it("get_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("discord")),Z(d),Z("0")]},{execution:Te({}),to:mt(h),selector:mt(it("get_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("proof_of_personhood")),Z(g),Z("0")]},{execution:Te({}),to:mt(h),selector:mt(it("get_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("nft_pp_contract")),Z(f),Z("0")]},{execution:Te({}),to:mt(h),selector:mt(it("get_extended_verifier_data")),calldata:[Z(void 0,[1,0]),Z(ut("nft_pp_id")),Z("2"),Z(f),Z("0")]},{execution:Te(void 0,void 0,[6,0,0]),to:mt(void 0,[6,0]),selector:mt(it("tokenURI")),calldata:[Z(void 0,[7,1]),Z(void 0,[7,2])]}],_=await e.callContract({contractAddress:y,entrypoint:"aggregate",calldata:V.compile({calls:p})});if(Array.isArray(_)){const b=parseInt(_[0],16),w=[];let m=1;for(let M=0;M<b&&m<_.length;M+=1){const j=parseInt(_[m],16);m+=1;const A=_.slice(m,m+j);w.push(A),m+=j}const I=xo(w[0].slice(1).map(M=>BigInt(M))),k=w[2][0]!=="0x0"?BigInt(w[2][0]).toString():void 0,E=w[3][0]!=="0x0"?BigInt(w[3][0]).toString():void 0,N=w[4][0]!=="0x0"?BigInt(w[4][0]).toString():void 0,T=w[5][0]==="0x1",D=(_[0]==="0x9"?w[8].slice(1).map(M=>ni(M)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(w[1][0]).toString()}`;return{name:I,twitter:k,github:E,discord:N,proofOfPersonhood:T,profilePicture:D}}throw Error("Error while calling aggregate function")}catch(p){throw p instanceof Error?p:Error("Could not get user stark profile data from address")}}};function Uv(t){return t.endsWith(".brother")}function _f(t){const e=t.endsWith(".brother")?t.replace(".brother",""):t;return mu(e)}function wf(t){const e=xo([t]);return e.endsWith(".stark")?e.replace(".stark",".brother"):e&&`${e}.brother`}function za(t){return t===zt.SN_MAIN,"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}var $v=class ro{async getBrotherName(e,n){return ro.getBrotherName(this,e,n)}async getAddressFromBrotherName(e,n){return ro.getAddressFromBrotherName(this,e,n)}async getBrotherProfile(e,n){return ro.getBrotherProfile(this,e,n)}static async getBrotherName(e,n,r){const i=await e.getChainId(),s=r??za(i);try{const o=await e.callContract({contractAddress:s,entrypoint:"getPrimary",calldata:V.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother name not found");const a=BigInt(o[0]);return wf(a)}catch(o){throw o instanceof Error&&o.message==="Brother name not found"?o:Error("Could not get brother name")}}static async getAddressFromBrotherName(e,n,r){const i=n.endsWith(".brother")?n:`${n}.brother`;if(!Uv(i))throw new Error("Invalid domain, must be a valid .brother domain");const s=await e.getChainId(),o=r??za(s);try{const a=await e.callContract({contractAddress:o,entrypoint:"get_details_by_domain",calldata:V.compile({domain:_f(i)})});if(!a[0]||a[1]==="0x0")throw Error("Could not get address from brother name");return a[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(e,n,r){const i=await e.getChainId(),s=r??za(i);try{const o=await e.callContract({contractAddress:s,entrypoint:"getPrimary",calldata:V.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother profile not found");const a=BigInt(o[0]),l=wf(a).replace(".brother",""),u=await e.callContract({contractAddress:s,entrypoint:"get_details_by_domain",calldata:V.compile({domain:_f(l)})});return{name:l,resolver:u[1],tokenId:u[2],expiryDate:parseInt(u[3],16),lastTransferTime:parseInt(u[4],16)}}catch(o){throw o instanceof Error&&o.message==="Brother profile not found"?o:Error("Could not get brother profile")}}},ry=class extends IA(Gg,Pv,$v){},Vv=new Gg({default:!0}),Hv=class{pk;constructor(t=kl.randomPrivateKey()){this.pk=t instanceof Uint8Array?Ar(t):B(t)}async getPubKey(){return Bl(this.pk)}async signMessage(t,e){const n=Os(t,e);return this.signRaw(n)}async signTransaction(t,e){const n=gu(t,e.cairoVersion);let r;if(Object.values(L.ETransactionVersion3).includes(e.version)){const i=e;r=ug({...i,senderAddress:i.walletAddress,compiledCalldata:n,version:i.version,nonceDataAvailabilityMode:zn(i.nonceDataAvailabilityMode),feeDataAvailabilityMode:zn(i.feeDataAvailabilityMode)})}else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(t){const e=V.compile(t.constructorCalldata);let n;if(Object.values(L.ETransactionVersion3).includes(t.version)){const r=t;n=fg({...r,salt:r.addressSalt,compiledConstructorCalldata:e,version:r.version,nonceDataAvailabilityMode:zn(r.nonceDataAvailabilityMode),feeDataAvailabilityMode:zn(r.feeDataAvailabilityMode)})}else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(n)}async signDeclareTransaction(t){let e;if(Object.values(L.ETransactionVersion3).includes(t.version)){const n=t;e=dg({...n,version:n.version,nonceDataAvailabilityMode:zn(n.nonceDataAvailabilityMode),feeDataAvailabilityMode:zn(n.feeDataAvailabilityMode)})}else throw Error("unsupported signDeclareTransaction version");return this.signRaw(e)}async signRaw(t){return i0(t,this.pk)}},Fv={};X(Fv,{bnToUint256:()=>qv,isUint256:()=>jv,uint256ToBN:()=>zv});function zv(t){return new It(t).toBigInt()}function jv(t){return It.is(t)}function qv(t){return new It(t).toUint256HexString()}function Yv(t){const e=B(F(t)?P(t):t),n=vt(e).padStart(64,"0");return P(n)}function bu(t){const e=Yv(t);if(!e.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return Zl(e,Mt,ql-1n,"Starknet Address"),e}function pI(t){const e=vt(bu(t)).toLowerCase().split(""),n=vt(Wl(t)),r=wn(n.padStart(64,"0"));for(let i=0;i<e.length;i+=2)r[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(r[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return P(e.join(""))}var Zv={};X(Zv,{buildExecuteFromOutsideCall:()=>oy,buildExecuteFromOutsideCallData:()=>sy,getOutsideCall:()=>Eu,getTypedData:()=>iy,toOutsideCallV2:()=>ra});function ra(t){return"calldata_len"in t?{To:t.to,Selector:t.selector,Calldata:t.calldata}:t}function Eu(t){const e=t.calldata??[],n=Array.isArray(e)?e:V.compile(e);return{to:t.contractAddress,selector:it(t.entrypoint),calldata:n}}function mf(t,e){const n=Eu(t);return e==="1"?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function bf(t,e){return{name:"Account.execute_from_outside",version:e,chainId:t,...e==="2"?{revision:"1"}:{}}}function iy(t,e,n,r,i){return i==="1"?{types:qA,primaryType:"OutsideExecution",domain:bf(t,i),message:{...e,nonce:n,calls_len:r.length,calls:r.map(s=>mf(s,i))}}:{types:YA,primaryType:"OutsideExecution",domain:bf(t,i),message:{Caller:e.caller,Nonce:n,"Execute After":e.execute_after,"Execute Before":e.execute_before,Calls:r.map(s=>mf(s,i))}}}function sy(t){const e=t.outsideExecution,n=Ds(t.signature);return V.compile({outside_execution:e,signature:n})}function oy(t){return(Array.isArray(t)?t:[t]).map(r=>{let i;if(r.version===Ur.V1)i="execute_from_outside";else if(r.version===Ur.V2)i="execute_from_outside_v2";else throw new Error("Unsupported OutsideExecution version");return{contractAddress:B(r.signerAddress),entrypoint:i,calldata:sy(r)}})}var Kv={};X(Kv,{supportsInterface:()=>Rc});async function Rc(t,e,n){const r={contractAddress:B(e),entrypoint:"supports_interface",calldata:[B(n)]};try{const i=await t.callContract(r);return BigInt(i[0])!==0n}catch{return!1}}var Wv={};X(Wv,{assertCallsAreStrictlyEqual:()=>ay,assertPaymasterTransactionSafety:()=>cy,getDefaultPaymasterNodeUrl:()=>io});var io=(t,e=!1)=>{e||lt.info("Using default public node url, please provide nodeUrl in provider options!");const n=Lp[t??di.SN_SEPOLIA],r=Math.floor(Math.random()*n.length);return n[r]},Gv=(t,e)=>{const n=ra(t[t.length-1]),i=V.toCalldata(n.Calldata)[1];v(BigInt(i)===BigInt(e),"Gas token value is not equal to the provided gas fees")},Qv=(t,e)=>{const n=ra(t[t.length-1]);v(BigInt(n.To)===BigInt(e),"Gas token address is not equal to the provided gas token")};function ay(t,e){const n="Provided calls are not strictly equal to the returned calls";v(e.length-1===t.length,`${n}: Expected ${t.length+1} calls, got ${e.length}`);for(let r=0;r<t.length;r+=1){const i=t[r],s=ra(e[r]),o=h=>xt(h).toString(16).toLowerCase(),a=o(i.contractAddress),c=o(s.To);v(a===c,`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${s.To}`),v(it(i.entrypoint)===s.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${s.Selector}`);const l=V.toCalldata(i.calldata),u=V.toCalldata(s.Calldata);v(l.length===u.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${l.length}, Got length: ${u.length}`);for(let h=0;h<l.length;h+=1){const d=BigInt(l[h]),f=BigInt(u[h]);v(d===f,`${n}: Calldata value mismatch at call ${r}, parameter ${h}. Expected: ${l[h]}, Got: ${u[h]}`)}}}var cy=(t,e,n,r)=>{if(n.feeMode.mode!=="sponsored"&&(t.type==="invoke"||t.type==="deploy_and_invoke")){const i="calls"in t.typed_data.message?t.typed_data.message.calls:t.typed_data.message.Calls;ay(e,i),Qv(i,n.feeMode.gasToken),r&&(v(t.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),Gv(i,t.fee.suggested_max_fee_in_gas_token))}},Ef=t=>t.map(e=>({to:e.contractAddress,selector:it(e.entrypoint),calldata:V.toHex(e.calldata)})),Af=t=>t.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gas_token:t.gasToken},Xv=t=>t.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gasToken:t.gas_token},vf=t=>t?{execute_after:t.executeAfter||1,execute_before:t.executeBefore}:void 0,Jv=t=>t?{executeAfter:t.execute_after,executeBefore:t.execute_before}:void 0,ja=t=>({version:t.version,feeMode:Xv(t.fee_mode),timeBounds:Jv(t.time_bounds)}),qa={headers:{"Content-Type":"application/json"}},Au=class ly{nodeUrl;headers;baseFetch;requestId;constructor(e){if(e instanceof ly){this.nodeUrl=e.nodeUrl,this.headers={...qa.headers,...e.headers},this.baseFetch=e.baseFetch,this.requestId=e.requestId;return}if(e&&"nodeUrl"in e&&"headers"in e&&"baseFetch"in e){this.nodeUrl=e.nodeUrl??io(void 0),this.headers={...qa.headers,...e.headers},this.baseFetch=e.baseFetch??So,this.requestId=0;return}const{nodeUrl:n,headers:r,baseFetch:i}=e||{};n&&Object.values(di).includes(n)?this.nodeUrl=io(n,e?.default):n?this.nodeUrl=n:this.nodeUrl=io(void 0,e?.default),this.baseFetch=i??So,this.headers={...qa.headers,...r},this.requestId=0}fetch(e,n,r=0){const i={id:r,jsonrpc:"2.0",method:e,...n&&{params:n}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oe(i),headers:this.headers})}errorHandler(e,n,r,i){if(r)throw new ds(r,e,n);if(i instanceof St)throw i;if(i)throw Error(i.message)}async fetchEndpoint(e,n){try{this.requestId+=1;const r=await this.fetch(e,n,this.requestId),{error:i,result:s}=await r.json();return this.errorHandler(e,n,i),s}catch(r){throw this.errorHandler(e,n,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,n){let r;switch(e.type){case"invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:Ef(e.invoke.calls)}};break;case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:Ef(e.invoke.calls)}};break;default:r=e;break}const i={version:n.version,fee_mode:Af(n.feeMode),time_bounds:vf(n.timeBounds)},s=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),o={gas_token_price_in_strk:BigInt(s.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(s.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(s.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(s.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(s.fee.suggested_max_fee_in_gas_token)};switch(s.type){case"invoke":return{type:"invoke",typed_data:s.typed_data,parameters:ja(s.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:s.deployment,typed_data:s.typed_data,parameters:ja(s.parameters),fee:o};default:return{type:"deploy",deployment:s.deployment,parameters:ja(s.parameters),fee:o}}}async executeTransaction(e,n){let r;switch(e.type){case"invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:Ne(e.invoke.signature)}};break;case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:Ne(e.invoke.signature)}};break;default:r=e;break}const i={version:n.version,fee_mode:Af(n.feeMode),time_bounds:vf(n.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:i})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(n=>({token_address:n.token_address,decimals:n.decimals,priceInStrk:BigInt(n.price_in_strk)})))}},tT=new Au({default:!0}),eT=class{address;entryPoint;constructor(t,e){this.address=t??cs.ADDRESS,this.entryPoint=e??cs.ENTRYPOINT}buildDeployerCall(t,e){const n=[].concat(t).map(r=>{const{classHash:i,salt:s,unique:o=!0,constructorCalldata:a=[],abi:c}=r,l=Hr(a,()=>{if(c){const h=new V(c),d=Object.values(a);return h.validate(cn.DEPLOY,"constructor",d),h.compile("constructor",d)}return V.compile(a)}),u=s??fu();return{call:{contractAddress:B(this.address),entrypoint:this.entryPoint,calldata:[i,u,zp(o),l.length,...l]},address:ji(o?ai(e,u):u,i,l,o?this.address:0)}});return{calls:n.map(r=>r.call),addresses:n.map(r=>r.address)}}parseDeployerEvent(t){if(!t.events?.length)throw new Error("Deployer emitted event is empty");const e=t.events.find(n=>B(n.from_address)===B(this.address))||{data:[]};return{transaction_hash:t.transaction_hash,contract_address:e.data[0],address:e.data[0],deployer:e.data[1],unique:e.data[2],classHash:e.data[3],calldata_len:e.data[4],calldata:e.data.slice(5,5+parseInt(e.data[4],16)),salt:e.data[e.data.length-1]}}},nT=new eT(cs.ADDRESS,cs.ENTRYPOINT),rT=class extends ry{signer;address;cairoVersion;transactionVersion;paymaster;deployer;defaultTipType;constructor(t){const{provider:e,address:n,signer:r,cairoVersion:i,transactionVersion:s,paymaster:o,defaultTipType:a}=t;super(e),this.address=n.toLowerCase(),this.signer=F(r)||r instanceof Uint8Array?new Hv(r):r,i&&(this.cairoVersion=i.toString()),this.transactionVersion=s??se.get("transactionVersion"),this.paymaster=o?new Au(o):tT,this.deployer=t.deployer??nT,this.defaultTipType=a??se.get("defaultTipType"),lt.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new St("Not supported")}async getNonce(t){return super.getNonceForAddress(this.address,t)}async getNonceSafe(t){try{return xt(t??await this.getNonce())}catch{return 0n}}async getCairoVersion(t){if(!this.cairoVersion){const{cairo:e}=t?await super.getContractVersion(void 0,t):await super.getContractVersion(this.address);this.cairoVersion=e}return this.cairoVersion}async estimateInvokeFee(t,e={}){const n=[{type:L.ETransactionType.INVOKE,payload:[t].flat()}];return(await this.estimateFeeBulk(n,e))[0]}async estimateDeclareFee(t,e={}){v(Ze(t.contract),"Declare fee estimation is not supported for Cairo0 contracts");const n=[{type:L.ETransactionType.DECLARE,payload:Vr(t,await this.channel.getStarknetVersion())}];return(await this.estimateFeeBulk(n,e))[0]}async estimateAccountDeployFee({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i={}){const s=V.compile(n),o=r??ji(e,t,s,0),a=[{type:L.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:e,contractAddress:o}}];return(await this.estimateFeeBulk(a,i))[0]}async estimateDeployFee(t,e={}){const{calls:n}=this.deployer.buildDeployerCall(t,this.address);return this.estimateInvokeFee(n,e)}async estimateFeeBulk(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");if(e.resourceBounds)return[Cg(e.resourceBounds)];const{nonce:n,blockIdentifier:r,version:i,skipValidate:s}=e,o=await this.resolveDetailsWithTip(e),a=await this.accountInvocationsFactory(t,{...Pt(o),versions:[qi(Ng(this.transactionVersion)||Di.F3,i)],nonce:n,blockIdentifier:r,skipValidate:s});return super.getEstimateFeeBulk(a,{blockIdentifier:r,skipValidate:s})}async simulateTransaction(t,e={}){if(!t.length)throw TypeError("Invocations should be non-empty array");const{nonce:n,blockIdentifier:r,skipValidate:i=!0,skipExecute:s,version:o}=e,a=await this.resolveDetailsWithTip(e),c=await this.accountInvocationsFactory(t,{...Pt(a),versions:[this.resolveTransactionVersion(o)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getSimulateTransaction(c,{blockIdentifier:r,skipValidate:i,skipExecute:s})}async execute(t,e={}){const n=[t].flat(),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateInvokeFee(n,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:L.ETransactionType.INVOKE,payload:n}],{...Pt(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return this.invokeFunction({contractAddress:a.contractAddress,calldata:a.calldata,signature:a.signature},{...Pt(r),resourceBounds:a.resourceBounds,nonce:a.nonce,version:a.version})}async fastExecute(t,e={},n={}){v(this.channel instanceof Zn.RpcChannel,"Wrong Rpc version in Provider. At least Rpc v0.9 required."),v(this.channel.blockIdentifier===Ht.PRE_CONFIRMED,"Provider needs to be initialized with `pre_confirmed` blockIdentifier option.");const r=BigInt(e.nonce??await this.getNonceForAddress(this.address,Ht.PRE_CONFIRMED)),i={...e,nonce:r},s=await this.execute(t,i),o=await this.fastWaitForTransaction(s.transaction_hash,this.address,r,n);return{txResult:s,isReady:o}}async declareIfNot(t,e={}){const n=Vr(t,await this.channel.getStarknetVersion());try{await this.getClassByHash(n.classHash)}catch{return this.declare(t,e)}return{transaction_hash:"",class_hash:n.classHash}}async declare(t,e={}){v(Ze(t.contract),ct.declareNonSierra);const n=Vr(t,await this.channel.getStarknetVersion()),r=await this.resolveDetailsWithTip(e),{resourceBounds:i}=e;let s=i;s||(s=(await this.estimateDeclareFee(t,r)).resourceBounds);const a=(await this.accountInvocationsFactory([{type:L.ETransactionType.DECLARE,payload:n}],{...Pt(r),resourceBounds:s,versions:[this.resolveTransactionVersion(e.version)],nonce:e.nonce,skipValidate:!1}))[0];return super.declareContract({senderAddress:a.senderAddress,signature:a.signature,contract:a.contract,compiledClassHash:a.compiledClassHash},{...Pt(r),nonce:a.nonce,resourceBounds:a.resourceBounds,version:a.version})}async deploy(t,e={}){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(t,this.address);return{...await this.execute(n,e),contract_address:r}}async deployContract(t,e={}){const n=await this.deploy(t,e),r=await this.waitForTransaction(n.transaction_hash,e);return this.deployer.parseDeployerEvent(r)}async declareAndDeploy(t,e={}){let n=await this.declareIfNot(t,e);if(n.transaction_hash!==""){const i=await this.waitForTransaction(n.transaction_hash,e);n={...n,...i}}const r=await this.deployContract({...t,classHash:n.class_hash},e);return{declare:{...n},deploy:r}}deploySelf=this.deployAccount;async deployAccount({classHash:t,constructorCalldata:e=[],addressSalt:n=0,contractAddress:r},i={}){const s=V.compile(e),o=r??ji(n,t,s,0),a=await this.resolveDetailsWithTip(i),{resourceBounds:c}=i;let l=c;l||(l=(await this.estimateAccountDeployFee({classHash:t,constructorCalldata:e,addressSalt:n,contractAddress:o},a)).resourceBounds);const h=(await this.accountInvocationsFactory([{type:L.ETransactionType.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:s,addressSalt:n,contractAddress:o}}],{...Pt(a),resourceBounds:l,versions:[this.resolveTransactionVersion(i.version)],nonce:Mt,skipValidate:!1}))[0];return super.deployAccountContract({classHash:h.classHash,addressSalt:h.addressSalt,constructorCalldata:h.constructorCalldata,signature:h.signature},{...Pt(a),nonce:h.nonce,resourceBounds:h.resourceBounds,version:h.version})}async signMessage(t){return this.signer.signMessage(t,this.address)}async hashMessage(t){return Os(t,this.address)}async getSnip9Version(){return await Rc(this,this.address,Op)?Ur.V2:await Rc(this,this.address,Dp)?Ur.V1:Ur.UNSUPPORTED}async isValidSnip9Nonce(t){try{const e={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[B(t)]},n=await this.callContract(e);return BigInt(n[0])!==0n}catch(e){throw new Error(`Failed to check if nonce is valid: ${e}`)}}async getSnip9Nonce(){const t=fu();return await this.isValidSnip9Nonce(t)?t:this.getSnip9Nonce()}async getOutsideTransaction(t,e,n,r){if(!Lt(t.caller)&&t.caller!=="ANY_CALLER")throw new Error(`The caller ${t.caller} is not valid.`);const i=Lt(t.caller)?t.caller:Bp,s=[e].flat(),o=n??await this.getSnip9Version();if(!o)throw new Error("This account is not handling outside transactions.");const a=r?B(r):await this.getSnip9Nonce(),c=iy(await this.getChainId(),{caller:i,execute_after:t.execute_after,execute_before:t.execute_before},a,s,o),l=await this.signMessage(c);return{outsideExecution:{caller:i,nonce:a,execute_after:t.execute_after,execute_before:t.execute_before,calls:s.map(Eu)},signature:l,signerAddress:this.address,version:o}}async executeFromOutside(t,e){const n=oy(t);return this.execute(n,e)}async resolveDetailsWithTip(t){return{...t,tip:t.tip??(await this.getEstimateTip())[this.defaultTipType]}}resolveTransactionVersion(t){return qi(this.transactionVersion||Di.V3,t)}async buildInvocation(t,e){const n=gu(t,await this.getCairoVersion()),r=e.skipValidate?[]:await this.signer.signTransaction(t,e);return{...Pt(e),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(t,e){const{classHash:n,contract:r,compiledClassHash:i}=Vr(t,await this.channel.getStarknetVersion()),s=pu(r);v(!Tt(i)&&(e.version===Di.F3||e.version===Di.V3),"V3 Transaction work with Cairo1 Contracts and require compiledClassHash");const o=e.skipValidate?[]:await this.signer.signDeclareTransaction({...e,...Pt(e),classHash:n,compiledClassHash:i,senderAddress:e.walletAddress});return{senderAddress:e.walletAddress,signature:o,contract:s,compiledClassHash:i}}async buildAccountDeployPayload({classHash:t,addressSalt:e=0,constructorCalldata:n=[],contractAddress:r},i){const s=V.compile(n),o=r??ji(e,t,s,0),a=i.skipValidate?[]:await this.signer.signDeployAccountTransaction({...i,...Pt(i),classHash:t,contractAddress:o,addressSalt:e,constructorCalldata:s});return{...Pt(i),classHash:t,addressSalt:e,constructorCalldata:s,signature:a}}async accountInvocationsFactory(t,e){const{nonce:n,blockIdentifier:r,skipValidate:i=!0}=e,s=await this.getNonceSafe(n),o=await this.getChainId(),a=e.versions.map(u=>qi(u)),c="payload"in t[0]?t[0].payload:t[0],l=t[0].type===L.ETransactionType.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(t).map(async(u,h)=>{const d="payload"in u?u.payload:u,f={...Pt(e),walletAddress:this.address,nonce:xt(Number(s)+h),chainId:o,cairoVersion:l,version:a[0],skipValidate:i},g={type:u.type,nonce:xt(Number(s)+h),blockIdentifier:r,version:a[0]};if(u.type===L.ETransactionType.INVOKE){const y=await this.buildInvocation([].concat(d),f);return{...g,...y,...f}}if(u.type===L.ETransactionType.DEPLOY){const{calls:y}=this.deployer.buildDeployerCall(d,this.address),p=await this.buildInvocation(y,f);return{...g,...p,...f,type:L.ETransactionType.INVOKE}}if(u.type===L.ETransactionType.DECLARE){v(Ze(d.contract),"Declare fee estimation is not supported for Cairo0 contracts");const y=await this.buildDeclarePayload(d,f);return{...g,...y,...f}}if(u.type===L.ETransactionType.DEPLOY_ACCOUNT){const y=await this.buildAccountDeployPayload(d,f);return{...g,...y,...f}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${u}`)}))}async buildPaymasterTransaction(t,e){if(!e.deploymentData&&await this.getSnip9Version()===Ur.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");const n={version:"0x1",feeMode:e.feeMode,timeBounds:e.timeBounds};let r;return e.deploymentData?t.length>0?r={type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:t},deployment:e.deploymentData}:r={type:"deploy",deployment:e.deploymentData}:r={type:"invoke",invoke:{userAddress:this.address,calls:t}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(t,e){return(await this.buildPaymasterTransaction(t,e)).fee}async preparePaymasterTransaction(t){let e;switch(t.type){case"deploy_and_invoke":{const n=await this.signMessage(t.typed_data);e={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Ne(n)},deployment:t.deployment};break}case"invoke":{const n=await this.signMessage(t.typed_data);e={type:"invoke",invoke:{userAddress:this.address,typedData:t.typed_data,signature:Ne(n)}};break}case"deploy":{e={type:"deploy",deployment:t.deployment};break}default:throw Error("Invalid transaction type")}return e}async executePaymasterTransaction(t,e,n){const r=await this.buildPaymasterTransaction(t,e);cy(r,t,e,n);const i=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(i,r.parameters).then(s=>({transaction_hash:s.transaction_hash}))}async getStarkName(t=this.address,e){return super.getStarkName(t,e)}},iT={};X(iT,{addDeclareTransaction:()=>gy,addInvokeTransaction:()=>py,addStarknetChain:()=>fy,deploymentData:()=>oT,getPermissions:()=>uy,onAccountChange:()=>_y,onNetworkChanged:()=>wy,requestAccounts:()=>Mc,requestChainId:()=>sT,signMessage:()=>yy,supportedSpecs:()=>aT,switchStarknetChain:()=>hy,watchAsset:()=>dy});function Mc(t,e=!1){return t.request({type:"wallet_requestAccounts",params:{silent_mode:e}})}function uy(t){return t.request({type:"wallet_getPermissions"})}function dy(t,e){return t.request({type:"wallet_watchAsset",params:e})}function fy(t,e){return t.request({type:"wallet_addStarknetChain",params:e})}function hy(t,e){return t.request({type:"wallet_switchStarknetChain",params:{chainId:e}})}function sT(t){return t.request({type:"wallet_requestChainId"})}function oT(t){return t.request({type:"wallet_deploymentData"})}function py(t,e){return t.request({type:"wallet_addInvokeTransaction",params:e})}function gy(t,e){return t.request({type:"wallet_addDeclareTransaction",params:e})}function yy(t,e){return t.request({type:"wallet_signTypedData",params:e})}function aT(t){return t.request({type:"wallet_supportedSpecs"})}function _y(t,e){t.on("accountsChanged",e)}function wy(t,e){t.on("networkChanged",e)}var cT=class Lc extends rT{walletProvider;constructor(e){super({...e,signer:""}),this.walletProvider=e.walletProvider,this.walletProvider.on("accountsChanged",n=>{n&&(this.address=n[0].toLowerCase())}),this.walletProvider.on("networkChanged",n=>{n&&this.channel.setChainId(n)})}onAccountChange(e){_y(this.walletProvider,e)}onNetworkChanged(e){wy(this.walletProvider,e)}requestAccounts(e=!1){return Mc(this.walletProvider,e)}getPermissions(){return uy(this.walletProvider)}switchStarknetChain(e){return hy(this.walletProvider,e)}watchAsset(e){return dy(this.walletProvider,e)}addStarknetChain(e){return fy(this.walletProvider,e)}execute(e){const r={calls:[].concat(e).map(i=>{const{contractAddress:s,entrypoint:o,calldata:a}=i;return{contract_address:s,entry_point:o,calldata:a}})};return py(this.walletProvider,r)}async declare(e){const n=Vr(e,await this.channel.getStarknetVersion()),r=e.contract,i={...r,abi:oe(r.abi)};if(!n.compiledClassHash)throw Error("compiledClassHash is required");const s={compiled_class_hash:n.compiledClassHash,contract_class:i};return gy(this.walletProvider,s)}async deploy(e){const{calls:n,addresses:r}=this.deployer.buildDeployerCall(e,this.address);return{...await this.execute(n),contract_address:r}}signMessage(e){return yy(this.walletProvider,e)}static async connect(e,n,r,i,s=!1){const[o]=await Mc(n,s);return new Lc({provider:e,walletProvider:n,address:o,cairoVersion:r,paymaster:i})}static async connectSilent(e,n,r,i){return Lc.connect(e,n,r,i,!0)}},lT={};X(lT,{getAbiEvents:()=>Uc,isAbiEvent:()=>Pc,parseEvents:()=>by});function Pc(t){return t.type==="event"}function uT(t){return t.filter(e=>e.type==="event").reduce((e,n)=>{const r=n.name,i={...n};return i.name=r,{...e,[P(bn(yr(r)).toString(16))]:i}},{})}function dT(t){const e=t.filter(i=>Pc(i)&&i.kind==="struct"),n=t.filter(i=>Pc(i)&&i.kind==="enum");return e.reduce((i,s)=>{let o=[],{name:a}=s,c=!1;const l=d=>d.type===a;for(;;){const d=n.find(g=>g.variants.some(l));if(Tt(d))break;const f=d.variants.find(l);o.unshift(f.name),f.kind==="flat"&&(c=!0),a=d.name}if(o.length===0)throw new Error("inconsistency in ABI events definition.");c&&(o=[o[o.length-1]]);const u=o.pop();let h={[P(bn(yr(u)).toString(16))]:s};for(;o.length>0;)h={[P(bn(yr(o.pop())).toString(16))]:h};return h={...h},my(i,h)},{})}function Uc(t){return ru(t)?dT(t):uT(t)}function my(t,e){const n={...t};return J(t)&&J(e)&&Object.keys(e).forEach(r=>{J(e[r])?r in t?n[r]=my(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function by(t,e,n,r,i){return t.flat().reduce((o,a)=>{const c=JSON.parse(JSON.stringify(a));let l=e[c.keys.shift()??0];if(!l)return o;for(;!l.name;){const y=c.keys.shift();v(!!y,'Not enough data in "keys" property of this event.'),l=l[y]}const u={};u[l.name]={};const h=c.keys[Symbol.iterator](),d=c.data[Symbol.iterator](),f=l.members?.filter(y=>y.kind==="key")||l.keys,g=l.members?.filter(y=>y.kind==="data")||l.data;return f.forEach(y=>{u[l.name][y.name]=vo({responseIterator:h,output:y,structs:n,enums:r,parser:i,parsedResult:u[l.name]})}),g.forEach(y=>{u[l.name][y.name]=vo({responseIterator:d,output:y,structs:n,enums:r,parser:i,parsedResult:u[l.name]})}),"block_hash"in c&&(u.block_hash=c.block_hash),"block_number"in c&&(u.block_number=c.block_number),"transaction_hash"in c&&(u.transaction_hash=c.transaction_hash),o.push(u),o},[])}function Ey(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.call(e.name,n,{parseRequest:t.parseRequest,parseResponse:t.parseResponse,...r})}}function fT(t,e){return async function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.invoke(e.name,n,{parseRequest:t.parseRequest,...r})}}function Tf(t,e){return e.stateMutability==="view"||e.state_mutability==="view"?Ey(t,e):fT(t,e)}function hT(t,e){return function(...n){return t.populate(e.name,n)}}function pT(t,e){return function(...n){const r={...t.withOptionsProps};return t.withOptionsProps=void 0,t.estimate(e.name,n,r)}}var gT=class Ay{abi;address;providerOrAccount;classHash;parseRequest;parseResponse;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;withOptionsProps;parsingStrategy;constructor(e){this.parsingStrategy=e.parsingStrategy;const n=Ec(e.abi,e.parsingStrategy);this.abi=n.getLegacyFormat(),this.address=e.address&&e.address.toLowerCase(),this.providerOrAccount=e.providerOrAccount??Vv,this.parseRequest=e.parseRequest??!0,this.parseResponse=e.parseResponse??!0,this.classHash=e.classHash,this.callData=new V(e.abi,e.parsingStrategy),this.structs=V.getAbiStruct(e.abi),this.events=Uc(e.abi);const r={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(i=>{if(i.type!=="function")return;const s=i.name;this[s]||Object.defineProperty(this,s,{...r,value:Tf(this,i)}),this.functions[s]||Object.defineProperty(this.functions,s,{...r,value:Tf(this,i)}),this.callStatic[s]||Object.defineProperty(this.callStatic,s,{...r,value:Ey(this,i)}),this.populateTransaction[s]||Object.defineProperty(this.populateTransaction,s,{...r,value:hT(this,i)}),this.estimateFee[s]||Object.defineProperty(this.estimateFee,s,{...r,value:pT(this,i)})})}withOptions(e){return this.withOptionsProps=e,this}attach(e,n){if(this.address=e,n){const r=Ec(n,this.parsingStrategy);this.abi=r.getLegacyFormat(),this.callData=new V(n,this.parsingStrategy),this.structs=V.getAbiStruct(n),this.events=Uc(n)}}async isDeployed(){try{await this.providerOrAccount.getClassHashAt(this.address)}catch(e){const n=e instanceof Error?e.message:String(e);throw new Error(`Contract not deployed at address ${this.address}: ${n}`)}return this}async call(e,n=[],{parseRequest:r=!0,parseResponse:i=!0,formatResponse:s=void 0,blockIdentifier:o=void 0}={}){v(this.address!==null,"contract is not connected to an address");const a=Hr(n,()=>r?(this.callData.validate(cn.CALL,e,n),this.callData.compile(e,n)):(lt.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),n));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:a,entrypoint:e},o).then(c=>i?s?this.callData.format(e,c,s):this.callData.parse(e,c):c)}async invoke(e,n=[],r={}){const{parseRequest:i=!0,signature:s,waitForTransaction:o,...a}=r;v(this.address!==null,"contract is not connected to an address");const c=Hr(n,()=>i?(this.callData.validate(cn.INVOKE,e,n),this.callData.compile(e,n)):(lt.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),n)),l={contractAddress:this.address,calldata:c,entrypoint:e};if(af(this.providerOrAccount)){if(a.paymasterDetails){const h={contractAddress:this.address,entrypoint:e,calldata:n};return this.providerOrAccount.executePaymasterTransaction([h],a.paymasterDetails,a.maxFeeInGasToken)}const u=await this.providerOrAccount.execute(l,{...a});if(o){const h=await this.providerOrAccount.waitForTransaction(u.transaction_hash);if(h.isSuccess())return h;throw new Error("Transaction failed",{cause:h})}return u}if(!a.nonce)throw new Error("Manual nonce is required when invoking a function without an account");return lt.warn(`Invoking ${e} without an account.`),this.providerOrAccount.invokeFunction({...l,signature:s},{...a,nonce:a.nonce})}async estimate(e,n=[],r={}){v(this.address!==null,"contract is not connected to an address"),Hr(n,()=>!1)||this.callData.validate(cn.INVOKE,e,n);const i=this.populate(e,n);if(af(this.providerOrAccount)){if(r.paymasterDetails){const s={contractAddress:this.address,entrypoint:e,calldata:n};return this.providerOrAccount.estimatePaymasterTransactionFee([s],r.paymasterDetails)}return this.providerOrAccount.estimateInvokeFee(i,r)}throw Error("Contract must be connected to the account contract to estimate")}populate(e,n=[]){const r=Hr(n,()=>this.callData.compile(e,n));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let n=[];return e.match({SUCCEEDED:r=>{const i=r.events?.map(s=>({block_hash:r.block_hash,block_number:r.block_number,transaction_hash:r.transaction_hash,...s})).filter(s=>B(s.from_address)===B(this.address),[])||[];n=by(i,this.events,this.structs,V.getAbiEnum(this.abi),this.callData.parser)},_:()=>{throw Error("This transaction was not successful.")}}),Object.defineProperty(n,"getByPath",{value:r=>{const i=n.find(o=>Object.keys(o).some(a=>a.includes(r))),s=Object.keys(i||{}).find(o=>o.includes(r));return s&&i?i[s]:null},writable:!1,enumerable:!1,configurable:!1}),n}isCairo1(){return Yp.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}static async factory(e,n={}){const{account:r,parseRequest:i=!0}=e;let s,o,a;if("classHash"in e&&e.classHash&&!("contract"in e)){const c=e;o=c.classHash.toString(),c.abi?s=c.abi:s=(await r.getClass(o)).abi,a=(await r.deployContract({classHash:o,constructorCalldata:c.constructorCalldata,salt:c.salt,unique:c.unique,abi:i?s:void 0},n)).contract_address}else{const c=e,l=pu(c.contract);s=c.abi?c.abi:Dg(l);const{declare:{class_hash:u},deploy:{contract_address:h}}=await r.declareAndDeploy({...c,abi:i?s:void 0},n);o=u.toString(),a=h}return v(!!a,"Deployment of the contract failed"),new Ay({abi:s,address:a,providerOrAccount:r,classHash:o,parseRequest:e.parseRequest,parseResponse:e.parseResponse,parsingStrategy:e.parsingStrategy})}};L.TypedDataRevision;function gI(t,e=6,n=4){return t?t.length<=e+n?t:`${t.slice(0,e)}...${t.slice(-n)}`:""}const yT=t=>{if(!t)return;const e=t.trim();if(e){try{if($y(e))return Vy(e)}catch{}try{return bu(e)}catch{return}}},_T={ACCOUNTS:"accounts"};var wT=Object.defineProperty,mT=(t,e,n)=>e in t?wT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,An=(t,e,n)=>mT(t,typeof e!="symbol"?e+"":e,n),bT=class extends jy{},Ya=class extends Error{constructor(){super(...arguments),An(this,"name","ConnectorNotConnectedError"),An(this,"message","Connector not connected")}},$c=class extends Error{constructor(){super(...arguments),An(this,"name","ConnectorNotFoundError"),An(this,"message","Connector not found")}},ET=class extends Error{constructor(){super(...arguments),An(this,"name","UserRejectedRequestError"),An(this,"message","User rejected request")}},AT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0iYmxhY2siPgogIDxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTkuODc5IDcuNTE5YzEuMTcxLTEuMDI1IDMuMDcxLTEuMDI1IDQuMjQyIDAgMS4xNzIgMS4wMjUgMS4xNzIgMi42ODcgMCAzLjcxMi0uMjAzLjE3OS0uNDMuMzI2LS42Ny40NDItLjc0NS4zNjEtMS40NS45OTktMS40NSAxLjgyN3YuNzVNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6bS05IDUuMjVoLjAwOHYuMDA4SDEydi0uMDA4eiIgLz4KPC9zdmc+",vT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgc3Ryb2tlLXdpZHRoPSIxLjUiIHN0cm9rZT0id2hpdGUiPgogIDxwYXRoIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0iTTkuODc5IDcuNTE5YzEuMTcxLTEuMDI1IDMuMDcxLTEuMDI1IDQuMjQyIDAgMS4xNzIgMS4wMjUgMS4xNzIgMi42ODcgMCAzLjcxMi0uMjAzLjE3OS0uNDMuMzI2LS42Ny40NDItLjc0NS4zNjEtMS40NS45OTktMS40NSAxLjgyN3YuNzVNMjEgMTJhOSA5IDAgMTEtMTggMCA5IDkgMCAwMTE4IDB6bS05IDUuMjVoLjAwOHYuMDA4SDEydi0uMDA4eiIgLz4KPC9zdmc+Cg==",If={argentX:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA2NS4xOTUwOCA1Ny43MzU2MiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNjUuMTk1MDggNTcuNzM1NjI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkY4NzVCO30KPC9zdHlsZT4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTQwLjk4NTkyLDBIMjQuMjA4ODhjLTAuNTYsMC0xLjAxMDAxLDAuNDUxMDItMS4wMjE5NywxLjAxMjAyCgljLTAuMzM4OTksMTUuNzU1LTguNTgyMDMsMzAuNzA4OTgtMjIuNzcwMDIsNDEuMzAwOTljLTAuNDUwMDEsMC4zMzcwMS0wLjU1Mjk4LDAuOTY3OTktMC4yMjQsMS40MjNsOS44MTU5OCwxMy41NzMKCWMwLjMzNDA1LDAuNDYyMDEsMC45ODUwNSwwLjU2NTk4LDEuNDQyOTksMC4yMjY5OWM4Ljg3MTAzLTYuNTc5MDEsMTYuMDA3MDItMTQuNTE3LDIxLjE0NjA2LTIzLjMxNQoJYzUuMTM4LDguNzk4LDEyLjI3Mzk5LDE2LjczNTk5LDIxLjE0NiwyMy4zMTVjMC40NTY5NywwLjMzODk5LDEuMTA3OTcsMC4yMzUwMiwxLjQ0MTk2LTAuMjI2OTlsOS44MTYwNC0xMy41NzMKCWMwLjMyODk4LTAuNDU1MDIsMC4yMjY5OS0xLjA4Ni0wLjIyNC0xLjQyM0M1MC41ODk4NiwzMS43MjEwMSw0Mi4zNDY4OCwxNi43NjcwMyw0Mi4wMDc4OSwxLjAxMjAyCglDNDEuOTk1ODcsMC40NTEwMiw0MS41NDY4OSwwLDQwLjk4NTkyLDAiLz4KPC9zdmc+Cg==",braavos:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCIgdmlld0JveD0iMCAwIDUwMCA1MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0zMjMuNDQgNDEuMzg4NkMzMjQuMTk4IDQyLjY3MjggMzIzLjE5NSA0NC4yNjAzIDMyMS43MDQgNDQuMjYwM0MyOTEuNTEgNDQuMjYwMyAyNjYuOTY1IDY4LjE2NTYgMjY2LjM4OSA5Ny44NzFDMjU2LjA1IDk1Ljk0MDcgMjQ1LjMzNyA5NS43OTU2IDIzNC43NTQgOTcuNTc4N0MyMzQuMDIzIDY4LjAwOSAyMDkuNTQgNDQuMjYwMyAxNzkuNDQ1IDQ0LjI2MDNDMTc3Ljk1MyA0NC4yNjAzIDE3Ni45NDkgNDIuNjcxNiAxNzcuNzA3IDQxLjM4NjVDMTkyLjMyMyAxNi42MzMgMjE5LjQ4MyAwIDI1MC41NzMgMEMyODEuNjY0IDAgMzA4LjgyNCAxNi42MzM5IDMyMy40NCA0MS4zODg2WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIzMjRfNjE4NjkpIi8+CjxwYXRoIGQ9Ik00MTguNzU2IDIyNi44OTRDNDI2LjM3IDIyOS4yIDQzMy41ODEgMjIyLjUxNyA0MzEuMDM2IDIxNC45NzlDNDA0LjUwNyAxMzYuNDAxIDMxNi41MzUgMTA0LjM1OCAyNTAuMTU5IDEwNC4zNThDMTgzLjY3NCAxMDQuMzU4IDkzLjczOTEgMTM3LjQxOCA2OS4zMDUxIDIxNS4zMzFDNjYuOTU3NCAyMjIuODE4IDc0LjE0NjUgMjI5LjI3NSA4MS42NDc5IDIyNi45NzdMMjQ0LjI1IDE3Ny4xNTFDMjQ3LjU2OSAxNzYuMTM0IDI1MS4xMTYgMTc2LjEyOCAyNTQuNDM5IDE3Ny4xMzVMNDE4Ljc1NiAyMjYuODk0WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzIzMjRfNjE4NjkpIi8+CjxwYXRoIGQ9Ik02OS43MTY1IDIzOS40MjZMMjQ0LjM3IDE4Ni40NTZDMjQ3LjY2OSAxODUuNDU2IDI1MS4xOTEgMTg1LjQ1MyAyNTQuNDkyIDE4Ni40NDhMNDMwLjIzMiAyMzkuNDUyQzQ0NC43NiAyNDMuODMzIDQ1NC43MDEgMjU3LjIxNiA0NTQuNzAxIDI3Mi4zOVY0MzAuNDgxQzQ1NC4wMjggNDY5LjA3IDQxOS4zNjIgNTAwIDM4MC43ODYgNTAwSDMxNi43MTJDMzEwLjM3OSA1MDAgMzA1LjI1IDQ5NC44NzcgMzA1LjI1IDQ4OC41NDNWNDMzLjExNUMzMDUuMjUgNDExLjI4OSAzMTguMTY3IDM5MS41MzUgMzM4LjE1NSAzODIuNzkyQzM2NC45NDkgMzcxLjA3MSAzOTYuNjQ2IDM1NS4yMTggNDAyLjYwOCAzMjMuNDA2QzQwNC41MzIgMzEzLjEzOCAzOTcuODM3IDMwMy4yMzQgMzg3LjU5NSAzMDEuMTk4QzM2MS42OTkgMjk2LjA1MSAzMzIuOTg5IDI5OC4wMzkgMzA4LjcxMSAzMDguODk4QzI4MS4xNSAzMjEuMjI1IDI3My45NCAzNDEuNzMxIDI3MS4yNzEgMzY5LjI3TDI2OC4wMzYgMzk4LjkzOEMyNjcuMDQ3IDQwOC4wMDUgMjU4LjU0NiA0MTQuOTUyIDI0OS40MjkgNDE0Ljk1MkMyMzkuOTk4IDQxNC45NTIgMjMyLjkyNiA0MDcuNzY5IDIzMS45MDMgMzk4LjM4OEwyMjguNzI4IDM2OS4yN0MyMjYuNDQyIDM0NS42ODEgMjIyLjI5OCAzMjIuNzY3IDE5Ny45MTIgMzExLjg2QzE3MC4wOTUgMjk5LjQxOSAxNDIuMTQxIDI5NS4yODcgMTEyLjQwNCAzMDEuMTk4QzEwMi4xNjIgMzAzLjIzNCA5NS40NjcgMzEzLjEzOCA5Ny4zOTEzIDMyMy40MDZDMTAzLjQwNSAzNTUuNDk1IDEzNC44NTQgMzcwLjk4NSAxNjEuODQ0IDM4Mi43OTJDMTgxLjgzMyAzOTEuNTM1IDE5NC43NSA0MTEuMjg5IDE5NC43NSA0MzMuMTE1VjQ4OC41MzNDMTk0Ljc1IDQ5NC44NjcgMTg5LjYyMiA1MDAgMTgzLjI4OSA1MDBIMTE5LjIxNEM4MC42Mzc0IDUwMCA0NS45NzE2IDQ2OS4wNyA0NS4yOTc5IDQzMC40ODFWMjcyLjM0OUM0NS4yOTc5IDI1Ny4xOTQgNTUuMjE0MiAyNDMuODI0IDY5LjcxNjUgMjM5LjQyNloiIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcl8yMzI0XzYxODY5KSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzIzMjRfNjE4NjkiIHgxPSIyNDUuOTg2IiB5MT0iLTI3IiB4Mj0iNDI1LjQ5NiIgeTI9IjUwMi4zNzYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzIzMjRfNjE4NjkiIHgxPSIyNDUuOTg2IiB5MT0iLTI3IiB4Mj0iNDI1LjQ5NiIgeTI9IjUwMi4zNzYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyXzIzMjRfNjE4NjkiIHgxPSIyNDUuOTg2IiB5MT0iLTI3IiB4Mj0iNDI1LjQ5NiIgeTI9IjUwMi4zNzYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4="},vy=class extends bT{constructor({options:t}){super(),An(this,"_wallet"),An(this,"_options"),this._options=t}get id(){return this._options.id}get name(){return this.ensureWallet(),this._options.name??this._wallet?.name??this._options.id}get icon(){this.ensureWallet();const t={dark:If[this.id]||vT,light:If[this.id]||AT};return this._options.icon||this._wallet?.icon||t}available(){return this.ensureWallet(),this._wallet!==void 0}async chainId(){this.ensureWallet();const t=await this.isLocked();if(!this._wallet||t)throw new Ya;return await this.requestChainId()}async ready(){if(this.ensureWallet(),!this._wallet)return!1;const t=await this.request({type:"wallet_getPermissions"});return t?t.includes(_T.ACCOUNTS):!1}async account(t,e){if(this.ensureWallet(),await this.isLocked()||!this._wallet)throw new Ya;return await cT.connect(t,this._wallet,void 0,e,!0)}async connect(t={}){if(this.ensureWallet(),!this._wallet)throw new $c;this._wallet.on("accountsChanged",async i=>{await this.onAccountsChanged(i)}),this._wallet.on("networkChanged",(i,s)=>{this.onNetworkChanged(i,s)});const e=await this.request({type:"wallet_requestAccounts"});if(!e)throw new ET;t.chainIdHint&&await this.requestChainId()!==t.chainIdHint&&await this.switchChain(t.chainIdHint);const[n]=e,r=await this.requestChainId();return this.emit("connect",{account:n,chainId:r}),{account:n,chainId:r}}async disconnect(){if(this.ensureWallet(),!this._wallet)throw new $c;this.emit("disconnect")}async request(t){if(this.ensureWallet(),!this._wallet)throw new Ya;return await this._wallet.request(t)}async isLocked(){return(await this.request({type:"wallet_requestAccounts",params:{silent_mode:!0}})).length===0}async requestChainId(){const t=await this.request({type:"wallet_requestChainId"});return BigInt(t)}ensureWallet(){const e=globalThis?.[`starknet_${this._options.id}`];e&&(this._wallet=e)}async onAccountsChanged(t){if(!t)this.emit("disconnect");else{const[e]=t;if(e){const n=await this.requestChainId();this.emit("change",{account:e,chainId:n})}else this.emit("disconnect")}}onNetworkChanged(t,e){if(t){const n=BigInt(t),[r]=e||[];this.emit("change",{chainId:n,account:r})}else this.emit("change",{})}async switchChain(t){await this.request({type:"wallet_switchStarknetChain",params:{chainId:Up.toHex(t)}})}};function TT(){return new vy({options:{id:"argentX",name:"Ready Wallet (formerly Argent)"}})}var yI=TT;function _I(){return new vy({options:{id:"braavos",name:"Braavos"}})}function IT({rpc:t}){return e=>{const n=t(e);return n?new Au(n):null}}function ST({apiKey:t}){return IT({rpc:e=>{const n=e.paymasterRpcUrls.avnu.http[0];return n?{nodeUrl:n,headers:{"x-paymaster-api-key":t??""}}:null}})}var Ty=ky.createContext({account:void 0,address:void 0});function xT(){const{account:t,address:e}=$.useContext(Ty);return{account:t,address:e}}function CT({address:t,account:e,children:n}){return tr.jsx(Ty.Provider,{value:{account:e,address:t},children:n})}var kT=new Xy,Iy=$.createContext(void 0);function In(){const t=$.useContext(Iy);if(!t)throw new Error("useStarknet must be used within a StarknetProvider or StarknetConfig");return t}function NT({chains:t,provider:e,paymasterProvider:n,explorer:r,connectors:i=[],autoConnect:s=!1,defaultChainId:o}){const a=o?t.find(w=>w.id===o)??t[0]:t[0];if(a===void 0)throw new Error("Must provide at least one chain.");const c=new Set;for(const w of t){if(c.has(w.id))throw new Error(`Duplicated chain id found: ${w.id}`);c.add(w.id)}const{chain:l,provider:u}=Za(a,e),{paymasterProvider:h}=Ka(a,n),d=$.useRef(),[f,g]=$.useState({currentChain:a,currentProvider:u,currentPaymasterProvider:h,connectors:i}),y=$.useCallback(({chainId:w})=>{if(w){for(const m of t)if(m.id===w){const{chain:I,provider:k}=Za(m,e),{paymasterProvider:E}=Ka(m,n);g(N=>({...N,currentChain:I,currentProvider:k,currentPaymasterProvider:E}));return}}},[t,e,n]),p=$.useCallback(async({chainId:w,account:m})=>{w&&y({chainId:w}),m&&d.current&&g(I=>({...I,currentAddress:m}))},[y]);$.useEffect(()=>{d.current||g(w=>({...w,currentChain:a,currentProvider:Za(a,e).provider,currentPaymasterProvider:Ka(a,n).paymasterProvider}))},[a]);const _=$.useCallback(async()=>{if(g(w=>({...w,currentAddress:void 0,currentProvider:u,currentPaymasterProvider:h,currentChain:a})),s&&localStorage.removeItem("lastUsedConnector"),!!d.current){d.current.off("change",p),d.current.off("disconnect",_);try{await d.current.disconnect()}catch{}d.current=void 0}},[s,p,u,h,a]),b=$.useCallback(async({connector:w})=>{if(!w)throw new Error("Must provide a connector.");const m=d.current?.id!==w.id;m&&(d.current?.off("change",p),d.current?.off("disconnect",_));try{const{chainId:I,account:k}=await w.connect({chainIdHint:a.id});k!==f.currentAddress&&(d.current=w,g(E=>({...E,currentAddress:k}))),s&&localStorage.setItem("lastUsedConnector",w.id),m&&(w.on("change",p),w.on("disconnect",_)),y({chainId:I})}catch(I){throw g(k=>({...k,error:new $c})),I}},[s,f.currentAddress,a.id,p,y,_]);return $.useEffect(()=>{async function w(m){const I=localStorage.getItem("lastUsedConnector");if(I===null)return;const k=m.find(E=>E.id===I);if(k!==void 0)try{if(!await k.ready())return;b({connector:k})}catch{}}s&&!d.current&&w(i)},[]),{address:f.currentAddress,provider:f.currentProvider,paymasterProvider:f.currentPaymasterProvider,chain:f.currentChain,connector:d.current,explorer:r,connect:b,disconnect:_,connectors:i,chains:t}}function BT({chains:t,provider:e,paymasterProvider:n,connectors:r,explorer:i,autoConnect:s,queryClient:o,defaultChainId:a,children:c}){const l=n??ST({}),{account:u,address:h,...d}=NT({chains:t,provider:e,paymasterProvider:l,explorer:i,connectors:r,autoConnect:s,defaultChainId:a});return tr.jsx(Hy,{client:o??kT,children:tr.jsx(Iy.Provider,{value:d,children:tr.jsx(CT,{address:h,account:u,children:c})})})}function Za(t,e){const n=e(t);if(n)return{chain:t,provider:n};throw new Error(`No provider found for chain ${t.name}`)}function Ka(t,e){const n=e(t);if(n)return{chain:t,paymasterProvider:n};throw new Error(`No paymaster provider found for chain ${t.name}`)}function DT(t){switch(t){case Yy.id:return jr.StarknetChainId.SN_MAIN;case qy.id:return jr.StarknetChainId.SN_SEPOLIA;default:return}}function wI({children:t,...e}){return tr.jsx(BT,{...e,children:t})}function Sf(t){return bu(t)}function Sy(){const{provider:t,paymasterProvider:e}=In();return{provider:t,paymasterProvider:e}}function vu(){const{connector:t,chain:e}=In(),{provider:n,paymasterProvider:r}=Sy(),{address:i}=xT(),[s,o]=$.useState(i===void 0?{status:"disconnected"}:{status:"connected",connector:t,chainId:e.id,account:void 0,address:Sf(i),isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1}),a=$.useCallback(async()=>{if(t&&n&&i)o({status:"connected",connector:t,chainId:e.id,account:void 0,address:Sf(i),isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1}),t.account(n,r).then(c=>o(l=>({...l,account:c})));else return o({status:"disconnected",connector:void 0,chainId:void 0,account:void 0,address:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1})},[n,r,t,e.id,i]);return $.useEffect(()=>{a()},[a]),s}function ia(t){const e=zy({...t,structuralSharing:!1});return{data:e.data,error:e.error,status:e.status,isSuccess:e.isSuccess,isError:e.isError,isPending:e.isPending,fetchStatus:e.fetchStatus,isFetching:e.isFetching,isLoading:e.isLoading,refetch:e.refetch}}function sa(t){const e=Zy(t);return{data:e.data,error:e.error,reset:e.reset,isError:e.isError,isIdle:e.isIdle,isPending:e.isPending,isSuccess:e.isSuccess,isPaused:e.isPaused,mutate:e.mutate,mutateAsync:e.mutateAsync,status:e.status,variables:e.variables}}function xy(t){const{connector:e}=In(),{type:n,params:r,...i}=t,{mutate:s,mutateAsync:o,...a}=sa({mutationKey:OT({type:n,params:r}),mutationFn:RT({connector:e}),...i}),c=$.useCallback(u=>s(u??{type:n,params:r}),[s,n,r]),l=$.useCallback(u=>o(u??{type:n,params:r}),[o,n,r]);return{request:c,requestAsync:l,...a}}function OT({type:t,params:e}){return[{entity:"walletRequest",type:t,params:e}]}function RT({connector:t}){return async({type:e,params:n})=>{if(!t)throw new Error("No connector connected");if(!e)throw new Error("Type is required");return await t.request({type:e,params:n})}}function MT({abi:t,address:e,provider:n}){const{provider:r}=In();return{contract:$.useMemo(()=>{const s=n||r;if(t&&e&&s)return new gT({abi:t,address:e,providerOrAccount:s}).typedv2(t)},[t,e,n,r])}}function LT({blockIdentifier:t=Ht.LATEST,...e}={}){const{provider:n}=In();return ia({queryKey:PT({blockIdentifier:t}),queryFn:UT({provider:n,blockIdentifier:t}),...e})}function PT({blockIdentifier:t}){return[{entity:"blockNumber",blockIdentifier:t}]}function UT({provider:t,blockIdentifier:e}){return async()=>{const n=await t.getBlock(e);if(n.status!=="PENDING")return n.block_number}}function Tu({enabled:t=!0,queryKey:e}){const n=Fy(),[r,i]=$.useState(),{data:s}=LT({enabled:t});$.useEffect(()=>{if(!r)return i(s);if(s!==r)return n.invalidateQueries({queryKey:e},{cancelRefetch:!1}),i(s)},[s,r,e,n])}function $T(){const{chain:t,chains:e}=In();return{chain:t,chains:e}}var VT=5e3;function HT({abi:t,address:e,functionName:n,args:r,blockIdentifier:i=Ht.LATEST,refetchInterval:s,watch:o=!1,enabled:a=!0,parseArgs:c,parseResult:l,...u}){const{chain:h}=$T(),{contract:d}=MT({abi:t,address:e}),f=$.useMemo(()=>FT({chain:h,contract:d,functionName:n,args:r,blockIdentifier:i}),[h,d,n,r,i]),g=$.useMemo(()=>!!(a&&d&&n&&r),[a,d,n,r]),y=s??(i===Ht.PRE_CONFIRMED&&o?VT:void 0);return Tu({enabled:!!(g&&o),queryKey:f}),ia({queryKey:f,queryFn:zT({contract:d,functionName:n,args:r,blockIdentifier:i,parseArgs:c,parseResult:l}),refetchInterval:y,enabled:g,...u})}function FT({chain:t,contract:e,functionName:n,args:r,blockIdentifier:i}){return[{entity:"readContract",chainId:t?.name,contract:e?.address,functionName:n,args:JSON.stringify(r,(s,o)=>typeof o=="bigint"?o.toString(10):o),blockIdentifier:i}]}function zT({contract:t,functionName:e,args:n,blockIdentifier:r,parseArgs:i=!0,parseResult:s=!0}){return async()=>{if(!t)throw new Error("contract is required");if(t.functions[e]===void 0)throw new Error(`function ${e} not found in contract`);return t.call(e,n,{parseRequest:i,parseResponse:s,blockIdentifier:r})}}function mI(t={}){const{connector:e,connectors:n,connect:r,chain:i}=In(),{mutate:s,mutateAsync:o,variables:a,...c}=sa({mutationKey:[{entity:"connect",chainId:i.name}],mutationFn:r,...t}),l=$.useCallback(h=>s(h??{connector:e}),[s,e]),u=$.useCallback(h=>o(h??{connector:e}),[o,e]);return{connector:e,connectors:n,pendingConnector:a?.connector,connect:l,connectAsync:u,variables:a,...c}}function bI(t={}){const{disconnect:e,chain:n}=In(),{mutate:r,mutateAsync:i,...s}=sa({mutationKey:[{entity:"disconnect",chainId:n.name}],mutationFn:e,...t});return{disconnect:r,disconnectAsync:i,...s}}function EI({calls:t,options:e,watch:n=!1,enabled:r=!0,...i}){const{account:s}=vu(),o=$.useMemo(()=>jT({calls:t,options:e}),[t,e]),a=$.useMemo(()=>!!(r&&t),[r,t]);return Tu({enabled:!!(a&&n),queryKey:o}),ia({queryKey:o,queryFn:qT({account:s,calls:t,options:e}),enabled:a,...i})}function jT({calls:t,options:e}){return[{entity:"estimatePaymasterTransactionFee",calls:t,options:e}]}function qT({account:t,calls:e,options:n}){return async()=>{if(!t)throw new Error("account is required");if(!e||e.length===0)throw new Error("calls are required");return await t.estimatePaymasterTransactionFee(e,n)}}function AI({watch:t=!1,enabled:e=!0,...n}={}){const{paymasterProvider:r}=Sy(),i=$.useMemo(()=>YT(),[]),s=$.useMemo(()=>!!e,[e]);return Tu({enabled:!!(s&&t),queryKey:i}),ia({queryKey:i,queryFn:ZT({paymasterProvider:r}),enabled:s,...n})}function YT(){return[{entity:"paymaster_gasTokens"}]}function ZT({paymasterProvider:t}){return async()=>{if(!t)throw new Error("PaymasterProvider is required");return await t.getSupportedTokens()}}function vI(t){const{calls:e,options:n,maxFeeInGasToken:r,...i}=t,{account:s}=vu(),{mutate:o,mutateAsync:a,...c}=sa({mutationKey:KT(e||[]),mutationFn:WT({account:s,options:n,maxFeeInGasToken:r}),...i}),l=$.useCallback(h=>{o(h||e||[])},[o,e]),u=$.useCallback(h=>a(h||e||[]),[a,e]);return{send:l,sendAsync:u,...c}}function KT(t){return[{entity:"paymaster_sendTransaction",calls:t}]}function WT({account:t,options:e,maxFeeInGasToken:n}){return async r=>{if(!t)throw new Error("account is required");if(!r||r.length===0)throw new Error("calls are required");return t.executePaymasterTransaction(r,e,n)}}function TI(t){return HT(t)}function II(t){const{calls:e,...n}=t,r=e?{calls:Wa(e)}:void 0,{request:i,requestAsync:s,...o}=xy({type:"wallet_addInvokeTransaction",params:r,...n});return{send:l=>i(l?{params:{calls:Wa(l)},type:"wallet_addInvokeTransaction"}:void 0),sendAsync:l=>s(l?{params:{calls:Wa(l)},type:"wallet_addInvokeTransaction"}:void 0),...o}}function Wa(t){return t.map(e=>({contract_address:e.contractAddress,entry_point:e.entrypoint,calldata:e.calldata}))}function SI(t){const{params:e,...n}=t,{request:r,requestAsync:i,...s}=xy({type:"wallet_switchStarknetChain",params:e,...n});return{switchChain:c=>r(c?{params:c,type:"wallet_switchStarknetChain"}:void 0),switchChainAsync:c=>i(c?{params:c,type:"wallet_switchStarknetChain"}:void 0),...s}}function Cy({rpc:t}){return e=>{const n=t(e);if(!n)return null;const r=DT(e.id);return new ry({...n,chainId:r})}}function xI({apiKey:t}){return Cy({rpc:e=>{const n=e.rpcUrls.alchemy?.http[0];return n?{nodeUrl:`${n}/${t}`}:null}})}function CI(){return Cy({rpc:t=>{const e=t.rpcUrls.public.http,n=e[Math.floor(Math.random()*e.length)];return n?{nodeUrl:n,specVersion:"0.8.1"}:null}})}const{Context:GT,useContextValue:QT}=Df("Account"),xf=({children:t})=>{const e=vu(),{account:n,address:r,status:i}=e,s=Ky.useSearchParams(),o=$.useMemo(()=>i==="connected"&&!n?"connecting":i,[i,n]),[a,c]=$.useState(0n),[l,u]=$.useState(),h=s?.get("address");$.useEffect(()=>{u(yT(h))},[h]),$.useEffect(()=>{let _=!1;return(async()=>{if(!n){c(0n);return}try{let w;typeof n.getChainId=="function"?w=await n.getChainId():n.channel?.getChainId?w=await n.channel.getChainId():w=jr.StarknetChainId.SN_MAIN,!_&&w&&c(BigInt(w.toString()))}catch{_||c(BigInt(jr.StarknetChainId.SN_MAIN))}})(),()=>{_=!0}},[n]);const d=$.useMemo(()=>i==="connected"&&r&&!n?{address:r,execute:async()=>{throw new Error("Wallet connection issue. Please refresh and reconnect.")},estimateInvokeFee:async()=>{throw new Error("Wallet connection issue. Please refresh and reconnect.")},getChainId:async()=>jr.StarknetChainId.SN_MAIN,cairoVersion:"1"}:n,[i,r,n]),f=l??r,g=$.useMemo(()=>l?r?l.toLowerCase()!==r.toLowerCase():!0:!1,[l,r]),y=$.useMemo(()=>!!(e.isConnected&&!g),[e.isConnected,g]),p=$.useMemo(()=>({...e,account:d,status:o,chainId:a,isConnected:y,viewingAddress:f,isViewingOtherAddress:g}),[e,d,o,a,y,f,g]);return tr.jsx(GT.Provider,{value:p,children:t})},kI=QT;try{xf.displayName="AccountProvider",xf.__docgenInfo={description:"",displayName:"AccountProvider",props:{}}}catch{}const Cf="selected-gas-token",XT={address:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",symbol:"STRK",name:"STRK",icon:"/logos/strk.svg",balance:"0.000"},{Context:JT,useContextValue:tI}=Df("SelectedGasToken"),kf=({children:t})=>{const[e,n]=$.useState(XT);$.useEffect(()=>{try{const s=localStorage.getItem(Cf);if(s){const o=JSON.parse(s);n(o)}}catch(s){console.warn("Failed to load selected gas token from localStorage:",s)}},[]);const r=$.useCallback(s=>{try{localStorage.setItem(Cf,JSON.stringify(s))}catch(o){console.warn("Failed to save selected gas token to localStorage:",o)}n(s)},[]),i=$.useMemo(()=>({selectedToken:e,updateSelectedToken:r}),[e,r]);return tr.jsx(JT.Provider,{value:i,children:t})},NI=tI;try{kf.displayName="SelectedGasTokenProvider",kf.__docgenInfo={description:"",displayName:"SelectedGasTokenProvider",props:{}}}catch{}export{rT as A,Ht as B,gT as C,Yp as D,bI as E,s2 as F,mI as G,Xy as Q,ry as R,wI as S,cT as W,yI as a,_I as b,jr as c,xf as d,kf as e,TI as f,NI as g,AI as h,EI as i,Fv as j,Ns as k,V as l,Up as m,yT as n,Sy as o,CI as p,mc as q,we as r,xI as s,vI as t,kI as u,$T as v,II as w,gI as x,SI as y,pI as z};
