import{r as C}from"./index-Bk_d_yAU.js";import{j as g}from"./createSafeContext-Dp97sAkz.js";import"./store-CUKCto7f.js";import{r as N,f as S,u as q,d as w,s as O}from"./en_US-YBXRRIY6-ByhZuFgc.js";import{u as A,a as R,b as I,c as B}from"./protocols-CRHRSpKz.js";import{u as T}from"./contract-CleVho0y.js";import{f as E,B as v}from"./SelectedGasTokenContext-BLwdQCB-.js";function Q(t,r={}){return{async queryFn({queryKey:e}){const n=r.abi;if(!n)throw new Error("abi is required");const{functionName:o,scopeKey:a,...s}=e[1],i=(()=>{const c=e[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!o)throw new Error("functionName is required");return N(t,{abi:n,functionName:o,args:s.args,...i,...s})},queryKey:z(r)}}function z(t={}){const{abi:r,...e}=t;return["readContract",S(e)]}function J(t={}){const{abi:r,address:e,functionName:n,query:o={}}=t,a=t.code,s=g(t),i=q({config:s}),c=Q(s,{...t,chainId:t.chainId??i}),d=!!((e||a)&&r&&n&&(o.enabled??!0));return w({...o,...c,enabled:d,structuralSharing:o.structuralSharing??O})}const _=(t,r)=>typeof r=="bigint"?r.toString():r,$=({contractName:t,functionName:r,args:e,chainId:n,...o})=>{const a=A(n),{data:s}=R({contractName:t,chainId:a.id}),{query:i,watch:c,blockNumber:d,blockTag:f,...b}=o,l=c??!1,u=typeof d=="bigint"?Number(d):d,p=typeof f=="bigint"?f.toString():f,h=e?JSON.parse(JSON.stringify(e,_)):void 0,y=J({chainId:a.id,functionName:r,address:s?.address,abi:s?.abi,args:h,blockNumber:u,blockTag:p,...b,query:{enabled:!Array.isArray(e)||!e.some(k=>k===void 0),...i}}),m=T();return C.useEffect(()=>{l&&m!==void 0&&y.refetch()},[m,l]),y},x=(t,r)=>typeof r=="bigint"?r.toString():r,D=({contractName:t,functionName:r,args:e,...n})=>{const{data:o}=I(t),a=B(),{watch:s,query:i,...c}=n,d=e?JSON.parse(JSON.stringify(e,x)):[],f=!Array.isArray(e)||!e.some(u=>u===void 0),b={placeholderData:u=>u,staleTime:3e4,gcTime:900*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,...i,enabled:f&&(i?.enabled??!0)},l=s&&a!==void 0?Number(a):v.LATEST;return E({functionName:r,address:o?.address,abi:o?.abi,watch:!1,args:d,enabled:e&&(!Array.isArray(e)||!e.some(u=>u===void 0)),blockIdentifier:l,...c,query:b})},G=({networkType:t,contractName:r,functionName:e,args:n,...o})=>{const a=$({contractName:r,functionName:e,args:n,...o,query:{staleTime:1e4,...o.query,enabled:t==="evm"}}),s=D({contractName:r,functionName:e,args:n,...o,enabled:t==="starknet"});return t==="evm"?a:s};export{G as a,D as b,$ as u};
